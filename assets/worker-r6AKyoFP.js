(function(){"use strict";var l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function f(o,s){var r=o[0],t=o[1],n=o[2],e=o[3];r+=(t&n|~t&e)+s[0]-680876936|0,r=(r<<7|r>>>25)+t|0,e+=(r&t|~r&n)+s[1]-389564586|0,e=(e<<12|e>>>20)+r|0,n+=(e&r|~e&t)+s[2]+606105819|0,n=(n<<17|n>>>15)+e|0,t+=(n&e|~n&r)+s[3]-1044525330|0,t=(t<<22|t>>>10)+n|0,r+=(t&n|~t&e)+s[4]-176418897|0,r=(r<<7|r>>>25)+t|0,e+=(r&t|~r&n)+s[5]+1200080426|0,e=(e<<12|e>>>20)+r|0,n+=(e&r|~e&t)+s[6]-1473231341|0,n=(n<<17|n>>>15)+e|0,t+=(n&e|~n&r)+s[7]-45705983|0,t=(t<<22|t>>>10)+n|0,r+=(t&n|~t&e)+s[8]+1770035416|0,r=(r<<7|r>>>25)+t|0,e+=(r&t|~r&n)+s[9]-1958414417|0,e=(e<<12|e>>>20)+r|0,n+=(e&r|~e&t)+s[10]-42063|0,n=(n<<17|n>>>15)+e|0,t+=(n&e|~n&r)+s[11]-1990404162|0,t=(t<<22|t>>>10)+n|0,r+=(t&n|~t&e)+s[12]+1804603682|0,r=(r<<7|r>>>25)+t|0,e+=(r&t|~r&n)+s[13]-40341101|0,e=(e<<12|e>>>20)+r|0,n+=(e&r|~e&t)+s[14]-1502002290|0,n=(n<<17|n>>>15)+e|0,t+=(n&e|~n&r)+s[15]+1236535329|0,t=(t<<22|t>>>10)+n|0,r+=(t&e|n&~e)+s[1]-165796510|0,r=(r<<5|r>>>27)+t|0,e+=(r&n|t&~n)+s[6]-1069501632|0,e=(e<<9|e>>>23)+r|0,n+=(e&t|r&~t)+s[11]+643717713|0,n=(n<<14|n>>>18)+e|0,t+=(n&r|e&~r)+s[0]-373897302|0,t=(t<<20|t>>>12)+n|0,r+=(t&e|n&~e)+s[5]-701558691|0,r=(r<<5|r>>>27)+t|0,e+=(r&n|t&~n)+s[10]+38016083|0,e=(e<<9|e>>>23)+r|0,n+=(e&t|r&~t)+s[15]-660478335|0,n=(n<<14|n>>>18)+e|0,t+=(n&r|e&~r)+s[4]-405537848|0,t=(t<<20|t>>>12)+n|0,r+=(t&e|n&~e)+s[9]+568446438|0,r=(r<<5|r>>>27)+t|0,e+=(r&n|t&~n)+s[14]-1019803690|0,e=(e<<9|e>>>23)+r|0,n+=(e&t|r&~t)+s[3]-187363961|0,n=(n<<14|n>>>18)+e|0,t+=(n&r|e&~r)+s[8]+1163531501|0,t=(t<<20|t>>>12)+n|0,r+=(t&e|n&~e)+s[13]-1444681467|0,r=(r<<5|r>>>27)+t|0,e+=(r&n|t&~n)+s[2]-51403784|0,e=(e<<9|e>>>23)+r|0,n+=(e&t|r&~t)+s[7]+1735328473|0,n=(n<<14|n>>>18)+e|0,t+=(n&r|e&~r)+s[12]-1926607734|0,t=(t<<20|t>>>12)+n|0,r+=(t^n^e)+s[5]-378558|0,r=(r<<4|r>>>28)+t|0,e+=(r^t^n)+s[8]-2022574463|0,e=(e<<11|e>>>21)+r|0,n+=(e^r^t)+s[11]+1839030562|0,n=(n<<16|n>>>16)+e|0,t+=(n^e^r)+s[14]-35309556|0,t=(t<<23|t>>>9)+n|0,r+=(t^n^e)+s[1]-1530992060|0,r=(r<<4|r>>>28)+t|0,e+=(r^t^n)+s[4]+1272893353|0,e=(e<<11|e>>>21)+r|0,n+=(e^r^t)+s[7]-155497632|0,n=(n<<16|n>>>16)+e|0,t+=(n^e^r)+s[10]-1094730640|0,t=(t<<23|t>>>9)+n|0,r+=(t^n^e)+s[13]+681279174|0,r=(r<<4|r>>>28)+t|0,e+=(r^t^n)+s[0]-358537222|0,e=(e<<11|e>>>21)+r|0,n+=(e^r^t)+s[3]-722521979|0,n=(n<<16|n>>>16)+e|0,t+=(n^e^r)+s[6]+76029189|0,t=(t<<23|t>>>9)+n|0,r+=(t^n^e)+s[9]-640364487|0,r=(r<<4|r>>>28)+t|0,e+=(r^t^n)+s[12]-421815835|0,e=(e<<11|e>>>21)+r|0,n+=(e^r^t)+s[15]+530742520|0,n=(n<<16|n>>>16)+e|0,t+=(n^e^r)+s[2]-995338651|0,t=(t<<23|t>>>9)+n|0,r+=(n^(t|~e))+s[0]-198630844|0,r=(r<<6|r>>>26)+t|0,e+=(t^(r|~n))+s[7]+1126891415|0,e=(e<<10|e>>>22)+r|0,n+=(r^(e|~t))+s[14]-1416354905|0,n=(n<<15|n>>>17)+e|0,t+=(e^(n|~r))+s[5]-57434055|0,t=(t<<21|t>>>11)+n|0,r+=(n^(t|~e))+s[12]+1700485571|0,r=(r<<6|r>>>26)+t|0,e+=(t^(r|~n))+s[3]-1894986606|0,e=(e<<10|e>>>22)+r|0,n+=(r^(e|~t))+s[10]-1051523|0,n=(n<<15|n>>>17)+e|0,t+=(e^(n|~r))+s[1]-2054922799|0,t=(t<<21|t>>>11)+n|0,r+=(n^(t|~e))+s[8]+1873313359|0,r=(r<<6|r>>>26)+t|0,e+=(t^(r|~n))+s[15]-30611744|0,e=(e<<10|e>>>22)+r|0,n+=(r^(e|~t))+s[6]-1560198380|0,n=(n<<15|n>>>17)+e|0,t+=(e^(n|~r))+s[13]+1309151649|0,t=(t<<21|t>>>11)+n|0,r+=(n^(t|~e))+s[4]-145523070|0,r=(r<<6|r>>>26)+t|0,e+=(t^(r|~n))+s[11]-1120210379|0,e=(e<<10|e>>>22)+r|0,n+=(r^(e|~t))+s[2]+718787259|0,n=(n<<15|n>>>17)+e|0,t+=(e^(n|~r))+s[9]-343485551|0,t=(t<<21|t>>>11)+n|0,o[0]=r+o[0]|0,o[1]=t+o[1]|0,o[2]=n+o[2]|0,o[3]=e+o[3]|0}function g(o){var s=[],r;for(r=0;r<64;r+=4)s[r>>2]=o.charCodeAt(r)+(o.charCodeAt(r+1)<<8)+(o.charCodeAt(r+2)<<16)+(o.charCodeAt(r+3)<<24);return s}function b(o){var s=[],r;for(r=0;r<64;r+=4)s[r>>2]=o[r]+(o[r+1]<<8)+(o[r+2]<<16)+(o[r+3]<<24);return s}function d(o){var s=o.length,r=[1732584193,-271733879,-1732584194,271733878],t,n,e,h,u,i;for(t=64;t<=s;t+=64)f(r,g(o.substring(t-64,t)));for(o=o.substring(t-64),n=o.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)e[t>>2]|=o.charCodeAt(t)<<(t%4<<3);if(e[t>>2]|=128<<(t%4<<3),t>55)for(f(r,e),t=0;t<16;t+=1)e[t]=0;return h=s*8,h=h.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(h[2],16),i=parseInt(h[1],16)||0,e[14]=u,e[15]=i,f(r,e),r}function A(o){var s=o.length,r=[1732584193,-271733879,-1732584194,271733878],t,n,e,h,u,i;for(t=64;t<=s;t+=64)f(r,b(o.subarray(t-64,t)));for(o=t-64<s?o.subarray(t-64):new Uint8Array(0),n=o.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)e[t>>2]|=o[t]<<(t%4<<3);if(e[t>>2]|=128<<(t%4<<3),t>55)for(f(r,e),t=0;t<16;t+=1)e[t]=0;return h=s*8,h=h.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(h[2],16),i=parseInt(h[1],16)||0,e[14]=u,e[15]=i,f(r,e),r}function v(o){var s="",r;for(r=0;r<4;r+=1)s+=l[o>>r*8+4&15]+l[o>>r*8&15];return s}function c(o){var s;for(s=0;s<o.length;s+=1)o[s]=v(o[s]);return o.join("")}c(d("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function o(s,r){return s=s|0||0,s<0?Math.max(s+r,0):Math.min(s,r)}ArrayBuffer.prototype.slice=function(s,r){var t=this.byteLength,n=o(s,t),e=t,h,u,i,p;return r!==void 0&&(e=o(r,t)),n>e?new ArrayBuffer(0):(h=e-n,u=new ArrayBuffer(h),i=new Uint8Array(u),p=new Uint8Array(this,n,h),i.set(p),u)}}();function _(o){return/[\u0080-\uFFFF]/.test(o)&&(o=unescape(encodeURIComponent(o))),o}function w(o,s){var r=o.length,t=new ArrayBuffer(r),n=new Uint8Array(t),e;for(e=0;e<r;e+=1)n[e]=o.charCodeAt(e);return s?n:t}function B(o){return String.fromCharCode.apply(null,new Uint8Array(o))}function m(o,s,r){var t=new Uint8Array(o.byteLength+s.byteLength);return t.set(new Uint8Array(o)),t.set(new Uint8Array(s),o.byteLength),t}function y(o){var s=[],r=o.length,t;for(t=0;t<r-1;t+=2)s.push(parseInt(o.substr(t,2),16));return String.fromCharCode.apply(String,s)}function a(){this.reset()}a.prototype.append=function(o){return this.appendBinary(_(o)),this},a.prototype.appendBinary=function(o){this._buff+=o,this._length+=o.length;var s=this._buff.length,r;for(r=64;r<=s;r+=64)f(this._hash,g(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},a.prototype.end=function(o){var s=this._buff,r=s.length,t,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e;for(t=0;t<r;t+=1)n[t>>2]|=s.charCodeAt(t)<<(t%4<<3);return this._finish(n,r),e=c(this._hash),o&&(e=y(e)),this.reset(),e},a.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},a.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},a.prototype.setState=function(o){return this._buff=o.buff,this._length=o.length,this._hash=o.hash,this},a.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},a.prototype._finish=function(o,s){var r=s,t,n,e;if(o[r>>2]|=128<<(r%4<<3),r>55)for(f(this._hash,o),r=0;r<16;r+=1)o[r]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(t[2],16),e=parseInt(t[1],16)||0,o[14]=n,o[15]=e,f(this._hash,o)},a.hash=function(o,s){return a.hashBinary(_(o),s)},a.hashBinary=function(o,s){var r=d(o),t=c(r);return s?y(t):t},a.ArrayBuffer=function(){this.reset()},a.ArrayBuffer.prototype.append=function(o){var s=m(this._buff.buffer,o),r=s.length,t;for(this._length+=o.byteLength,t=64;t<=r;t+=64)f(this._hash,b(s.subarray(t-64,t)));return this._buff=t-64<r?new Uint8Array(s.buffer.slice(t-64)):new Uint8Array(0),this},a.ArrayBuffer.prototype.end=function(o){var s=this._buff,r=s.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n,e;for(n=0;n<r;n+=1)t[n>>2]|=s[n]<<(n%4<<3);return this._finish(t,r),e=c(this._hash),o&&(e=y(e)),this.reset(),e},a.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},a.ArrayBuffer.prototype.getState=function(){var o=a.prototype.getState.call(this);return o.buff=B(o.buff),o},a.ArrayBuffer.prototype.setState=function(o){return o.buff=w(o.buff,!0),a.prototype.setState.call(this,o)},a.ArrayBuffer.prototype.destroy=a.prototype.destroy,a.ArrayBuffer.prototype._finish=a.prototype._finish,a.ArrayBuffer.hash=function(o,s){var r=A(new Uint8Array(o)),t=c(r);return s?y(t):t};var S=a;function C(o,s,r){return new Promise((t,n)=>{const e=s*r,h=e+r,u=new S.ArrayBuffer,i=new FileReader,p=o.slice(e,h);i.onload=function(U){u.append(U.target.result);const I=u.end();t({start:e,end:h,index:s,hash:I,chunk:p})},i.readAsArrayBuffer(p)})}onmessage=async function(o){try{const{file:s,index:r,chunkSize:t}=o.data,n=[],e=C(s,r,t);n.push(e);const h=await Promise.all(n);postMessage(h)}catch(s){postMessage({error:s.message,md5:window.SparkMD5})}}})();
