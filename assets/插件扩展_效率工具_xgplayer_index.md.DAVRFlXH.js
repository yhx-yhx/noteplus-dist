import"./chunks/theme.CDC-7c0d.js";import{b as Ci,B as hn,U as Cn,c as vu,d as yu,e as Di,S as Pc,g as Dc,f as Zs,W as ml,s as cr,u as Kc,A as Nc,h as Hc,a as vl}from"./chunks/index.min.B--PTCx_.js";import{a3 as Jr,Y as Qi,r as jr,a4 as Uc,a5 as bu,a6 as Oc,a7 as Ai,a8 as Qr,a9 as zc,aa as gu,ab as Vi,ac as Ea,ad as Mr,ae as Zu,af as Sn,ag as xr,ah as Ac,ai as Bc,aj as wa,ak as ku,al as Xi,am as Jc,an as Su,e as Le,q as $t,ao as $r,Q as yl,J as jc,ap as Qc,aq as $c,c as et,s as fi,ar as Xa,a as qr,f as ot,as as Ta,_ as $e,at as Yn,au as es,av as qc,aw as Ir,ax as ks,w as Ln,g as Ga,H as Pn,k as eh,x as bl,E as Ns,j as th,u as ih,R as nh,V as rh,ay as sh,d as ah,i as gl,W as lh,az as oh}from"./chunks/use-form-item.CZYH-sBR.js";import{k as O,aG as Ct,y as Ze,l as St,aq as ts,p as I,H as uh,h as $,aF as Yt,aJ as dh,$ as At,ay as Vt,ar as Dn,d as ke,am as qt,aK as is,o as ne,c as Xe,r as Ve,n as re,O as qe,C as Lu,J as Ce,F as pn,U as Tt,a3 as ch,w as pe,b as He,K as Mn,Q as xt,a as hh,t as Ot,e as Fe,m as Ye,aL as ph,an as Ni,ah as Gi,aC as $n,T as Wa,at as Ti,aw as Hs,aM as fh,al as mh,aN as vh,N as Ra,aD as yh,W as bh,aO as gh,a2 as Rt,aP as Eu,z as Zh,aQ as Ss,E as ki,aR as kh,G as Us,a1 as Tn,ai as Sh,a5 as Lh}from"./chunks/framework.DcGi6Jq3.js";import{E as Kn,d as wu,t as Xu,c as pi,u as Os,e as Tu,i as ns,o as Eh,f as wh,g as Xh,U as Si,C as Gu,b as Wu,h as Th}from"./chunks/index.B4cJBb0m.js";import{t as Gh,d as Wh,s as Rh,E as Vh}from"./chunks/index.C5ytboSn.js";const hi=(n,r,{checkForDefaultPrevented:e=!0}={})=>t=>{const s=n==null?void 0:n(t);if(e===!1||!s)return r==null?void 0:r(t)};var Zl=1/0,Ch=17976931348623157e292;function Mh(n){if(!n)return n===0?n:0;if(n=Gh(n),n===Zl||n===-Zl){var r=n<0?-1:1;return r*Ch}return n===n?n:0}function xh(n){var r=Mh(n),e=r%1;return r===r?e?r-e:r:0}function Ih(n){return n}var zs=Jr(Qi,"WeakMap"),kl=Object.create,_h=function(){function n(){}return function(r){if(!jr(r))return{};if(kl)return kl(r);n.prototype=r;var e=new n;return n.prototype=void 0,e}}();function Fh(n,r){var e=-1,i=n.length;for(r||(r=Array(i));++e<i;)r[e]=n[e];return r}function Yh(n,r){for(var e=-1,i=n==null?0:n.length;++e<i&&r(n[e],e,n)!==!1;);return n}function Ph(n,r,e,i){for(var t=n.length,s=e+(i?1:-1);i?s--:++s<t;)if(r(n[s],s,n))return s;return-1}function rs(n,r,e,i){var t=!e;e||(e={});for(var s=-1,a=r.length;++s<a;){var l=r[s],o=i?i(e[l],n[l],l,e,n):void 0;o===void 0&&(o=n[l]),t?Uc(e,l,o):bu(e,l,o)}return e}var Dh=9007199254740991;function Va(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Dh}function Ru(n){return n!=null&&Va(n.length)&&!Oc(n)}var Kh=Object.prototype;function Ca(n){var r=n&&n.constructor,e=typeof r=="function"&&r.prototype||Kh;return n===e}function Nh(n,r){for(var e=-1,i=Array(n);++e<n;)i[e]=r(e);return i}var Hh="[object Arguments]";function Sl(n){return Ai(n)&&Qr(n)==Hh}var Vu=Object.prototype,Uh=Vu.hasOwnProperty,Oh=Vu.propertyIsEnumerable,Cu=Sl(function(){return arguments}())?Sl:function(n){return Ai(n)&&Uh.call(n,"callee")&&!Oh.call(n,"callee")};function zh(){return!1}var Mu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ll=Mu&&typeof module=="object"&&module&&!module.nodeType&&module,Ah=Ll&&Ll.exports===Mu,El=Ah?Qi.Buffer:void 0,Bh=El?El.isBuffer:void 0,_r=Bh||zh,Jh="[object Arguments]",jh="[object Array]",Qh="[object Boolean]",$h="[object Date]",qh="[object Error]",ep="[object Function]",tp="[object Map]",ip="[object Number]",np="[object Object]",rp="[object RegExp]",sp="[object Set]",ap="[object String]",lp="[object WeakMap]",op="[object ArrayBuffer]",up="[object DataView]",dp="[object Float32Array]",cp="[object Float64Array]",hp="[object Int8Array]",pp="[object Int16Array]",fp="[object Int32Array]",mp="[object Uint8Array]",vp="[object Uint8ClampedArray]",yp="[object Uint16Array]",bp="[object Uint32Array]",_e={};_e[dp]=_e[cp]=_e[hp]=_e[pp]=_e[fp]=_e[mp]=_e[vp]=_e[yp]=_e[bp]=!0;_e[Jh]=_e[jh]=_e[op]=_e[Qh]=_e[up]=_e[$h]=_e[qh]=_e[ep]=_e[tp]=_e[ip]=_e[np]=_e[rp]=_e[sp]=_e[ap]=_e[lp]=!1;function gp(n){return Ai(n)&&Va(n.length)&&!!_e[Qr(n)]}function Ma(n){return function(r){return n(r)}}var xu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xn=xu&&typeof module=="object"&&module&&!module.nodeType&&module,Zp=xn&&xn.exports===xu,Ls=Zp&&zc.process,fn=function(){try{var n=xn&&xn.require&&xn.require("util").types;return n||Ls&&Ls.binding&&Ls.binding("util")}catch{}}(),wl=fn&&fn.isTypedArray,Iu=wl?Ma(wl):gp,kp=Object.prototype,Sp=kp.hasOwnProperty;function _u(n,r){var e=Vi(n),i=!e&&Cu(n),t=!e&&!i&&_r(n),s=!e&&!i&&!t&&Iu(n),a=e||i||t||s,l=a?Nh(n.length,String):[],o=l.length;for(var u in n)(r||Sp.call(n,u))&&!(a&&(u=="length"||t&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||gu(u,o)))&&l.push(u);return l}function Fu(n,r){return function(e){return n(r(e))}}var Lp=Fu(Object.keys,Object),Ep=Object.prototype,wp=Ep.hasOwnProperty;function Xp(n){if(!Ca(n))return Lp(n);var r=[];for(var e in Object(n))wp.call(n,e)&&e!="constructor"&&r.push(e);return r}function ss(n){return Ru(n)?_u(n):Xp(n)}function Tp(n){var r=[];if(n!=null)for(var e in Object(n))r.push(e);return r}var Gp=Object.prototype,Wp=Gp.hasOwnProperty;function Rp(n){if(!jr(n))return Tp(n);var r=Ca(n),e=[];for(var i in n)i=="constructor"&&(r||!Wp.call(n,i))||e.push(i);return e}function xa(n){return Ru(n)?_u(n,!0):Rp(n)}function Yu(n,r){for(var e=-1,i=r.length,t=n.length;++e<i;)n[t+e]=r[e];return n}var Vp=Fu(Object.getPrototypeOf,Object);const Pu=Vp;function As(){if(!arguments.length)return[];var n=arguments[0];return Vi(n)?n:[n]}function Cp(){this.__data__=new Ea,this.size=0}function Mp(n){var r=this.__data__,e=r.delete(n);return this.size=r.size,e}function xp(n){return this.__data__.get(n)}function Ip(n){return this.__data__.has(n)}var _p=200;function Fp(n,r){var e=this.__data__;if(e instanceof Ea){var i=e.__data__;if(!Mr||i.length<_p-1)return i.push([n,r]),this.size=++e.size,this;e=this.__data__=new Zu(i)}return e.set(n,r),this.size=e.size,this}function ei(n){var r=this.__data__=new Ea(n);this.size=r.size}ei.prototype.clear=Cp;ei.prototype.delete=Mp;ei.prototype.get=xp;ei.prototype.has=Ip;ei.prototype.set=Fp;function Yp(n,r){return n&&rs(r,ss(r),n)}function Pp(n,r){return n&&rs(r,xa(r),n)}var Du=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xl=Du&&typeof module=="object"&&module&&!module.nodeType&&module,Dp=Xl&&Xl.exports===Du,Tl=Dp?Qi.Buffer:void 0,Gl=Tl?Tl.allocUnsafe:void 0;function Kp(n,r){if(r)return n.slice();var e=n.length,i=Gl?Gl(e):new n.constructor(e);return n.copy(i),i}function Np(n,r){for(var e=-1,i=n==null?0:n.length,t=0,s=[];++e<i;){var a=n[e];r(a,e,n)&&(s[t++]=a)}return s}function Ku(){return[]}var Hp=Object.prototype,Up=Hp.propertyIsEnumerable,Wl=Object.getOwnPropertySymbols,Ia=Wl?function(n){return n==null?[]:(n=Object(n),Np(Wl(n),function(r){return Up.call(n,r)}))}:Ku;function Op(n,r){return rs(n,Ia(n),r)}var zp=Object.getOwnPropertySymbols,Nu=zp?function(n){for(var r=[];n;)Yu(r,Ia(n)),n=Pu(n);return r}:Ku;function Ap(n,r){return rs(n,Nu(n),r)}function Hu(n,r,e){var i=r(n);return Vi(n)?i:Yu(i,e(n))}function Bs(n){return Hu(n,ss,Ia)}function Bp(n){return Hu(n,xa,Nu)}var Js=Jr(Qi,"DataView"),js=Jr(Qi,"Promise"),Qs=Jr(Qi,"Set"),Rl="[object Map]",Jp="[object Object]",Vl="[object Promise]",Cl="[object Set]",Ml="[object WeakMap]",xl="[object DataView]",jp=Sn(Js),Qp=Sn(Mr),$p=Sn(js),qp=Sn(Qs),ef=Sn(zs),Pi=Qr;(Js&&Pi(new Js(new ArrayBuffer(1)))!=xl||Mr&&Pi(new Mr)!=Rl||js&&Pi(js.resolve())!=Vl||Qs&&Pi(new Qs)!=Cl||zs&&Pi(new zs)!=Ml)&&(Pi=function(n){var r=Qr(n),e=r==Jp?n.constructor:void 0,i=e?Sn(e):"";if(i)switch(i){case jp:return xl;case Qp:return Rl;case $p:return Vl;case qp:return Cl;case ef:return Ml}return r});const Nn=Pi;var tf=Object.prototype,nf=tf.hasOwnProperty;function rf(n){var r=n.length,e=new n.constructor(r);return r&&typeof n[0]=="string"&&nf.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var Fr=Qi.Uint8Array;function _a(n){var r=new n.constructor(n.byteLength);return new Fr(r).set(new Fr(n)),r}function sf(n,r){var e=r?_a(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var af=/\w*$/;function lf(n){var r=new n.constructor(n.source,af.exec(n));return r.lastIndex=n.lastIndex,r}var Il=xr?xr.prototype:void 0,_l=Il?Il.valueOf:void 0;function of(n){return _l?Object(_l.call(n)):{}}function uf(n,r){var e=r?_a(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var df="[object Boolean]",cf="[object Date]",hf="[object Map]",pf="[object Number]",ff="[object RegExp]",mf="[object Set]",vf="[object String]",yf="[object Symbol]",bf="[object ArrayBuffer]",gf="[object DataView]",Zf="[object Float32Array]",kf="[object Float64Array]",Sf="[object Int8Array]",Lf="[object Int16Array]",Ef="[object Int32Array]",wf="[object Uint8Array]",Xf="[object Uint8ClampedArray]",Tf="[object Uint16Array]",Gf="[object Uint32Array]";function Wf(n,r,e){var i=n.constructor;switch(r){case bf:return _a(n);case df:case cf:return new i(+n);case gf:return sf(n,e);case Zf:case kf:case Sf:case Lf:case Ef:case wf:case Xf:case Tf:case Gf:return uf(n,e);case hf:return new i;case pf:case vf:return new i(n);case ff:return lf(n);case mf:return new i;case yf:return of(n)}}function Rf(n){return typeof n.constructor=="function"&&!Ca(n)?_h(Pu(n)):{}}var Vf="[object Map]";function Cf(n){return Ai(n)&&Nn(n)==Vf}var Fl=fn&&fn.isMap,Mf=Fl?Ma(Fl):Cf,xf="[object Set]";function If(n){return Ai(n)&&Nn(n)==xf}var Yl=fn&&fn.isSet,_f=Yl?Ma(Yl):If,Ff=1,Yf=2,Pf=4,Uu="[object Arguments]",Df="[object Array]",Kf="[object Boolean]",Nf="[object Date]",Hf="[object Error]",Ou="[object Function]",Uf="[object GeneratorFunction]",Of="[object Map]",zf="[object Number]",zu="[object Object]",Af="[object RegExp]",Bf="[object Set]",Jf="[object String]",jf="[object Symbol]",Qf="[object WeakMap]",$f="[object ArrayBuffer]",qf="[object DataView]",em="[object Float32Array]",tm="[object Float64Array]",im="[object Int8Array]",nm="[object Int16Array]",rm="[object Int32Array]",sm="[object Uint8Array]",am="[object Uint8ClampedArray]",lm="[object Uint16Array]",om="[object Uint32Array]",Me={};Me[Uu]=Me[Df]=Me[$f]=Me[qf]=Me[Kf]=Me[Nf]=Me[em]=Me[tm]=Me[im]=Me[nm]=Me[rm]=Me[Of]=Me[zf]=Me[zu]=Me[Af]=Me[Bf]=Me[Jf]=Me[jf]=Me[sm]=Me[am]=Me[lm]=Me[om]=!0;Me[Hf]=Me[Ou]=Me[Qf]=!1;function Tr(n,r,e,i,t,s){var a,l=r&Ff,o=r&Yf,u=r&Pf;if(e&&(a=t?e(n,i,t,s):e(n)),a!==void 0)return a;if(!jr(n))return n;var d=Vi(n);if(d){if(a=rf(n),!l)return Fh(n,a)}else{var c=Nn(n),h=c==Ou||c==Uf;if(_r(n))return Kp(n,l);if(c==zu||c==Uu||h&&!t){if(a=o||h?{}:Rf(n),!l)return o?Ap(n,Pp(a,n)):Op(n,Yp(a,n))}else{if(!Me[c])return t?n:{};a=Wf(n,c,l)}}s||(s=new ei);var f=s.get(n);if(f)return f;s.set(n,a),_f(n)?n.forEach(function(g){a.add(Tr(g,r,e,g,n,s))}):Mf(n)&&n.forEach(function(g,b){a.set(b,Tr(g,r,e,b,n,s))});var p=u?o?Bp:Bs:o?xa:ss,m=d?void 0:p(n);return Yh(m||n,function(g,b){m&&(b=g,g=n[b]),bu(a,b,Tr(g,r,e,b,n,s))}),a}var um=4;function Pl(n){return Tr(n,um)}var dm="__lodash_hash_undefined__";function cm(n){return this.__data__.set(n,dm),this}function hm(n){return this.__data__.has(n)}function Yr(n){var r=-1,e=n==null?0:n.length;for(this.__data__=new Zu;++r<e;)this.add(n[r])}Yr.prototype.add=Yr.prototype.push=cm;Yr.prototype.has=hm;function pm(n,r){for(var e=-1,i=n==null?0:n.length;++e<i;)if(r(n[e],e,n))return!0;return!1}function fm(n,r){return n.has(r)}var mm=1,vm=2;function Au(n,r,e,i,t,s){var a=e&mm,l=n.length,o=r.length;if(l!=o&&!(a&&o>l))return!1;var u=s.get(n),d=s.get(r);if(u&&d)return u==r&&d==n;var c=-1,h=!0,f=e&vm?new Yr:void 0;for(s.set(n,r),s.set(r,n);++c<l;){var p=n[c],m=r[c];if(i)var g=a?i(m,p,c,r,n,s):i(p,m,c,n,r,s);if(g!==void 0){if(g)continue;h=!1;break}if(f){if(!pm(r,function(b,w){if(!fm(f,w)&&(p===b||t(p,b,e,i,s)))return f.push(w)})){h=!1;break}}else if(!(p===m||t(p,m,e,i,s))){h=!1;break}}return s.delete(n),s.delete(r),h}function ym(n){var r=-1,e=Array(n.size);return n.forEach(function(i,t){e[++r]=[t,i]}),e}function bm(n){var r=-1,e=Array(n.size);return n.forEach(function(i){e[++r]=i}),e}var gm=1,Zm=2,km="[object Boolean]",Sm="[object Date]",Lm="[object Error]",Em="[object Map]",wm="[object Number]",Xm="[object RegExp]",Tm="[object Set]",Gm="[object String]",Wm="[object Symbol]",Rm="[object ArrayBuffer]",Vm="[object DataView]",Dl=xr?xr.prototype:void 0,Es=Dl?Dl.valueOf:void 0;function Cm(n,r,e,i,t,s,a){switch(e){case Vm:if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)return!1;n=n.buffer,r=r.buffer;case Rm:return!(n.byteLength!=r.byteLength||!s(new Fr(n),new Fr(r)));case km:case Sm:case wm:return Ac(+n,+r);case Lm:return n.name==r.name&&n.message==r.message;case Xm:case Gm:return n==r+"";case Em:var l=ym;case Tm:var o=i&gm;if(l||(l=bm),n.size!=r.size&&!o)return!1;var u=a.get(n);if(u)return u==r;i|=Zm,a.set(n,r);var d=Au(l(n),l(r),i,t,s,a);return a.delete(n),d;case Wm:if(Es)return Es.call(n)==Es.call(r)}return!1}var Mm=1,xm=Object.prototype,Im=xm.hasOwnProperty;function _m(n,r,e,i,t,s){var a=e&Mm,l=Bs(n),o=l.length,u=Bs(r),d=u.length;if(o!=d&&!a)return!1;for(var c=o;c--;){var h=l[c];if(!(a?h in r:Im.call(r,h)))return!1}var f=s.get(n),p=s.get(r);if(f&&p)return f==r&&p==n;var m=!0;s.set(n,r),s.set(r,n);for(var g=a;++c<o;){h=l[c];var b=n[h],w=r[h];if(i)var S=a?i(w,b,h,r,n,s):i(b,w,h,n,r,s);if(!(S===void 0?b===w||t(b,w,e,i,s):S)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var k=n.constructor,L=r.constructor;k!=L&&"constructor"in n&&"constructor"in r&&!(typeof k=="function"&&k instanceof k&&typeof L=="function"&&L instanceof L)&&(m=!1)}return s.delete(n),s.delete(r),m}var Fm=1,Kl="[object Arguments]",Nl="[object Array]",hr="[object Object]",Ym=Object.prototype,Hl=Ym.hasOwnProperty;function Pm(n,r,e,i,t,s){var a=Vi(n),l=Vi(r),o=a?Nl:Nn(n),u=l?Nl:Nn(r);o=o==Kl?hr:o,u=u==Kl?hr:u;var d=o==hr,c=u==hr,h=o==u;if(h&&_r(n)){if(!_r(r))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new ei),a||Iu(n)?Au(n,r,e,i,t,s):Cm(n,r,o,e,i,t,s);if(!(e&Fm)){var f=d&&Hl.call(n,"__wrapped__"),p=c&&Hl.call(r,"__wrapped__");if(f||p){var m=f?n.value():n,g=p?r.value():r;return s||(s=new ei),t(m,g,e,i,s)}}return h?(s||(s=new ei),_m(n,r,e,i,t,s)):!1}function as(n,r,e,i,t){return n===r?!0:n==null||r==null||!Ai(n)&&!Ai(r)?n!==n&&r!==r:Pm(n,r,e,i,as,t)}var Dm=1,Km=2;function Nm(n,r,e,i){var t=e.length,s=t,a=!i;if(n==null)return!s;for(n=Object(n);t--;){var l=e[t];if(a&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++t<s;){l=e[t];var o=l[0],u=n[o],d=l[1];if(a&&l[2]){if(u===void 0&&!(o in n))return!1}else{var c=new ei;if(i)var h=i(u,d,o,n,r,c);if(!(h===void 0?as(d,u,Dm|Km,i,c):h))return!1}}return!0}function Bu(n){return n===n&&!jr(n)}function Hm(n){for(var r=ss(n),e=r.length;e--;){var i=r[e],t=n[i];r[e]=[i,t,Bu(t)]}return r}function Ju(n,r){return function(e){return e==null?!1:e[n]===r&&(r!==void 0||n in Object(e))}}function Um(n){var r=Hm(n);return r.length==1&&r[0][2]?Ju(r[0][0],r[0][1]):function(e){return e===n||Nm(e,n,r)}}function Om(n,r){return n!=null&&r in Object(n)}function zm(n,r,e){r=Bc(r,n);for(var i=-1,t=r.length,s=!1;++i<t;){var a=wa(r[i]);if(!(s=n!=null&&e(n,a)))break;n=n[a]}return s||++i!=t?s:(t=n==null?0:n.length,!!t&&Va(t)&&gu(a,t)&&(Vi(n)||Cu(n)))}function Am(n,r){return n!=null&&zm(n,r,Om)}var Bm=1,Jm=2;function jm(n,r){return ku(n)&&Bu(r)?Ju(wa(n),r):function(e){var i=Xi(e,n);return i===void 0&&i===r?Am(e,n):as(r,i,Bm|Jm)}}function Qm(n){return function(r){return r==null?void 0:r[n]}}function $m(n){return function(r){return Jc(r,n)}}function qm(n){return ku(n)?Qm(wa(n)):$m(n)}function e0(n){return typeof n=="function"?n:n==null?Ih:typeof n=="object"?Vi(n)?jm(n[0],n[1]):Um(n):qm(n)}var t0=Math.max,i0=Math.min;function n0(n,r,e){var i=n==null?0:n.length;if(!i)return-1;var t=i-1;return e!==void 0&&(t=xh(e),t=e<0?t0(i+t,0):i0(t,i-1)),Ph(n,e0(r),t,!0)}function Pr(n,r){return as(n,r)}function r0(n){return n===void 0}const s0=(n="")=>n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),a0=Su({type:Le(Boolean),default:null}),l0=Su({type:Le(Function)}),ju=n=>{const r=`update:${n}`,e=`onUpdate:${n}`,i=[r],t={[n]:a0,[e]:l0};return{useModelToggle:({indicator:a,toggleReason:l,shouldHideWhenRouteChanges:o,shouldProceed:u,onShow:d,onHide:c})=>{const h=ts(),{emit:f}=h,p=h.props,m=O(()=>Ct(p[e])),g=O(()=>p[n]===null),b=X=>{a.value!==!0&&(a.value=!0,l&&(l.value=X),Ct(d)&&d(X))},w=X=>{a.value!==!1&&(a.value=!1,l&&(l.value=X),Ct(c)&&c(X))},S=X=>{if(p.disabled===!0||Ct(u)&&!u())return;const G=m.value&&$t;G&&f(r,!0),(g.value||!G)&&b(X)},k=X=>{if(p.disabled===!0||!$t)return;const G=m.value&&$t;G&&f(r,!1),(g.value||!G)&&w(X)},L=X=>{$r(X)&&(p.disabled&&X?m.value&&f(r,!1):a.value!==X&&(X?b():w()))},T=()=>{a.value?k():S()};return Ze(()=>p[n],L),o&&h.appContext.config.globalProperties.$route!==void 0&&Ze(()=>({...h.proxy.$route}),()=>{o.value&&a.value&&k()}),St(()=>{L(p[n])}),{hide:k,show:S,toggle:T,hasUpdateHandler:m}},useModelToggleProps:t,useModelToggleEmits:i}};ju("modelValue");var Zt="top",_t="bottom",Ft="right",kt="left",Fa="auto",qn=[Zt,_t,Ft,kt],mn="start",Hn="end",o0="clippingParents",Qu="viewport",Gn="popper",u0="reference",Ul=qn.reduce(function(n,r){return n.concat([r+"-"+mn,r+"-"+Hn])},[]),ls=[].concat(qn,[Fa]).reduce(function(n,r){return n.concat([r,r+"-"+mn,r+"-"+Hn])},[]),d0="beforeRead",c0="read",h0="afterRead",p0="beforeMain",f0="main",m0="afterMain",v0="beforeWrite",y0="write",b0="afterWrite",g0=[d0,c0,h0,p0,f0,m0,v0,y0,b0];function si(n){return n?(n.nodeName||"").toLowerCase():null}function Bt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var r=n.ownerDocument;return r&&r.defaultView||window}return n}function vn(n){var r=Bt(n).Element;return n instanceof r||n instanceof Element}function It(n){var r=Bt(n).HTMLElement;return n instanceof r||n instanceof HTMLElement}function Ya(n){if(typeof ShadowRoot>"u")return!1;var r=Bt(n).ShadowRoot;return n instanceof r||n instanceof ShadowRoot}function Z0(n){var r=n.state;Object.keys(r.elements).forEach(function(e){var i=r.styles[e]||{},t=r.attributes[e]||{},s=r.elements[e];!It(s)||!si(s)||(Object.assign(s.style,i),Object.keys(t).forEach(function(a){var l=t[a];l===!1?s.removeAttribute(a):s.setAttribute(a,l===!0?"":l)}))})}function k0(n){var r=n.state,e={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,e.popper),r.styles=e,r.elements.arrow&&Object.assign(r.elements.arrow.style,e.arrow),function(){Object.keys(r.elements).forEach(function(i){var t=r.elements[i],s=r.attributes[i]||{},a=Object.keys(r.styles.hasOwnProperty(i)?r.styles[i]:e[i]),l=a.reduce(function(o,u){return o[u]="",o},{});!It(t)||!si(t)||(Object.assign(t.style,l),Object.keys(s).forEach(function(o){t.removeAttribute(o)}))})}}var $u={name:"applyStyles",enabled:!0,phase:"write",fn:Z0,effect:k0,requires:["computeStyles"]};function ti(n){return n.split("-")[0]}var Oi=Math.max,Dr=Math.min,yn=Math.round;function bn(n,r){r===void 0&&(r=!1);var e=n.getBoundingClientRect(),i=1,t=1;if(It(n)&&r){var s=n.offsetHeight,a=n.offsetWidth;a>0&&(i=yn(e.width)/a||1),s>0&&(t=yn(e.height)/s||1)}return{width:e.width/i,height:e.height/t,top:e.top/t,right:e.right/i,bottom:e.bottom/t,left:e.left/i,x:e.left/i,y:e.top/t}}function Pa(n){var r=bn(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(r.width-e)<=1&&(e=r.width),Math.abs(r.height-i)<=1&&(i=r.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function qu(n,r){var e=r.getRootNode&&r.getRootNode();if(n.contains(r))return!0;if(e&&Ya(e)){var i=r;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function vi(n){return Bt(n).getComputedStyle(n)}function S0(n){return["table","td","th"].indexOf(si(n))>=0}function Mi(n){return((vn(n)?n.ownerDocument:n.document)||window.document).documentElement}function os(n){return si(n)==="html"?n:n.assignedSlot||n.parentNode||(Ya(n)?n.host:null)||Mi(n)}function Ol(n){return!It(n)||vi(n).position==="fixed"?null:n.offsetParent}function L0(n){var r=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&It(n)){var i=vi(n);if(i.position==="fixed")return null}var t=os(n);for(Ya(t)&&(t=t.host);It(t)&&["html","body"].indexOf(si(t))<0;){var s=vi(t);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||r&&s.willChange==="filter"||r&&s.filter&&s.filter!=="none")return t;t=t.parentNode}return null}function er(n){for(var r=Bt(n),e=Ol(n);e&&S0(e)&&vi(e).position==="static";)e=Ol(e);return e&&(si(e)==="html"||si(e)==="body"&&vi(e).position==="static")?r:e||L0(n)||r}function Da(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function In(n,r,e){return Oi(n,Dr(r,e))}function E0(n,r,e){var i=In(n,r,e);return i>e?e:i}function ed(){return{top:0,right:0,bottom:0,left:0}}function td(n){return Object.assign({},ed(),n)}function id(n,r){return r.reduce(function(e,i){return e[i]=n,e},{})}var w0=function(n,r){return n=typeof n=="function"?n(Object.assign({},r.rects,{placement:r.placement})):n,td(typeof n!="number"?n:id(n,qn))};function X0(n){var r,e=n.state,i=n.name,t=n.options,s=e.elements.arrow,a=e.modifiersData.popperOffsets,l=ti(e.placement),o=Da(l),u=[kt,Ft].indexOf(l)>=0,d=u?"height":"width";if(!(!s||!a)){var c=w0(t.padding,e),h=Pa(s),f=o==="y"?Zt:kt,p=o==="y"?_t:Ft,m=e.rects.reference[d]+e.rects.reference[o]-a[o]-e.rects.popper[d],g=a[o]-e.rects.reference[o],b=er(s),w=b?o==="y"?b.clientHeight||0:b.clientWidth||0:0,S=m/2-g/2,k=c[f],L=w-h[d]-c[p],T=w/2-h[d]/2+S,X=In(k,T,L),G=o;e.modifiersData[i]=(r={},r[G]=X,r.centerOffset=X-T,r)}}function T0(n){var r=n.state,e=n.options,i=e.element,t=i===void 0?"[data-popper-arrow]":i;t!=null&&(typeof t=="string"&&(t=r.elements.popper.querySelector(t),!t)||!qu(r.elements.popper,t)||(r.elements.arrow=t))}var G0={name:"arrow",enabled:!0,phase:"main",fn:X0,effect:T0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gn(n){return n.split("-")[1]}var W0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function R0(n){var r=n.x,e=n.y,i=window,t=i.devicePixelRatio||1;return{x:yn(r*t)/t||0,y:yn(e*t)/t||0}}function zl(n){var r,e=n.popper,i=n.popperRect,t=n.placement,s=n.variation,a=n.offsets,l=n.position,o=n.gpuAcceleration,u=n.adaptive,d=n.roundOffsets,c=n.isFixed,h=a.x,f=h===void 0?0:h,p=a.y,m=p===void 0?0:p,g=typeof d=="function"?d({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var b=a.hasOwnProperty("x"),w=a.hasOwnProperty("y"),S=kt,k=Zt,L=window;if(u){var T=er(e),X="clientHeight",G="clientWidth";if(T===Bt(e)&&(T=Mi(e),vi(T).position!=="static"&&l==="absolute"&&(X="scrollHeight",G="scrollWidth")),T=T,t===Zt||(t===kt||t===Ft)&&s===Hn){k=_t;var C=c&&T===L&&L.visualViewport?L.visualViewport.height:T[X];m-=C-i.height,m*=o?1:-1}if(t===kt||(t===Zt||t===_t)&&s===Hn){S=Ft;var x=c&&T===L&&L.visualViewport?L.visualViewport.width:T[G];f-=x-i.width,f*=o?1:-1}}var N=Object.assign({position:l},u&&W0),y=d===!0?R0({x:f,y:m}):{x:f,y:m};if(f=y.x,m=y.y,o){var v;return Object.assign({},N,(v={},v[k]=w?"0":"",v[S]=b?"0":"",v.transform=(L.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",v))}return Object.assign({},N,(r={},r[k]=w?m+"px":"",r[S]=b?f+"px":"",r.transform="",r))}function V0(n){var r=n.state,e=n.options,i=e.gpuAcceleration,t=i===void 0?!0:i,s=e.adaptive,a=s===void 0?!0:s,l=e.roundOffsets,o=l===void 0?!0:l,u={placement:ti(r.placement),variation:gn(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:t,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,zl(Object.assign({},u,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:a,roundOffsets:o})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,zl(Object.assign({},u,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var nd={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:V0,data:{}},pr={passive:!0};function C0(n){var r=n.state,e=n.instance,i=n.options,t=i.scroll,s=t===void 0?!0:t,a=i.resize,l=a===void 0?!0:a,o=Bt(r.elements.popper),u=[].concat(r.scrollParents.reference,r.scrollParents.popper);return s&&u.forEach(function(d){d.addEventListener("scroll",e.update,pr)}),l&&o.addEventListener("resize",e.update,pr),function(){s&&u.forEach(function(d){d.removeEventListener("scroll",e.update,pr)}),l&&o.removeEventListener("resize",e.update,pr)}}var rd={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:C0,data:{}},M0={left:"right",right:"left",bottom:"top",top:"bottom"};function Gr(n){return n.replace(/left|right|bottom|top/g,function(r){return M0[r]})}var x0={start:"end",end:"start"};function Al(n){return n.replace(/start|end/g,function(r){return x0[r]})}function Ka(n){var r=Bt(n),e=r.pageXOffset,i=r.pageYOffset;return{scrollLeft:e,scrollTop:i}}function Na(n){return bn(Mi(n)).left+Ka(n).scrollLeft}function I0(n){var r=Bt(n),e=Mi(n),i=r.visualViewport,t=e.clientWidth,s=e.clientHeight,a=0,l=0;return i&&(t=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=i.offsetLeft,l=i.offsetTop)),{width:t,height:s,x:a+Na(n),y:l}}function _0(n){var r,e=Mi(n),i=Ka(n),t=(r=n.ownerDocument)==null?void 0:r.body,s=Oi(e.scrollWidth,e.clientWidth,t?t.scrollWidth:0,t?t.clientWidth:0),a=Oi(e.scrollHeight,e.clientHeight,t?t.scrollHeight:0,t?t.clientHeight:0),l=-i.scrollLeft+Na(n),o=-i.scrollTop;return vi(t||e).direction==="rtl"&&(l+=Oi(e.clientWidth,t?t.clientWidth:0)-s),{width:s,height:a,x:l,y:o}}function Ha(n){var r=vi(n),e=r.overflow,i=r.overflowX,t=r.overflowY;return/auto|scroll|overlay|hidden/.test(e+t+i)}function sd(n){return["html","body","#document"].indexOf(si(n))>=0?n.ownerDocument.body:It(n)&&Ha(n)?n:sd(os(n))}function _n(n,r){var e;r===void 0&&(r=[]);var i=sd(n),t=i===((e=n.ownerDocument)==null?void 0:e.body),s=Bt(i),a=t?[s].concat(s.visualViewport||[],Ha(i)?i:[]):i,l=r.concat(a);return t?l:l.concat(_n(os(a)))}function $s(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function F0(n){var r=bn(n);return r.top=r.top+n.clientTop,r.left=r.left+n.clientLeft,r.bottom=r.top+n.clientHeight,r.right=r.left+n.clientWidth,r.width=n.clientWidth,r.height=n.clientHeight,r.x=r.left,r.y=r.top,r}function Bl(n,r){return r===Qu?$s(I0(n)):vn(r)?F0(r):$s(_0(Mi(n)))}function Y0(n){var r=_n(os(n)),e=["absolute","fixed"].indexOf(vi(n).position)>=0,i=e&&It(n)?er(n):n;return vn(i)?r.filter(function(t){return vn(t)&&qu(t,i)&&si(t)!=="body"}):[]}function P0(n,r,e){var i=r==="clippingParents"?Y0(n):[].concat(r),t=[].concat(i,[e]),s=t[0],a=t.reduce(function(l,o){var u=Bl(n,o);return l.top=Oi(u.top,l.top),l.right=Dr(u.right,l.right),l.bottom=Dr(u.bottom,l.bottom),l.left=Oi(u.left,l.left),l},Bl(n,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ad(n){var r=n.reference,e=n.element,i=n.placement,t=i?ti(i):null,s=i?gn(i):null,a=r.x+r.width/2-e.width/2,l=r.y+r.height/2-e.height/2,o;switch(t){case Zt:o={x:a,y:r.y-e.height};break;case _t:o={x:a,y:r.y+r.height};break;case Ft:o={x:r.x+r.width,y:l};break;case kt:o={x:r.x-e.width,y:l};break;default:o={x:r.x,y:r.y}}var u=t?Da(t):null;if(u!=null){var d=u==="y"?"height":"width";switch(s){case mn:o[u]=o[u]-(r[d]/2-e[d]/2);break;case Hn:o[u]=o[u]+(r[d]/2-e[d]/2);break}}return o}function Un(n,r){r===void 0&&(r={});var e=r,i=e.placement,t=i===void 0?n.placement:i,s=e.boundary,a=s===void 0?o0:s,l=e.rootBoundary,o=l===void 0?Qu:l,u=e.elementContext,d=u===void 0?Gn:u,c=e.altBoundary,h=c===void 0?!1:c,f=e.padding,p=f===void 0?0:f,m=td(typeof p!="number"?p:id(p,qn)),g=d===Gn?u0:Gn,b=n.rects.popper,w=n.elements[h?g:d],S=P0(vn(w)?w:w.contextElement||Mi(n.elements.popper),a,o),k=bn(n.elements.reference),L=ad({reference:k,element:b,strategy:"absolute",placement:t}),T=$s(Object.assign({},b,L)),X=d===Gn?T:k,G={top:S.top-X.top+m.top,bottom:X.bottom-S.bottom+m.bottom,left:S.left-X.left+m.left,right:X.right-S.right+m.right},C=n.modifiersData.offset;if(d===Gn&&C){var x=C[t];Object.keys(G).forEach(function(N){var y=[Ft,_t].indexOf(N)>=0?1:-1,v=[Zt,_t].indexOf(N)>=0?"y":"x";G[N]+=x[v]*y})}return G}function D0(n,r){r===void 0&&(r={});var e=r,i=e.placement,t=e.boundary,s=e.rootBoundary,a=e.padding,l=e.flipVariations,o=e.allowedAutoPlacements,u=o===void 0?ls:o,d=gn(i),c=d?l?Ul:Ul.filter(function(p){return gn(p)===d}):qn,h=c.filter(function(p){return u.indexOf(p)>=0});h.length===0&&(h=c);var f=h.reduce(function(p,m){return p[m]=Un(n,{placement:m,boundary:t,rootBoundary:s,padding:a})[ti(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function K0(n){if(ti(n)===Fa)return[];var r=Gr(n);return[Al(n),r,Al(r)]}function N0(n){var r=n.state,e=n.options,i=n.name;if(!r.modifiersData[i]._skip){for(var t=e.mainAxis,s=t===void 0?!0:t,a=e.altAxis,l=a===void 0?!0:a,o=e.fallbackPlacements,u=e.padding,d=e.boundary,c=e.rootBoundary,h=e.altBoundary,f=e.flipVariations,p=f===void 0?!0:f,m=e.allowedAutoPlacements,g=r.options.placement,b=ti(g),w=b===g,S=o||(w||!p?[Gr(g)]:K0(g)),k=[g].concat(S).reduce(function(Se,fe){return Se.concat(ti(fe)===Fa?D0(r,{placement:fe,boundary:d,rootBoundary:c,padding:u,flipVariations:p,allowedAutoPlacements:m}):fe)},[]),L=r.rects.reference,T=r.rects.popper,X=new Map,G=!0,C=k[0],x=0;x<k.length;x++){var N=k[x],y=ti(N),v=gn(N)===mn,Z=[Zt,_t].indexOf(y)>=0,W=Z?"width":"height",E=Un(r,{placement:N,boundary:d,rootBoundary:c,altBoundary:h,padding:u}),R=Z?v?Ft:kt:v?_t:Zt;L[W]>T[W]&&(R=Gr(R));var M=Gr(R),P=[];if(s&&P.push(E[y]<=0),l&&P.push(E[R]<=0,E[M]<=0),P.every(function(Se){return Se})){C=N,G=!1;break}X.set(N,P)}if(G)for(var Y=p?3:1,D=function(Se){var fe=k.find(function(Pe){var z=X.get(Pe);if(z)return z.slice(0,Se).every(function(se){return se})});if(fe)return C=fe,"break"},q=Y;q>0;q--){var F=D(q);if(F==="break")break}r.placement!==C&&(r.modifiersData[i]._skip=!0,r.placement=C,r.reset=!0)}}var H0={name:"flip",enabled:!0,phase:"main",fn:N0,requiresIfExists:["offset"],data:{_skip:!1}};function Jl(n,r,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-r.height-e.y,right:n.right-r.width+e.x,bottom:n.bottom-r.height+e.y,left:n.left-r.width-e.x}}function jl(n){return[Zt,Ft,_t,kt].some(function(r){return n[r]>=0})}function U0(n){var r=n.state,e=n.name,i=r.rects.reference,t=r.rects.popper,s=r.modifiersData.preventOverflow,a=Un(r,{elementContext:"reference"}),l=Un(r,{altBoundary:!0}),o=Jl(a,i),u=Jl(l,t,s),d=jl(o),c=jl(u);r.modifiersData[e]={referenceClippingOffsets:o,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:c},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":c})}var O0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:U0};function z0(n,r,e){var i=ti(n),t=[kt,Zt].indexOf(i)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},r,{placement:n})):e,a=s[0],l=s[1];return a=a||0,l=(l||0)*t,[kt,Ft].indexOf(i)>=0?{x:l,y:a}:{x:a,y:l}}function A0(n){var r=n.state,e=n.options,i=n.name,t=e.offset,s=t===void 0?[0,0]:t,a=ls.reduce(function(d,c){return d[c]=z0(c,r.rects,s),d},{}),l=a[r.placement],o=l.x,u=l.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=o,r.modifiersData.popperOffsets.y+=u),r.modifiersData[i]=a}var B0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:A0};function J0(n){var r=n.state,e=n.name;r.modifiersData[e]=ad({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var ld={name:"popperOffsets",enabled:!0,phase:"read",fn:J0,data:{}};function j0(n){return n==="x"?"y":"x"}function Q0(n){var r=n.state,e=n.options,i=n.name,t=e.mainAxis,s=t===void 0?!0:t,a=e.altAxis,l=a===void 0?!1:a,o=e.boundary,u=e.rootBoundary,d=e.altBoundary,c=e.padding,h=e.tether,f=h===void 0?!0:h,p=e.tetherOffset,m=p===void 0?0:p,g=Un(r,{boundary:o,rootBoundary:u,padding:c,altBoundary:d}),b=ti(r.placement),w=gn(r.placement),S=!w,k=Da(b),L=j0(k),T=r.modifiersData.popperOffsets,X=r.rects.reference,G=r.rects.popper,C=typeof m=="function"?m(Object.assign({},r.rects,{placement:r.placement})):m,x=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),N=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,y={x:0,y:0};if(T){if(s){var v,Z=k==="y"?Zt:kt,W=k==="y"?_t:Ft,E=k==="y"?"height":"width",R=T[k],M=R+g[Z],P=R-g[W],Y=f?-G[E]/2:0,D=w===mn?X[E]:G[E],q=w===mn?-G[E]:-X[E],F=r.elements.arrow,Se=f&&F?Pa(F):{width:0,height:0},fe=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:ed(),Pe=fe[Z],z=fe[W],se=In(0,X[E],Se[E]),te=S?X[E]/2-Y-se-Pe-x.mainAxis:D-se-Pe-x.mainAxis,be=S?-X[E]/2+Y+se+z+x.mainAxis:q+se+z+x.mainAxis,Ee=r.elements.arrow&&er(r.elements.arrow),Ne=Ee?k==="y"?Ee.clientTop||0:Ee.clientLeft||0:0,ai=(v=N==null?void 0:N[k])!=null?v:0,li=R+te-ai-Ne,xi=R+be-ai,Ii=In(f?Dr(M,li):M,R,f?Oi(P,xi):P);T[k]=Ii,y[k]=Ii-R}if(l){var bi,Wt=k==="x"?Zt:kt,Pt=k==="x"?_t:Ft,Dt=T[L],_i=L==="y"?"height":"width",En=Dt+g[Wt],wn=Dt-g[Pt],en=[Zt,kt].indexOf(b)!==-1,gi=(bi=N==null?void 0:N[L])!=null?bi:0,sr=en?En:Dt-X[_i]-G[_i]-gi+x.altAxis,ar=en?Dt+X[_i]+G[_i]-gi-x.altAxis:wn,lr=f&&en?E0(sr,Dt,ar):In(f?sr:En,Dt,f?ar:wn);T[L]=lr,y[L]=lr-Dt}r.modifiersData[i]=y}}var $0={name:"preventOverflow",enabled:!0,phase:"main",fn:Q0,requiresIfExists:["offset"]};function q0(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function ev(n){return n===Bt(n)||!It(n)?Ka(n):q0(n)}function tv(n){var r=n.getBoundingClientRect(),e=yn(r.width)/n.offsetWidth||1,i=yn(r.height)/n.offsetHeight||1;return e!==1||i!==1}function iv(n,r,e){e===void 0&&(e=!1);var i=It(r),t=It(r)&&tv(r),s=Mi(r),a=bn(n,t),l={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(i||!i&&!e)&&((si(r)!=="body"||Ha(s))&&(l=ev(r)),It(r)?(o=bn(r,!0),o.x+=r.clientLeft,o.y+=r.clientTop):s&&(o.x=Na(s))),{x:a.left+l.scrollLeft-o.x,y:a.top+l.scrollTop-o.y,width:a.width,height:a.height}}function nv(n){var r=new Map,e=new Set,i=[];n.forEach(function(s){r.set(s.name,s)});function t(s){e.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(l){if(!e.has(l)){var o=r.get(l);o&&t(o)}}),i.push(s)}return n.forEach(function(s){e.has(s.name)||t(s)}),i}function rv(n){var r=nv(n);return g0.reduce(function(e,i){return e.concat(r.filter(function(t){return t.phase===i}))},[])}function sv(n){var r;return function(){return r||(r=new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(n())})})),r}}function av(n){var r=n.reduce(function(e,i){var t=e[i.name];return e[i.name]=t?Object.assign({},t,i,{options:Object.assign({},t.options,i.options),data:Object.assign({},t.data,i.data)}):i,e},{});return Object.keys(r).map(function(e){return r[e]})}var Ql={placement:"bottom",modifiers:[],strategy:"absolute"};function $l(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];return!r.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Ua(n){n===void 0&&(n={});var r=n,e=r.defaultModifiers,i=e===void 0?[]:e,t=r.defaultOptions,s=t===void 0?Ql:t;return function(a,l,o){o===void 0&&(o=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ql,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],c=!1,h={state:u,setOptions:function(m){var g=typeof m=="function"?m(u.options):m;p(),u.options=Object.assign({},s,u.options,g),u.scrollParents={reference:vn(a)?_n(a):a.contextElement?_n(a.contextElement):[],popper:_n(l)};var b=rv(av([].concat(i,u.options.modifiers)));return u.orderedModifiers=b.filter(function(w){return w.enabled}),f(),h.update()},forceUpdate:function(){if(!c){var m=u.elements,g=m.reference,b=m.popper;if($l(g,b)){u.rects={reference:iv(g,er(b),u.options.strategy==="fixed"),popper:Pa(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(G){return u.modifiersData[G.name]=Object.assign({},G.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var S=u.orderedModifiers[w],k=S.fn,L=S.options,T=L===void 0?{}:L,X=S.name;typeof k=="function"&&(u=k({state:u,options:T,name:X,instance:h})||u)}}}},update:sv(function(){return new Promise(function(m){h.forceUpdate(),m(u)})}),destroy:function(){p(),c=!0}};if(!$l(a,l))return h;h.setOptions(o).then(function(m){!c&&o.onFirstUpdate&&o.onFirstUpdate(m)});function f(){u.orderedModifiers.forEach(function(m){var g=m.name,b=m.options,w=b===void 0?{}:b,S=m.effect;if(typeof S=="function"){var k=S({state:u,name:g,instance:h,options:w}),L=function(){};d.push(k||L)}})}function p(){d.forEach(function(m){return m()}),d=[]}return h}}Ua();var lv=[rd,ld,nd,$u];Ua({defaultModifiers:lv});var ov=[rd,ld,nd,$u,B0,H0,$0,G0,O0],uv=Ua({defaultModifiers:ov});const dv=(n,r,e={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:o})=>{const u=cv(o);Object.assign(a.value,u)},requires:["computeStyles"]},t=O(()=>{const{onFirstUpdate:o,placement:u,strategy:d,modifiers:c}=I(e);return{onFirstUpdate:o,placement:u||"bottom",strategy:d||"absolute",modifiers:[...c||[],i,{name:"applyStyles",enabled:!1}]}}),s=uh(),a=$({styles:{popper:{position:I(t).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return Ze(t,o=>{const u=I(s);u&&u.setOptions(o)},{deep:!0}),Ze([n,r],([o,u])=>{l(),!(!o||!u)&&(s.value=uv(o,u,I(t)))}),Yt(()=>{l()}),{state:O(()=>{var o;return{...((o=I(s))==null?void 0:o.state)||{}}}),styles:O(()=>I(a).styles),attributes:O(()=>I(a).attributes),update:()=>{var o;return(o=I(s))==null?void 0:o.update()},forceUpdate:()=>{var o;return(o=I(s))==null?void 0:o.forceUpdate()},instanceRef:O(()=>I(s))}};function cv(n){const r=Object.keys(n.elements),e=yl(r.map(t=>[t,n.styles[t]||{}])),i=yl(r.map(t=>[t,n.attributes[t]]));return{styles:e,attributes:i}}function ql(){let n;const r=(i,t)=>{e(),n=window.setTimeout(i,t)},e=()=>window.clearTimeout(n);return jc(()=>e()),{registerTimeout:r,cancelTimeout:e}}let ln=[];const eo=n=>{const r=n;r.key===Kn.esc&&ln.forEach(e=>e(r))},hv=n=>{St(()=>{ln.length===0&&document.addEventListener("keydown",eo),$t&&ln.push(n)}),Yt(()=>{ln=ln.filter(r=>r!==n),ln.length===0&&$t&&document.removeEventListener("keydown",eo)})};let to;const od=()=>{const n=Qc(),r=$c(),e=O(()=>`${n.value}-popper-container-${r.prefix}`),i=O(()=>`#${e.value}`);return{id:e,selector:i}},pv=n=>{const r=document.createElement("div");return r.id=n,document.body.appendChild(r),r},fv=()=>{const{id:n,selector:r}=od();return dh(()=>{$t&&!to&&!document.body.querySelector(r.value)&&(to=pv(n.value))}),{id:n,selector:r}},mv=et({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),vv=({showAfter:n,hideAfter:r,autoClose:e,open:i,close:t})=>{const{registerTimeout:s}=ql(),{registerTimeout:a,cancelTimeout:l}=ql();return{onOpen:d=>{s(()=>{i(d);const c=I(e);fi(c)&&c>0&&a(()=>{t(d)},c)},I(n))},onClose:d=>{l(),s(()=>{t(d)},I(r))}}},ud=Symbol("elForwardRef"),yv=n=>{At(ud,{setForwardRef:e=>{n.value=e}})},bv=n=>({mounted(r){n(r)},updated(r){n(r)},unmounted(){n(null)}}),gv=et({size:{type:String,values:Xa},disabled:Boolean}),Zv=et({...gv,model:Object,rules:{type:Le(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),kv={validate:(n,r,e)=>(Vt(n)||Dn(n))&&$r(r)&&Dn(e)};function Sv(){const n=$([]),r=O(()=>{if(!n.value.length)return"0";const s=Math.max(...n.value);return s?`${s}px`:""});function e(s){const a=n.value.indexOf(s);return a===-1&&r.value,a}function i(s,a){if(s&&a){const l=e(a);n.value.splice(l,1,s)}else s&&n.value.push(s)}function t(s){const a=e(s);a>-1&&n.value.splice(a,1)}return{autoLabelWidth:r,registerLabelWidth:i,deregisterLabelWidth:t}}const fr=(n,r)=>{const e=As(r);return e.length>0?n.filter(i=>i.prop&&e.includes(i.prop)):n},Lv="ElForm",Ev=ke({name:Lv}),wv=ke({...Ev,props:Zv,emits:kv,setup(n,{expose:r,emit:e}){const i=n,t=[],s=qr(),a=ot("form"),l=O(()=>{const{labelPosition:S,inline:k}=i;return[a.b(),a.m(s.value||"default"),{[a.m(`label-${S}`)]:S,[a.m("inline")]:k}]}),o=S=>t.find(k=>k.prop===S),u=S=>{t.push(S)},d=S=>{S.prop&&t.splice(t.indexOf(S),1)},c=(S=[])=>{i.model&&fr(t,S).forEach(k=>k.resetField())},h=(S=[])=>{fr(t,S).forEach(k=>k.clearValidate())},f=O(()=>!!i.model),p=S=>{if(t.length===0)return[];const k=fr(t,S);return k.length?k:[]},m=async S=>b(void 0,S),g=async(S=[])=>{if(!f.value)return!1;const k=p(S);if(k.length===0)return!0;let L={};for(const T of k)try{await T.validate("")}catch(X){L={...L,...X}}return Object.keys(L).length===0?!0:Promise.reject(L)},b=async(S=[],k)=>{const L=!Ct(k);try{const T=await g(S);return T===!0&&(k==null||k(T)),T}catch(T){if(T instanceof Error)throw T;const X=T;return i.scrollToError&&w(Object.keys(X)[0]),k==null||k(!1,X),L&&Promise.reject(X)}},w=S=>{var k;const L=fr(t,S)[0];L&&((k=L.$el)==null||k.scrollIntoView(i.scrollIntoViewOptions))};return Ze(()=>i.rules,()=>{i.validateOnRuleChange&&m().catch(S=>wu())},{deep:!0}),At(Ta,qt({...is(i),emit:e,resetFields:c,clearValidate:h,validateField:b,getField:o,addField:u,removeField:d,...Sv()})),r({validate:m,validateField:b,resetFields:c,clearValidate:h,scrollToField:w}),(S,k)=>(ne(),Xe("form",{class:re(I(l))},[Ve(S.$slots,"default")],2))}});var Xv=$e(wv,[["__file","form.vue"]]);function Hi(){return Hi=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Hi.apply(this,arguments)}function Tv(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,On(n,r)}function qs(n){return qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qs(n)}function On(n,r){return On=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},On(n,r)}function Gv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wr(n,r,e){return Gv()?Wr=Reflect.construct.bind():Wr=function(t,s,a){var l=[null];l.push.apply(l,s);var o=Function.bind.apply(t,l),u=new o;return a&&On(u,a.prototype),u},Wr.apply(null,arguments)}function Wv(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function ea(n){var r=typeof Map=="function"?new Map:void 0;return ea=function(i){if(i===null||!Wv(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(i))return r.get(i);r.set(i,t)}function t(){return Wr(i,arguments,qs(this).constructor)}return t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),On(t,i)},ea(n)}var Rv=/%[sdj%]/g,Vv=function(){};function ta(n){if(!n||!n.length)return null;var r={};return n.forEach(function(e){var i=e.field;r[i]=r[i]||[],r[i].push(e)}),r}function Gt(n){for(var r=arguments.length,e=new Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];var t=0,s=e.length;if(typeof n=="function")return n.apply(null,e);if(typeof n=="string"){var a=n.replace(Rv,function(l){if(l==="%%")return"%";if(t>=s)return l;switch(l){case"%s":return String(e[t++]);case"%d":return Number(e[t++]);case"%j":try{return JSON.stringify(e[t++])}catch{return"[Circular]"}break;default:return l}});return a}return n}function Cv(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function Ae(n,r){return!!(n==null||r==="array"&&Array.isArray(n)&&!n.length||Cv(r)&&typeof n=="string"&&!n)}function Mv(n,r,e){var i=[],t=0,s=n.length;function a(l){i.push.apply(i,l||[]),t++,t===s&&e(i)}n.forEach(function(l){r(l,a)})}function io(n,r,e){var i=0,t=n.length;function s(a){if(a&&a.length){e(a);return}var l=i;i=i+1,l<t?r(n[l],s):e([])}s([])}function xv(n){var r=[];return Object.keys(n).forEach(function(e){r.push.apply(r,n[e]||[])}),r}var no=function(n){Tv(r,n);function r(e,i){var t;return t=n.call(this,"Async Validation Error")||this,t.errors=e,t.fields=i,t}return r}(ea(Error));function Iv(n,r,e,i,t){if(r.first){var s=new Promise(function(h,f){var p=function(b){return i(b),b.length?f(new no(b,ta(b))):h(t)},m=xv(n);io(m,e,p)});return s.catch(function(h){return h}),s}var a=r.firstFields===!0?Object.keys(n):r.firstFields||[],l=Object.keys(n),o=l.length,u=0,d=[],c=new Promise(function(h,f){var p=function(g){if(d.push.apply(d,g),u++,u===o)return i(d),d.length?f(new no(d,ta(d))):h(t)};l.length||(i(d),h(t)),l.forEach(function(m){var g=n[m];a.indexOf(m)!==-1?io(g,e,p):Mv(g,e,p)})});return c.catch(function(h){return h}),c}function _v(n){return!!(n&&n.message!==void 0)}function Fv(n,r){for(var e=n,i=0;i<r.length;i++){if(e==null)return e;e=e[r[i]]}return e}function ro(n,r){return function(e){var i;return n.fullFields?i=Fv(r,n.fullFields):i=r[e.field||n.fullField],_v(e)?(e.field=e.field||n.fullField,e.fieldValue=i,e):{message:typeof e=="function"?e():e,fieldValue:i,field:e.field||n.fullField}}}function so(n,r){if(r){for(var e in r)if(r.hasOwnProperty(e)){var i=r[e];typeof i=="object"&&typeof n[e]=="object"?n[e]=Hi({},n[e],i):n[e]=i}}return n}var dd=function(r,e,i,t,s,a){r.required&&(!i.hasOwnProperty(r.field)||Ae(e,a||r.type))&&t.push(Gt(s.messages.required,r.fullField))},Yv=function(r,e,i,t,s){(/^\s+$/.test(e)||e==="")&&t.push(Gt(s.messages.whitespace,r.fullField))},mr,Pv=function(){if(mr)return mr;var n="[a-fA-F\\d:]",r=function(k){return k&&k.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",t=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+e+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+e+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+e+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+e+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+e+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+e+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+e+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+e+"$)|(?:^"+t+"$)"),a=new RegExp("^"+e+"$"),l=new RegExp("^"+t+"$"),o=function(k){return k&&k.exact?s:new RegExp("(?:"+r(k)+e+r(k)+")|(?:"+r(k)+t+r(k)+")","g")};o.v4=function(S){return S&&S.exact?a:new RegExp(""+r(S)+e+r(S),"g")},o.v6=function(S){return S&&S.exact?l:new RegExp(""+r(S)+t+r(S),"g")};var u="(?:(?:[a-z]+:)?//)",d="(?:\\S+(?::\\S*)?@)?",c=o.v4().source,h=o.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",b='(?:[/?#][^\\s"]*)?',w="(?:"+u+"|www\\.)"+d+"(?:localhost|"+c+"|"+h+"|"+f+p+m+")"+g+b;return mr=new RegExp("(?:^"+w+"$)","i"),mr},ao={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Rn={integer:function(r){return Rn.number(r)&&parseInt(r,10)===r},float:function(r){return Rn.number(r)&&!Rn.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!Rn.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(ao.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(Pv())},hex:function(r){return typeof r=="string"&&!!r.match(ao.hex)}},Dv=function(r,e,i,t,s){if(r.required&&e===void 0){dd(r,e,i,t,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=r.type;a.indexOf(l)>-1?Rn[l](e)||t.push(Gt(s.messages.types[l],r.fullField,r.type)):l&&typeof e!==r.type&&t.push(Gt(s.messages.types[l],r.fullField,r.type))},Kv=function(r,e,i,t,s){var a=typeof r.len=="number",l=typeof r.min=="number",o=typeof r.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=e,c=null,h=typeof e=="number",f=typeof e=="string",p=Array.isArray(e);if(h?c="number":f?c="string":p&&(c="array"),!c)return!1;p&&(d=e.length),f&&(d=e.replace(u,"_").length),a?d!==r.len&&t.push(Gt(s.messages[c].len,r.fullField,r.len)):l&&!o&&d<r.min?t.push(Gt(s.messages[c].min,r.fullField,r.min)):o&&!l&&d>r.max?t.push(Gt(s.messages[c].max,r.fullField,r.max)):l&&o&&(d<r.min||d>r.max)&&t.push(Gt(s.messages[c].range,r.fullField,r.min,r.max))},nn="enum",Nv=function(r,e,i,t,s){r[nn]=Array.isArray(r[nn])?r[nn]:[],r[nn].indexOf(e)===-1&&t.push(Gt(s.messages[nn],r.fullField,r[nn].join(", ")))},Hv=function(r,e,i,t,s){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||t.push(Gt(s.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var a=new RegExp(r.pattern);a.test(e)||t.push(Gt(s.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},he={required:dd,whitespace:Yv,type:Dv,range:Kv,enum:Nv,pattern:Hv},Uv=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e,"string")&&!r.required)return i();he.required(r,e,t,a,s,"string"),Ae(e,"string")||(he.type(r,e,t,a,s),he.range(r,e,t,a,s),he.pattern(r,e,t,a,s),r.whitespace===!0&&he.whitespace(r,e,t,a,s))}i(a)},Ov=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e)&&!r.required)return i();he.required(r,e,t,a,s),e!==void 0&&he.type(r,e,t,a,s)}i(a)},zv=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(e===""&&(e=void 0),Ae(e)&&!r.required)return i();he.required(r,e,t,a,s),e!==void 0&&(he.type(r,e,t,a,s),he.range(r,e,t,a,s))}i(a)},Av=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e)&&!r.required)return i();he.required(r,e,t,a,s),e!==void 0&&he.type(r,e,t,a,s)}i(a)},Bv=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e)&&!r.required)return i();he.required(r,e,t,a,s),Ae(e)||he.type(r,e,t,a,s)}i(a)},Jv=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e)&&!r.required)return i();he.required(r,e,t,a,s),e!==void 0&&(he.type(r,e,t,a,s),he.range(r,e,t,a,s))}i(a)},jv=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e)&&!r.required)return i();he.required(r,e,t,a,s),e!==void 0&&(he.type(r,e,t,a,s),he.range(r,e,t,a,s))}i(a)},Qv=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(e==null&&!r.required)return i();he.required(r,e,t,a,s,"array"),e!=null&&(he.type(r,e,t,a,s),he.range(r,e,t,a,s))}i(a)},$v=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e)&&!r.required)return i();he.required(r,e,t,a,s),e!==void 0&&he.type(r,e,t,a,s)}i(a)},qv="enum",ey=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e)&&!r.required)return i();he.required(r,e,t,a,s),e!==void 0&&he[qv](r,e,t,a,s)}i(a)},ty=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e,"string")&&!r.required)return i();he.required(r,e,t,a,s),Ae(e,"string")||he.pattern(r,e,t,a,s)}i(a)},iy=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e,"date")&&!r.required)return i();if(he.required(r,e,t,a,s),!Ae(e,"date")){var o;e instanceof Date?o=e:o=new Date(e),he.type(r,o,t,a,s),o&&he.range(r,o.getTime(),t,a,s)}}i(a)},ny=function(r,e,i,t,s){var a=[],l=Array.isArray(e)?"array":typeof e;he.required(r,e,t,a,s,l),i(a)},ws=function(r,e,i,t,s){var a=r.type,l=[],o=r.required||!r.required&&t.hasOwnProperty(r.field);if(o){if(Ae(e,a)&&!r.required)return i();he.required(r,e,t,l,s,a),Ae(e,a)||he.type(r,e,t,l,s)}i(l)},ry=function(r,e,i,t,s){var a=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(Ae(e)&&!r.required)return i();he.required(r,e,t,a,s)}i(a)},Fn={string:Uv,method:Ov,number:zv,boolean:Av,regexp:Bv,integer:Jv,float:jv,array:Qv,object:$v,enum:ey,pattern:ty,date:iy,url:ws,hex:ws,email:ws,required:ny,any:ry};function ia(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var na=ia(),tr=function(){function n(e){this.rules=null,this._messages=na,this.define(e)}var r=n.prototype;return r.define=function(i){var t=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(s){var a=i[s];t.rules[s]=Array.isArray(a)?a:[a]})},r.messages=function(i){return i&&(this._messages=so(ia(),i)),this._messages},r.validate=function(i,t,s){var a=this;t===void 0&&(t={}),s===void 0&&(s=function(){});var l=i,o=t,u=s;if(typeof o=="function"&&(u=o,o={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,l),Promise.resolve(l);function d(m){var g=[],b={};function w(k){if(Array.isArray(k)){var L;g=(L=g).concat.apply(L,k)}else g.push(k)}for(var S=0;S<m.length;S++)w(m[S]);g.length?(b=ta(g),u(g,b)):u(null,l)}if(o.messages){var c=this.messages();c===na&&(c=ia()),so(c,o.messages),o.messages=c}else o.messages=this.messages();var h={},f=o.keys||Object.keys(this.rules);f.forEach(function(m){var g=a.rules[m],b=l[m];g.forEach(function(w){var S=w;typeof S.transform=="function"&&(l===i&&(l=Hi({},l)),b=l[m]=S.transform(b)),typeof S=="function"?S={validator:S}:S=Hi({},S),S.validator=a.getValidationMethod(S),S.validator&&(S.field=m,S.fullField=S.fullField||m,S.type=a.getType(S),h[m]=h[m]||[],h[m].push({rule:S,value:b,source:l,field:m}))})});var p={};return Iv(h,o,function(m,g){var b=m.rule,w=(b.type==="object"||b.type==="array")&&(typeof b.fields=="object"||typeof b.defaultField=="object");w=w&&(b.required||!b.required&&m.value),b.field=m.field;function S(T,X){return Hi({},X,{fullField:b.fullField+"."+T,fullFields:b.fullFields?[].concat(b.fullFields,[T]):[T]})}function k(T){T===void 0&&(T=[]);var X=Array.isArray(T)?T:[T];!o.suppressWarning&&X.length&&n.warning("async-validator:",X),X.length&&b.message!==void 0&&(X=[].concat(b.message));var G=X.map(ro(b,l));if(o.first&&G.length)return p[b.field]=1,g(G);if(!w)g(G);else{if(b.required&&!m.value)return b.message!==void 0?G=[].concat(b.message).map(ro(b,l)):o.error&&(G=[o.error(b,Gt(o.messages.required,b.field))]),g(G);var C={};b.defaultField&&Object.keys(m.value).map(function(y){C[y]=b.defaultField}),C=Hi({},C,m.rule.fields);var x={};Object.keys(C).forEach(function(y){var v=C[y],Z=Array.isArray(v)?v:[v];x[y]=Z.map(S.bind(null,y))});var N=new n(x);N.messages(o.messages),m.rule.options&&(m.rule.options.messages=o.messages,m.rule.options.error=o.error),N.validate(m.value,m.rule.options||o,function(y){var v=[];G&&G.length&&v.push.apply(v,G),y&&y.length&&v.push.apply(v,y),g(v.length?v:null)})}}var L;if(b.asyncValidator)L=b.asyncValidator(b,m.value,k,m.source,o);else if(b.validator){try{L=b.validator(b,m.value,k,m.source,o)}catch(T){console.error==null||console.error(T),o.suppressValidatorError||setTimeout(function(){throw T},0),k(T.message)}L===!0?k():L===!1?k(typeof b.message=="function"?b.message(b.fullField||b.field):b.message||(b.fullField||b.field)+" fails"):L instanceof Array?k(L):L instanceof Error&&k(L.message)}L&&L.then&&L.then(function(){return k()},function(T){return k(T)})},function(m){d(m)},l)},r.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!Fn.hasOwnProperty(i.type))throw new Error(Gt("Unknown rule type %s",i.type));return i.type||"string"},r.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var t=Object.keys(i),s=t.indexOf("message");return s!==-1&&t.splice(s,1),t.length===1&&t[0]==="required"?Fn.required:Fn[this.getType(i)]||void 0},n}();tr.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");Fn[r]=e};tr.warning=Vv;tr.messages=na;tr.validators=Fn;const sy=["","error","validating","success"],ay=et({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Le([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Le([Object,Array])},error:String,validateStatus:{type:String,values:sy},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Xa}}),lo="ElLabelWrap";var ly=ke({name:lo,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:r}){const e=qe(Ta,void 0),i=qe(Yn);i||Xu(lo,"usage: <el-form-item><label-wrap /></el-form-item>");const t=ot("form"),s=$(),a=$(0),l=()=>{var d;if((d=s.value)!=null&&d.firstElementChild){const c=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(c))}else return 0},o=(d="update")=>{Tt(()=>{r.default&&n.isAutoWidth&&(d==="update"?a.value=l():d==="remove"&&(e==null||e.deregisterLabelWidth(a.value)))})},u=()=>o("update");return St(()=>{u()}),Yt(()=>{o("remove")}),Lu(()=>u()),Ze(a,(d,c)=>{n.updateAll&&(e==null||e.registerLabelWidth(d,c))}),pi(O(()=>{var d,c;return(c=(d=s.value)==null?void 0:d.firstElementChild)!=null?c:null}),u),()=>{var d,c;if(!r)return null;const{isAutoWidth:h}=n;if(h){const f=e==null?void 0:e.autoLabelWidth,p=i==null?void 0:i.hasLabel,m={};if(p&&f&&f!=="auto"){const g=Math.max(0,Number.parseInt(f,10)-a.value),b=e.labelPosition==="left"?"marginRight":"marginLeft";g&&(m[b]=`${g}px`)}return Ce("div",{ref:s,class:[t.be("item","label-wrap")],style:m},[(d=r.default)==null?void 0:d.call(r)])}else return Ce(pn,{ref:s},[(c=r.default)==null?void 0:c.call(r)])}}});const oy=["role","aria-labelledby"],uy=ke({name:"ElFormItem"}),dy=ke({...uy,props:ay,setup(n,{expose:r}){const e=n,i=ch(),t=qe(Ta,void 0),s=qe(Yn,void 0),a=qr(void 0,{formItem:!1}),l=ot("form-item"),o=es().value,u=$([]),d=$(""),c=qc(d,100),h=$(""),f=$();let p,m=!1;const g=O(()=>{if((t==null?void 0:t.labelPosition)==="top")return{};const z=Ir(e.labelWidth||(t==null?void 0:t.labelWidth)||"");return z?{width:z}:{}}),b=O(()=>{if((t==null?void 0:t.labelPosition)==="top"||t!=null&&t.inline)return{};if(!e.label&&!e.labelWidth&&C)return{};const z=Ir(e.labelWidth||(t==null?void 0:t.labelWidth)||"");return!e.label&&!i.label?{marginLeft:z}:{}}),w=O(()=>[l.b(),l.m(a.value),l.is("error",d.value==="error"),l.is("validating",d.value==="validating"),l.is("success",d.value==="success"),l.is("required",Z.value||e.required),l.is("no-asterisk",t==null?void 0:t.hideRequiredAsterisk),(t==null?void 0:t.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[l.m("feedback")]:t==null?void 0:t.statusIcon}]),S=O(()=>$r(e.inlineMessage)?e.inlineMessage:(t==null?void 0:t.inlineMessage)||!1),k=O(()=>[l.e("error"),{[l.em("error","inline")]:S.value}]),L=O(()=>e.prop?Dn(e.prop)?e.prop:e.prop.join("."):""),T=O(()=>!!(e.label||i.label)),X=O(()=>e.for||(u.value.length===1?u.value[0]:void 0)),G=O(()=>!X.value&&T.value),C=!!s,x=O(()=>{const z=t==null?void 0:t.model;if(!(!z||!e.prop))return ks(z,e.prop).value}),N=O(()=>{const{required:z}=e,se=[];e.rules&&se.push(...As(e.rules));const te=t==null?void 0:t.rules;if(te&&e.prop){const be=ks(te,e.prop).value;be&&se.push(...As(be))}if(z!==void 0){const be=se.map((Ee,Ne)=>[Ee,Ne]).filter(([Ee])=>Object.keys(Ee).includes("required"));if(be.length>0)for(const[Ee,Ne]of be)Ee.required!==z&&(se[Ne]={...Ee,required:z});else se.push({required:z})}return se}),y=O(()=>N.value.length>0),v=z=>N.value.filter(te=>!te.trigger||!z?!0:Array.isArray(te.trigger)?te.trigger.includes(z):te.trigger===z).map(({trigger:te,...be})=>be),Z=O(()=>N.value.some(z=>z.required)),W=O(()=>{var z;return c.value==="error"&&e.showMessage&&((z=t==null?void 0:t.showMessage)!=null?z:!0)}),E=O(()=>`${e.label||""}${(t==null?void 0:t.labelSuffix)||""}`),R=z=>{d.value=z},M=z=>{var se,te;const{errors:be,fields:Ee}=z;(!be||!Ee)&&console.error(z),R("error"),h.value=be?(te=(se=be==null?void 0:be[0])==null?void 0:se.message)!=null?te:`${e.prop} is required`:"",t==null||t.emit("validate",e.prop,!1,h.value)},P=()=>{R("success"),t==null||t.emit("validate",e.prop,!0,"")},Y=async z=>{const se=L.value;return new tr({[se]:z}).validate({[se]:x.value},{firstFields:!0}).then(()=>(P(),!0)).catch(be=>(M(be),Promise.reject(be)))},D=async(z,se)=>{if(m||!e.prop)return!1;const te=Ct(se);if(!y.value)return se==null||se(!1),!1;const be=v(z);return be.length===0?(se==null||se(!0),!0):(R("validating"),Y(be).then(()=>(se==null||se(!0),!0)).catch(Ee=>{const{fields:Ne}=Ee;return se==null||se(!1,Ne),te?!1:Promise.reject(Ne)}))},q=()=>{R(""),h.value="",m=!1},F=async()=>{const z=t==null?void 0:t.model;if(!z||!e.prop)return;const se=ks(z,e.prop);m=!0,se.value=Pl(p),await Tt(),q(),m=!1},Se=z=>{u.value.includes(z)||u.value.push(z)},fe=z=>{u.value=u.value.filter(se=>se!==z)};Ze(()=>e.error,z=>{h.value=z||"",R(z?"error":"")},{immediate:!0}),Ze(()=>e.validateStatus,z=>R(z||""));const Pe=qt({...is(e),$el:f,size:a,validateState:d,labelId:o,inputIds:u,isGroup:G,hasLabel:T,fieldValue:x,addInputId:Se,removeInputId:fe,resetField:F,clearValidate:q,validate:D});return At(Yn,Pe),St(()=>{e.prop&&(t==null||t.addField(Pe),p=Pl(x.value))}),Yt(()=>{t==null||t.removeField(Pe)}),r({size:a,validateMessage:h,validateState:d,validate:D,clearValidate:q,resetField:F}),(z,se)=>{var te;return ne(),Xe("div",{ref_key:"formItemRef",ref:f,class:re(I(w)),role:I(G)?"group":void 0,"aria-labelledby":I(G)?I(o):void 0},[Ce(I(ly),{"is-auto-width":I(g).width==="auto","update-all":((te=I(t))==null?void 0:te.labelWidth)==="auto"},{default:pe(()=>[I(T)?(ne(),He(Mn(I(X)?"label":"div"),{key:0,id:I(o),for:I(X),class:re(I(l).e("label")),style:xt(I(g))},{default:pe(()=>[Ve(z.$slots,"label",{label:I(E)},()=>[hh(Ot(I(E)),1)])]),_:3},8,["id","for","class","style"])):Fe("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),Ye("div",{class:re(I(l).e("content")),style:xt(I(b))},[Ve(z.$slots,"default"),Ce(ph,{name:`${I(l).namespace.value}-zoom-in-top`},{default:pe(()=>[I(W)?Ve(z.$slots,"error",{key:0,error:h.value},()=>[Ye("div",{class:re(I(k))},Ot(h.value),3)]):Fe("v-if",!0)]),_:3},8,["name"])],6)],10,oy)}}});var cd=$e(dy,[["__file","form-item.vue"]]);const cy=Ln(Xv,{FormItem:cd}),oo=Ga(cd),rn=4,hy={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},py=({move:n,size:r,bar:e})=>({[e.size]:r,transform:`translate${e.axis}(${n}%)`}),Oa=Symbol("scrollbarContextKey"),fy=et({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),my="Thumb",vy=ke({__name:"thumb",props:fy,setup(n){const r=n,e=qe(Oa),i=ot("scrollbar");e||Xu(my,"can not inject scrollbar context");const t=$(),s=$(),a=$({}),l=$(!1);let o=!1,u=!1,d=$t?document.onselectstart:null;const c=O(()=>hy[r.vertical?"vertical":"horizontal"]),h=O(()=>py({size:r.size,move:r.move,bar:c.value})),f=O(()=>t.value[c.value.offset]**2/e.wrapElement[c.value.scrollSize]/r.ratio/s.value[c.value.offset]),p=T=>{var X;if(T.stopPropagation(),T.ctrlKey||[1,2].includes(T.button))return;(X=window.getSelection())==null||X.removeAllRanges(),g(T);const G=T.currentTarget;G&&(a.value[c.value.axis]=G[c.value.offset]-(T[c.value.client]-G.getBoundingClientRect()[c.value.direction]))},m=T=>{if(!s.value||!t.value||!e.wrapElement)return;const X=Math.abs(T.target.getBoundingClientRect()[c.value.direction]-T[c.value.client]),G=s.value[c.value.offset]/2,C=(X-G)*100*f.value/t.value[c.value.offset];e.wrapElement[c.value.scroll]=C*e.wrapElement[c.value.scrollSize]/100},g=T=>{T.stopImmediatePropagation(),o=!0,document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),d=document.onselectstart,document.onselectstart=()=>!1},b=T=>{if(!t.value||!s.value||o===!1)return;const X=a.value[c.value.axis];if(!X)return;const G=(t.value.getBoundingClientRect()[c.value.direction]-T[c.value.client])*-1,C=s.value[c.value.offset]-X,x=(G-C)*100*f.value/t.value[c.value.offset];e.wrapElement[c.value.scroll]=x*e.wrapElement[c.value.scrollSize]/100},w=()=>{o=!1,a.value[c.value.axis]=0,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),L(),u&&(l.value=!1)},S=()=>{u=!1,l.value=!!r.size},k=()=>{u=!0,l.value=o};Yt(()=>{L(),document.removeEventListener("mouseup",w)});const L=()=>{document.onselectstart!==d&&(document.onselectstart=d)};return Os(Ni(e,"scrollbarElement"),"mousemove",S),Os(Ni(e,"scrollbarElement"),"mouseleave",k),(T,X)=>(ne(),He(Wa,{name:I(i).b("fade"),persisted:""},{default:pe(()=>[Gi(Ye("div",{ref_key:"instance",ref:t,class:re([I(i).e("bar"),I(i).is(I(c).key)]),onMousedown:m},[Ye("div",{ref_key:"thumb",ref:s,class:re(I(i).e("thumb")),style:xt(I(h)),onMousedown:p},null,38)],34),[[$n,T.always||l.value]])]),_:1},8,["name"]))}});var uo=$e(vy,[["__file","thumb.vue"]]);const yy=et({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),by=ke({__name:"bar",props:yy,setup(n,{expose:r}){const e=n,i=qe(Oa),t=$(0),s=$(0),a=$(""),l=$(""),o=$(1),u=$(1);return r({handleScroll:h=>{if(h){const f=h.offsetHeight-rn,p=h.offsetWidth-rn;s.value=h.scrollTop*100/f*o.value,t.value=h.scrollLeft*100/p*u.value}},update:()=>{const h=i==null?void 0:i.wrapElement;if(!h)return;const f=h.offsetHeight-rn,p=h.offsetWidth-rn,m=f**2/h.scrollHeight,g=p**2/h.scrollWidth,b=Math.max(m,e.minSize),w=Math.max(g,e.minSize);o.value=m/(f-m)/(b/(f-b)),u.value=g/(p-g)/(w/(p-w)),l.value=b+rn<f?`${b}px`:"",a.value=w+rn<p?`${w}px`:""}}),(h,f)=>(ne(),Xe(pn,null,[Ce(uo,{move:t.value,ratio:u.value,size:a.value,always:h.always},null,8,["move","ratio","size","always"]),Ce(uo,{move:s.value,ratio:o.value,size:l.value,vertical:"",always:h.always},null,8,["move","ratio","size","always"])],64))}});var gy=$e(by,[["__file","bar.vue"]]);const Zy=et({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Le([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical"]}}),ky={scroll:({scrollTop:n,scrollLeft:r})=>[n,r].every(fi)},Sy="ElScrollbar",Ly=ke({name:Sy}),Ey=ke({...Ly,props:Zy,emits:ky,setup(n,{expose:r,emit:e}){const i=n,t=ot("scrollbar");let s,a;const l=$(),o=$(),u=$(),d=$(),c=O(()=>{const S={};return i.height&&(S.height=Ir(i.height)),i.maxHeight&&(S.maxHeight=Ir(i.maxHeight)),[i.wrapStyle,S]}),h=O(()=>[i.wrapClass,t.e("wrap"),{[t.em("wrap","hidden-default")]:!i.native}]),f=O(()=>[t.e("view"),i.viewClass]),p=()=>{var S;o.value&&((S=d.value)==null||S.handleScroll(o.value),e("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))};function m(S,k){Ti(S)?o.value.scrollTo(S):fi(S)&&fi(k)&&o.value.scrollTo(S,k)}const g=S=>{fi(S)&&(o.value.scrollTop=S)},b=S=>{fi(S)&&(o.value.scrollLeft=S)},w=()=>{var S;(S=d.value)==null||S.update()};return Ze(()=>i.noresize,S=>{S?(s==null||s(),a==null||a()):({stop:s}=pi(u,w),a=Os("resize",w))},{immediate:!0}),Ze(()=>[i.maxHeight,i.height],()=>{i.native||Tt(()=>{var S;w(),o.value&&((S=d.value)==null||S.handleScroll(o.value))})}),At(Oa,qt({scrollbarElement:l,wrapElement:o})),St(()=>{i.native||Tt(()=>{w()})}),Lu(()=>w()),r({wrapRef:o,update:w,scrollTo:m,setScrollTop:g,setScrollLeft:b,handleScroll:p}),(S,k)=>(ne(),Xe("div",{ref_key:"scrollbarRef",ref:l,class:re(I(t).b())},[Ye("div",{ref_key:"wrapRef",ref:o,class:re(I(h)),style:xt(I(c)),onScroll:p},[(ne(),He(Mn(S.tag),{id:S.id,ref_key:"resizeRef",ref:u,class:re(I(f)),style:xt(S.viewStyle),role:S.role,"aria-label":S.ariaLabel,"aria-orientation":S.ariaOrientation},{default:pe(()=>[Ve(S.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),S.native?Fe("v-if",!0):(ne(),He(gy,{key:0,ref_key:"barRef",ref:d,always:S.always,"min-size":S.minSize},null,8,["always","min-size"]))],2))}});var wy=$e(Ey,[["__file","scrollbar.vue"]]);const Xy=Ln(wy),za=Symbol("popper"),hd=Symbol("popperContent"),Ty=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],pd=et({role:{type:String,values:Ty,default:"tooltip"}}),Gy=ke({name:"ElPopper",inheritAttrs:!1}),Wy=ke({...Gy,props:pd,setup(n,{expose:r}){const e=n,i=$(),t=$(),s=$(),a=$(),l=O(()=>e.role),o={triggerRef:i,popperInstanceRef:t,contentRef:s,referenceRef:a,role:l};return r(o),At(za,o),(u,d)=>Ve(u.$slots,"default")}});var Ry=$e(Wy,[["__file","popper.vue"]]);const fd=et({arrowOffset:{type:Number,default:5}}),Vy=ke({name:"ElPopperArrow",inheritAttrs:!1}),Cy=ke({...Vy,props:fd,setup(n,{expose:r}){const e=n,i=ot("popper"),{arrowOffset:t,arrowRef:s,arrowStyle:a}=qe(hd,void 0);return Ze(()=>e.arrowOffset,l=>{t.value=l}),Yt(()=>{s.value=void 0}),r({arrowRef:s}),(l,o)=>(ne(),Xe("span",{ref_key:"arrowRef",ref:s,class:re(I(i).e("arrow")),style:xt(I(a)),"data-popper-arrow":""},null,6))}});var My=$e(Cy,[["__file","arrow.vue"]]);const xy="ElOnlyChild",Iy=ke({name:xy,setup(n,{slots:r,attrs:e}){var i;const t=qe(ud),s=bv((i=t==null?void 0:t.setForwardRef)!=null?i:Hs);return()=>{var a;const l=(a=r.default)==null?void 0:a.call(r,e);if(!l||l.length>1)return null;const o=md(l);return o?Gi(fh(o,e),[[s]]):null}}});function md(n){if(!n)return null;const r=n;for(const e of r){if(Ti(e))switch(e.type){case vh:continue;case mh:case"svg":return co(e);case pn:return md(e.children);default:return e}return co(e)}return null}function co(n){const r=ot("only-child");return Ce("span",{class:r.e("content")},[n])}const vd=et({virtualRef:{type:Le(Object)},virtualTriggering:Boolean,onMouseenter:{type:Le(Function)},onMouseleave:{type:Le(Function)},onClick:{type:Le(Function)},onKeydown:{type:Le(Function)},onFocus:{type:Le(Function)},onBlur:{type:Le(Function)},onContextmenu:{type:Le(Function)},id:String,open:Boolean}),_y=ke({name:"ElPopperTrigger",inheritAttrs:!1}),Fy=ke({..._y,props:vd,setup(n,{expose:r}){const e=n,{role:i,triggerRef:t}=qe(za,void 0);yv(t);const s=O(()=>l.value?e.id:void 0),a=O(()=>{if(i&&i.value==="tooltip")return e.open&&e.id?e.id:void 0}),l=O(()=>{if(i&&i.value!=="tooltip")return i.value}),o=O(()=>l.value?`${e.open}`:void 0);let u;return St(()=>{Ze(()=>e.virtualRef,d=>{d&&(t.value=Tu(d))},{immediate:!0}),Ze(t,(d,c)=>{u==null||u(),u=void 0,Pn(d)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(h=>{var f;const p=e[h];p&&(d.addEventListener(h.slice(2).toLowerCase(),p),(f=c==null?void 0:c.removeEventListener)==null||f.call(c,h.slice(2).toLowerCase(),p))}),u=Ze([s,a,l,o],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((f,p)=>{ns(h[p])?d.removeAttribute(f):d.setAttribute(f,h[p])})},{immediate:!0})),Pn(c)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>c.removeAttribute(h))},{immediate:!0})}),Yt(()=>{u==null||u(),u=void 0}),r({triggerRef:t}),(d,c)=>d.virtualTriggering?Fe("v-if",!0):(ne(),He(I(Iy),Ra({key:0},d.$attrs,{"aria-controls":I(s),"aria-describedby":I(a),"aria-expanded":I(o),"aria-haspopup":I(l)}),{default:pe(()=>[Ve(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Yy=$e(Fy,[["__file","trigger.vue"]]);const Xs="focus-trap.focus-after-trapped",Ts="focus-trap.focus-after-released",Py="focus-trap.focusout-prevented",ho={cancelable:!0,bubbles:!1},Dy={cancelable:!0,bubbles:!1},po="focusAfterTrapped",fo="focusAfterReleased",Ky=Symbol("elFocusTrap"),Aa=$(),us=$(0),Ba=$(0);let vr=0;const yd=n=>{const r=[],e=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const t=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||t?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)r.push(e.currentNode);return r},mo=(n,r)=>{for(const e of n)if(!Ny(e,r))return e},Ny=(n,r)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(r&&n===r)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},Hy=n=>{const r=yd(n),e=mo(r,n),i=mo(r.reverse(),n);return[e,i]},Uy=n=>n instanceof HTMLInputElement&&"select"in n,Li=(n,r)=>{if(n&&n.focus){const e=document.activeElement;n.focus({preventScroll:!0}),Ba.value=window.performance.now(),n!==e&&Uy(n)&&r&&n.select()}};function vo(n,r){const e=[...n],i=n.indexOf(r);return i!==-1&&e.splice(i,1),e}const Oy=()=>{let n=[];return{push:i=>{const t=n[0];t&&i!==t&&t.pause(),n=vo(n,i),n.unshift(i)},remove:i=>{var t,s;n=vo(n,i),(s=(t=n[0])==null?void 0:t.resume)==null||s.call(t)}}},zy=(n,r=!1)=>{const e=document.activeElement;for(const i of n)if(Li(i,r),document.activeElement!==e)return},yo=Oy(),Ay=()=>us.value>Ba.value,yr=()=>{Aa.value="pointer",us.value=window.performance.now()},bo=()=>{Aa.value="keyboard",us.value=window.performance.now()},By=()=>(St(()=>{vr===0&&(document.addEventListener("mousedown",yr),document.addEventListener("touchstart",yr),document.addEventListener("keydown",bo)),vr++}),Yt(()=>{vr--,vr<=0&&(document.removeEventListener("mousedown",yr),document.removeEventListener("touchstart",yr),document.removeEventListener("keydown",bo))}),{focusReason:Aa,lastUserFocusTimestamp:us,lastAutomatedFocusTimestamp:Ba}),br=n=>new CustomEvent(Py,{...Dy,detail:n}),Jy=ke({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[po,fo,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:r}){const e=$();let i,t;const{focusReason:s}=By();hv(p=>{n.trapped&&!a.paused&&r("release-requested",p)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},l=p=>{if(!n.loop&&!n.trapped||a.paused)return;const{key:m,altKey:g,ctrlKey:b,metaKey:w,currentTarget:S,shiftKey:k}=p,{loop:L}=n,T=m===Kn.tab&&!g&&!b&&!w,X=document.activeElement;if(T&&X){const G=S,[C,x]=Hy(G);if(C&&x){if(!k&&X===x){const y=br({focusReason:s.value});r("focusout-prevented",y),y.defaultPrevented||(p.preventDefault(),L&&Li(C,!0))}else if(k&&[C,G].includes(X)){const y=br({focusReason:s.value});r("focusout-prevented",y),y.defaultPrevented||(p.preventDefault(),L&&Li(x,!0))}}else if(X===G){const y=br({focusReason:s.value});r("focusout-prevented",y),y.defaultPrevented||p.preventDefault()}}};At(Ky,{focusTrapRef:e,onKeydown:l}),Ze(()=>n.focusTrapEl,p=>{p&&(e.value=p)},{immediate:!0}),Ze([e],([p],[m])=>{p&&(p.addEventListener("keydown",l),p.addEventListener("focusin",d),p.addEventListener("focusout",c)),m&&(m.removeEventListener("keydown",l),m.removeEventListener("focusin",d),m.removeEventListener("focusout",c))});const o=p=>{r(po,p)},u=p=>r(fo,p),d=p=>{const m=I(e);if(!m)return;const g=p.target,b=p.relatedTarget,w=g&&m.contains(g);n.trapped||b&&m.contains(b)||(i=b),w&&r("focusin",p),!a.paused&&n.trapped&&(w?t=g:Li(t,!0))},c=p=>{const m=I(e);if(!(a.paused||!m))if(n.trapped){const g=p.relatedTarget;!ns(g)&&!m.contains(g)&&setTimeout(()=>{if(!a.paused&&n.trapped){const b=br({focusReason:s.value});r("focusout-prevented",b),b.defaultPrevented||Li(t,!0)}},0)}else{const g=p.target;g&&m.contains(g)||r("focusout",p)}};async function h(){await Tt();const p=I(e);if(p){yo.push(a);const m=p.contains(document.activeElement)?i:document.activeElement;if(i=m,!p.contains(m)){const b=new Event(Xs,ho);p.addEventListener(Xs,o),p.dispatchEvent(b),b.defaultPrevented||Tt(()=>{let w=n.focusStartEl;Dn(w)||(Li(w),document.activeElement!==w&&(w="first")),w==="first"&&zy(yd(p),!0),(document.activeElement===m||w==="container")&&Li(p)})}}}function f(){const p=I(e);if(p){p.removeEventListener(Xs,o);const m=new CustomEvent(Ts,{...ho,detail:{focusReason:s.value}});p.addEventListener(Ts,u),p.dispatchEvent(m),!m.defaultPrevented&&(s.value=="keyboard"||!Ay()||p.contains(document.activeElement))&&Li(i??document.body),p.removeEventListener(Ts,u),yo.remove(a)}}return St(()=>{n.trapped&&h(),Ze(()=>n.trapped,p=>{p?h():f()})}),Yt(()=>{n.trapped&&f()}),{onKeydown:l}}});function jy(n,r,e,i,t,s){return Ve(n.$slots,"default",{handleKeydown:n.onKeydown})}var Qy=$e(Jy,[["render",jy],["__file","focus-trap.vue"]]);const $y=["fixed","absolute"],qy=et({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Le(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:ls,default:"bottom"},popperOptions:{type:Le(Object),default:()=>({})},strategy:{type:String,values:$y,default:"absolute"}}),bd=et({...qy,id:String,style:{type:Le([String,Array,Object])},className:{type:Le([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Le([String,Array,Object])},popperStyle:{type:Le([String,Array,Object])},referenceEl:{type:Le(Object)},triggerTargetEl:{type:Le(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),eb={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},tb=(n,r=[])=>{const{placement:e,strategy:i,popperOptions:t}=n,s={placement:e,strategy:i,...t,modifiers:[...nb(n),...r]};return rb(s,t==null?void 0:t.modifiers),s},ib=n=>{if($t)return Tu(n)};function nb(n){const{offset:r,gpuAcceleration:e,fallbackPlacements:i}=n;return[{name:"offset",options:{offset:[0,r??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:e}}]}function rb(n,r){r&&(n.modifiers=[...n.modifiers,...r??[]])}const sb=0,ab=n=>{const{popperInstanceRef:r,contentRef:e,triggerRef:i,role:t}=qe(za,void 0),s=$(),a=$(),l=O(()=>({name:"eventListeners",enabled:!!n.visible})),o=O(()=>{var b;const w=I(s),S=(b=I(a))!=null?b:sb;return{name:"arrow",enabled:!r0(w),options:{element:w,padding:S}}}),u=O(()=>({onFirstUpdate:()=>{p()},...tb(n,[I(o),I(l)])})),d=O(()=>ib(n.referenceEl)||I(i)),{attributes:c,state:h,styles:f,update:p,forceUpdate:m,instanceRef:g}=dv(d,e,u);return Ze(g,b=>r.value=b),St(()=>{Ze(()=>{var b;return(b=I(d))==null?void 0:b.getBoundingClientRect()},()=>{p()})}),{attributes:c,arrowRef:s,contentRef:e,instanceRef:g,state:h,styles:f,role:t,forceUpdate:m,update:p}},lb=(n,{attributes:r,styles:e,role:i})=>{const{nextZIndex:t}=eh(),s=ot("popper"),a=O(()=>I(r).popper),l=$(fi(n.zIndex)?n.zIndex:t()),o=O(()=>[s.b(),s.is("pure",n.pure),s.is(n.effect),n.popperClass]),u=O(()=>[{zIndex:I(l)},I(e).popper,n.popperStyle||{}]),d=O(()=>i.value==="dialog"?"false":void 0),c=O(()=>I(e).arrow||{});return{ariaModal:d,arrowStyle:c,contentAttrs:a,contentClass:o,contentStyle:u,contentZIndex:l,updateZIndex:()=>{l.value=fi(n.zIndex)?n.zIndex:t()}}},ob=(n,r)=>{const e=$(!1),i=$();return{focusStartRef:i,trapped:e,onFocusAfterReleased:u=>{var d;((d=u.detail)==null?void 0:d.focusReason)!=="pointer"&&(i.value="first",r("blur"))},onFocusAfterTrapped:()=>{r("focus")},onFocusInTrap:u=>{n.visible&&!e.value&&(u.target&&(i.value=u.target),e.value=!0)},onFocusoutPrevented:u=>{n.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),e.value=!1)},onReleaseRequested:()=>{e.value=!1,r("close")}}},ub=ke({name:"ElPopperContent"}),db=ke({...ub,props:bd,emits:eb,setup(n,{expose:r,emit:e}){const i=n,{focusStartRef:t,trapped:s,onFocusAfterReleased:a,onFocusAfterTrapped:l,onFocusInTrap:o,onFocusoutPrevented:u,onReleaseRequested:d}=ob(i,e),{attributes:c,arrowRef:h,contentRef:f,styles:p,instanceRef:m,role:g,update:b}=ab(i),{ariaModal:w,arrowStyle:S,contentAttrs:k,contentClass:L,contentStyle:T,updateZIndex:X}=lb(i,{styles:p,attributes:c,role:g}),G=qe(Yn,void 0),C=$();At(hd,{arrowStyle:S,arrowRef:h,arrowOffset:C}),G&&(G.addInputId||G.removeInputId)&&At(Yn,{...G,addInputId:Hs,removeInputId:Hs});let x;const N=(v=!0)=>{b(),v&&X()},y=()=>{N(!1),i.visible&&i.focusOnShow?s.value=!0:i.visible===!1&&(s.value=!1)};return St(()=>{Ze(()=>i.triggerTargetEl,(v,Z)=>{x==null||x(),x=void 0;const W=I(v||f.value),E=I(Z||f.value);Pn(W)&&(x=Ze([g,()=>i.ariaLabel,w,()=>i.id],R=>{["role","aria-label","aria-modal","id"].forEach((M,P)=>{ns(R[P])?W.removeAttribute(M):W.setAttribute(M,R[P])})},{immediate:!0})),E!==W&&Pn(E)&&["role","aria-label","aria-modal","id"].forEach(R=>{E.removeAttribute(R)})},{immediate:!0}),Ze(()=>i.visible,y,{immediate:!0})}),Yt(()=>{x==null||x(),x=void 0}),r({popperContentRef:f,popperInstanceRef:m,updatePopper:N,contentStyle:T}),(v,Z)=>(ne(),Xe("div",Ra({ref_key:"contentRef",ref:f},I(k),{style:I(T),class:I(L),tabindex:"-1",onMouseenter:Z[0]||(Z[0]=W=>v.$emit("mouseenter",W)),onMouseleave:Z[1]||(Z[1]=W=>v.$emit("mouseleave",W))}),[Ce(I(Qy),{trapped:I(s),"trap-on-focus-in":!0,"focus-trap-el":I(f),"focus-start-el":I(t),onFocusAfterTrapped:I(l),onFocusAfterReleased:I(a),onFocusin:I(o),onFocusoutPrevented:I(u),onReleaseRequested:I(d)},{default:pe(()=>[Ve(v.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var cb=$e(db,[["__file","content.vue"]]);const hb=Ln(Ry),Ja=Symbol("elTooltip"),ja=et({...mv,...bd,appendTo:{type:Le([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Le(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),gd=et({...vd,disabled:Boolean,trigger:{type:Le([String,Array]),default:"hover"},triggerKeys:{type:Le(Array),default:()=>[Kn.enter,Kn.space]}}),{useModelToggleProps:pb,useModelToggleEmits:fb,useModelToggle:mb}=ju("visible"),vb=et({...pd,...pb,...ja,...gd,...fd,showArrow:{type:Boolean,default:!0}}),yb=[...fb,"before-show","before-hide","show","hide","open","close"],bb=(n,r)=>Vt(n)?n.includes(r):n===r,sn=(n,r,e)=>i=>{bb(I(n),r)&&e(i)},gb=ke({name:"ElTooltipTrigger"}),Zb=ke({...gb,props:gd,setup(n,{expose:r}){const e=n,i=ot("tooltip"),{controlled:t,id:s,open:a,onOpen:l,onClose:o,onToggle:u}=qe(Ja,void 0),d=$(null),c=()=>{if(I(t)||e.disabled)return!0},h=Ni(e,"trigger"),f=hi(c,sn(h,"hover",l)),p=hi(c,sn(h,"hover",o)),m=hi(c,sn(h,"click",k=>{k.button===0&&u(k)})),g=hi(c,sn(h,"focus",l)),b=hi(c,sn(h,"focus",o)),w=hi(c,sn(h,"contextmenu",k=>{k.preventDefault(),u(k)})),S=hi(c,k=>{const{code:L}=k;e.triggerKeys.includes(L)&&(k.preventDefault(),u(k))});return r({triggerRef:d}),(k,L)=>(ne(),He(I(Yy),{id:I(s),"virtual-ref":k.virtualRef,open:I(a),"virtual-triggering":k.virtualTriggering,class:re(I(i).e("trigger")),onBlur:I(b),onClick:I(m),onContextmenu:I(w),onFocus:I(g),onMouseenter:I(f),onMouseleave:I(p),onKeydown:I(S)},{default:pe(()=>[Ve(k.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var kb=$e(Zb,[["__file","trigger.vue"]]);const Sb=ke({name:"ElTooltipContent",inheritAttrs:!1}),Lb=ke({...Sb,props:ja,setup(n,{expose:r}){const e=n,{selector:i}=od(),t=ot("tooltip"),s=$(null),a=$(!1),{controlled:l,id:o,open:u,trigger:d,onClose:c,onOpen:h,onShow:f,onHide:p,onBeforeShow:m,onBeforeHide:g}=qe(Ja,void 0),b=O(()=>e.transition||`${t.namespace.value}-fade-in-linear`),w=O(()=>e.persistent);Yt(()=>{a.value=!0});const S=O(()=>I(w)?!0:I(u)),k=O(()=>e.disabled?!1:I(u)),L=O(()=>e.appendTo||i.value),T=O(()=>{var R;return(R=e.style)!=null?R:{}}),X=O(()=>!I(u)),G=()=>{p()},C=()=>{if(I(l))return!0},x=hi(C,()=>{e.enterable&&I(d)==="hover"&&h()}),N=hi(C,()=>{I(d)==="hover"&&c()}),y=()=>{var R,M;(M=(R=s.value)==null?void 0:R.updatePopper)==null||M.call(R),m==null||m()},v=()=>{g==null||g()},Z=()=>{f(),E=Eh(O(()=>{var R;return(R=s.value)==null?void 0:R.popperContentRef}),()=>{if(I(l))return;I(d)!=="hover"&&c()})},W=()=>{e.virtualTriggering||c()};let E;return Ze(()=>I(u),R=>{R||E==null||E()},{flush:"post"}),Ze(()=>e.content,()=>{var R,M;(M=(R=s.value)==null?void 0:R.updatePopper)==null||M.call(R)}),r({contentRef:s}),(R,M)=>(ne(),He(yh,{disabled:!R.teleported,to:I(L)},[Ce(Wa,{name:I(b),onAfterLeave:G,onBeforeEnter:y,onAfterEnter:Z,onBeforeLeave:v},{default:pe(()=>[I(S)?Gi((ne(),He(I(cb),Ra({key:0,id:I(o),ref_key:"contentRef",ref:s},R.$attrs,{"aria-label":R.ariaLabel,"aria-hidden":I(X),"boundaries-padding":R.boundariesPadding,"fallback-placements":R.fallbackPlacements,"gpu-acceleration":R.gpuAcceleration,offset:R.offset,placement:R.placement,"popper-options":R.popperOptions,strategy:R.strategy,effect:R.effect,enterable:R.enterable,pure:R.pure,"popper-class":R.popperClass,"popper-style":[R.popperStyle,I(T)],"reference-el":R.referenceEl,"trigger-target-el":R.triggerTargetEl,visible:I(k),"z-index":R.zIndex,onMouseenter:I(x),onMouseleave:I(N),onBlur:W,onClose:I(c)}),{default:pe(()=>[a.value?Fe("v-if",!0):Ve(R.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[$n,I(k)]]):Fe("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var Eb=$e(Lb,[["__file","content.vue"]]);const wb=["innerHTML"],Xb={key:1},Tb=ke({name:"ElTooltip"}),Gb=ke({...Tb,props:vb,emits:yb,setup(n,{expose:r,emit:e}){const i=n;fv();const t=es(),s=$(),a=$(),l=()=>{var b;const w=I(s);w&&((b=w.popperInstanceRef)==null||b.update())},o=$(!1),u=$(),{show:d,hide:c,hasUpdateHandler:h}=mb({indicator:o,toggleReason:u}),{onOpen:f,onClose:p}=vv({showAfter:Ni(i,"showAfter"),hideAfter:Ni(i,"hideAfter"),autoClose:Ni(i,"autoClose"),open:d,close:c}),m=O(()=>$r(i.visible)&&!h.value);At(Ja,{controlled:m,id:t,open:bh(o),trigger:Ni(i,"trigger"),onOpen:b=>{f(b)},onClose:b=>{p(b)},onToggle:b=>{I(o)?p(b):f(b)},onShow:()=>{e("show",u.value)},onHide:()=>{e("hide",u.value)},onBeforeShow:()=>{e("before-show",u.value)},onBeforeHide:()=>{e("before-hide",u.value)},updatePopper:l}),Ze(()=>i.disabled,b=>{b&&o.value&&(o.value=!1)});const g=b=>{var w,S;const k=(S=(w=a.value)==null?void 0:w.contentRef)==null?void 0:S.popperContentRef,L=(b==null?void 0:b.relatedTarget)||document.activeElement;return k&&k.contains(L)};return gh(()=>o.value&&c()),r({popperRef:s,contentRef:a,isFocusInsideContent:g,updatePopper:l,onOpen:f,onClose:p,hide:c}),(b,w)=>(ne(),He(I(hb),{ref_key:"popperRef",ref:s,role:b.role},{default:pe(()=>[Ce(kb,{disabled:b.disabled,trigger:b.trigger,"trigger-keys":b.triggerKeys,"virtual-ref":b.virtualRef,"virtual-triggering":b.virtualTriggering},{default:pe(()=>[b.$slots.default?Ve(b.$slots,"default",{key:0}):Fe("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),Ce(Eb,{ref_key:"contentRef",ref:a,"aria-label":b.ariaLabel,"boundaries-padding":b.boundariesPadding,content:b.content,disabled:b.disabled,effect:b.effect,enterable:b.enterable,"fallback-placements":b.fallbackPlacements,"hide-after":b.hideAfter,"gpu-acceleration":b.gpuAcceleration,offset:b.offset,persistent:b.persistent,"popper-class":b.popperClass,"popper-style":b.popperStyle,placement:b.placement,"popper-options":b.popperOptions,pure:b.pure,"raw-content":b.rawContent,"reference-el":b.referenceEl,"trigger-target-el":b.triggerTargetEl,"show-after":b.showAfter,strategy:b.strategy,teleported:b.teleported,transition:b.transition,"virtual-triggering":b.virtualTriggering,"z-index":b.zIndex,"append-to":b.appendTo},{default:pe(()=>[Ve(b.$slots,"content",{},()=>[b.rawContent?(ne(),Xe("span",{key:0,innerHTML:b.content},null,8,wb)):(ne(),Xe("span",Xb,Ot(b.content),1))]),b.showArrow?(ne(),He(I(My),{key:0,"arrow-offset":b.arrowOffset},null,8,["arrow-offset"])):Fe("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Wb=$e(Gb,[["__file","tooltip.vue"]]);const Rb=Ln(Wb),Ei=new Map;let go;$t&&(document.addEventListener("mousedown",n=>go=n),document.addEventListener("mouseup",n=>{for(const r of Ei.values())for(const{documentHandler:e}of r)e(n,go)}));function Zo(n,r){let e=[];return Array.isArray(r.arg)?e=r.arg:Pn(r.arg)&&e.push(r.arg),function(i,t){const s=r.instance.popperRef,a=i.target,l=t==null?void 0:t.target,o=!r||!r.instance,u=!a||!l,d=n.contains(a)||n.contains(l),c=n===a,h=e.length&&e.some(p=>p==null?void 0:p.contains(a))||e.length&&e.includes(l),f=s&&(s.contains(a)||s.contains(l));o||u||d||c||h||f||r.value(i,t)}}const Vb={beforeMount(n,r){Ei.has(n)||Ei.set(n,[]),Ei.get(n).push({documentHandler:Zo(n,r),bindingFn:r.value})},updated(n,r){Ei.has(n)||Ei.set(n,[]);const e=Ei.get(n),i=e.findIndex(s=>s.bindingFn===r.oldValue),t={documentHandler:Zo(n,r),bindingFn:r.value};i>=0?e.splice(i,1,t):e.push(t)},unmounted(n){Ei.delete(n)}},Zd=et({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Xa},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),Cb={close:n=>n instanceof MouseEvent,click:n=>n instanceof MouseEvent},Mb=ke({name:"ElTag"}),xb=ke({...Mb,props:Zd,emits:Cb,setup(n,{emit:r}){const e=n,i=qr(),t=ot("tag"),s=O(()=>{const{type:o,hit:u,effect:d,closable:c,round:h}=e;return[t.b(),t.is("closable",c),t.m(o||"primary"),t.m(i.value),t.m(d),t.is("hit",u),t.is("round",h)]}),a=o=>{r("close",o)},l=o=>{r("click",o)};return(o,u)=>o.disableTransitions?(ne(),Xe("span",{key:0,class:re(I(s)),style:xt({backgroundColor:o.color}),onClick:l},[Ye("span",{class:re(I(t).e("content"))},[Ve(o.$slots,"default")],2),o.closable?(ne(),He(I(Ns),{key:0,class:re(I(t).e("close")),onClick:Rt(a,["stop"])},{default:pe(()=>[Ce(I(bl))]),_:1},8,["class","onClick"])):Fe("v-if",!0)],6)):(ne(),He(Wa,{key:1,name:`${I(t).namespace.value}-zoom-in-center`,appear:""},{default:pe(()=>[Ye("span",{class:re(I(s)),style:xt({backgroundColor:o.color}),onClick:l},[Ye("span",{class:re(I(t).e("content"))},[Ve(o.$slots,"default")],2),o.closable?(ne(),He(I(Ns),{key:0,class:re(I(t).e("close")),onClick:Rt(a,["stop"])},{default:pe(()=>[Ce(I(bl))]),_:1},8,["class","onClick"])):Fe("v-if",!0)],6)]),_:3},8,["name"]))}});var Ib=$e(xb,[["__file","tag.vue"]]);const _b=Ln(Ib),kd=Symbol("ElSelectGroup"),ds=Symbol("ElSelect");function Fb(n,r){const e=qe(ds),i=qe(kd,{disabled:!1}),t=O(()=>e.props.multiple?d(e.props.modelValue,n.value):d([e.props.modelValue],n.value)),s=O(()=>{if(e.props.multiple){const f=e.props.modelValue||[];return!t.value&&f.length>=e.props.multipleLimit&&e.props.multipleLimit>0}else return!1}),a=O(()=>n.label||(Ti(n.value)?"":n.value)),l=O(()=>n.value||n.label||""),o=O(()=>n.disabled||r.groupDisabled||s.value),u=ts(),d=(f=[],p)=>{if(Ti(n.value)){const m=e.props.valueKey;return f&&f.some(g=>Eu(Xi(g,m))===Xi(p,m))}else return f&&f.includes(p)},c=()=>{!n.disabled&&!i.disabled&&(e.states.hoveringIndex=e.optionsArray.indexOf(u.proxy))},h=f=>{const p=new RegExp(s0(f),"i");r.visible=p.test(a.value)||n.created};return Ze(()=>a.value,()=>{!n.created&&!e.props.remote&&e.setSelected()}),Ze(()=>n.value,(f,p)=>{const{remote:m,valueKey:g}=e.props;if(Pr(f,p)||(e.onOptionDestroy(p,u.proxy),e.onOptionCreate(u.proxy)),!n.created&&!m){if(g&&Ti(f)&&Ti(p)&&f[g]===p[g])return;e.setSelected()}}),Ze(()=>i.disabled,()=>{r.groupDisabled=i.disabled},{immediate:!0}),{select:e,currentLabel:a,currentValue:l,itemSelected:t,isDisabled:o,hoverItem:c,updateOption:h}}const Yb=ke({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(n){const r=ot("select"),e=es(),i=O(()=>[r.be("dropdown","item"),r.is("disabled",I(l)),r.is("selected",I(a)),r.is("hovering",I(h))]),t=qt({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:a,isDisabled:l,select:o,hoverItem:u,updateOption:d}=Fb(n,t),{visible:c,hover:h}=is(t),f=ts().proxy;o.onOptionCreate(f),Yt(()=>{const m=f.value,{selected:g}=o.states,w=(o.props.multiple?g:[g]).some(S=>S.value===f.value);Tt(()=>{o.states.cachedOptions.get(m)===f&&!w&&o.states.cachedOptions.delete(m)}),o.onOptionDestroy(m,f)});function p(){n.disabled!==!0&&t.groupDisabled!==!0&&o.handleOptionSelect(f)}return{ns:r,id:e,containerKls:i,currentLabel:s,itemSelected:a,isDisabled:l,select:o,hoverItem:u,updateOption:d,visible:c,hover:h,selectOptionClick:p,states:t}}}),Pb=["id","aria-disabled","aria-selected"];function Db(n,r,e,i,t,s){return Gi((ne(),Xe("li",{id:n.id,class:re(n.containerKls),role:"option","aria-disabled":n.isDisabled||void 0,"aria-selected":n.itemSelected,onMouseenter:r[0]||(r[0]=(...a)=>n.hoverItem&&n.hoverItem(...a)),onClick:r[1]||(r[1]=Rt((...a)=>n.selectOptionClick&&n.selectOptionClick(...a),["stop"]))},[Ve(n.$slots,"default",{},()=>[Ye("span",null,Ot(n.currentLabel),1)])],42,Pb)),[[$n,n.visible]])}var Qa=$e(Yb,[["render",Db],["__file","option.vue"]]);const Kb=ke({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const n=qe(ds),r=ot("select"),e=O(()=>n.props.popperClass),i=O(()=>n.props.multiple),t=O(()=>n.props.fitInputWidth),s=$("");function a(){var l;s.value=`${(l=n.selectRef)==null?void 0:l.offsetWidth}px`}return St(()=>{a(),pi(n.selectRef,a)}),{ns:r,minWidth:s,popperClass:e,isMultiple:i,isFitInputWidth:t}}});function Nb(n,r,e,i,t,s){return ne(),Xe("div",{class:re([n.ns.b("dropdown"),n.ns.is("multiple",n.isMultiple),n.popperClass]),style:xt({[n.isFitInputWidth?"width":"minWidth"]:n.minWidth})},[n.$slots.header?(ne(),Xe("div",{key:0,class:re(n.ns.be("dropdown","header"))},[Ve(n.$slots,"header")],2)):Fe("v-if",!0),Ve(n.$slots,"default"),n.$slots.footer?(ne(),Xe("div",{key:1,class:re(n.ns.be("dropdown","footer"))},[Ve(n.$slots,"footer")],2)):Fe("v-if",!0)],6)}var Hb=$e(Kb,[["render",Nb],["__file","select-dropdown.vue"]]);function Ub(n){const r=$(!1);return{handleCompositionStart:()=>{r.value=!0},handleCompositionUpdate:s=>{const a=s.target.value,l=a[a.length-1]||"";r.value=!wh(l)},handleCompositionEnd:s=>{r.value&&(r.value=!1,Ct(n)&&n(s))}}}const Ob=11,zb=(n,r)=>{const{t:e}=th(),i=es(),t=ot("select"),s=ot("input"),a=qt({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:n.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),l=$(null),o=$(null),u=$(null),d=$(null),c=$(null),h=$(null),f=$(null),p=$(null),m=$(null),g=$(null),b=$(null),w=$(null),{wrapperRef:S,isFocused:k,handleFocus:L,handleBlur:T}=Xh(c,{afterFocus(){n.automaticDropdown&&!X.value&&(X.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(_){var A,Re;return((A=u.value)==null?void 0:A.isFocusInsideContent(_))||((Re=d.value)==null?void 0:Re.isFocusInsideContent(_))},afterBlur(){X.value=!1,a.menuVisibleOnFocus=!1}}),X=$(!1),G=$(),{form:C,formItem:x}=ih(),{inputId:N}=nh(n,{formItemContext:x}),y=O(()=>n.disabled||(C==null?void 0:C.disabled)),v=O(()=>F.value.some(_=>_.value==="")),Z=O(()=>n.multiple?Vt(n.modelValue)&&n.modelValue.length>0:!ns(n.modelValue)&&(n.modelValue!==""||v.value)),W=O(()=>n.clearable&&!y.value&&a.inputHovering&&Z.value),E=O(()=>n.remote&&n.filterable&&!n.remoteShowSuffix?"":n.suffixIcon),R=O(()=>t.is("reverse",E.value&&X.value)),M=O(()=>(x==null?void 0:x.validateState)||""),P=O(()=>rh[M.value]),Y=O(()=>n.remote?300:0),D=O(()=>n.loading?n.loadingText||e("el.select.loading"):n.remote&&!a.inputValue&&a.options.size===0?!1:n.filterable&&a.inputValue&&a.options.size>0&&q.value===0?n.noMatchText||e("el.select.noMatch"):a.options.size===0?n.noDataText||e("el.select.noData"):null),q=O(()=>F.value.filter(_=>_.visible).length),F=O(()=>{const _=Array.from(a.options.values()),A=[];return a.optionValues.forEach(Re=>{const Oe=_.findIndex(Zi=>Zi.value===Re);Oe>-1&&A.push(_[Oe])}),A.length>=_.length?A:_}),Se=O(()=>Array.from(a.cachedOptions.values())),fe=O(()=>{const _=F.value.filter(A=>!A.created).some(A=>A.currentLabel===a.inputValue);return n.filterable&&n.allowCreate&&a.inputValue!==""&&!_}),Pe=()=>{n.filterable&&Ct(n.filterMethod)||n.filterable&&n.remote&&Ct(n.remoteMethod)||F.value.forEach(_=>{var A;(A=_.updateOption)==null||A.call(_,a.inputValue)})},z=qr(),se=O(()=>["small"].includes(z.value)?"small":"default"),te=O({get(){return X.value&&D.value!==!1},set(_){X.value=_}}),be=O(()=>Vt(n.modelValue)?n.modelValue.length===0&&!a.inputValue:n.filterable?!a.inputValue:!0),Ee=O(()=>{var _;const A=(_=n.placeholder)!=null?_:e("el.select.placeholder");return n.multiple||!Z.value?A:a.selectedLabel});Ze(()=>n.modelValue,(_,A)=>{n.multiple&&n.filterable&&!n.reserveKeyword&&(a.inputValue="",Ne("")),li(),!Pr(_,A)&&n.validateEvent&&(x==null||x.validate("change").catch(Re=>wu()))},{flush:"post",deep:!0}),Ze(()=>X.value,_=>{_?Ne(a.inputValue):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0),r("visible-change",_)}),Ze(()=>a.options.entries(),()=>{var _;if(!$t)return;const A=((_=l.value)==null?void 0:_.querySelectorAll("input"))||[];(!n.filterable&&!n.defaultFirstOption&&!sh(n.modelValue)||!Array.from(A).includes(document.activeElement))&&li(),n.defaultFirstOption&&(n.filterable||n.remote)&&q.value&&ai()},{flush:"post"}),Ze(()=>a.hoveringIndex,_=>{fi(_)&&_>-1?G.value=F.value[_]||{}:G.value={},F.value.forEach(A=>{A.hover=G.value===A})}),Zh(()=>{a.isBeforeHide||Pe()});const Ne=_=>{a.previousQuery!==_&&(a.previousQuery=_,n.filterable&&Ct(n.filterMethod)?n.filterMethod(_):n.filterable&&n.remote&&Ct(n.remoteMethod)&&n.remoteMethod(_),n.defaultFirstOption&&(n.filterable||n.remote)&&q.value?Tt(ai):Tt(Ii))},ai=()=>{const _=F.value.filter(Oe=>Oe.visible&&!Oe.disabled&&!Oe.states.groupDisabled),A=_.find(Oe=>Oe.created),Re=_[0];a.hoveringIndex=dl(F.value,A||Re)},li=()=>{if(n.multiple)a.selectedLabel="";else{const A=xi(n.modelValue);a.selectedLabel=A.currentLabel,a.selected=A;return}const _=[];Vt(n.modelValue)&&n.modelValue.forEach(A=>{_.push(xi(A))}),a.selected=_},xi=_=>{let A;const Re=Ss(_).toLowerCase()==="object",Oe=Ss(_).toLowerCase()==="null",Zi=Ss(_).toLowerCase()==="undefined";for(let Fi=a.cachedOptions.size-1;Fi>=0;Fi--){const Jt=Se.value[Fi];if(Re?Xi(Jt.value,n.valueKey)===Xi(_,n.valueKey):Jt.value===_){A={value:_,currentLabel:Jt.currentLabel,isDisabled:Jt.isDisabled};break}}if(A)return A;const tn=Re?_.label:!Oe&&!Zi?_:"";return{value:_,currentLabel:tn}},Ii=()=>{n.multiple?a.hoveringIndex=F.value.findIndex(_=>a.selected.some(A=>Xn(A)===Xn(_))):a.hoveringIndex=F.value.findIndex(_=>Xn(_)===Xn(a.selected))},bi=()=>{a.selectionWidth=o.value.getBoundingClientRect().width},Wt=()=>{a.calculatorWidth=h.value.getBoundingClientRect().width},Pt=()=>{a.collapseItemWidth=b.value.getBoundingClientRect().width},Dt=()=>{var _,A;(A=(_=u.value)==null?void 0:_.updatePopper)==null||A.call(_)},_i=()=>{var _,A;(A=(_=d.value)==null?void 0:_.updatePopper)==null||A.call(_)},En=()=>{a.inputValue.length>0&&!X.value&&(X.value=!0),Ne(a.inputValue)},wn=_=>{if(a.inputValue=_.target.value,n.remote)en();else return En()},en=Wh(()=>{En()},Y.value),gi=_=>{Pr(n.modelValue,_)||r(Gu,_)},sr=_=>n0(_,A=>!a.disabledOptions.has(A)),ar=_=>{if(n.multiple&&_.code!==Kn.delete&&_.target.value.length<=0){const A=n.modelValue.slice(),Re=sr(A);if(Re<0)return;A.splice(Re,1),r(Si,A),gi(A)}},lr=(_,A)=>{const Re=a.selected.indexOf(A);if(Re>-1&&!y.value){const Oe=n.modelValue.slice();Oe.splice(Re,1),r(Si,Oe),gi(Oe),r("remove-tag",A.value)}_.stopPropagation(),ur()},ol=_=>{_.stopPropagation();const A=n.multiple?[]:void 0;if(n.multiple)for(const Re of a.selected)Re.isDisabled&&A.push(Re.value);r(Si,A),gi(A),a.hoveringIndex=-1,X.value=!1,r("clear"),ur()},ul=_=>{if(n.multiple){const A=(n.modelValue||[]).slice(),Re=dl(A,_.value);Re>-1?A.splice(Re,1):(n.multipleLimit<=0||A.length<n.multipleLimit)&&A.push(_.value),r(Si,A),gi(A),_.created&&Ne(""),n.filterable&&!n.reserveKeyword&&(a.inputValue="")}else r(Si,_.value),gi(_.value),X.value=!1;ur(),!X.value&&Tt(()=>{or(_)})},dl=(_=[],A)=>{if(!Ti(A))return _.indexOf(A);const Re=n.valueKey;let Oe=-1;return _.some((Zi,tn)=>Eu(Xi(Zi,Re))===Xi(A,Re)?(Oe=tn,!0):!1),Oe},or=_=>{var A,Re,Oe,Zi,tn;const dr=Vt(_)?_[0]:_;let Fi=null;if(dr!=null&&dr.value){const Jt=F.value.filter(fl=>fl.value===dr.value);Jt.length>0&&(Fi=Jt[0].$el)}if(u.value&&Fi){const Jt=(Zi=(Oe=(Re=(A=u.value)==null?void 0:A.popperRef)==null?void 0:Re.contentRef)==null?void 0:Oe.querySelector)==null?void 0:Zi.call(Oe,`.${t.be("dropdown","wrap")}`);Jt&&Rh(Jt,Fi)}(tn=w.value)==null||tn.handleScroll()},kc=_=>{a.options.set(_.value,_),a.cachedOptions.set(_.value,_),_.disabled&&a.disabledOptions.set(_.value,_)},Sc=(_,A)=>{a.options.get(_)===A&&a.options.delete(_)},{handleCompositionStart:Lc,handleCompositionUpdate:Ec,handleCompositionEnd:wc}=Ub(_=>wn(_)),Xc=O(()=>{var _,A;return(A=(_=u.value)==null?void 0:_.popperRef)==null?void 0:A.contentRef}),Tc=()=>{Tt(()=>or(a.selected))},ur=()=>{var _;(_=c.value)==null||_.focus()},Gc=()=>{cl()},Wc=_=>{ol(_)},cl=_=>{if(X.value=!1,k.value){const A=new FocusEvent("focus",_);Tt(()=>T(A))}},Rc=()=>{a.inputValue.length>0?a.inputValue="":X.value=!1},hl=()=>{y.value||(a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:X.value=!X.value)},Vc=()=>{X.value?F.value[a.hoveringIndex]&&ul(F.value[a.hoveringIndex]):hl()},Xn=_=>Ti(_.value)?Xi(_.value,n.valueKey):_.value,Cc=O(()=>F.value.filter(_=>_.visible).every(_=>_.disabled)),Mc=O(()=>n.multiple?n.collapseTags?a.selected.slice(0,n.maxCollapseTags):a.selected:[]),xc=O(()=>n.multiple?n.collapseTags?a.selected.slice(n.maxCollapseTags):[]:[]),pl=_=>{if(!X.value){X.value=!0;return}if(!(a.options.size===0||q.value===0)&&!Cc.value){_==="next"?(a.hoveringIndex++,a.hoveringIndex===a.options.size&&(a.hoveringIndex=0)):_==="prev"&&(a.hoveringIndex--,a.hoveringIndex<0&&(a.hoveringIndex=a.options.size-1));const A=F.value[a.hoveringIndex];(A.disabled===!0||A.states.groupDisabled===!0||!A.visible)&&pl(_),Tt(()=>or(G.value))}},Ic=()=>{if(!o.value)return 0;const _=window.getComputedStyle(o.value);return Number.parseFloat(_.gap||"6px")},_c=O(()=>{const _=Ic();return{maxWidth:`${b.value&&n.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-_:a.selectionWidth}px`}}),Fc=O(()=>({maxWidth:`${a.selectionWidth}px`})),Yc=O(()=>({width:`${Math.max(a.calculatorWidth,Ob)}px`}));return n.multiple&&!Vt(n.modelValue)&&r(Si,[]),!n.multiple&&Vt(n.modelValue)&&r(Si,""),pi(o,bi),pi(h,Wt),pi(m,Dt),pi(S,Dt),pi(g,_i),pi(b,Pt),St(()=>{li()}),{inputId:N,contentId:i,nsSelect:t,nsInput:s,states:a,isFocused:k,expanded:X,optionsArray:F,hoverOption:G,selectSize:z,filteredOptionsCount:q,resetCalculatorWidth:Wt,updateTooltip:Dt,updateTagTooltip:_i,debouncedOnInputChange:en,onInput:wn,deletePrevTag:ar,deleteTag:lr,deleteSelected:ol,handleOptionSelect:ul,scrollToOption:or,hasModelValue:Z,shouldShowPlaceholder:be,currentPlaceholder:Ee,showClose:W,iconComponent:E,iconReverse:R,validateState:M,validateIcon:P,showNewOption:fe,updateOptions:Pe,collapseTagSize:se,setSelected:li,selectDisabled:y,emptyText:D,handleCompositionStart:Lc,handleCompositionUpdate:Ec,handleCompositionEnd:wc,onOptionCreate:kc,onOptionDestroy:Sc,handleMenuEnter:Tc,handleFocus:L,focus:ur,blur:Gc,handleBlur:T,handleClearClick:Wc,handleClickOutside:cl,handleEsc:Rc,toggleMenu:hl,selectOption:Vc,getValueKey:Xn,navigateOptions:pl,dropdownMenuVisible:te,showTagList:Mc,collapseTagList:xc,tagStyle:_c,collapseTagStyle:Fc,inputStyle:Yc,popperRef:Xc,inputRef:c,tooltipRef:u,tagTooltipRef:d,calculatorRef:h,prefixRef:f,suffixRef:p,selectRef:l,wrapperRef:S,selectionRef:o,scrollbarRef:w,menuRef:m,tagMenuRef:g,collapseItemRef:b}};var Ab=ke({name:"ElOptions",setup(n,{slots:r}){const e=qe(ds);let i=[];return()=>{var t,s;const a=(t=r.default)==null?void 0:t.call(r),l=[];function o(u){Vt(u)&&u.forEach(d=>{var c,h,f,p;const m=(c=(d==null?void 0:d.type)||{})==null?void 0:c.name;m==="ElOptionGroup"?o(!Dn(d.children)&&!Vt(d.children)&&Ct((h=d.children)==null?void 0:h.default)?(f=d.children)==null?void 0:f.default():d.children):m==="ElOption"?l.push((p=d.props)==null?void 0:p.value):Vt(d.children)&&o(d.children)})}return a.length&&o((s=a[0])==null?void 0:s.children),Pr(l,i)||(i=l,e&&(e.states.optionValues=l)),a}}});const Bb=et({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:ah,effect:{type:Le(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Le(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:ja.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:gl,default:lh},fitInputWidth:Boolean,suffixIcon:{type:gl,default:oh},tagType:{...Zd.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:Le(String),values:ls,default:"bottom-start"},fallbackPlacements:{type:Le(Array),default:["bottom-start","top-start","right","left"]},ariaLabel:{type:String,default:void 0}}),ko="ElSelect",Jb=ke({name:ko,componentName:ko,components:{ElInput:Wu,ElSelectMenu:Hb,ElOption:Qa,ElOptions:Ab,ElTag:_b,ElScrollbar:Xy,ElTooltip:Rb,ElIcon:Ns},directives:{ClickOutside:Vb},props:Bb,emits:[Si,Gu,"remove-tag","clear","visible-change","focus","blur"],setup(n,{emit:r}){const e=zb(n,r);return At(ds,qt({props:n,states:e.states,optionsArray:e.optionsArray,handleOptionSelect:e.handleOptionSelect,onOptionCreate:e.onOptionCreate,onOptionDestroy:e.onOptionDestroy,selectRef:e.selectRef,setSelected:e.setSelected})),{...e}}}),jb=["id","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],Qb=["textContent"];function $b(n,r,e,i,t,s){const a=ki("el-tag"),l=ki("el-tooltip"),o=ki("el-icon"),u=ki("el-option"),d=ki("el-options"),c=ki("el-scrollbar"),h=ki("el-select-menu"),f=kh("click-outside");return Gi((ne(),Xe("div",{ref:"selectRef",class:re([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),onMouseenter:r[16]||(r[16]=p=>n.states.inputHovering=!0),onMouseleave:r[17]||(r[17]=p=>n.states.inputHovering=!1),onClick:r[18]||(r[18]=Rt((...p)=>n.toggleMenu&&n.toggleMenu(...p),["prevent","stop"]))},[Ce(l,{ref:"tooltipRef",visible:n.dropdownMenuVisible,placement:n.placement,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,pure:"",trigger:"click",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:n.persistent,onBeforeShow:n.handleMenuEnter,onHide:r[15]||(r[15]=p=>n.states.isBeforeHide=!1)},{default:pe(()=>{var p;return[Ye("div",{ref:"wrapperRef",class:re([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)])},[n.$slots.prefix?(ne(),Xe("div",{key:0,ref:"prefixRef",class:re(n.nsSelect.e("prefix"))},[Ve(n.$slots,"prefix")],2)):Fe("v-if",!0),Ye("div",{ref:"selectionRef",class:re([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.states.selected.length)])},[n.multiple?Ve(n.$slots,"tag",{key:0},()=>[(ne(!0),Xe(pn,null,Us(n.showTagList,m=>(ne(),Xe("div",{key:n.getValueKey(m),class:re(n.nsSelect.e("selected-item"))},[Ce(a,{closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,"disable-transitions":"",style:xt(n.tagStyle),onClose:g=>n.deleteTag(g,m)},{default:pe(()=>[Ye("span",{class:re(n.nsSelect.e("tags-text"))},Ot(m.currentLabel),3)]),_:2},1032,["closable","size","type","style","onClose"])],2))),128)),n.collapseTags&&n.states.selected.length>n.maxCollapseTags?(ne(),He(l,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:pe(()=>[Ye("div",{ref:"collapseItemRef",class:re(n.nsSelect.e("selected-item"))},[Ce(a,{closable:!1,size:n.collapseTagSize,type:n.tagType,"disable-transitions":"",style:xt(n.collapseTagStyle)},{default:pe(()=>[Ye("span",{class:re(n.nsSelect.e("tags-text"))}," + "+Ot(n.states.selected.length-n.maxCollapseTags),3)]),_:1},8,["size","type","style"])],2)]),content:pe(()=>[Ye("div",{ref:"tagMenuRef",class:re(n.nsSelect.e("selection"))},[(ne(!0),Xe(pn,null,Us(n.collapseTagList,m=>(ne(),Xe("div",{key:n.getValueKey(m),class:re(n.nsSelect.e("selected-item"))},[Ce(a,{class:"in-tooltip",closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,"disable-transitions":"",onClose:g=>n.deleteTag(g,m)},{default:pe(()=>[Ye("span",{class:re(n.nsSelect.e("tags-text"))},Ot(m.currentLabel),3)]),_:2},1032,["closable","size","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):Fe("v-if",!0)]):Fe("v-if",!0),n.selectDisabled?Fe("v-if",!0):(ne(),Xe("div",{key:1,class:re([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Gi(Ye("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":r[0]||(r[0]=m=>n.states.inputValue=m),type:"text",class:re([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,autocomplete:n.autocomplete,style:xt(n.inputStyle),role:"combobox",readonly:!n.filterable,spellcheck:"false","aria-activedescendant":((p=n.hoverOption)==null?void 0:p.id)||"","aria-controls":n.contentId,"aria-expanded":n.dropdownMenuVisible,"aria-label":n.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:r[1]||(r[1]=(...m)=>n.handleFocus&&n.handleFocus(...m)),onBlur:r[2]||(r[2]=(...m)=>n.handleBlur&&n.handleBlur(...m)),onKeydown:[r[3]||(r[3]=Tn(Rt(m=>n.navigateOptions("next"),["stop","prevent"]),["down"])),r[4]||(r[4]=Tn(Rt(m=>n.navigateOptions("prev"),["stop","prevent"]),["up"])),r[5]||(r[5]=Tn(Rt((...m)=>n.handleEsc&&n.handleEsc(...m),["stop","prevent"]),["esc"])),r[6]||(r[6]=Tn(Rt((...m)=>n.selectOption&&n.selectOption(...m),["stop","prevent"]),["enter"])),r[7]||(r[7]=Tn(Rt((...m)=>n.deletePrevTag&&n.deletePrevTag(...m),["stop"]),["delete"]))],onCompositionstart:r[8]||(r[8]=(...m)=>n.handleCompositionStart&&n.handleCompositionStart(...m)),onCompositionupdate:r[9]||(r[9]=(...m)=>n.handleCompositionUpdate&&n.handleCompositionUpdate(...m)),onCompositionend:r[10]||(r[10]=(...m)=>n.handleCompositionEnd&&n.handleCompositionEnd(...m)),onInput:r[11]||(r[11]=(...m)=>n.onInput&&n.onInput(...m)),onClick:r[12]||(r[12]=Rt((...m)=>n.toggleMenu&&n.toggleMenu(...m),["stop"]))},null,46,jb),[[Sh,n.states.inputValue]]),n.filterable?(ne(),Xe("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:re(n.nsSelect.e("input-calculator")),textContent:Ot(n.states.inputValue)},null,10,Qb)):Fe("v-if",!0)],2)),n.shouldShowPlaceholder?(ne(),Xe("div",{key:2,class:re([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[Ye("span",null,Ot(n.currentPlaceholder),1)],2)):Fe("v-if",!0)],2),Ye("div",{ref:"suffixRef",class:re(n.nsSelect.e("suffix"))},[n.iconComponent&&!n.showClose?(ne(),He(o,{key:0,class:re([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.iconReverse])},{default:pe(()=>[(ne(),He(Mn(n.iconComponent)))]),_:1},8,["class"])):Fe("v-if",!0),n.showClose&&n.clearIcon?(ne(),He(o,{key:1,class:re([n.nsSelect.e("caret"),n.nsSelect.e("icon")]),onClick:n.handleClearClick},{default:pe(()=>[(ne(),He(Mn(n.clearIcon)))]),_:1},8,["class","onClick"])):Fe("v-if",!0),n.validateState&&n.validateIcon?(ne(),He(o,{key:2,class:re([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:pe(()=>[(ne(),He(Mn(n.validateIcon)))]),_:1},8,["class"])):Fe("v-if",!0)],2)],2)]}),content:pe(()=>[Ce(h,{ref:"menuRef"},{default:pe(()=>[n.$slots.header?(ne(),Xe("div",{key:0,class:re(n.nsSelect.be("dropdown","header")),onClick:r[13]||(r[13]=Rt(()=>{},["stop"]))},[Ve(n.$slots,"header")],2)):Fe("v-if",!0),Gi(Ce(c,{id:n.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":n.nsSelect.be("dropdown","wrap"),"view-class":n.nsSelect.be("dropdown","list"),class:re([n.nsSelect.is("empty",n.filteredOptionsCount===0)]),role:"listbox","aria-label":n.ariaLabel,"aria-orientation":"vertical"},{default:pe(()=>[n.showNewOption?(ne(),He(u,{key:0,value:n.states.inputValue,created:!0},null,8,["value"])):Fe("v-if",!0),Ce(d,null,{default:pe(()=>[Ve(n.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[$n,n.states.options.size>0&&!n.loading]]),n.$slots.loading&&n.loading?(ne(),Xe("div",{key:1,class:re(n.nsSelect.be("dropdown","loading"))},[Ve(n.$slots,"loading")],2)):n.loading||n.filteredOptionsCount===0?(ne(),Xe("div",{key:2,class:re(n.nsSelect.be("dropdown","empty"))},[Ve(n.$slots,"empty",{},()=>[Ye("span",null,Ot(n.emptyText),1)])],2)):Fe("v-if",!0),n.$slots.footer?(ne(),Xe("div",{key:3,class:re(n.nsSelect.be("dropdown","footer")),onClick:r[14]||(r[14]=Rt(()=>{},["stop"]))},[Ve(n.$slots,"footer")],2)):Fe("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],34)),[[f,n.handleClickOutside,n.popperRef]])}var qb=$e(Jb,[["render",$b],["__file","select.vue"]]);const eg=ke({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(n){const r=ot("select"),e=$(null),i=ts(),t=$([]);At(kd,qt({...is(n)}));const s=O(()=>t.value.some(o=>o.visible===!0)),a=o=>{const u=[];return Vt(o.children)&&o.children.forEach(d=>{var c,h;d.type&&d.type.name==="ElOption"&&d.component&&d.component.proxy?u.push(d.component.proxy):(c=d.children)!=null&&c.length?u.push(...a(d)):(h=d.component)!=null&&h.subTree&&u.push(...a(d.component.subTree))}),u},l=()=>{t.value=a(i.subTree)};return St(()=>{l()}),Th(e,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:e,visible:s,ns:r}}});function tg(n,r,e,i,t,s){return Gi((ne(),Xe("ul",{ref:"groupRef",class:re(n.ns.be("group","wrap"))},[Ye("li",{class:re(n.ns.be("group","title"))},Ot(n.label),3),Ye("li",null,[Ye("ul",{class:re(n.ns.b("group"))},[Ve(n.$slots,"default")],2)])],2)),[[$n,n.visible]])}var Sd=$e(eg,[["render",tg],["__file","option-group.vue"]]);const ig=Ln(qb,{Option:Qa,OptionGroup:Sd}),ng=Ga(Qa);Ga(Sd);function So(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);r&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,i)}return e}function ht(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?So(Object(e),!0).forEach(function(i){ee(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):So(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function ve(){ve=function(){return n};var n={},r=Object.prototype,e=r.hasOwnProperty,i=Object.defineProperty||function(y,v,Z){y[v]=Z.value},t=typeof Symbol=="function"?Symbol:{},s=t.iterator||"@@iterator",a=t.asyncIterator||"@@asyncIterator",l=t.toStringTag||"@@toStringTag";function o(y,v,Z){return Object.defineProperty(y,v,{value:Z,enumerable:!0,configurable:!0,writable:!0}),y[v]}try{o({},"")}catch{o=function(v,Z,W){return v[Z]=W}}function u(y,v,Z,W){var E=v&&v.prototype instanceof h?v:h,R=Object.create(E.prototype),M=new C(W||[]);return i(R,"_invoke",{value:L(y,Z,M)}),R}function d(y,v,Z){try{return{type:"normal",arg:y.call(v,Z)}}catch(W){return{type:"throw",arg:W}}}n.wrap=u;var c={};function h(){}function f(){}function p(){}var m={};o(m,s,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(x([])));b&&b!==r&&e.call(b,s)&&(m=b);var w=p.prototype=h.prototype=Object.create(m);function S(y){["next","throw","return"].forEach(function(v){o(y,v,function(Z){return this._invoke(v,Z)})})}function k(y,v){function Z(E,R,M,P){var Y=d(y[E],y,R);if(Y.type!=="throw"){var D=Y.arg,q=D.value;return q&&typeof q=="object"&&e.call(q,"__await")?v.resolve(q.__await).then(function(F){Z("next",F,M,P)},function(F){Z("throw",F,M,P)}):v.resolve(q).then(function(F){D.value=F,M(D)},function(F){return Z("throw",F,M,P)})}P(Y.arg)}var W;i(this,"_invoke",{value:function(E,R){function M(){return new v(function(P,Y){Z(E,R,P,Y)})}return W=W?W.then(M,M):M()}})}function L(y,v,Z){var W="suspendedStart";return function(E,R){if(W==="executing")throw new Error("Generator is already running");if(W==="completed"){if(E==="throw")throw R;return N()}for(Z.method=E,Z.arg=R;;){var M=Z.delegate;if(M){var P=T(M,Z);if(P){if(P===c)continue;return P}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(W==="suspendedStart")throw W="completed",Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);W="executing";var Y=d(y,v,Z);if(Y.type==="normal"){if(W=Z.done?"completed":"suspendedYield",Y.arg===c)continue;return{value:Y.arg,done:Z.done}}Y.type==="throw"&&(W="completed",Z.method="throw",Z.arg=Y.arg)}}}function T(y,v){var Z=v.method,W=y.iterator[Z];if(W===void 0)return v.delegate=null,Z==="throw"&&y.iterator.return&&(v.method="return",v.arg=void 0,T(y,v),v.method==="throw")||Z!=="return"&&(v.method="throw",v.arg=new TypeError("The iterator does not provide a '"+Z+"' method")),c;var E=d(W,y.iterator,v.arg);if(E.type==="throw")return v.method="throw",v.arg=E.arg,v.delegate=null,c;var R=E.arg;return R?R.done?(v[y.resultName]=R.value,v.next=y.nextLoc,v.method!=="return"&&(v.method="next",v.arg=void 0),v.delegate=null,c):R:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,c)}function X(y){var v={tryLoc:y[0]};1 in y&&(v.catchLoc=y[1]),2 in y&&(v.finallyLoc=y[2],v.afterLoc=y[3]),this.tryEntries.push(v)}function G(y){var v=y.completion||{};v.type="normal",delete v.arg,y.completion=v}function C(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(X,this),this.reset(!0)}function x(y){if(y){var v=y[s];if(v)return v.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var Z=-1,W=function E(){for(;++Z<y.length;)if(e.call(y,Z))return E.value=y[Z],E.done=!1,E;return E.value=void 0,E.done=!0,E};return W.next=W}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(w,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=o(p,l,"GeneratorFunction"),n.isGeneratorFunction=function(y){var v=typeof y=="function"&&y.constructor;return!!v&&(v===f||(v.displayName||v.name)==="GeneratorFunction")},n.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,p):(y.__proto__=p,o(y,l,"GeneratorFunction")),y.prototype=Object.create(w),y},n.awrap=function(y){return{__await:y}},S(k.prototype),o(k.prototype,a,function(){return this}),n.AsyncIterator=k,n.async=function(y,v,Z,W,E){E===void 0&&(E=Promise);var R=new k(u(y,v,Z,W),E);return n.isGeneratorFunction(v)?R:R.next().then(function(M){return M.done?M.value:R.next()})},S(w),o(w,l,"Generator"),o(w,s,function(){return this}),o(w,"toString",function(){return"[object Generator]"}),n.keys=function(y){var v=Object(y),Z=[];for(var W in v)Z.push(W);return Z.reverse(),function E(){for(;Z.length;){var R=Z.pop();if(R in v)return E.value=R,E.done=!1,E}return E.done=!0,E}},n.values=x,C.prototype={constructor:C,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!y)for(var v in this)v.charAt(0)==="t"&&e.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if(y.type==="throw")throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var v=this;function Z(Y,D){return R.type="throw",R.arg=y,v.next=Y,D&&(v.method="next",v.arg=void 0),!!D}for(var W=this.tryEntries.length-1;W>=0;--W){var E=this.tryEntries[W],R=E.completion;if(E.tryLoc==="root")return Z("end");if(E.tryLoc<=this.prev){var M=e.call(E,"catchLoc"),P=e.call(E,"finallyLoc");if(M&&P){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0);if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}else if(M){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}}}},abrupt:function(y,v){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var W=this.tryEntries[Z];if(W.tryLoc<=this.prev&&e.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var E=W;break}}E&&(y==="break"||y==="continue")&&E.tryLoc<=v&&v<=E.finallyLoc&&(E=null);var R=E?E.completion:{};return R.type=y,R.arg=v,E?(this.method="next",this.next=E.finallyLoc,c):this.complete(R)},complete:function(y,v){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&v&&(this.next=v),c},finish:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.finallyLoc===y)return this.complete(Z.completion,Z.afterLoc),G(Z),c}},catch:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.tryLoc===y){var W=Z.completion;if(W.type==="throw"){var E=W.arg;G(Z)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(y,v,Z){return this.delegate={iterator:x(y),resultName:v,nextLoc:Z},this.method==="next"&&(this.arg=void 0),c}},n}function ra(n){"@babel/helpers - typeof";return ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ra(n)}function Lo(n,r,e,i,t,s,a){try{var l=n[s](a),o=l.value}catch(u){e(u);return}l.done?r(o):Promise.resolve(o).then(i,t)}function at(n){return function(){var r=this,e=arguments;return new Promise(function(i,t){var s=n.apply(r,e);function a(o){Lo(s,i,t,a,l,"next",o)}function l(o){Lo(s,i,t,a,l,"throw",o)}a(void 0)})}}function cs(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Eo(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,wd(i.key),i)}}function hs(n,r,e){return r&&Eo(n.prototype,r),e&&Eo(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ee(n,r,e){return r=wd(r),r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function Ld(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&sa(n,r)}function Kr(n){return Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kr(n)}function sa(n,r){return sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},sa(n,r)}function rg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function de(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sg(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return de(n)}function Ed(n){var r=rg();return function(){var i=Kr(n),t;if(r){var s=Kr(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return sg(this,t)}}function ag(n,r){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function wd(n){var r=ag(n,"string");return typeof r=="symbol"?r:String(r)}function wo(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);r&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,i)}return e}function zn(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?wo(Object(e),!0).forEach(function(i){H(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):wo(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function ze(){ze=function(){return n};var n={},r=Object.prototype,e=r.hasOwnProperty,i=Object.defineProperty||function(y,v,Z){y[v]=Z.value},t=typeof Symbol=="function"?Symbol:{},s=t.iterator||"@@iterator",a=t.asyncIterator||"@@asyncIterator",l=t.toStringTag||"@@toStringTag";function o(y,v,Z){return Object.defineProperty(y,v,{value:Z,enumerable:!0,configurable:!0,writable:!0}),y[v]}try{o({},"")}catch{o=function(v,Z,W){return v[Z]=W}}function u(y,v,Z,W){var E=v&&v.prototype instanceof h?v:h,R=Object.create(E.prototype),M=new C(W||[]);return i(R,"_invoke",{value:L(y,Z,M)}),R}function d(y,v,Z){try{return{type:"normal",arg:y.call(v,Z)}}catch(W){return{type:"throw",arg:W}}}n.wrap=u;var c={};function h(){}function f(){}function p(){}var m={};o(m,s,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(x([])));b&&b!==r&&e.call(b,s)&&(m=b);var w=p.prototype=h.prototype=Object.create(m);function S(y){["next","throw","return"].forEach(function(v){o(y,v,function(Z){return this._invoke(v,Z)})})}function k(y,v){function Z(E,R,M,P){var Y=d(y[E],y,R);if(Y.type!=="throw"){var D=Y.arg,q=D.value;return q&&typeof q=="object"&&e.call(q,"__await")?v.resolve(q.__await).then(function(F){Z("next",F,M,P)},function(F){Z("throw",F,M,P)}):v.resolve(q).then(function(F){D.value=F,M(D)},function(F){return Z("throw",F,M,P)})}P(Y.arg)}var W;i(this,"_invoke",{value:function(E,R){function M(){return new v(function(P,Y){Z(E,R,P,Y)})}return W=W?W.then(M,M):M()}})}function L(y,v,Z){var W="suspendedStart";return function(E,R){if(W==="executing")throw new Error("Generator is already running");if(W==="completed"){if(E==="throw")throw R;return N()}for(Z.method=E,Z.arg=R;;){var M=Z.delegate;if(M){var P=T(M,Z);if(P){if(P===c)continue;return P}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(W==="suspendedStart")throw W="completed",Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);W="executing";var Y=d(y,v,Z);if(Y.type==="normal"){if(W=Z.done?"completed":"suspendedYield",Y.arg===c)continue;return{value:Y.arg,done:Z.done}}Y.type==="throw"&&(W="completed",Z.method="throw",Z.arg=Y.arg)}}}function T(y,v){var Z=v.method,W=y.iterator[Z];if(W===void 0)return v.delegate=null,Z==="throw"&&y.iterator.return&&(v.method="return",v.arg=void 0,T(y,v),v.method==="throw")||Z!=="return"&&(v.method="throw",v.arg=new TypeError("The iterator does not provide a '"+Z+"' method")),c;var E=d(W,y.iterator,v.arg);if(E.type==="throw")return v.method="throw",v.arg=E.arg,v.delegate=null,c;var R=E.arg;return R?R.done?(v[y.resultName]=R.value,v.next=y.nextLoc,v.method!=="return"&&(v.method="next",v.arg=void 0),v.delegate=null,c):R:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,c)}function X(y){var v={tryLoc:y[0]};1 in y&&(v.catchLoc=y[1]),2 in y&&(v.finallyLoc=y[2],v.afterLoc=y[3]),this.tryEntries.push(v)}function G(y){var v=y.completion||{};v.type="normal",delete v.arg,y.completion=v}function C(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(X,this),this.reset(!0)}function x(y){if(y){var v=y[s];if(v)return v.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var Z=-1,W=function E(){for(;++Z<y.length;)if(e.call(y,Z))return E.value=y[Z],E.done=!1,E;return E.value=void 0,E.done=!0,E};return W.next=W}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(w,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=o(p,l,"GeneratorFunction"),n.isGeneratorFunction=function(y){var v=typeof y=="function"&&y.constructor;return!!v&&(v===f||(v.displayName||v.name)==="GeneratorFunction")},n.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,p):(y.__proto__=p,o(y,l,"GeneratorFunction")),y.prototype=Object.create(w),y},n.awrap=function(y){return{__await:y}},S(k.prototype),o(k.prototype,a,function(){return this}),n.AsyncIterator=k,n.async=function(y,v,Z,W,E){E===void 0&&(E=Promise);var R=new k(u(y,v,Z,W),E);return n.isGeneratorFunction(v)?R:R.next().then(function(M){return M.done?M.value:R.next()})},S(w),o(w,l,"Generator"),o(w,s,function(){return this}),o(w,"toString",function(){return"[object Generator]"}),n.keys=function(y){var v=Object(y),Z=[];for(var W in v)Z.push(W);return Z.reverse(),function E(){for(;Z.length;){var R=Z.pop();if(R in v)return E.value=R,E.done=!1,E}return E.done=!0,E}},n.values=x,C.prototype={constructor:C,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!y)for(var v in this)v.charAt(0)==="t"&&e.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if(y.type==="throw")throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var v=this;function Z(Y,D){return R.type="throw",R.arg=y,v.next=Y,D&&(v.method="next",v.arg=void 0),!!D}for(var W=this.tryEntries.length-1;W>=0;--W){var E=this.tryEntries[W],R=E.completion;if(E.tryLoc==="root")return Z("end");if(E.tryLoc<=this.prev){var M=e.call(E,"catchLoc"),P=e.call(E,"finallyLoc");if(M&&P){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0);if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}else if(M){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}}}},abrupt:function(y,v){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var W=this.tryEntries[Z];if(W.tryLoc<=this.prev&&e.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var E=W;break}}E&&(y==="break"||y==="continue")&&E.tryLoc<=v&&v<=E.finallyLoc&&(E=null);var R=E?E.completion:{};return R.type=y,R.arg=v,E?(this.method="next",this.next=E.finallyLoc,c):this.complete(R)},complete:function(y,v){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&v&&(this.next=v),c},finish:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.finallyLoc===y)return this.complete(Z.completion,Z.afterLoc),G(Z),c}},catch:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.tryLoc===y){var W=Z.completion;if(W.type==="throw"){var E=W.arg;G(Z)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(y,v,Z){return this.delegate={iterator:x(y),resultName:v,nextLoc:Z},this.method==="next"&&(this.arg=void 0),c}},n}function Bi(n){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bi(n)}function Xo(n,r,e,i,t,s,a){try{var l=n[s](a),o=l.value}catch(u){e(u);return}l.done?r(o):Promise.resolve(o).then(i,t)}function mi(n){return function(){var r=this,e=arguments;return new Promise(function(i,t){var s=n.apply(r,e);function a(o){Xo(s,i,t,a,l,"next",o)}function l(o){Xo(s,i,t,a,l,"throw",o)}a(void 0)})}}function Lt(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function To(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Td(i.key),i)}}function Et(n,r,e){return r&&To(n.prototype,r),e&&To(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function H(n,r,e){return r=Td(r),r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function ir(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&An(n,r)}function Ji(n){return Ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ji(n)}function An(n,r){return An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},An(n,r)}function Xd(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rr(n,r,e){return Xd()?Rr=Reflect.construct.bind():Rr=function(t,s,a){var l=[null];l.push.apply(l,s);var o=Function.bind.apply(t,l),u=new o;return a&&An(u,a.prototype),u},Rr.apply(null,arguments)}function lg(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Nr(n){var r=typeof Map=="function"?new Map:void 0;return Nr=function(i){if(i===null||!lg(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(i))return r.get(i);r.set(i,t)}function t(){return Rr(i,arguments,Ji(this).constructor)}return t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),An(t,i)},Nr(n)}function og(n,r){if(n==null)return{};var e={},i=Object.keys(n),t,s;for(s=0;s<i.length;s++)t=i[s],!(r.indexOf(t)>=0)&&(e[t]=n[t]);return e}function ug(n,r){if(n==null)return{};var e=og(n,r),i,t;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(t=0;t<s.length;t++)i=s[t],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function ie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function dg(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ie(n)}function nr(n){var r=Xd();return function(){var i=Ji(n),t;if(r){var s=Ji(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return dg(this,t)}}function cg(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=Ji(n),n!==null););return n}function Vr(){return typeof Reflect<"u"&&Reflect.get?Vr=Reflect.get.bind():Vr=function(r,e,i){var t=cg(r,e);if(t){var s=Object.getOwnPropertyDescriptor(t,e);return s.get?s.get.call(arguments.length<3?r:i):s.value}},Vr.apply(this,arguments)}function hg(n,r){if(n){if(typeof n=="string")return Go(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Go(n,r)}}function Go(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,i=new Array(r);e<r;e++)i[e]=n[e];return i}function pg(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=hg(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var i=0,t=function(){};return{s:t,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(o){throw o},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){a=!0,l=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(a)throw l}}}}function fg(n,r){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Td(n){var r=fg(n,"string");return typeof r=="symbol"?r:String(r)}var De=function(){function n(){Lt(this,n)}return Et(n,null,[{key:"start",value:function(e){return!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6||e.length===1&&e.start(0)<0?0:e.start(0)}},{key:"end",value:function(e){return!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6?0:e.end(e.length-1)}},{key:"get",value:function(e){if(e)try{return e.buffered}catch{}}},{key:"buffers",value:function(e,i){if(!e||!e.length)return[];for(var t=[],s=0,a=e.length;s<a;s++){var l=t.length;if(!l||!i)t.push([e.start(s),e.end(s)]);else{var o=t[l-1],u=o[1],d=e.start(s);if(d-u<=i){var c=e.end(s);c>u&&(o[1]=c)}else t.push([e.start(s),e.end(s)])}}return t}},{key:"totalLength",value:function(e){return!e||!e.length?0:e.reduce(function(i,t){return i+=t[1]-t[0]},0)}},{key:"info",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!e||!e.length)return{start:0,end:0,buffers:[]};for(var s=0,a=0,l=0,o=0,u=0,d=0,c=0,h=n.buffers(e,t),f=0,p=h.length;f<p;f++){var m=h[f];if(i+t>=m[0]&&i<=m[1])s=m[0],a=m[1],l=f;else if(i+t<m[0]){o=m[0],u=m[1];break}else i+t>m[1]&&(d=m[0],c=m[1])}return{start:s,end:a,index:l,buffers:h,nextStart:o,nextEnd:u,prevStart:d,prevEnd:c,currentTime:i,behind:i-s,remaining:a?a-i:0,length:n.totalLength&&n.totalLength(h)}}},{key:"isBuffered",value:function(e,i){if(e){var t=n.get(e);if(t!=null&&t.length){for(var s=0;s<t.length;s++)if(i>=t.start(s)&&i<=t.end(s))return!0}}return!1}}]),n}(),mg=typeof window<"u",mt,J={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",NETWORK_FORBIDDEN:"network_forbidden",NETWORK_NOTFOUND:"network_notfound",NETWROK_RANGE_NOT_SATISFIABLE:"network_range_not_satisfiable",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",RUNTIME:"runtime",SUB_TYPES:{FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",MSE_CHANGE_TYPE:"MSE_CHANGE_TYPE",OPTION:"OPTION",DASH:"DASH",LICENSE:"LICENSE",CUSTOM_LICENSE:"CUSTOM_LICENSE",MSE_HIJACK:"MSE_HIJACK",EME_HIJACK:"EME_HIJACK",SIDX:"SIDX",NO_CANPLAY_ERROR:"NO_CANPLAY_ERROR",BUFFERBREAK_ERROR:"BUFFERBREAK_ERROR",WAITING_TIMEOUT_ERROR:"WAITING_TIMEOUT_ERROR",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_CODEC_NOT_SUPPORTED:"MEDIA_ERR_CODEC_NOT_SUPPORTED",MEDIA_ERR_URL_EMPTY:"MEDIA_ERR_URL_EMPTY"}},Ue=(mt={},H(mt,J.MANIFEST,{HLS:1100,DASH:1200}),H(mt,J.NETWORK,2100),H(mt,J.NETWORK_TIMEOUT,2101),H(mt,J.NETWORK_FORBIDDEN,2103),H(mt,J.NETWORK_NOTFOUND,2104),H(mt,J.NETWROK_RANGE_NOT_SATISFIABLE,2116),H(mt,J.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),H(mt,J.REMUX,{FMP4:4100,MP4:4200}),H(mt,J.MEDIA,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,MSE_CHANGE_TYPE:5205,EME_HIJACK:5301}),H(mt,J.DRM,{LICENSE:7100,CUSTOM_LICENSE:7200}),H(mt,J.OTHER,8e3),H(mt,J.RUNTIME,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),mt),Te=function(n){ir(e,n);var r=nr(e);function e(i,t,s,a,l){var o;return Lt(this,e),o=r.call(this,l||(s==null?void 0:s.message)),o.errorType=i===J.NETWORK_TIMEOUT?J.NETWORK:i,o.originError=s,o.ext=a,o.errorCode=Ue[i][t]||Ue[i],o.errorMessage=o.message,o.errorCode||(o.errorType=J.OTHER,o.errorCode=Ue[o.errorType]),o}return Et(e,null,[{key:"create",value:function(t,s,a,l,o){return t instanceof e?t:(t instanceof Error&&(a=t,t=""),t||(t=J.OTHER),new e(t,s,a,l,o))}},{key:"network",value:function(t){var s;return new e(t!=null&&t.isTimeout?J.NETWORK_TIMEOUT:J.NETWORK,null,t instanceof Error?t:null,{url:t==null?void 0:t.url,response:t==null?void 0:t.response,httpCode:t==null||(s=t.response)===null||s===void 0?void 0:s.status})}}]),e}(Nr(Error)),gr={DEBUG:1,LOG:2,WARN:3,ERROR:4},vg=200*1024,yg=["Boolean","Number","String","Undefined","Null","Date","Object"],ut=function(){function n(r,e){Lt(this,n),this.name=r||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=(e==null?void 0:e.logCacheLevel)||3,this.logMaxSize=(e==null?void 0:e.logMaxSize)||vg,this.logSize=0,this.logTextArray=[]}return Et(n,[{key:"debug",value:function(){for(var e,i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];this.logCache.apply(this,[gr.DEBUG].concat(t)),!n.disabled&&(e=console).debug.apply(e,[this._prefix,Wn()].concat(t))}},{key:"log",value:function(){for(var e,i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];this.logCache.apply(this,[gr.LOG].concat(t)),!n.disabled&&(e=console).log.apply(e,[this._prefix,Wn()].concat(t))}},{key:"warn",value:function(){for(var e,i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];this.logCache.apply(this,[gr.WARN].concat(t)),!n.disabled&&(e=console).warn.apply(e,[this._prefix,Wn()].concat(t))}},{key:"error",value:function(){for(var e,i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];this.logCache.apply(this,[gr.ERROR].concat(t)),!n.disabled&&(e=console).error.apply(e,[this._prefix,Wn()].concat(t))}},{key:"logCache",value:function(e){if(!(e<this.logCacheLevel)){var i="";try{for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];var l=s.map(function(u){return Gd(u)});i=this._prefix+Wn()+JSON.stringify(l)}catch{return}if(e>=this.logCacheLevel&&(this.logSize+=i.length,this.logTextArray.push(i)),this.logSize>this.logMaxSize){var o=this.logTextArray.shift();this.logSize-=o.length}}}},{key:"getLogCache",value:function(){var e=this.logTextArray.join(`
`);return this.reset(),e}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var e;n.disabled||(console.group(this._prefix),(e=console).table.apply(e,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(e){this.logCacheLevel=e}}],[{key:"enable",value:function(){n.disabled=!1}},{key:"disable",value:function(){n.disabled=!0}}]),n}();H(ut,"disabled",!0);function Wn(){return new Date().toLocaleString()}function bg(n){if(Bi(n)!=="object")return n;var r=Object.prototype.toString.call(n).slice(8,-1);switch(r){case"Array":case"Uint8Array":case"ArrayBuffer":return r+"["+n.length+"]";case"Object":return"{}";default:return r}}function Gd(n,r,e){e||(e=1),r||(r=2);var i={};if(!n||Bi(n)!=="object")return n;var t=Object.prototype.toString.call(n).slice(8,-1);if(!yg.includes(t))return t;if(!(e>r)){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e===r?i[s]=bg(n[s]):Bi(n[s])==="object"?i[s]=Gd(n[s],r,e+1):i[s]=n[s]);return i}}function on(){var n,r,e=new Promise(function(i,t){n=i,r=t});return e.used=!1,e.resolve=function(){return e.used=!0,n.apply(void 0,arguments)},e.reject=function(){return e.used=!0,r.apply(void 0,arguments)},e}function an(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}}var gg={stringify:function(r){try{return JSON.stringify(r)}catch{return""}},parse:function(r){try{return JSON.parse(r)}catch{return}}};function Wo(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;try{return mg?n&&typeof ManagedMediaSource<"u"?ManagedMediaSource:window.MediaSource:null}catch{}}function Gs(n){return/ManagedMediaSource/gi.test(Object.prototype.toString.call(n))}function Zg(n){var r=[];if(n instanceof TimeRanges)for(var e=0;e<n.length;e++)r.push({start:n.start(e),end:n.end(e)});return r}var Zr={APPEND:"appendBuffer",REMOVE:"removeBuffer",UPDATE_DURATION:"updateDuration"},Ie=function(){function n(r,e){var i=this;Lt(this,n),H(this,"media",null),H(this,"mediaSource",null),H(this,"_openPromise",on()),H(this,"_queue",Object.create(null)),H(this,"_sourceBuffer",Object.create(null)),H(this,"_mseFullFlag",{}),H(this,"_st",0),H(this,"_opst",0),H(this,"_logger",null),H(this,"_config",null),H(this,"_url",null),H(this,"_onStartStreaming",function(){i._logger.debug("startstreaming")}),H(this,"_onEndStreaming",function(){i._logger.debug("endstreaming")}),H(this,"_onSBUpdateEnd",function(t){var s=i._queue[t];if(s){var a=s[0];if((a==null?void 0:a.opName)!==Zr.UPDATE_DURATION&&s.shift(),a){var l,o,u=an()-i._opst;i._logger.debug("UpdateEnd(".concat(t,"/").concat(a.opName,")"),gg.stringify(Zg((l=i._sourceBuffer[t])===null||l===void 0?void 0:l.buffered)),u,a.context),a.promise.resolve({name:a.opName,context:a.context,costtime:u});var d=(o=a.context)===null||o===void 0?void 0:o.callback;d&&typeof d=="function"&&d(a.context),i._startQueue(t)}}}),H(this,"_onSBUpdateError",function(t,s){var a=i._queue[t];if(a){var l=a[0];l&&(i._logger.error("UpdateError",t,l.opName,l.context),l.promise.reject(new Te(J.MEDIA,J.SUB_TYPES.MSE_APPEND_BUFFER,s)))}}),this._config=Object.assign(n.getDefaultConfig(),e),r&&this.bindMedia(r),this._logger=new ut("MSE"),this._config.openLog&&ut.enable()}return Et(n,[{key:"isOpened",get:function(){var e;return((e=this.mediaSource)===null||e===void 0?void 0:e.readyState)==="open"}},{key:"hasOpTasks",get:function(){var e=this,i=!1;return Object.keys(this._queue).forEach(function(t){var s=e._queue[t];Array.isArray(s)&&(i||(i=s.length>0))}),i}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var e;return((e=this.mediaSource)===null||e===void 0?void 0:e.duration)||-1}},{key:"isEnded",get:function(){return this.mediaSource?this.mediaSource.readyState==="ended":!1}},{key:"streaming",get:function(){return Gs(this.mediaSource)?this.mediaSource.streaming:!0}},{key:"isFull",value:function(e){return e?this._mseFullFlag[e]:this._mseFullFlag[n.VIDEO]}},{key:"updateDuration",value:function(e){var i=this,t=this.mediaSource&&this.mediaSource.duration>e;if(this.mediaSource&&this.mediaSource.duration>e){var s=0;if(Object.keys(this._sourceBuffer).forEach(function(a){try{s=Math.max(i.bufferEnd(a)||0,s)}catch{}}),e<s)return Promise.resolve()}return this._enqueueBlockingOp(function(){if(i.isEnded){i._logger.debug("setDuration but ended");return}i.mediaSource&&(i.mediaSource.duration=e,i._logger.debug("setDuration",e))},Zr.UPDATE_DURATION,{isReduceDuration:t})}},{key:"open",value:function(){var e=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var i=this.mediaSource,t=function s(){var a=an()-e._st;e._logger.debug("sourceopen",a),i.removeEventListener("sourceopen",s),e._openPromise.resolve({costtime:a})};i.addEventListener("sourceopen",t),this._openPromise=on()}return this._openPromise}},{key:"bindMedia",value:function(){var r=mi(ze().mark(function i(t){var s=this,a,l,o,u;return ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(this.mediaSource||this.media)){c.next=3;break}return c.next=3,this.unbindMedia();case 3:if(a=Wo(this._config.preferMMS),!(!t||!a)){c.next=6;break}throw new Error("Param media or MediaSource does not exist");case 6:return this.media=t,l=this.mediaSource=new a,o=Gs(l),this._st=an(),u=function h(){var f=an()-s._st;s._logger.debug("sourceopen"),l.removeEventListener("sourceopen",h),URL.revokeObjectURL(t.src),s._openPromise.resolve({costtime:f})},l.addEventListener("sourceopen",u),o&&(l.addEventListener("startstreaming",this._onStartStreaming),l.addEventListener("endstreaming",this._onEndStreaming)),this._url=URL.createObjectURL(l),t.src=this._url,t.disableRemotePlayback=o,c.abrupt("return",this._openPromise);case 17:case"end":return c.stop()}},i,this)}));function e(i){return r.apply(this,arguments)}return e}()},{key:"unbindMedia",value:function(){var r=mi(ze().mark(function i(){var t=this,s,a,l;return ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._openPromise.used||this._openPromise.resolve(),s=this.mediaSource,s){if(Object.keys(this._queue).forEach(function(d){var c=t._queue[d];c&&c.forEach(function(h){var f,p;return(f=h.promise)===null||f===void 0||(p=f.resolve)===null||p===void 0?void 0:p.call(f)})}),a=!!this.media&&this.media.readyState>=1,l=s.readyState==="open",a&&l)try{s.endOfStream()}catch{}Object.keys(this._sourceBuffer).forEach(function(d){try{s.removeSourceBuffer(t._sourceBuffer[d])}catch{}}),Gs(s)&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming))}if(this.media){this.media.disableRemotePlayback=!1,this.media.removeAttribute("src");try{this.media.load()}catch{}this.media=null}this.mediaSource=null,this._openPromise=on(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return u.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"createSource",value:function(e,i){if(!(this._sourceBuffer[e]||!this.mediaSource)){var t;try{t=this._sourceBuffer[e]=this.mediaSource.addSourceBuffer(i)}catch(s){throw new Te(J.MEDIA,J.SUB_TYPES.MSE_ADD_SB,s)}t.mimeType=i,t.addEventListener("updateend",this._onSBUpdateEnd.bind(this,e)),t.addEventListener("error",this._onSBUpdateError.bind(this,e))}}},{key:"changeType",value:function(e,i){var t=this,s=this._sourceBuffer[e];return!this.mediaSource||!s||s.mimeType===i?Promise.resolve():typeof s.changeType!="function"?Promise.reject(new Te(J.MEDIA,J.SUB_TYPES.MSE_CHANGE_TYPE,new Error("changeType is not a function"))):this._enqueueOp(e,function(){try{s.changeType(i)}catch(a){throw new Te(J.MEDIA,J.SUB_TYPES.MSE_CHANGE_TYPE,a)}s.mimeType=i,t._onSBUpdateEnd(e)},"changeType",{mimeType:i})}},{key:"createOrChangeSource",value:function(e,i){return this.createSource(e,i),this.changeType(e,i)}},{key:"append",value:function(e,i,t){var s=this;return!i||!i.byteLength||!this._sourceBuffer[e]?Promise.resolve():this._enqueueOp(e,function(){var a;!s.mediaSource||s.media.error||(s._logger.debug("MSE APPEND START",t),s._opst=an(),(a=s._sourceBuffer[e])===null||a===void 0||a.appendBuffer(i))},Zr.APPEND,t)}},{key:"remove",value:function(e,i,t,s){var a=this,l=!1;return this._mseFullFlag[e]&&(l=!0),this._enqueueOp(e,function(){if(!(!a.mediaSource||a.media.error)){var o=a._sourceBuffer[e];if(i>=t||!o){a._onSBUpdateEnd(e);return}a._opst=an(),a._logger.debug("MSE REMOVE START",e,i,t,s),o.remove(i,t)}},Zr.REMOVE,s,l)}},{key:"clearBuffer",value:function(e,i){var t=this,s;return Object.keys(this._sourceBuffer).forEach(function(a){s=t.remove(a,e,i)}),s||Promise.resolve()}},{key:"clearAllBuffer",value:function(){var e=this,i;return Object.keys(this._sourceBuffer).forEach(function(t){var s=e._sourceBuffer[t];i=e.remove(t,0,De.end(De.get(s)))}),i}},{key:"clearOpQueues",value:function(e,i){var t;this._logger.debug("MSE clearOpQueue START");var s=this._queue[e];if(i&&s){this._queue[e]=[];return}if(!(!s||!s[e]||s.length<5)){var a=[];s.forEach(function(l){l.context&&l.context.isinit&&a.push(l)}),this._queue[e]=s.slice(0,2),a.length>0&&(t=this._queue[e]).push.apply(t,a)}}},{key:"endOfStream",value:function(e){var i=this;return!this.mediaSource||this.mediaSource.readyState!=="open"?Promise.resolve():this._enqueueBlockingOp(function(){var t=i.mediaSource;!t||t.readyState!=="open"||(i._logger.debug("MSE endOfStream START"),e?t.endOfStream(e):t.endOfStream())},"endOfStream")}},{key:"setLiveSeekableRange",value:function(e,i){var t=this.mediaSource;e<0||i<e||!(t!=null&&t.setLiveSeekableRange)||t.readyState!=="open"||t.setLiveSeekableRange(e,i)}},{key:"getSourceBuffer",value:function(e){return this._sourceBuffer[e]}},{key:"buffered",value:function(e){return De.get(this._sourceBuffer[e])}},{key:"bufferStart",value:function(e){return De.start(this.buffered(e))}},{key:"bufferEnd",value:function(e){return De.end(this.buffered(e))}},{key:"_enqueueOp",value:function(e,i,t,s,a){var l=this;if(!this.mediaSource)return Promise.resolve();var o=this._queue[e]=this._queue[e]||[],u={exec:i,promise:on(),opName:t,context:s};return a?(o.splice(0,0,u),this._mseFullFlag[e]=!1,this._startQueue(e)):o.push(u),this.isOpened||this.isEnded?o.length===1&&this._startQueue(e):this._openPromise.then(function(){o.length===1&&l._startQueue(e)}),u.promise}},{key:"_enqueueBlockingOp",value:function(){var r=mi(ze().mark(function i(t,s,a){var l=this,o,u;return ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.mediaSource){c.next=2;break}return c.abrupt("return",Promise.resolve());case 2:if(o=Object.keys(this._sourceBuffer),o.length){c.next=5;break}return c.abrupt("return",t());case 5:return u=[],o.forEach(function(h){var f=l._queue[h],p=on();u.push(p),f.push({exec:function(){p.resolve()},promise:p,opName:s,context:a}),f.length===1&&l._startQueue(h)}),c.abrupt("return",Promise.all(u).then(function(){try{return t()}finally{o.forEach(function(h){var f=l._queue[h],p=l._sourceBuffer[h];f==null||f.shift(),(!p||!p.updating)&&l._startQueue(h)})}}));case 8:case"end":return c.stop()}},i,this)}));function e(i,t,s){return r.apply(this,arguments)}return e}()},{key:"_startQueue",value:function(e){var i=this._queue[e];if(i){var t=i[0];if(t&&!this._mseFullFlag[e])try{t.exec()}catch(s){s&&s.message&&s.message.indexOf("SourceBuffer is full")>=0?(this._mseFullFlag[e]=!0,t.context&&Bi(t.context)==="object"&&(t.context.isFull=!0),this._logger.error("[MSE error],  context,",t.context," ,name,",t.opName,",err,SourceBuffer is full"),t.promise.reject(new Te(J.MEDIA,J.SUB_TYPES.MSE_FULL,s))):(this._logger.error(s),t.promise.reject(s.constructor===Te?s:new Te(J.MEDIA,J.SUB_TYPES.MSE_OTHER,s)),i.shift(),this._startQueue(e))}}}},{key:"setTimeoffset",value:function(e,i,t){var s=this;return this._enqueueOp(e,function(){i<0&&(i+=.001),s._sourceBuffer[e].timestampOffset=i,s._onSBUpdateEnd(e)},"setTimeoffset",t)}},{key:"abort",value:function(e,i){var t=this;return this.isOpened?this._enqueueOp(e,function(){t._sourceBuffer[e].abort(),t._onSBUpdateEnd(e)},"abort",i):Promise.resolve()}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"',i=Wo();if(!i)return!1;try{return i.isTypeSupported(e)}catch(t){return this._logger.error(e,t),!1}}},{key:"isMMSOnly",value:function(){return typeof ManagedMediaSource<"u"&&typeof MediaSource>"u"}},{key:"getDefaultConfig",value:function(){return{openLog:!1,preferMMS:!1}}}]),n}();H(Ie,"VIDEO","video");H(Ie,"AUDIO","audio");var Ui={FETCH:"fetch",XHR:"xhr"},Bn={ARRAY_BUFFER:"arraybuffer",TEXT:"text",JSON:"json"},Qt=function(n){ir(e,n);var r=nr(e);function e(i,t,s,a){var l;return Lt(this,e),l=r.call(this,a),H(ie(l),"retryCount",0),H(ie(l),"isTimeout",!1),H(ie(l),"loaderType",Ui.FETCH),H(ie(l),"startTime",0),H(ie(l),"endTime",0),H(ie(l),"options",{}),l.url=i,l.request=t,l.response=s,l}return Et(e)}(Nr(Error)),Wd=Object.prototype.toString;function kg(n){return n!==null&&Bi(n)==="object"}function Ro(n){if(Wd.call(n)!=="[object Object]")return!1;var r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}function Sg(n){return Wd.call(n)==="[object Date]"}function Rd(n){if(!(!n||n[0]===null||n[0]===void 0||n[0]===0&&(n[1]===null||n[1]===void 0))){var r="bytes="+n[0]+"-";return n[1]&&(r+=n[1]),r}}function Vo(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vd(n,r){if(n){if(!r)return n;var e,i=Object.keys(r).map(function(s){if(e=r[s],e!=null)return Array.isArray(e)?s=s+"[]":e=[e],e.map(function(a){return Sg(a)?a=a.toISOString():kg(a)&&(a=JSON.stringify(a)),"".concat(Vo(s),"=").concat(Vo(a))}).join("&")}).filter(Boolean).join("&");if(i){var t=n.indexOf("#");t!==-1&&(n=n.slice(0,t)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}}function aa(n,r,e,i,t,s,a,l,o,u,d){t=t!=null?parseFloat(t):null,i=parseInt(i||"0",10),Number.isNaN(i)&&(i=0);var c={range:o,vid:u,index:l,contentLength:i,age:t,startTime:s,firstByteTime:a,endTime:Date.now(),priOptions:d};return{data:n,done:r,options:c,response:e}}function la(n,r){return Math.round(n*8*1e3/r/1024)}var U={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",MEDIASOURCE_OPENED:"core.mediasourceopened",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",CHASEFRAME:"core.chaseframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"},Co=2*1024*1024,oa=function(n){ir(e,n);var r=nr(e);function e(){var i;return Lt(this,e),i=r.call(this),H(ie(i),"_abortController",null),H(ie(i),"_timeoutTimer",null),H(ie(i),"_reader",null),H(ie(i),"_response",null),H(ie(i),"_aborted",!1),H(ie(i),"_index",-1),H(ie(i),"_range",null),H(ie(i),"_receivedLength",0),H(ie(i),"_running",!1),H(ie(i),"_logger",null),H(ie(i),"_vid",""),H(ie(i),"_onProcessMinLen",0),H(ie(i),"_onCancel",null),H(ie(i),"_priOptions",null),i}return Et(e,[{key:"load",value:function(t){var s,a=this,l=t.url,o=t.vid,u=t.timeout,d=t.responseType,c=t.onProgress,h=t.index,f=t.onTimeout,p=t.onCancel,m=t.range,g=t.transformResponse,b=t.request,w=t.params,S=t.logger,k=t.method,L=t.headers,T=t.body,X=t.mode,G=t.credentials,C=t.cache,x=t.redirect,N=t.referrer,y=t.referrerPolicy,v=t.onProcessMinLen,Z=t.priOptions;this._logger=S,this._aborted=!1,this._onProcessMinLen=v,this._onCancel=p,this._abortController=typeof AbortController<"u"&&new AbortController,this._running=!0,this._index=h,this._range=m||[0,0],this._vid=o||l,this._priOptions=Z||{};var W={method:k,headers:L,body:T,mode:X,credentials:G,cache:C,redirect:x,referrer:N,referrerPolicy:y,signal:(s=this._abortController)===null||s===void 0?void 0:s.signal},E=!1;clearTimeout(this._timeoutTimer),l=Vd(l,w);var R=Rd(m);R&&(b?L=b.headers:L=W.headers=W.headers||(Headers?new Headers:{}),Headers&&L instanceof Headers?L.append("Range",R):L.Range=R),u&&(this._timeoutTimer=setTimeout(function(){if(E=!0,a.cancel(),f){var P=new Qt(l,W,null,"timeout");P.isTimeout=!0,f(P,{index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions})}},u));var M=Date.now();return this._logger.debug("[fetch load start], index,",h,",range,",m),new Promise(function(P,Y){fetch(b||l,b?void 0:W).then(function(){var D=mi(ze().mark(function q(F){var Se,fe,Pe,z;return ze().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(clearTimeout(a._timeoutTimer),a._response=F,!(a._aborted||!a._running)){te.next=4;break}return te.abrupt("return");case 4:if(g&&(F=g(F,l)||F),F.ok){te.next=7;break}throw new Qt(l,W,F,"bad network response");case 7:if(Se=Date.now(),d!==Bn.TEXT){te.next=15;break}return te.next=11,F.text();case 11:fe=te.sent,a._running=!1,te.next=37;break;case 15:if(d!==Bn.JSON){te.next=22;break}return te.next=18,F.json();case 18:fe=te.sent,a._running=!1,te.next=37;break;case 22:if(!c){te.next=29;break}return a.resolve=P,a.reject=Y,a._loadChunk(F,c,M,Se),te.abrupt("return");case 29:return te.next=31,F.arrayBuffer();case 31:fe=te.sent,fe=new Uint8Array(fe),a._running=!1,Pe=Date.now()-M,z=la(fe.byteLength,Pe),a.emit(U.REAL_TIME_SPEED,{speed:z,len:fe.byteLength,time:Pe,vid:a._vid,index:a._index,range:a._range,priOptions:a._priOptions});case 37:a._logger.debug("[fetch load end], index,",h,",range,",m),P(aa(fe,!0,F,F.headers.get("Content-Length"),F.headers.get("age"),M,Se,h,m,a._vid,a._priOptions));case 39:case"end":return te.stop()}},q)}));return function(q){return D.apply(this,arguments)}}()).catch(function(D){var q;clearTimeout(a._timeoutTimer),a._running=!1,!(a._aborted&&!E)&&(D=D instanceof Qt?D:new Qt(l,W,null,(q=D)===null||q===void 0?void 0:q.message),D.startTime=M,D.endTime=Date.now(),D.isTimeout=E,D.options={index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions},Y(D))})})}},{key:"cancel",value:function(){var i=mi(ze().mark(function s(){return ze().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this._aborted){l.next=2;break}return l.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){l.next=14;break}if(l.prev=5,!this._reader){l.next=9;break}return l.next=9,this._reader.cancel();case 9:l.next=13;break;case 11:l.prev=11,l.t0=l.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch{}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return l.stop()}},s,this,[[5,11]])}));function t(){return i.apply(this,arguments)}return t}()},{key:"_loadChunk",value:function(t,s,a,l){var o=this;if(!t.body||!t.body.getReader){this._running=!1;var u=new Qt(t.url,"",t,"onProgress of bad response.body.getReader");u.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this.reject(u);return}this._onProcessMinLen>0&&(this._cache=new Uint8Array(Co),this._writeIdx=0);var d=this._reader=t.body.getReader(),c,h,f,p=function(){var m=mi(ze().mark(function g(){var b,w,S,k,L,T,X,G;return ze().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return h=Date.now(),x.prev=1,x.next=4,d.read();case 4:c=x.sent,f=Date.now(),x.next=13;break;case 8:return x.prev=8,x.t0=x.catch(1),f=Date.now(),o._aborted||(o._running=!1,x.t0.options={index:o._index,range:o._range,vid:o._vid,priOptions:o._priOptions},o.reject(x.t0)),x.abrupt("return");case 13:if(w=((b=o._range)===null||b===void 0?void 0:b.length)>0?o._range[0]:0,S=w+o._receivedLength,!o._aborted){x.next=19;break}return o._running=!1,s(void 0,!1,{range:[S,S],vid:o._vid,index:o._index,startTime:h,endTime:f,st:a,firstByteTime:l,priOptions:o._priOptions},t),x.abrupt("return");case 19:k=c.value?c.value.byteLength:0,o._receivedLength+=k,o._logger.debug("【fetchLoader,onProgress call】,task,",o._range,", start,",S,", end,",w+o._receivedLength,", done,",c.done),o._onProcessMinLen>0?o._writeIdx+k>=o._onProcessMinLen||c.done?(L=new Uint8Array(o._writeIdx+k),L.set(o._cache.slice(0,o._writeIdx),0),k>0&&L.set(c.value,o._writeIdx),o._writeIdx=0,o._logger.debug("【fetchLoader,onProgress enough】,done,",c.done,",len,",L.byteLength,", writeIdx,",o._writeIdx)):k>0&&o._writeIdx+k<Co?(o._cache.set(c.value,o._writeIdx),o._writeIdx+=k,o._logger.debug("【fetchLoader,onProgress cache】,len,",k,", writeIdx,",o._writeIdx)):k>0&&(T=new Uint8Array(o._writeIdx+k+2048),o._logger.debug("【fetchLoader,onProgress extra start】,size,",o._writeIdx+k+2048,", datalen,",k,", writeIdx,",o._writeIdx),T.set(o._cache.slice(0,o._writeIdx),0),k>0&&T.set(c.value,o._writeIdx),o._writeIdx+=k,delete o._cache,o._cache=T,o._logger.debug("【fetchLoader,onProgress extra end】,len,",k,", writeIdx,",o._writeIdx)):L=c.value,(L&&L.byteLength>0||c.done)&&s(L,c.done,{range:[o._range[0]+o._receivedLength-(L?L.byteLength:0),o._range[0]+o._receivedLength],vid:o._vid,index:o._index,startTime:h,endTime:f,st:a,firstByteTime:l,priOptions:o._priOptions},t),c.done?(X=Date.now()-a,G=la(o._receivedLength,X),o.emit(U.REAL_TIME_SPEED,{speed:G,len:o._receivedLength,time:X,vid:o._vid,index:o._index,range:o._range,priOptions:o._priOptions}),o._running=!1,o._logger.debug("[fetchLoader onProgress end],task,",o._range,",done,",c.done),o.resolve(aa(c,!0,t,t.headers.get("Content-Length"),t.headers.get("age"),a,l,o._index,o._range,o._vid,o._priOptions))):p();case 25:case"end":return x.stop()}},g,null,[[1,8]])}));return function(){return m.apply(this,arguments)}}();p()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(t){this._running=t}}],[{key:"isSupported",value:function(){return typeof fetch<"u"}}]),e}(Ci);function Lg(n){return zn({loaderType:Ui.FETCH,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:Bn.TEXT,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},n)}var Eg=function(n){ir(e,n);var r=nr(e);function e(){var i;return Lt(this,e),i=r.call(this),H(ie(i),"_xhr",null),H(ie(i),"_aborted",!1),H(ie(i),"_timeoutTimer",null),H(ie(i),"_range",null),H(ie(i),"_receivedLength",0),H(ie(i),"_url",null),H(ie(i),"_onProgress",null),H(ie(i),"_index",-1),H(ie(i),"_headers",null),H(ie(i),"_currentChunkSizeKB",384),H(ie(i),"_timeout",null),H(ie(i),"_xhr",null),H(ie(i),"_withCredentials",null),H(ie(i),"_startTime",-1),H(ie(i),"_loadCompleteResolve",null),H(ie(i),"_loadCompleteReject",null),H(ie(i),"_runing",!1),H(ie(i),"_logger",!1),H(ie(i),"_vid",""),H(ie(i),"_responseType",void 0),H(ie(i),"_credentials",void 0),H(ie(i),"_method",void 0),H(ie(i),"_transformResponse",void 0),H(ie(i),"_firstRtt",void 0),H(ie(i),"_onCancel",null),H(ie(i),"_priOptions",null),i}return Et(e,[{key:"load",value:function(t){var s=this;clearTimeout(this._timeoutTimer),this._logger=t.logger,this._range=t.range,this._onProgress=t.onProgress,this._index=t.index,this._headers=t.headers,this._withCredentials=t.credentials==="include"||t.credentials==="same-origin",this._body=t.body||null,t.method&&(this._method=t.method),this._timeout=t.timeout||null,this._runing=!0,this._vid=t.vid||t.url,this._responseType=t.responseType,this._firstRtt=-1,this._onTimeout=t.onTimeout,this._onCancel=t.onCancel,this._request=t.request,this._priOptions=t.priOptions||{},this._logger.debug("【xhrLoader task】, range",this._range),this._url=Vd(t.url,t.params);var a=Date.now();return new Promise(function(l,o){s._loadCompleteResolve=l,s._loadCompleteReject=o,s._startLoad()}).catch(function(l){if(clearTimeout(s._timeoutTimer),s._runing=!1,!s._aborted)throw l=l instanceof Qt?l:new Qt(s._url,s._request),l.startTime=a,l.endTime=Date.now(),l.options={index:s._index,vid:s._vid,priOptions:s._priOptions},l})}},{key:"_startLoad",value:function(){var t=null;if(this._responseType===Bn.ARRAY_BUFFER&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var s=this._currentChunkSizeKB*1024,a=this._range[0]+this._receivedLength,l=this._range[1];s<this._range[1]-a&&(l=a+s),t=[a,l],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",t)}else t=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",t);this._internalOpen(t)}},{key:"_internalOpen",value:function(t){var s=this;try{this._startTime=Date.now();var a=this._xhr=new XMLHttpRequest;a.open(this._method||"GET",this._url,!0),a.responseType=this._responseType,this._timeout&&(a.timeout=this._timeout),a.withCredentials=this._withCredentials,a.onload=this._onLoad.bind(this),a.onreadystatechange=this._onReadyStatechange.bind(this),a.onerror=function(u){var d,c,h;s._running=!1;var f=new Qt(s._url,s._request,u==null||(d=u.currentTarget)===null||d===void 0?void 0:d.response,"xhr.onerror.status:"+(u==null||(c=u.currentTarget)===null||c===void 0?void 0:c.status)+",statusText,"+(u==null||(h=u.currentTarget)===null||h===void 0?void 0:h.statusText));f.options={index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions},s._loadCompleteReject(f)},a.ontimeout=function(u){s.cancel();var d=new Qt(s._url,s._request,{status:408},"timeout");s._onTimeout&&(d.isTimeout=!0,s._onTimeout(d,{index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions})),d.options={index:s._index,range:s._range,vid:s._vid,priOptions:s._priOptions},s._loadCompleteReject(d)};var l=this._headers||{},o=Rd(t);o&&(l.Range=o),l&&Object.keys(l).forEach(function(u){a.setRequestHeader(u,l[u])}),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",t),a.send(this._body)}catch(u){u.options={index:this._index,range:t,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(u)}}},{key:"_onReadyStatechange",value:function(t){var s=t.target;s.readyState===2&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(t){var s,a=t.target.status;if(a<200||a>299){var l=new Qt(this._url,null,zn(zn({},t.target.response),{},{status:a}),"bad response,status:"+a);return l.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(l)}var o=null,u=!1,d,c=((s=this._range)===null||s===void 0?void 0:s.length)>0?this._range[0]:0;if(this._responseType===Bn.ARRAY_BUFFER){var h,f=new Uint8Array(t.target.response);if(d=c+this._receivedLength,f&&f.byteLength>0){this._receivedLength+=f.byteLength;var p=Date.now()-this._startTime,m=la(this._receivedLength,p);this.emit(U.REAL_TIME_SPEED,{speed:m,len:this._receivedLength,time:p,vid:this._vid,index:this._index,range:[d,c+this._receivedLength],priOptions:this._priOptions})}o=f,((h=this._range)===null||h===void 0?void 0:h.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]?u=!1:u=!0,this._logger.debug("[xhr load done->], tast :",this._range,", start",d,"end ",c+this._receivedLength,",dataLen,",f?f.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",u)}else u=!0,o=t.target.response;var g={ok:a>=200&&a<300,status:a,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(g=this._transformResponse(g,this._url)||g),this._onProgress&&this._onProgress(o,u,{index:this._index,vid:this._vid,range:[d,c+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},g),u?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(aa(this._onProgress?null:o,u,g,g.headers["content-length"],g.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,Vr(Ji(e.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(t){this._running=t}},{key:"_getHeaders",value:function(t){var s=t.getAllResponseHeaders().trim().split(`\r
`),a={},l=pg(s),o;try{for(l.s();!(o=l.n()).done;){var u=o.value,d=u.split(": ");a[d[0].toLowerCase()]=d.slice(1).join(": ")}}catch(c){l.e(c)}finally{l.f()}return a}}],[{key:"isSupported",value:function(){return typeof XMLHttpRequest<"u"}}]),e}(Ci),wg=["retry","retryDelay","onRetryError","transformError"],Xg=function(){function n(r,e){Lt(this,n),this.promise=on(),this.alive=!!e.onProgress,!e.logger&&(e.logger=new ut("Loader")),this._loaderType=r,this._loader=r===Ui.FETCH&&typeof fetch<"u"?new oa:new Eg,this._config=e,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=e.retryCheckFunc,this._logger=e.logger}return Et(n,[{key:"exec",value:function(){var e=this,i=this._config,t=i.retry,s=i.retryDelay,a=i.onRetryError,l=i.transformError,o=ug(i,wg),u=function(){var d=mi(ze().mark(function c(){var h,f,p;return ze().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,e._loader.load(o);case 3:h=g.sent,e.promise.resolve(h),g.next=27;break;case 7:if(g.prev=7,g.t0=g.catch(0),e._loader.running=!1,e._logger.debug("[task request catch err]",g.t0),!e._canceled){g.next=13;break}return g.abrupt("return");case 13:if(g.t0.loaderType=e._loaderType,g.t0.retryCount=e._retryCount,f=g.t0,l&&(f=l(f)||f),a&&e._retryCount>0&&a(f,e._retryCount,{index:o.index,vid:o.vid,range:o.range,priOptions:o.priOptions}),e._retryCount++,p=!0,e._retryCheckFunc&&(p=e._retryCheckFunc(g.t0)),!(p&&e._retryCount<=t)){g.next=26;break}return clearTimeout(e._retryTimer),e._logger.debug("[task request setTimeout],retry",e._retryCount,",retry range,",o.range),e._retryTimer=setTimeout(u,s),g.abrupt("return");case 26:e.promise.reject(f);case 27:case"end":return g.stop()}},c,null,[[0,7]])}));return function(){return d.apply(this,arguments)}}();return u(),this.promise}},{key:"cancel",value:function(){var r=mi(ze().mark(function i(){return ze().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,s.abrupt("return",this._loader.cancel());case 4:case"end":return s.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),n}();function Cd(n){return n&&!n.paused&&!n.ended&&n.playbackRate!==0&&n.readyState!==0}function Md(n){if(!n)return{};if(typeof n.getVideoPlaybackQuality=="function"){var r=n.getVideoPlaybackQuality();return{droppedVideoFrames:r.droppedVideoFrames||r.corruptedVideoFrames,totalVideoFrames:r.totalVideoFrames,creationTime:r.creationTime}}return{droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDecodedFrameCount,creationTime:performance.now()}}function zi(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];if(r=r.filter(Boolean),r.length<2)return r[0];var i=new Uint8Array(r.reduce(function(s,a){return s+a.byteLength},0)),t=0;return r.forEach(function(s){i.set(s,t),t+=s.byteLength}),i}function Tg(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(r){return setTimeout(r,n)})}var Wi=function(n){ir(e,n);var r=nr(e);function e(i){var t;return Lt(this,e),t=r.call(this,i),H(ie(t),"type",Ui.FETCH),H(ie(t),"_queue",[]),H(ie(t),"_alive",[]),H(ie(t),"_currentTask",null),H(ie(t),"_finnalUrl",""),H(ie(t),"_config",void 0),t._config=Lg(i),(t._config.loaderType===Ui.XHR||!oa.isSupported())&&(t.type=Ui.XHR),t.log=i.logger,t}return Et(e,[{key:"isFetch",value:function(){return this.type===Ui.FETCH}},{key:"load",value:function(t){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof t=="string"||!t?a.url=t||a.url||this._config.url:a=t,a=Object.assign({},this._config,a),a.params&&(a.params=Object.assign({},a.params)),a.headers&&Ro(a.headers)&&(a.headers=Object.assign({},a.headers)),a.body&&Ro(a.body)&&(a.body=Object.assign({},a.body)),a.transformRequest&&(a=a.transformRequest(a)||a),a.logger=this.log;var l=new Xg(this.type,a);return l.loader.on(U.REAL_TIME_SPEED,function(o){s.emit(U.REAL_TIME_SPEED,o)}),this._queue.push(l),this._queue.length===1&&(!this._currentTask||!this._currentTask.running)&&this._processTask(),l.promise}},{key:"cancel",value:function(){var i=mi(ze().mark(function s(){var a;return ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=this._queue.map(function(u){return u.cancel()}).concat(this._alive.map(function(u){return u.cancel()})),this._currentTask&&a.push(this._currentTask.cancel()),this._queue=[],this._alive=[],o.next=6,Promise.all(a);case 6:return o.next=8,Tg();case 8:case"end":return o.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_processTask",value:function(){var t=this;if(this._currentTask=this._queue.shift(),!!this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var s=this._currentTask.exec().catch(function(a){});s&&typeof s.finally=="function"&&s.finally(function(){var a,l;(a=t._currentTask)!==null&&a!==void 0&&a.alive&&((l=t._alive)===null||l===void 0?void 0:l.length)>0&&(t._alive=t._alive.filter(function(o){return o&&o!==t._currentTask})),t._processTask()})}}}],[{key:"isFetchSupport",value:function(){return oa.isSupported()}}]),e}(Ci),xd=function(){function n(){Lt(this,n),H(this,"_prevCurrentTime",0)}return Et(n,[{key:"do",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,t=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(e){var a=e.currentTime,l=0;if(this._prevCurrentTime===a){var o=De.info(De.get(e),a);if(!o.buffers.length)return;t&&o.nextStart||o.nextStart&&o.nextStart-a<i?l=o.nextStart+.1:o.end&&o.end-a>s&&!e.seeking&&(l=a+.1)}this._prevCurrentTime=a,l&&a!==l&&(e.currentTime=l)}}}]),n}(),Id=function(){function n(r){var e=this;Lt(this,n),H(this,"_seiSet",new Set),this.emitter=r,r.on(U.SEI,function(i){i&&e._seiSet.add(i)})}return Et(n,[{key:"throw",value:function(e,i){var t=this;if(!(e==null||!this._seiSet.size)){var s=e-.2,a=e+.2,l=[];this._seiSet.forEach(function(o){o.time>=s&&o.time<=a&&l.push(o)}),l.forEach(function(o){t._seiSet.delete(o),t.emitter.emit(U.SEI_IN_TIME,o)}),i&&this._seiSet.forEach(function(o){o.time<e-5&&t._seiSet.delete(o)})}}},{key:"reset",value:function(){this._seiSet.clear()}}]),n}(),Gg=1e3,Wg=50,Rg=3,Vg=3e3,_d=function(){function n(r){Lt(this,n),H(this,"_chunkSpeed",0),H(this,"_chunkCache",[]),H(this,"_speeds",[]),H(this,"_totalSize",0),H(this,"_totalCost",0),this._opts=r||{}}return Et(n,[{key:"addRecord",value:function(e,i){!e||!i||(this._speeds.push(8e3*e/i),this._speeds=this._speeds.slice(-Rg))}},{key:"addChunkRecord",value:function(e,i){var t,s;if(!(!e||!i||e<(((t=this._opts)===null||t===void 0?void 0:t.skipChunkSize)||Gg))){this._totalSize+=e,this._totalCost+=i,this._chunkSpeed=8e3*e/i,this._chunkCache.push({size:e,duration:i,timestamp:performance.now()});var a=((s=this._opts)===null||s===void 0?void 0:s.chunkCountForSpeed)||Wg;this._chunkCache.length>a&&(this._chunkCache=this._chunkCache.slice(-a))}}},{key:"getAvgSpeed",value:function(){var e;if(!this._chunkCache.length&&!this._speeds.length)return 0;if(this._speeds.length)return this._speeds.reduce(function(l,o){return l+=o})/this._speeds.length;var i=this._chunkCache[this._chunkCache.length-1],t=performance.now()-i.timestamp;t>(((e=this._opts)===null||e===void 0?void 0:e.longtimeNoReceived)||Vg)&&this._chunkCache.push({size:0,duration:t,timestamp:performance.now()});var s=this._chunkCache.reduce(function(l,o){return l+=o.size},0),a=this._chunkCache.reduce(function(l,o){return l+=o.duration},0);return 8e3*s/a}},{key:"getLatestSpeed",value:function(){return!this._chunkCache.length&&!this._speeds.length?0:this._speeds.length?this._speeds[this._speeds.length-1]:this._chunkSpeed}},{key:"getTotalSize",value:function(){return this._totalSize}},{key:"getTotalCost",value:function(){return this._totalCost}},{key:"reset",value:function(){this._chunkCache=[],this._speeds=[],this._totalSize=0,this._totalCost=0}}]),n}(),Mo=function(){function n(r){Lt(this,n),H(this,"encodeType",""),H(this,"audioCodec",""),H(this,"videoCodec",""),H(this,"domain",""),H(this,"fps",0),H(this,"bitrate",0),H(this,"width",0),H(this,"height",0),H(this,"samplerate",0),H(this,"channelCount",0),H(this,"gop",0),H(this,"_bitsAccumulateSize",0),H(this,"_bitsAccumulateDuration",0),H(this,"_startGopId",-1),this._timescale=r}return Et(n,[{key:"getStats",value:function(){return{encodeType:this.encodeType,audioCodec:this.audioCodec,videoCodec:this.videoCodec,domain:this.domain,fps:this.fps,bitrate:this.bitrate,width:this.width,height:this.height,samplerate:this.samplerate,channelCount:this.channelCount,gop:this.gop}}},{key:"setEncodeType",value:function(e){this.encodeType=e}},{key:"setFpsFromScriptData",value:function(e){var i,t=e.data,s=t==null||(i=t.onMetaData)===null||i===void 0?void 0:i.framerate;s&&s>0&&s<100&&(this.fps=s)}},{key:"setVideoMeta",value:function(e){if(this.width=e.width,this.height=e.height,this.videoCodec=e.codec,this.encodeType=e.codecType,e.fpsNum&&e.fpsDen){var i=e.fpsNum/e.fpsDen;i>0&&i<100&&(this.fps=i)}}},{key:"setAudioMeta",value:function(e){this.audioCodec=e.codec,this.samplerate=e.sampleRate,this.channelCount=e.channelCount}},{key:"setDomain",value:function(e){this.domain=e.split("/").slice(2,3)[0]}},{key:"updateBitrate",value:function(e){var i=this;if((!this.fps||this.fps>=100)&&e.length){var t=e.reduce(function(s,a){return s+=a.duration},0)/e.length;this.fps=Math.round(this._timescale/t)}e.forEach(function(s){i._startGopId===-1&&(i._startGopId=s.gopId),s.gopId===i._startGopId&&i.gop++,i._bitsAccumulateDuration+=s.duration/(i._timescale/1e3),i._bitsAccumulateSize+=s.units.reduce(function(a,l){return a+=l.length},0),i._bitsAccumulateDuration>=1e3&&(i.bitrate=i._bitsAccumulateSize*8,i._bitsAccumulateDuration=0,i._bitsAccumulateSize=0)})}}]),n}(),Fd=function(){function n(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;Lt(this,n),H(this,"_core",null),H(this,"_samples",[]),this._core=r,this._timescale=e,this._stats=new Mo(e),this._bindEvents()}return Et(n,[{key:"getStats",value:function(){var e,i,t,s,a,l,o,u,d,c,h,f=((e=this._core)===null||e===void 0?void 0:e.media)||{},p=f.currentTime,m=p===void 0?0:p,g=f.decodeFps,b=g===void 0?0:g;return zn(zn({},this._stats.getStats()),{},{downloadSpeed:((i=this._core)===null||i===void 0||(t=i.speedInfo)===null||t===void 0?void 0:t.call(i).speed)||0,avgSpeed:((s=this._core)===null||s===void 0||(a=s.speedInfo)===null||a===void 0?void 0:a.call(s).avgSpeed)||0,totalReceivedByte:((l=this._core)===null||l===void 0||(o=l.speedInfo)===null||o===void 0?void 0:o.call(l).totalSize)||0,totalReceivedCost:((u=this._core)===null||u===void 0||(d=u.speedInfo)===null||d===void 0?void 0:d.call(u).totalCost)||0,currentTime:m,bufferEnd:((c=this._core)===null||c===void 0||(h=c.bufferInfo())===null||h===void 0?void 0:h.remaining)||0,decodeFps:b})}},{key:"_bindEvents",value:function(){var e=this;this._core.on(U.DEMUXED_TRACK,function(i){var t=i.videoTrack;return e._stats.updateBitrate(t.samples)}),this._core.on(U.FLV_SCRIPT_DATA,function(i){e._stats.setFpsFromScriptData(i)}),this._core.on(U.METADATA_PARSED,function(i){i.type==="video"?e._stats.setVideoMeta(i.track):e._stats.setAudioMeta(i.track)}),this._core.on(U.TTFB,function(i){e._stats.setDomain(i.responseUrl)})}},{key:"reset",value:function(){this._samples=[],this._stats=new Mo(this._timescale)}}]),n}();function Cg(n,r){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,t,s,a,l=[],o=!0,u=!1;try{if(s=(e=e.call(n)).next,r===0){if(Object(e)!==e)return;o=!1}else for(;!(o=(i=s.call(e)).done)&&(l.push(i.value),l.length!==r);o=!0);}catch(d){u=!0,t=d}finally{try{if(!o&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(u)throw t}}return l}}function Ge(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function xo(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Dd(i.key),i)}}function We(n,r,e){return r&&xo(n.prototype,r),e&&xo(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function K(n,r,e){return r=Dd(r),r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function Yd(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&ua(n,r)}function Hr(n){return Hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hr(n)}function ua(n,r){return ua=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},ua(n,r)}function Mg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xg(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ig(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xg(n)}function Pd(n){var r=Mg();return function(){var i=Hr(n),t;if(r){var s=Hr(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return Ig(this,t)}}function _g(n,r){return Yg(n)||Cg(n,r)||$a(n,r)||Kg()}function lt(n){return Fg(n)||Pg(n)||$a(n)||Dg()}function Fg(n){if(Array.isArray(n))return da(n)}function Yg(n){if(Array.isArray(n))return n}function Pg(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $a(n,r){if(n){if(typeof n=="string")return da(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return da(n,r)}}function da(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,i=new Array(r);e<r;e++)i[e]=n[e];return i}function Dg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ng(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=$a(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var i=0,t=function(){};return{s:t,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(o){throw o},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){a=!0,l=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(a)throw l}}}}function Hg(n,r){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Dd(n){var r=Hg(n,"string");return typeof r=="symbol"?r:String(r)}var Ri={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},ii={AV1:"av1",AVC:"avc",HEVC:"hevc"},ni={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m"},Ke={LARGE_AV_SHIFT:"LARGE_AV_SHIFT",LARGE_VIDEO_GAP:"LARGE_VIDEO_GAP",LARGE_VIDEO_GAP_BETWEEN_CHUNK:"LARGE_VIDEO_GAP_BETWEEN_CHUNK",LARGE_AUDIO_GAP:"LARGE_AUDIO_GAP",AUDIO_FILLED:"AUDIO_FILLED",AUDIO_DROPPED:"AUDIO_DROPPED"},ps=function(){function n(){Ge(this,n),K(this,"id",1),K(this,"type",Ri.VIDEO),K(this,"codecType",ii.AVC),K(this,"pid",-1),K(this,"hvcC",void 0),K(this,"codec",""),K(this,"timescale",0),K(this,"formatTimescale",0),K(this,"sequenceNumber",0),K(this,"baseMediaDecodeTime",0),K(this,"baseDts",0),K(this,"duration",0),K(this,"warnings",[]),K(this,"samples",[]),K(this,"pps",[]),K(this,"sps",[]),K(this,"vps",[]),K(this,"fpsNum",0),K(this,"fpsDen",0),K(this,"sarRatio",[]),K(this,"width",0),K(this,"height",0),K(this,"nalUnitSize",4),K(this,"present",!1),K(this,"isVideoEncryption",!1),K(this,"isAudioEncryption",!1),K(this,"isVideo",!0),K(this,"kid",null),K(this,"pssh",null),K(this,"ext",void 0)}return We(n,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var e=this.samples[0],i=this.samples[this.samples.length-1];return i.dts-e.dts+i.duration}return 0}},{key:"exist",value:function(){return/av01/.test(this.codec)?!0:!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),n}(),fs=function(){function n(){Ge(this,n),K(this,"id",2),K(this,"type",Ri.AUDIO),K(this,"codecType",ni.AAC),K(this,"pid",-1),K(this,"codec",""),K(this,"sequenceNumber",0),K(this,"sampleDuration",0),K(this,"timescale",0),K(this,"formatTimescale",0),K(this,"baseMediaDecodeTime",0),K(this,"duration",0),K(this,"warnings",[]),K(this,"samples",[]),K(this,"baseDts",0),K(this,"sampleSize",16),K(this,"sampleRate",0),K(this,"channelCount",0),K(this,"objectType",0),K(this,"sampleRateIndex",0),K(this,"config",[]),K(this,"present",!1),K(this,"isVideoEncryption",!1),K(this,"isAudioEncryption",!1),K(this,"kid",null),K(this,"ext",void 0)}return We(n,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&this.codec&&this.codecType===ni.AAC)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var e=this.samples[0],i=this.samples[this.samples.length-1];return i.dts-e.dts+i.duration}return 0}}]),n}(),Zn=function(){function n(r,e,i){Ge(this,n),K(this,"flag",{}),K(this,"keyframe",!1),K(this,"gopId",0),K(this,"duration",0),K(this,"size",0),K(this,"units",[]),K(this,"chromaFormat",420),this.originPts=this.pts=r,this.originDts=this.dts=e,i&&(this.units=i)}return We(n,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),n}(),ri=We(function n(r,e,i,t){Ge(this,n),K(this,"duration",1024),K(this,"flag",{dependsOn:2,isNonSyncSample:0}),K(this,"keyframe",!0),this.originPts=this.pts=this.dts=r,this.data=e,this.size=e.byteLength,this.sampleOffset=t,i&&(this.duration=i)}),Kd=We(function n(r,e){Ge(this,n),K(this,"time",0),this.data=r,this.originPts=this.pts=e}),Ug=function(n){Yd(e,n);var r=Pd(e);function e(){return Ge(this,e),r.apply(this,arguments)}return We(e)}(Kd),Nd=function(n){Yd(e,n);var r=Pd(e);function e(){return Ge(this,e),r.apply(this,arguments)}return We(e)}(Kd),ms=function(){function n(){Ge(this,n),K(this,"id",3),K(this,"type",Ri.METADATA),K(this,"timescale",0),K(this,"flvScriptSamples",[]),K(this,"seiSamples",[])}return We(n,[{key:"exist",value:function(){return!!((this.flvScriptSamples.length||this.seiSamples.length)&&this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!!(this.flvScriptSamples.length||this.seiSamples.length)}}]),n}(),ji=function(){function n(r){Ge(this,n),this.name=r||"",this._prefix="[".concat(this.name,"]")}return We(n,[{key:"warn",value:function(){var e;if(!n.disabled){for(var i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];(e=console).warn.apply(e,[this._prefix].concat(t))}}}],[{key:"enable",value:function(){n.disabled=!1}},{key:"disable",value:function(){n.disabled=!0}}]),n}();K(ji,"disabled",!0);var vs=typeof window<"u",qa=vs&&navigator.userAgent.toLocaleLowerCase(),Hd=vs&&/^((?!chrome|android).)*safari/.test(qa),Og=vs&&qa.includes("firefox"),zg=vs&&qa.includes("android"),Mt=function(){function n(){Ge(this,n)}return We(n,null,[{key:"getRateIndexByRate",value:function(e){return n.FREQ.indexOf(e)}},{key:"parseADTS",value:function(e,i){for(var t=e.length,s=0;s+2<t&&!(e[s]===255&&(e[s+1]&246)===240);)s++;if(!(s>=t)){var a=s,l=[],o=(e[s+2]&60)>>>2,u=n.FREQ[o];if(!u)throw new Error("Invalid sampling index: ".concat(o));for(var d=((e[s+2]&192)>>>6)+1,c=(e[s+2]&1)<<2|(e[s+3]&192)>>>6,h=n._getConfig(o,c,d),f=h.config,p=h.codec,m,g,b=0,w=n.getFrameDuration(u);s+7<t;){if(e[s]!==255||(e[s+1]&246)!==240){s++;continue}if(g=(e[s+3]&3)<<11|e[s+4]<<3|(e[s+5]&224)>>5,!g||t-s<g)break;m=(~e[s+1]&1)*2,l.push({pts:i+b*w,data:e.subarray(s+7+m,s+g)}),b++,s+=g}return{skip:a,remaining:s>=t?void 0:e.subarray(s),frames:l,samplingFrequencyIndex:o,sampleRate:u,objectType:d,channelCount:c,codec:p,config:f,originCodec:"mp4a.40.".concat(d)}}}},{key:"parseAudioSpecificConfig",value:function(e){if(e.length){var i=e[0]>>>3,t=(e[0]&7)<<1|e[1]>>>7,s=(e[1]&120)>>>3,a=n.FREQ[t];if(a){var l=n._getConfig(t,s,i),o=l.config,u=l.codec;return{samplingFrequencyIndex:t,sampleRate:a,objectType:i,channelCount:s,config:o,codec:u,originCodec:"mp4a.40.".concat(i)}}}}},{key:"getFrameDuration",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4;return 1024*i/e}},{key:"_getConfig",value:function(e,i,t){var s=[],a,l;return Og?e>=6?(a=5,l=e-3):(a=2,l=e):zg?(a=2,l=e):(a=t===2||t===5?t:5,l=e,e>=6?l=e-3:i===1&&(a=2,l=e)),s[0]=a<<3,s[0]|=(e&14)>>1,s[1]=(e&1)<<7,s[1]|=i<<3,a===5&&(s[1]|=(l&14)>>1,s[2]=(l&1)<<7,s[2]|=8,s[3]=0),{config:s,codec:"mp4a.40.".concat(a)}}},{key:"getSilentFrame",value:function(e,i){switch(e){case"mp4a.40.2":if(i===1)return new Uint8Array([0,200,0,128,35,128]);if(i===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(i===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(i===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(i===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(i===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(i===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}]),n}();K(Mt,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);var Ag=500,Io=3,Ws=1e3,Rs=5e3,Bg=1e3,Jg=200,_o=5e3,Fo=5,jg=function(){function n(r,e,i){Ge(this,n),this.videoTrack=r,this.audioTrack=e,this.metadataTrack=i,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=0,this._videoTimestampBreak=0,this._lastVideoDuration=0,this._keyFrameInNextChunk=!1,this._lastAudioExceptionGapDot=-1/0,this._lastAudioExceptionOverlapDot=-1/0,this._lastAudioExceptionLargeGapDot=-1/0,this._lastVideoExceptionLargeGapDot=-1/0,this._lastVideoExceptionChunkFirstDtsDot=-1/0}return We(n,[{key:"fix",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;i=Math.round(i*1e3);var a=this.videoTrack,l=this.audioTrack;(t||!s)&&(this._videoLastSample=null,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=0,this._videoTimestampBreak=0,this._lastAudioExceptionGapDot=-1/0,this._lastAudioExceptionOverlapDot=-1/0,this._lastAudioExceptionLargeGapDot=-1/0,this._lastVideoExceptionLargeGapDot=-1/0,this._lastVideoExceptionChunkFirstDtsDot=-1/0),t&&!s&&(this._baseDtsInited=!1),this._baseDtsInited||this._calculateBaseDts(l,a),!s&&i&&(this._audioNextPts=this._videoNextDts=i);var o=this._baseDtsInited&&(this._videoTimestampBreak||!this.videoTrack.exist())&&(this._audioTimestampBreak||!this.audioTrack.exist());if(o&&this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(l),this._keyFrameInNextChunk=!1,this._fixVideo(a),this.metadataTrack.exist()){var u=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(d){d.pts=d.originPts-e._baseDts,d.time=Math.max(0,d.pts)/u}),this.metadataTrack.flvScriptSamples.forEach(function(d){d.pts=d.originPts-e._baseDts,d.time=Math.max(0,d.pts)/u})}a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].dts),l.samples.length&&(l.baseMediaDecodeTime=l.samples[0].pts*l.timescale/1e3)}},{key:"_fixVideo",value:function(e){var i=this,t=e.samples;if(t.length){t.forEach(function(w){w.dts-=i._baseDts,w.pts-=i._baseDts,w.keyframe&&(i._keyFrameInNextChunk=!0)});var s;if(e.fpsNum&&e.fpsDen)s=e.timescale*(e.fpsDen/e.fpsNum);else if(e.length>1){var a=e.samples[0],l=e.samples[t.length-1];s=Math.floor((l.dts-a.dts)/(t.length-1))}else s=this._lastVideoDuration||40;var o=t.pop();if(this._videoLastSample&&t.unshift(this._videoLastSample),this._videoLastSample=o,!!t.length){if(this._videoNextDts===void 0){var u=t[0];this._videoNextDts=u.dts}var d=t.length,c=0,h=t[0],f=this._videoNextDts-h.dts;if(Math.abs(f)>Jg){if(Math.abs(h.dts-this._lastVideoExceptionChunkFirstDtsDot)>_o){var p;this._lastVideoExceptionChunkFirstDtsDot=h.dts,e.warnings.push({type:Ke.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts,firstSampleDts:h.dts,nextSampleDts:(p=t[1])===null||p===void 0?void 0:p.dts,sampleDuration:f})}this._videoTimestampBreak>=Fo?(this._videoNextDts=h.dts,this._videoTimestampBreak=0):(h.dts+=f,h.pts+=f,this.audioTrack.exist()||(this._videoTimestampBreak=1))}for(var m=0;m<d;m++){var g=t[m].dts,b=t[m+1];m<d-1?c=b.dts-g:o?c=o.dts-g:c=s,(c>Bg||c<0)&&(this._videoTimestampBreak++,Math.abs(g-this._lastVideoExceptionLargeGapDot)>_o&&(this._lastVideoExceptionLargeGapDot=g,e.warnings.push({type:Ke.LARGE_VIDEO_GAP,time:g/e.timescale,dts:g,originDts:t[m].originDts,nextDts:this._videoNextDts,sampleDuration:c,refSampleDuration:s})),c=s),t[m].duration=c,this._videoNextDts+=c,this._lastVideoDuration=c}}}}},{key:"_fixAudio",value:function(e){var i=this,t=e.samples;t.length&&(t.forEach(function(s){s.dts=s.pts-=i._baseDts}),this._doFixAudioInternal(e,t,1e3))}},{key:"_calculateBaseDts",value:function(e,i){var t=e.samples,s=i.samples;if(!t.length&&!s.length)return!1;var a=1/0,l=1/0;t.length&&(e.baseDts=a=t[0].pts),s.length&&(i.baseDts=l=s[0].dts),this._baseDts=Math.min(a,l);var o=l-a;return Number.isFinite(o)&&Math.abs(o)>Ag&&i.warnings.push({type:Ke.LARGE_AV_SHIFT,videoBaseDts:l,audioBasePts:a,baseDts:this._baseDts,delta:o}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){var e=this._calculateBaseDts(this.audioTrack,this.videoTrack);e&&(this.audioTrack.exist()?this.videoTrack.exist()?this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts):this._baseDts-=this._audioNextPts:this._baseDts-=this._videoNextDts,this._videoTimestampBreak=0,this._audioTimestampBreak=0)}},{key:"_doFixAudioInternal",value:function(e,i,t){e.sampleDuration||(e.sampleDuration=e.codecType===ni.AAC?Mt.getFrameDuration(e.timescale,t):this._getG711Duration(e));var s=e.sampleDuration,a=e.codecType===ni.AAC?1024:s*e.timescale/1e3;if(this._audioNextPts===void 0){var l=i[0];this._audioNextPts=l.pts}for(var o=0;o<i.length;o++){var u=this._audioNextPts,d=i[o],c=d.pts-u;if(o===0&&this._audioTimestampBreak>=Fo&&this._keyFrameInNextChunk&&(u=this._audioNextPts=d.dts,c=0,this._audioTimestampBreak=0),!this._audioTimestampBreak&&c>=Io*s&&c<=Ws&&!Hd){var h=this._getSilentFrame(e)||i[0].data.subarray(),f=Math.floor(c/s);Math.abs(d.pts-this._lastAudioExceptionGapDot)>Rs&&(this._lastAudioExceptionGapDot=d.pts,e.warnings.push({type:Ke.AUDIO_FILLED,pts:d.pts,originPts:d.originPts,count:f,nextPts:u,refSampleDuration:s}));for(var p=0;p<f;p++){var m=new ri(Math.floor(this._audioNextPts+s)-Math.floor(this._audioNextPts),h,a);m.originPts=Math.floor(this._baseDts+u),i.splice(o,0,m),this._audioNextPts+=s,o++}o--}else c<=-Io*s&&c>=-1*Ws?(Math.abs(d.pts-this._lastAudioExceptionOverlapDot)>Rs&&(this._lastAudioExceptionOverlapDot=d.pts,e.warnings.push({type:Ke.AUDIO_DROPPED,pts:d.pts,originPts:d.originPts,nextPts:u,refSampleDuration:s})),i.splice(o,1),o--):(Math.abs(c)>Ws&&(this._audioTimestampBreak++,Math.abs(d.pts-this._lastAudioExceptionLargeGapDot)>Rs&&(this._lastAudioExceptionLargeGapDot=d.pts,e.warnings.push({type:Ke.LARGE_AUDIO_GAP,time:d.pts/1e3,pts:d.pts,originPts:d.originPts,nextPts:u,sampleDuration:c,refSampleDuration:s}))),d.dts=d.pts=u,d.duration=a,this._audioNextPts+=s)}}},{key:"_getG711Duration",value:function(e){var i=e.sampleSize,t=e.channelCount,s=e.sampleRate,a=e.samples[0];if(a)return a.data.byteLength*2/t/(i/8)/s*1e3}},{key:"_getSilentFrame",value:function(e){return e.codecType===ni.AAC?Mt.getSilentFrame(e.codec,e.channelCount):new Uint8Array(8*e.sampleDuration*e.channelCount)}}]),n}();function gt(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];r=r.filter(Boolean);var i=new Uint8Array(r.reduce(function(s,a){return s+a.byteLength},0)),t=0;return r.forEach(function(s){i.set(s,t),t+=s.byteLength}),i}var Qg=Math.pow(2,32);function xe(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n[r]<<8)+(n[r+1]||0)}function $g(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n[r]<<16)+(n[r+1]<<8)+(n[r+2]||0)}function B(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n[r]<<24>>>0)+(n[r+1]<<16)+(n[r+2]<<8)+(n[r+3]||0)}function Yi(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return B(n,r)*Qg+B(n,r+4)}function Ud(n){for(var r="avc1.",e,i=0;i<3;i++)e=n[i].toString(16),e.length<2&&(e="0".concat(e)),r+=e;return r}function qg(n){var r="";if(n.forEach(function(t){r+=e1(t)}),r.length<=32)for(var e=32-r.length,i=0;i<e;i++)r+="0";return r}function Yo(n){if(!Array.isArray(n)){for(var r=[],e="",i=0;i<n.length;i++)i%2&&(e=n[i-1]+n[i],r.push(parseInt(e,16)),e="");return r}return n.map(function(t){return parseInt(t,16)})}function e1(n){return("0"+Number(n).toString(16)).slice(-2).toUpperCase()}function Vs(n,r){return+(n+"."+r)}function t1(n){if(n.length<5)return 0;var r=Math.hypot(n[0],n[3]),e=Math.hypot(n[1],n[4]);return r===0||e===0?0:180*Math.atan2(n[1]/e,n[0]/r)/Math.PI}var zt=function(){function n(){Ge(this,n)}return We(n,null,[{key:"parseAnnexB",value:function(e){for(var i=e.length,t=2,s=0;e[t]!==null&&e[t]!==void 0&&e[t]!==1;)t++;if(t++,s=t+2,s>=i)return[];for(var a=[];s<i;)switch(e[s]){case 0:if(e[s-1]!==0){s+=2;break}else if(e[s-2]!==0){s++;break}t!==s-2&&a.push(e.subarray(t,s-2));do s++;while(e[s]!==1&&s<i);t=s+1,s=t+2;break;case 1:if(e[s-1]!==0||e[s-2]!==0){s+=3;break}t!==s-2&&a.push(e.subarray(t,s-2)),t=s+1,s=t+2;break;default:s+=3;break}return t<i&&a.push(e.subarray(t)),a}},{key:"parseAvcC",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;if(!(e.length<4)){for(var t=e.length,s=[],a=0,l;a+i<t;)if(l=B(e,a),i===3&&(l>>>=8),a+=i,!!l){if(a+l>t)break;s.push(e.subarray(a,a+l)),a+=l}return s}}},{key:"parseSEI",value:function(e,i){for(var t=e.length,s=i?2:1,a=0,l=0,o="";e[s]===255;)a+=255,s++;for(a+=e[s++];e[s]===255;)l+=255,s++;if(l+=e[s++],a===5&&t>s+16)for(var u=0;u<16;u++)o+=e[s].toString(16),s++;return{payload:e.subarray(s,s+l),type:a,size:l,uuid:o}}},{key:"removeEPB",value:function(e){for(var i=e.byteLength,t=[],s=1;s<i-2;)e[s]===0&&e[s+1]===0&&e[s+2]===3?(t.push(s+2),s+=2):s++;if(!t.length)return e;var a=i-t.length,l=new Uint8Array(a),o=0;for(s=0;s<a;o++,s++)o===t[0]&&(o++,t.shift()),l[s]=e[o];return l}}]),n}(),ca=function(){function n(r){if(Ge(this,n),K(this,"_bytesAvailable",void 0),K(this,"_bitsAvailable",0),K(this,"_word",0),!r)throw new Error("ExpGolomb data params is required");this._data=r,this._bytesAvailable=r.byteLength,this._bytesAvailable&&this._loadWord()}return We(n,[{key:"bitsAvailable",get:function(){return this._bitsAvailable}},{key:"_loadWord",value:function(){var e=this._data.byteLength-this._bytesAvailable,i=Math.min(4,this._bytesAvailable);if(i===0)throw new Error("No bytes available");var t=new Uint8Array(4);t.set(this._data.subarray(e,e+i)),this._word=new DataView(t.buffer).getUint32(0),this._bitsAvailable=i*8,this._bytesAvailable-=i}},{key:"skipBits",value:function(e){if(this._bitsAvailable>e)this._word<<=e,this._bitsAvailable-=e;else{e-=this._bitsAvailable;var i=Math.floor(e/8);e-=i*8,this._bytesAvailable-=i,this._loadWord(),this._word<<=e,this._bitsAvailable-=e}}},{key:"readBits",value:function(e){if(e>32)throw new Error("Cannot read more than 32 bits");var i=Math.min(this._bitsAvailable,e),t=this._word>>>32-i;return this._bitsAvailable-=i,this._bitsAvailable>0?this._word<<=i:this._bytesAvailable>0&&this._loadWord(),i=e-i,i>0&&this._bitsAvailable?t<<i|this.readBits(i):t}},{key:"skipLZ",value:function(){var e;for(e=0;e<this._bitsAvailable;++e)if(this._word&2147483648>>>e)return this._word<<=e,this._bitsAvailable-=e,e;return this._loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBool",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(e){for(var i=8,t=8,s,a=0;a<e;a++)t!==0&&(s=this.readEG(),t=(i+s+256)%256),i=t===0?i:t}}]),n}(),Od=function(){function n(){Ge(this,n)}return We(n,null,[{key:"parseAVCDecoderConfigurationRecord",value:function(e){if(!(e.length<7)){for(var i=(e[4]&3)+1,t,s=[],a=[],l=6,o=e[5]&31,u,d=0;d<o;d++)if(u=e[l]<<8|e[l+1],l+=2,!!u){var c=e.subarray(l,l+u);l+=u,s.push(c),t||(t=n.parseSPS(zt.removeEPB(c)))}var h=e[l];l++;for(var f,p=0;p<h;p++)f=e[l]<<8|e[l+1],l+=2,f&&(a.push(e.subarray(l,l+f)),l+=f);return{sps:t,spsArr:s,ppsArr:a,nalUnitSize:i}}}},{key:"parseSPS",value:function(e){var i=new ca(e);i.readUByte();var t=i.readUByte(),s=i.readUByte(),a=i.readUByte();i.skipUEG();var l=420;if(t===100||t===110||t===122||t===244||t===44||t===83||t===86||t===118||t===128||t===138||t===144){var o=i.readUEG();if(o<=3&&(l=[0,420,422,444][o]),o===3&&i.skipBits(1),i.skipUEG(),i.skipUEG(),i.skipBits(1),i.readBool())for(var u=o!==3?8:12,d=0;d<u;d++)i.readBool()&&(d<6?i.skipScalingList(16):i.skipScalingList(64))}i.skipUEG();var c=i.readUEG();if(c===0)i.readUEG();else if(c===1){i.skipBits(1),i.skipUEG(),i.skipUEG();for(var h=i.readUEG(),f=0;f<h;f++)i.skipUEG()}i.skipUEG(),i.skipBits(1);var p=i.readUEG(),m=i.readUEG(),g=i.readBits(1);g===0&&i.skipBits(1),i.skipBits(1);var b=0,w=0,S=0,k=0;i.readBool()&&(b=i.readUEG(),w=i.readUEG(),S=i.readUEG(),k=i.readUEG());var L,T,X,G,C;if(i.readBool()){if(i.readBool()){var x=i.readUByte();switch(x){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[i.readUByte()<<8|i.readUByte(),i.readUByte()<<8|i.readUByte()];break}}}if(i.readBool()&&i.readBool(),i.readBool()&&(i.readBits(4),i.readBool()&&i.readBits(24)),i.readBool()&&(i.readUEG(),i.readUEG()),i.readBool()){var N=i.readBits(32),y=i.readBits(32);T=i.readBool(),X=y,G=N*2,C=X/G}}return{codec:Ud(e.subarray(1,4)),profileIdc:t,profileCompatibility:s,levelIdc:a,chromaFormat:l,width:Math.ceil((p+1)*16-2*(b+w)),height:(2-g)*(m+1)*16-(g?2:4)*(S+k),sarRatio:L,fpsNum:X,fpsDen:G,fps:C,fixedFrame:T}}}]),n}(),ha=function(){function n(){Ge(this,n)}return We(n,null,[{key:"parseHEVCDecoderConfigurationRecord",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(e.length<23)){i=i||{};for(var t=(e[21]&3)+1,s,a,l=[],o=[],u=[],d=23,c=e[22],h,f,p,m=0;m<c;m++){h=e[d]&63,f=e[d+1]<<8|e[d+2],d+=3;for(var g=0;g<f;g++)if(p=e[d]<<8|e[d+1],d+=2,!!p){switch(h){case 32:{var b=e.subarray(d,d+p);s||(s=n.parseVPS(zt.removeEPB(b),i)),u.push(b)}break;case 33:{var w=e.subarray(d,d+p);a||(a=n.parseSPS(zt.removeEPB(w),i)),l.push(w)}break;case 34:o.push(e.subarray(d,d+p));break}d+=p}}return{hvcC:i,sps:a,spsArr:l,ppsArr:o,vpsArr:u,nalUnitSize:t}}}},{key:"parseVPS",value:function(e,i){i=i||{};var t=new ca(e);t.readUByte(),t.readUByte(),t.readBits(12);var s=t.readBits(3);return i.numTemporalLayers=Math.max(i.numTemporalLayers||0,s+1),t.readBits(17),n._parseProfileTierLevel(t,s,i),i}},{key:"parseSPS",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i=i||{};var t=new ca(e);t.readUByte(),t.readUByte(),t.readBits(4);var s=t.readBits(3);i.numTemporalLayers=Math.max(s+1,i.numTemporalLayers||0),i.temporalIdNested=t.readBits(1),n._parseProfileTierLevel(t,s,i),t.readUEG();var a=i.chromaFormatIdc=t.readUEG(),l=420;a<=3&&(l=[0,420,422,444][a]);var o=0;a===3&&(o=t.readBits(1));var u=t.readUEG(),d=t.readUEG(),c=t.readBits(1),h,f,p,m;if(c===1&&(h=t.readUEG(),f=t.readUEG(),p=t.readUEG(),m=t.readUEG()),i.bitDepthLumaMinus8=t.readUEG(),i.bitDepthChromaMinus8=t.readUEG(),c===1){var g=(a===1||a===2)&&o===0?2:1,b=a===1&&o===0?2:1;u-=g*(f+h),d-=b*(m+p)}return{codec:"hev1.1.6.L93.B0",width:u,height:d,chromaFormat:l,hvcC:i}}},{key:"_parseProfileTierLevel",value:function(e,i,t){var s=t.generalTierFlag||0;t.generalProfileSpace=e.readBits(2),t.generalTierFlag=Math.max(e.readBits(1),s),t.generalProfileIdc=Math.max(e.readBits(5),t.generalProfileIdc||0),t.generalProfileCompatibilityFlags=e.readBits(32),t.generalConstraintIndicatorFlags=[e.readBits(8),e.readBits(8),e.readBits(8),e.readBits(8),e.readBits(8),e.readBits(8)];var a=e.readBits(8);s<t.generalTierFlag?t.generalLevelIdc=a:t.generalLevelIdc=Math.max(a,t.generalLevelIdc||0);var l=[],o=[];if(i>e.bitsAvailable)throw new Error("maxSubLayersMinus inavlid size ".concat(i));for(var u=0;u<i;u++)l[u]=e.readBits(1),o[u]=e.readBits(1);i>0&&e.readBits((8-i)*2);for(var d=0;d<i;d++)l[d]!==0&&(e.readBits(2),e.readBits(1),e.readBits(5),e.readBits(16),e.readBits(16),e.readBits(4),e.readBits(16),e.readBits(16),e.readBits(12)),o[d]!==0&&e.readBits(8)}}]),n}(),Po=function(){function n(){Ge(this,n)}return We(n,null,[{key:"decode",value:function(e){for(var i=[],t=e,s=0,a=e.length;s<a;){if(t[s]<128){i.push(String.fromCharCode(t[s])),++s;continue}else if(!(t[s]<192)){if(t[s]<224){if(n._checkContinuation(t,s,1)){var l=(t[s]&31)<<6|t[s+1]&63;if(l>=128){i.push(String.fromCharCode(l&65535)),s+=2;continue}}}else if(t[s]<240){if(n._checkContinuation(t,s,2)){var o=(t[s]&15)<<12|(t[s+1]&63)<<6|t[s+2]&63;if(o>=2048&&(o&63488)!==55296){i.push(String.fromCharCode(o&65535)),s+=3;continue}}}else if(t[s]<248&&n._checkContinuation(t,s,3)){var u=(t[s]&7)<<18|(t[s+1]&63)<<12|(t[s+2]&63)<<6|t[s+3]&63;if(u>65536&&u<1114112){u-=65536,i.push(String.fromCharCode(u>>>10|55296)),i.push(String.fromCharCode(u&1023|56320)),s+=4;continue}}}i.push("�"),++s}return i.join("")}},{key:"_checkContinuation",value:function(e,i,t){var s=e;if(i+t<s.length){for(;t--;)if((s[++i]&192)!==128)return!1;return!0}else return!1}}]),n}(),i1=function(){function n(){Ge(this,n)}return We(n,null,[{key:"parse",value:function(e){if(!(e.length<3)){var i={},t=n._parseValue(new DataView(e.buffer,e.byteOffset,e.byteLength)),s=n._parseValue(new DataView(e.buffer,e.byteOffset+t.size,e.byteLength-t.size));return i[t.data]=s.data,i}}},{key:"_parseValue",value:function(e){var i=e.byteLength,t=e.getUint8(0),s=1,a=!1,l;switch(t){case 0:l=e.getFloat64(1),s+=8;break;case 1:{l=!!e.getUint8(1),s+=1;break}case 2:{var o=n._parseString(new DataView(e.buffer,e.byteOffset+s,e.byteLength-s)),u=o.data,d=o.size;l=u,s+=d}break;case 3:{l={};var c=0;for((e.getUint32(i-4)&16777215)===9&&(c=3);s<i-4;){var h=n._parseObject(new DataView(e.buffer,e.byteOffset+s,e.byteLength-s-c)),f=h.size,p=h.data,m=h.isEnd;if(m)break;l[p.name]=p.value,s+=f}if(s<=i-3){var g=e.getUint32(s-1)&16777215;g===9&&(s+=3)}}break;case 8:{l={},s+=4;var b=0;for((e.getUint32(i-4)&16777215)===9&&(b=3);s<i-8;){var w=n._parseObject(new DataView(e.buffer,e.byteOffset+s,e.byteLength-s-b)),S=w.size,k=w.data,L=w.isEnd;if(L)break;l[k.name]=k.value,s+=S}if(s<=i-3){var T=e.getUint32(s-1)&16777215;T===9&&(s+=3)}}break;case 9:l=void 0,s=1,a=!0;break;case 10:{l=[];var X=e.getUint32(1);s+=4;for(var G=0;G<X;G++){var C=n._parseValue(new DataView(e.buffer,e.byteOffset+s,e.byteLength-s)),x=C.data,N=C.size;l.push(x),s+=N}}break;case 11:{var y=e.getFloat64(s)+e.getInt16(s+8)*6e4;l=new Date(y),s+=10}break;case 12:{var v=e.getUint32(1);s+=4,l="",v>0&&(l=Po.decode(new Uint8Array(e.buffer,e.byteOffset+s,v))),s+=v}break;default:s=i;break}return{data:l,size:s,isEnd:a}}},{key:"_parseString",value:function(e){var i=e.getUint16(0),t="";return i>0&&(t=Po.decode(new Uint8Array(e.buffer,e.byteOffset+2,i))),{data:t,size:2+i}}},{key:"_parseObject",value:function(e){if(!(e.byteLength<3)){var i=n._parseString(e),t=n._parseValue(new DataView(e.buffer,e.byteOffset+i.size,e.byteLength-i.size));return{data:{name:i.data,value:t.data},size:i.size+t.size,isEnd:t.isEnd}}}}]),n}(),oi=new ji("FlvDemuxer"),zd=function(){function n(r,e,i){Ge(this,n),K(this,"_headerParsed",!1),K(this,"_remainingData",null),K(this,"_gopId",0),K(this,"_needAddMetaBeforeKeyFrameNal",!0),this.videoTrack=r||new ps,this.audioTrack=e||new fs,this.metadataTrack=i||new ms,this._fixer=new jg(this.videoTrack,this.audioTrack,this.metadataTrack)}return We(n,[{key:"demux",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=this.audioTrack,a=this.videoTrack,l=this.metadataTrack;if((i||!t)&&(this._remainingData=null),i&&(this._headerParsed=!1),i?(a.reset(),s.reset(),l.reset()):(a.samples=[],s.samples=[],l.seiSamples=[],l.flvScriptSamples=[],a.warnings=[],s.warnings=[],this._remainingData&&(e=gt(this._remainingData,e),this._remainingData=null)),!e.length)return{videoTrack:a,audioTrack:s,metadataTrack:l};var o=0;if(!this._headerParsed){if(!n.probe(e))throw new Error("Invalid flv file");s.present=(e[4]&4)>>>2!==0,a.present=(e[4]&1)!==0,this._headerParsed=!0,o=B(e,5)+4}for(var u=e.length,d,c,h,f,p;o+15<u&&(d=e[o],c=e[o+1]<<16|e[o+2]<<8|e[o+3],!(o+15+c>u));)h=(e[o+7]<<24>>>0)+(e[o+4]<<16)+(e[o+5]<<8)+e[o+6],o+=11,f=e.subarray(o,o+c),d===8?this._parseAudio(f,h):d===9?this._parseVideo(f,h):d===18?this._parseScript(f,h):oi.warn("Invalid tag type: ".concat(d)),o+=c,p=B(e,o),p!==11+c&&oi.warn("Invalid PrevTagSize ".concat(p," (").concat(11+c,")")),o+=4;return o<u&&(this._remainingData=e.subarray(o)),s.formatTimescale=a.formatTimescale=a.timescale=l.timescale=1e3,s.timescale=s.sampleRate||0,!s.exist()&&s.hasSample()&&s.reset(),!a.exist()&&a.hasSample()&&a.reset(),{videoTrack:a,audioTrack:s,metadataTrack:l}}},{key:"fix",value:function(e,i,t){return this._fixer.fix(e,i,t),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(e,i,t,s){return this.demux(e,i,t),this.fix(s,i,t)}},{key:"_parseAudio",value:function(e,i){if(e.length){var t=(e[0]&240)>>>4,s=this.audioTrack;if(t!==10&&t!==7&&t!==8){oi.warn("Unsupported sound format: ".concat(t)),s.reset();return}if(t!==10){var a=(e[0]&12)>>2,l=(e[0]&2)>>1,o=e[0]&1;s.sampleRate=n.AUDIO_RATE[a],s.sampleSize=l?16:8,s.channelCount=o+1}t===10?this._parseAac(e,i):this._parseG711(e,i,t)}}},{key:"_parseG711",value:function(e,i,t){var s=this.audioTrack;s.codecType=t===7?ni.G711PCMA:ni.G711PCMU,s.sampleRate=8e3,s.codec=s.codecType,s.samples.push(new ri(i,e.subarray(1)))}},{key:"_parseAac",value:function(e,i){var t=this.audioTrack;if(t.codecType=ni.AAC,e[1]===0){var s=Mt.parseAudioSpecificConfig(e.subarray(2));s?(t.codec=s.codec,t.channelCount=s.channelCount,t.sampleRate=s.sampleRate,t.config=s.config,t.objectType=s.objectType,t.sampleRateIndex=s.samplingFrequencyIndex):(t.reset(),oi.warn("Cannot parse AudioSpecificConfig",e))}else if(e[1]===1){if(i==null)return;t.samples.push(new ri(i,e.subarray(2)))}else oi.warn("Unknown AACPacketType: ".concat(e[1]))}},{key:"_parseVideo",value:function(e,i){var t=this;if(!(e.length<6)){var s=(e[0]&240)>>>4,a=e[0]&15,l=this.videoTrack;if(a!==7&&a!==12){l.reset(),oi.warn("Unsupported codecId: ".concat(a));return}var o=a===12;l.codecType=o?ii.HEVC:ii.AVC;var u=e[1],d=(e[2]<<16|e[3]<<8|e[4])<<8>>8;if(u===0){var c=e.subarray(5),h=o?ha.parseHEVCDecoderConfigurationRecord(c):Od.parseAVCDecoderConfigurationRecord(c);if(h){var f=h.hvcC,p=h.sps,m=h.ppsArr,g=h.spsArr,b=h.vpsArr,w=h.nalUnitSize;f&&(l.hvcC=l.hvcC||f),p&&(l.codec=p.codec,l.width=p.width,l.height=p.height,l.sarRatio=p.sarRatio,l.fpsNum=p.fpsNum,l.fpsDen=p.fpsDen),g.length&&(l.sps=g),m.length&&(l.pps=m),b&&b.length&&(l.vps=b),w&&(l.nalUnitSize=w)}else oi.warn("Cannot parse ".concat(o?"HEVC":"AVC","DecoderConfigurationRecord"),e)}else if(u===1){var S=zt.parseAvcC(e.subarray(5),l.nalUnitSize);if(S=this._checkAddMetaNalToUnits(o,S,l),S&&S.length){var k=new Zn(i+d,i,S);s===1&&k.setToKeyframe(),l.samples.push(k),S.forEach(function(L){var T=o?L[0]>>>1&63:L[0]&31;switch(T){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!o&&T!==5||o&&T===5)break;k.setToKeyframe();break;case 6:case 39:case 40:if(!o&&T!==6||o&&T===6)break;t.metadataTrack.seiSamples.push(new Nd(zt.parseSEI(zt.removeEPB(L),o),i+d));break}}),k.keyframe&&this._gopId++,k.gopId=this._gopId}else oi.warn("Cannot parse NALUs",e)}else u===2||oi.warn("Unknown AVCPacketType: ".concat(u))}}},{key:"_checkAddMetaNalToUnits",value:function(e,i,t){if(!e||!this._needAddMetaBeforeKeyFrameNal)return this._needAddMetaBeforeKeyFrameNal=!1,i;var s=i.map(function(a){return a[0]>>>1&63});return s.includes(32)?(this._needAddMetaBeforeKeyFrameNal=!1,i):(i.unshift(t.pps[0]),i.unshift(t.sps[0]),i.unshift(t.vps[0]),i.filter(Boolean))}},{key:"_parseScript",value:function(e,i){this.metadataTrack.flvScriptSamples.push(new Ug(i1.parse(e),i))}}],[{key:"probe",value:function(e){return e[0]!==70||e[1]!==76||e[2]!==86||e[3]!==1?!1:B(e,5)>=9}}]),n}();K(zd,"AUDIO_RATE",[5500,11e3,22e3,44e3]);var n1=9e4/2,Do=3,kr=9e4,Cs=5*9e4,Ms=9e4,r1=9e4/2,s1=9e4*5,a1=function(){function n(r,e,i,t){Ge(this,n),this.videoTrack=r,this.audioTrack=e,this.metadataTrack=i,this._baseDts=-1,this._baseVideoDts=-1,this._baseAudioDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=!1,this._videoTimestampBreak=!1,this._lastAudioExceptionGapDot=0,this._lastAudioExceptionOverlapDot=0,this._lastAudioExceptionLargeGapDot=0,this._needForceFixLargeGap=t==null?void 0:t.forceFixLargeGap,this._largeGapThreshold=(t==null?void 0:t.largeGapThreshold)||s1}return We(n,[{key:"fix",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;i=Math.round(i*9e4);var a=this.videoTrack,l=this.audioTrack,o=a.samples,u=l.samples;if(!(!o.length&&!u.length)){var d=o[0],c=u[0],h=0;if(o.length&&u.length&&(h=d.dts-c.pts),this._baseDtsInited||this._calculateBaseDts(this.audioTrack,this.videoTrack),t&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=i,this._baseAudioDts-=i,this._baseVideoDts-=i),!s){this._videoNextDts=h>0?i+h:i,this._audioNextPts=h>0?i:i-h,this._needForceFixLargeGap&&(this._videoNextDts=0,this._audioNextPts=0);var f=d?d.dts-this._baseDts-this._videoNextDts:0,p=c?c.pts-this._baseDts-this._audioNextPts:0;Math.abs(f||p)>Ms&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=i)}if(this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(l),this._fixVideo(a),this.metadataTrack.exist()){var m=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(g){g.pts=g.originPts-e._baseDts,g.time=Math.max(0,g.pts)/m})}a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].dts),l.samples.length&&(l.baseMediaDecodeTime=l.samples[0].pts*l.timescale/9e4)}}},{key:"_fixVideo",value:function(e){var i=this,t=e.samples;if(t.length){if(t.forEach(function(X){X.dts-=i._needForceFixLargeGap?i._baseVideoDts:i._baseDts,X.pts-=i._needForceFixLargeGap?i._baseVideoDts:i._baseDts}),this._videoNextDts===void 0){var s=t[0];this._videoNextDts=s.dts}var a=t.length,l=0,o=t[0],u=t[1],d=this._videoNextDts-o.dts;if(Math.abs(d)>r1){var c;if(e.warnings.push({type:Ke.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts/90,firstSampleDts:o.dts/90,nextSampleDts:(((c=t[1])===null||c===void 0?void 0:c.dts)||0)/90,sampleDuration:d/90}),o.dts+=d,o.pts+=d,u&&Math.abs(u.dts-o.dts)>Ms)this._videoTimestampBreak=!0,t.forEach(function(X,G){G!==0&&(X.dts+=d,X.pts+=d)});else for(var h=1;h<a-1;h++){var f,p=(f=t[h])===null||f===void 0?void 0:f.dts,m=t[h-1].dts;p&&p-m<0&&(t[h].dts+=d,t[h].pts+=d)}}var g;if(e.fpsNum&&e.fpsDen&&(g=e.timescale*(e.fpsDen/e.fpsNum)),g<90*10&&(g=0),!g){var b=e.samples[0],w=e.samples[1];g=a===1?9e3:Math.floor(w.dts-b.dts)}for(var S=0;S<a;S++){var k=t[S].dts,L=t[S+1];if(S<a-1?l=L.dts-k:t[S-1]?l=Math.min(k-t[S-1].dts,g):l=g,l>Ms||l<0){this._videoTimestampBreak=!0,l=this._audioTimestampBreak?g:Math.max(l,30*90);var T=this._audioNextPts||0;L&&L.dts>T&&(l=g),e.warnings.push({type:Ke.LARGE_VIDEO_GAP,time:k/e.timescale,dts:k,originDts:t[S].originDts,nextDts:this._videoNextDts,sampleDuration:l,refSampleDuration:g})}t[S].duration=l,this._videoNextDts+=l}}}},{key:"_fixAudio",value:function(e){var i=this,t=e.samples;t.length&&(t.forEach(function(s){s.pts-=i._needForceFixLargeGap?i._baseAudioDts:i._baseDts,s.dts=s.pts}),this._doFixAudioInternal(e,t,9e4))}},{key:"_calculateBaseDts",value:function(e,i){var t=e.samples,s=i.samples;if(!t.length&&!s.length)return!1;var a=1/0,l=1/0;t.length&&(e.baseDts=a=t[0].pts,this._baseAudioDts=a),s.length&&(i.baseDts=l=s[0].dts,this._baseVideoDts=l),this._baseDts=Math.min(a,l);var o=l-a,u=!1;return Number.isFinite(o)&&Math.abs(o)>n1&&i.warnings.push({type:Ke.LARGE_AV_SHIFT,videoBaseDts:l,audioBasePts:a,baseDts:this._baseDts,delta:o}),Number.isFinite(o)&&Math.abs(o)>this._largeGapThreshold*kr&&(u=!0),this._baseDtsInited||(u&&this._needForceFixLargeGap?this._needForceFixLargeGap=!0:this._needForceFixLargeGap=!1),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){if(this._baseDtsInited&&this._videoTimestampBreak&&this._audioTimestampBreak){var e=this._calculateBaseDts(this.audioTrack,this.videoTrack);if(!e)return;this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts),this._audioLastSample=null,this._videoLastSample=null,this._videoTimestampBreak=!1,this._audioTimestampBreak=!1}}},{key:"_doFixAudioInternal",value:function(e,i,t){e.sampleDuration||(e.sampleDuration=Mt.getFrameDuration(e.timescale,t));var s=e.sampleDuration;if(this._audioNextPts===void 0){var a=i[0];this._audioNextPts=a.pts}for(var l=0;l<i.length;l++){var o=this._audioNextPts,u=i[l],d=u.pts-o;if(!this._audioTimestampBreak&&d>=Do*s&&d<=kr&&!Hd){var c=Mt.getSilentFrame(e.codec,e.channelCount)||i[0].data.subarray(),h=Math.floor(d/s);Math.abs(u.pts-this._lastAudioExceptionGapDot)>Cs&&(this._lastAudioExceptionGapDot=u.pts),e.warnings.push({type:Ke.AUDIO_FILLED,pts:u.pts/90,originPts:u.originPts,count:h,nextPts:o/90,refSampleDuration:s});for(var f=0;f<h;f++){var p=new ri(Math.floor(o),c);p.originPts=Math.floor(this._baseDts+o),i.splice(l,0,p),this._audioNextPts+=s,l++}l--}else d<=-Do*s&&d>=-1*kr?(Math.abs(u.pts-this._lastAudioExceptionOverlapDot)>Cs&&(this._lastAudioExceptionOverlapDot=u.pts,e.warnings.push({type:Ke.AUDIO_DROPPED,pts:u.pts/90,originPts:u.originPts,nextPts:o/90,refSampleDuration:s})),i.splice(l,1),l--):(Math.abs(d)>=kr&&(this._audioTimestampBreak=!0,Math.abs(u.pts-this._lastAudioExceptionLargeGapDot)>Cs&&(this._lastAudioExceptionLargeGapDot=u.pts,e.warnings.push({type:Ke.LARGE_AUDIO_GAP,time:u.pts/1e3,pts:u.pts/90,originPts:u.originPts,nextPts:o/90,sampleDuration:d,refSampleDuration:s}))),u.dts=u.pts=o,this._audioNextPts+=s)}}}]),n}(),Kt=new ji("TsDemuxer"),Ad=function(){function n(r,e,i){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Ge(this,n),K(this,"_pmtId",-1),K(this,"_remainingPacketData",null),K(this,"_videoPesData",[]),K(this,"_audioPesData",[]),K(this,"_gopId",0),this.videoTrack=r||new ps,this.audioTrack=e||new fs,this.metadataTrack=i||new ms,this._fixer=new a1(this.videoTrack,this.audioTrack,this.metadataTrack,t)}return We(n,[{key:"demux",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=this.audioTrack,a=this.videoTrack,l=this.metadataTrack;i&&(this._pmtId=-1,a.reset(),s.reset(),l.reset()),!t||i?(this._remainingPacketData=null,this._videoPesData=[],this._audioPesData=[]):(a.samples=[],s.samples=[],l.seiSamples=[],a.warnings=[],s.warnings=[],this._remainingPacketData&&(e=gt(this._remainingPacketData,e),this._remainingPacketData=null));var o=e.length,u=o%188;u&&(this._remainingPacketData=e.subarray(o-u),o-=u);for(var d=a.pid,c=s.pid,h=0;h<o;h+=188){if(e[h]!==71)throw new Error("TS packet did not start with 0x47");var f=!!(e[h+1]&64),p=((e[h+1]&31)<<8)+e[h+2],m=(e[h+3]&48)>>4,g=void 0;if(m>1){if(g=h+5+e[h+4],g===h+188)continue}else g=h+4;switch(p){case 0:f&&(g+=e[g]+1),this._pmtId=(e[g+10]&31)<<8|e[g+11];break;case this._pmtId:{f&&(g+=e[g]+1);var b=g+3+((e[g+1]&15)<<8|e[g+2])-4,w=(e[g+10]&15)<<8|e[g+11];for(g+=12+w;g<b;){var S=(e[g+1]&31)<<8|e[g+2];switch(e[g]){case 15:s.pid=c=S;break;case 27:if(d!==-1)break;a.codecType=ii.AVC,a.pid=d=S;break;case 36:if(d!==-1)break;a.codecType=ii.HEVC,a.pid=d=S;break;default:Kt.warn("Unsupported stream. type: ".concat(e[g],", pid: ").concat(S))}g+=((e[g+3]&15)<<8|e[g+4])+5}}break;case d:f&&this._videoPesData.length&&this._parseVideoData(),this._videoPesData.push(e.subarray(g,h+188));break;case c:f&&this._audioPesData.length&&this._parseAudioData(),this._audioPesData.push(e.subarray(g,h+188));break;case 17:case 8191:break;default:Kt.warn("Unknown pid: ".concat(p))}}return this._parseVideoData(),this._parseAudioData(),s.formatTimescale=a.formatTimescale=a.timescale=l.timescale=9e4,s.timescale=s.sampleRate||0,{videoTrack:a,audioTrack:s,metadataTrack:l}}},{key:"fix",value:function(e,i,t){return this._fixer.fix(e,i,t),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(e,i,t,s){return this.demux(e,i,t),this.fix(s,i,t)}},{key:"_parseVideoData",value:function(){if(this._videoPesData.length){var e=n._parsePES(gt.apply(void 0,lt(this._videoPesData)));if(!e){Kt.warn("Cannot parse video pes",this._videoPesData);return}var i=zt.parseAnnexB(e.data);i?this._createVideoSample(i,e.pts,e.dts):Kt.warn("Cannot parse avc units",e),this._videoPesData=[]}}},{key:"_createVideoSample",value:function(e,i,t){var s=this;if(e.length){var a=this.videoTrack,l=a.codecType===ii.HEVC,o=new Zn(i,t);e.forEach(function(u){var d=l?u[0]>>>1&63:u[0]&31;switch(d){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!l&&d!==5||l&&d===5)break;o.setToKeyframe(),s._gopId++;break;case 6:case 39:case 40:if(!l&&d!==6||l&&d===6)break;s.metadataTrack.seiSamples.push(new Nd(zt.parseSEI(zt.removeEPB(u),l),i));return;case 32:if(!l)break;if(!a.vps.length){var c=ha.parseVPS(zt.removeEPB(u),a.hvcC);a.hvcC=a.hvcC||c,a.vps=[u]}break;case 7:case 33:if(!l&&d!==7||l&&d===7)break;if(!a.sps.length){var h=zt.removeEPB(u),f=l?ha.parseSPS(h,a.hvcC):Od.parseSPS(h);a.sps=[u],a.hvcC=a.hvcC||f.hvcC,a.codec=f.codec,a.width=f.width,a.height=f.height,a.sarRatio=f.sarRatio,a.fpsNum=f.fpsNum,a.fpsDen=f.fpsDen}break;case 8:case 34:if(!l&&d!==8||l&&d===8)break;a.pps.length||(a.pps=[u]);break;case 9:case 35:break;case 38:if(l){for(var p=!1,m=2;m<u.byteLength;m++)if(u[m]===255){p=!0;break}if(!p)return}break}o.units.push(u)}),o.gopId=this._gopId,this._pushVideoSample(a,o)}}},{key:"_pushVideoSample",value:function(e,i){if(i.units.length)if(i.pts===null||i.pts===void 0){Kt.warn("Video sample no pts",i);var t=e.samples[e.samples.length-1];t?(i.pts=t.pts,i.dts=t.dts):Kt.warn("Drop video sample",i)}else e.samples.push(i)}},{key:"_parseAudioData",value:function(){if(this._audioPesData.length){var e=n._parsePES(gt.apply(void 0,lt(this._audioPesData)));if(!e){Kt.warn("Cannot parse audio pes",this._audioPesData);return}this._parseAacData(e),this._audioPesData=[]}}},{key:"_parseAacData",value:function(e){var i=this.audioTrack,t=e.pts;if(t==null){if(Kt.warn("AAC pes not pts",i),!i.samples.length||!i.sampleRate)return;t=i.samples[i.samples.length-1].pts+Mt.getFrameDuration(i.sampleRate)}var s=Mt.parseADTS(e.data,t);if(s){var a;i.codec=s.codec,i.channelCount=s.channelCount,i.sampleRate=s.sampleRate,i.objectType=s.objectType,i.sampleRateIndex=s.samplingFrequencyIndex,i.config=s.config,(a=i.samples).push.apply(a,lt(s.frames.map(function(l){return new ri(l.pts,l.data)}))),s.skip&&Kt.warn("Skip aac adts ".concat(s.skip," bits")),s.remaining&&Kt.warn("Remaining aac adts ".concat(s.remaining," bits"))}else Kt.warn("Cannot parse aac adts",e)}}],[{key:"probe",value:function(e){return e.length?e[0]===71&&e[188]===71&&e[376]===71:!1}},{key:"_parsePES",value:function(e){var i=e[8];if(!(i==null||e.length<i+9)){var t=e[0]<<16|e[1]<<8|e[2];if(t===1){var s=(e[4]<<8)+e[5];if(!(s&&s>e.length-6)){var a,l,o=e[7];return o&192&&(a=(e[9]&14)*536870912+(e[10]&255)*4194304+(e[11]&254)*16384+(e[12]&255)*128+(e[13]&254)/2,o&64?(l=(e[14]&14)*536870912+(e[15]&255)*4194304+(e[16]&254)*16384+(e[17]&255)*128+(e[18]&254)/2,a-l>60*9e4&&(a=l)):l=a),{data:e.subarray(9+i),pts:a,dts:l}}}}}}]),n}(),xs=function(){function n(r,e,i){Ge(this,n),this.dv=new DataView(r),this.start=this.offset=e||this.dv.byteOffset,this.end=i?this.start+i:this.start+this.dv.byteLength}return We(n,[{key:"buffer",get:function(){return this.dv.buffer}},{key:"unreadLength",get:function(){return Math.max(this.end-this.offset,0)}},{key:"size",get:function(){return this.end-this.start}},{key:"readFloat",value:function(e){var i=0;switch(e){case 4:i=this.dv.getFloat32(this.offset);break;case 8:i=this.dv.getFloat64(this.offset);break;default:throw new Error("read ".concat(e,"-byte float is not supported"))}return this.offset+=e,i}},{key:"back",value:function(e){this.offset-=e}},{key:"skip",value:function(e){this.offset+=e}},{key:"readInt",value:function(e){var i=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getInt8(i);case 2:return this.dv.getInt16(i);case 4:return this.dv.getInt32(i);default:throw new Error("read ".concat(e,"-byte integers is not supported"))}}},{key:"read",value:function(e){var i=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(i);case 2:return this.dv.getUint16(i);case 3:return(this.dv.getUint16(i)<<8)+this.dv.getUint8(i+2);case 4:return this.dv.getUint32(i);default:return this.back(e-4),this.read(e-4)+this.dv.getUint32(i)*Math.pow(256,e-4)}}},{key:"write",value:function(e,i){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setUint8(t,i);case 2:return this.dv.setUint16(t,i);case 3:return this.dv.setUint8(t,i>>>16),this.dv.setUint16(t+1,65535&i);case 4:return this.dv.setUint32(t,i);default:throw new Error("write ".concat(e,"-byte integers is not supported"))}}},{key:"readToBuffer",value:function(e){var i;return this.offset||e?i=this.dv.buffer.slice(this.offset,e?this.offset+e:this.end):i=this.dv.buffer,this.offset+=i.byteLength,i}},{key:"readToUint8",value:function(e){var i=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength);return this.offset+=i.byteLength,i}},{key:"readString",value:function(e){for(var i=0,t="";i<e;i++)t+=String.fromCharCode(this.dv.getUint8(this.offset)),this.offset++;return t}}],[{key:"fromUint8",value:function(e){return new n(e.buffer,e.byteOffset,e.byteLength)}},{key:"concatUint8s",value:function(e){var i=new Uint8Array(e.reduce(function(s,a){return s+a.byteLength},0)),t=0;return e.forEach(function(s){i.set(s,t),t+=s.byteLength}),i}},{key:"concatUint8",value:function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.concatUint8s(i)}}]),n}(),l1=function(){function n(r,e){Ge(this,n),this.offset=0,this.val=r,this.size=e}return We(n,[{key:"skip",value:function(e){this.offset+=e}},{key:"read",value:function(e){var i=this.size-this.offset-e;if(i>=0){var t=0,s=0;if(this.offset+=e,this.size>31){for(;s<e;s++)t+=Math.pow(2,s);return this.val/Math.pow(2,i)&t}else{for(;s<e;s++)t+=1<<s;return this.val>>>i&t}}throw new Error("the number of the read operation exceeds the total length limit of bits")}}],[{key:"fromByte",value:function(e,i){return new n(e.read(i),i<<3)}}]),n}(),oe=function(){function n(){Ge(this,n)}return We(n,null,[{key:"findBox",value:function(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=[];if(!e)return s;for(var a=0,l="",o=0;e.length>7;){if(a=B(e),l=String.fromCharCode.apply(null,e.subarray(4,8)),o=8,a===1?(a=Yi(e,8),o+=8):a||(a=e.length),!i[0]||l===i[0]){var u=e.subarray(0,a);if(i.length<2)s.push({start:t,size:a,headerSize:o,type:l,data:u});else return n.findBox(u.subarray(o),i.slice(1),t+o)}t+=a,e=e.subarray(a)}return s}},{key:"tfhd",value:function(e){return ae(e,!0,function(i,t){i.trackId=B(t);var s=4,a=i.flags&255&1,l=i.flags&255&2,o=i.flags&255&8,u=i.flags&255&16,d=i.flags&255&32;a&&(s+=4,i.baseDataOffset=B(t,s),s+=4),l&&(i.sampleDescriptionIndex=B(t,s),s+=4),o&&(i.defaultSampleDuration=B(t,s),s+=4),u&&(i.defaultSampleSize=B(t,s),s+=4),d&&(i.defaultSampleFlags=B(t,s))})}},{key:"sidx",value:function(e){return ae(e,!0,function(i,t){var s=0;i.reference_ID=B(t,s),s+=4,i.timescale=B(t,s),s+=4,i.version===0?(i.earliest_presentation_time=B(t,s),s+=4,i.first_offset=B(t,s),s+=4):(i.earliest_presentation_time=Yi(t,s),s+=8,i.first_offset=Yi(t,s),s+=8),s+=2,i.references=[];var a=xe(t,s);s+=2;for(var l=0;l<a;l++){var o={};i.references.push(o);var u=B(t,s);s+=4,o.reference_type=u>>31&1,o.referenced_size=u&2147483647,o.subsegment_duration=B(t,s),s+=4,u=B(t,s),s+=4,o.starts_with_SAP=u>>31&1,o.SAP_type=u>>28&7,o.SAP_delta_time=u&268435455}})}},{key:"moov",value:function(e){return ae(e,!1,function(i,t,s){i.mvhd=n.mvhd(n.findBox(t,["mvhd"],s)[0]),i.trak=n.findBox(t,["trak"],s).map(function(a){return n.trak(a)}),i.pssh=n.pssh(n.findBox(t,["pssh"],s)[0])})}},{key:"mvhd",value:function(e){return ae(e,!0,function(i,t){var s=0;i.version===1?(i.timescale=B(t,16),i.duration=Yi(t,20),s+=28):(i.timescale=B(t,8),i.duration=B(t,12),s+=16),i.nextTrackId=B(t,s+76)})}},{key:"trak",value:function(e){return ae(e,!1,function(i,t,s){i.tkhd=n.tkhd(n.findBox(t,["tkhd"],s)[0]),i.mdia=n.mdia(n.findBox(t,["mdia"],s)[0])})}},{key:"tkhd",value:function(e){return ae(e,!0,function(i,t){var s=xs.fromUint8(t);i.version===1?(s.read(8),s.read(8),i.trackId=s.read(4),s.read(4),i.duration=s.read(8)):(s.read(4),s.read(4),i.trackId=s.read(4),s.read(4),i.duration=s.read(4)),s.skip(16),i.matrix=[];for(var a=0;a<36;a++)i.matrix.push(s.read(1));s.back(36);for(var l=[],o=0,u;o<3;o++)l.push(Vs(s.readInt(2),s.readInt(2))),l.push(Vs(s.readInt(2),s.readInt(2))),u=s.readInt(4),l.push(Vs(u>>30,u&1073741823));i.rotation=t1(l),i.width=s.read(4),i.height=s.read(4)})}},{key:"mdia",value:function(e){return ae(e,!1,function(i,t,s){i.mdhd=n.mdhd(n.findBox(t,["mdhd"],s)[0]),i.hdlr=n.hdlr(n.findBox(t,["hdlr"],s)[0]),i.minf=n.minf(n.findBox(t,["minf"],s)[0])})}},{key:"mdhd",value:function(e){return ae(e,!0,function(i,t){var s=0;i.version===1?(i.timescale=B(t,16),i.duration=Yi(t,20),s+=28):(i.timescale=B(t,8),i.duration=B(t,12),s+=16);var a=xe(t,s);i.language=String.fromCharCode((a>>10&31)+96,(a>>5&31)+96,(a&31)+96)})}},{key:"hdlr",value:function(e){return ae(e,!0,function(i,t){i.version===0&&(i.handlerType=String.fromCharCode.apply(null,t.subarray(4,8)))})}},{key:"minf",value:function(e){return ae(e,!1,function(i,t,s){i.vmhd=n.vmhd(n.findBox(t,["vmhd"],s)[0]),i.smhd=n.smhd(n.findBox(t,["smhd"],s)[0]),i.stbl=n.stbl(n.findBox(t,["stbl"],s)[0])})}},{key:"vmhd",value:function(e){return ae(e,!0,function(i,t){i.graphicsmode=xe(t),i.opcolor=[xe(t,2),xe(t,4),xe(t,6)]})}},{key:"smhd",value:function(e){return ae(e,!0,function(i,t){i.balance=xe(t)})}},{key:"stbl",value:function(e){return ae(e,!1,function(i,t,s){var a,l,o;i.stsd=n.stsd(n.findBox(t,["stsd"],s)[0]),i.stts=n.stts(n.findBox(t,["stts"],s)[0]),i.ctts=n.ctts(n.findBox(t,["ctts"],s)[0]),i.stsc=n.stsc(n.findBox(t,["stsc"],s)[0]),i.stsz=n.stsz(n.findBox(t,["stsz"],s)[0]),i.stco=n.stco(n.findBox(t,["stco"],s)[0]),i.stco||(i.co64=n.co64(n.findBox(t,["co64"],s)[0]),i.stco=i.co64);var u=(a=i.stsd.entries[0])===null||a===void 0||(l=a.sinf)===null||l===void 0||(o=l.schi)===null||o===void 0?void 0:o.tenc.default_IV_size;i.stss=n.stss(n.findBox(t,["stss"],s)[0]),i.senc=n.senc(n.findBox(t,["senc"],s)[0],u)})}},{key:"senc",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;return ae(e,!0,function(t,s){var a=0,l=B(s,a);a+=4,t.samples=[];for(var o=0;o<l;o++){var u={};u.InitializationVector=[];for(var d=0;d<i;d++)u.InitializationVector[d]=s[a+d];if(a+=i,t.flags&2){u.subsamples=[];var c=xe(s,a);a+=2;for(var h=0;h<c;h++){var f={};f.BytesOfClearData=xe(s,a),a+=2,f.BytesOfProtectedData=B(s,a),a+=4,u.subsamples.push(f)}}t.samples.push(u)}})}},{key:"pssh",value:function(e){return ae(e,!0,function(i,t){for(var s=[],a=[],l=0,o=0;o<16;o++)a.push(_s(t[l+o]));if(l+=16,i.version>0){var u=B(t,l);l+=4;for(var d=0;d<(""+u).length;d++)for(var c=0;c<16;c++){var h=t[l];l+=1,s.push(_s(h))}}var f=B(t,l);i.data_size=f,l+=4,i.kid=s,i.system_id=a,i.buffer=t})}},{key:"stsd",value:function(e){return ae(e,!0,function(i,t,s){i.entryCount=B(t),i.entries=n.findBox(t.subarray(4),[],s+4).map(function(a){switch(a.type){case"av01":return n.av01(a);case"avc1":case"avc2":case"avc3":case"avc4":return n.avc1(a);case"hvc1":case"hev1":return n.hvc1(a);case"mp4a":return n.mp4a(a);case"alaw":case"ulaw":return n.alaw(a);case"enca":return ae(a,!1,function(l,o,u){l.channelCount=xe(o,16),l.samplesize=xe(o,18),l.sampleRate=B(o,24)/65536,o=o.subarray(28),l.sinf=n.sinf(n.findBox(o,["sinf"],u)[0]),l.esds=n.esds(n.findBox(o,["esds"],u)[0])});case"encv":return ae(a,!1,function(l,o,u){l.width=xe(o,24),l.height=xe(o,26),l.horizresolution=B(o,28),l.vertresolution=B(o,32),o=o.subarray(78),l.sinf=n.sinf(n.findBox(o,["sinf"],u)[0]),l.avcC=n.avcC(n.findBox(o,["avcC"],u)[0]),l.hvcC=n.hvcC(n.findBox(o,["hvcC"],u)[0]),l.pasp=n.pasp(n.findBox(o,["pasp"],u)[0])})}}).filter(Boolean)})}},{key:"tenc",value:function(e){return ae(e,!1,function(i,t){var s=6;i.default_IsEncrypted=t[s],s+=1,i.default_IV_size=t[s],s+=1,i.default_KID=[];for(var a=0;a<16;a++)i.default_KID.push(_s(t[s])),s+=1})}},{key:"schi",value:function(e){return ae(e,!1,function(i,t,s){i.tenc=n.tenc(n.findBox(t,["tenc"],s)[0])})}},{key:"sinf",value:function(e){return ae(e,!1,function(i,t,s){i.schi=n.schi(n.findBox(t,["schi"],s)[0]),i.frma=n.frma(n.findBox(t,["frma"],s)[0])})}},{key:"frma",value:function(e){return ae(e,!1,function(i,t){i.data_format="";for(var s=0;s<4;s++)i.data_format+=String.fromCharCode(t[s])})}},{key:"colr",value:function(e){return ae(e,!1,function(i,t){var s=xs.fromUint8(t);i.data=e.data,i.colorType=s.readString(4),i.colorType==="nclx"?(i.colorPrimaries=s.read(2),i.transferCharacteristics=s.read(2),i.matrixCoefficients=s.read(2),i.fullRangeFlag=s.read(1)>>7):(i.colorType==="rICC"||i.colorType==="prof")&&(i.iccProfile=t.readToUint8())})}},{key:"av01",value:function(e){return ae(e,!1,function(i,t,s){var a=Is(i,t),l=t.subarray(a);s+=a,i.av1C=n.av1C(n.findBox(l,["av1C"],s)[0]),i.colr=n.colr(n.findBox(l,["colr"],s)[0])})}},{key:"av1C",value:function(e){return ae(e,!1,function(i,t){i.data=e.data;var s=xs.fromUint8(t),a=l1.fromByte(s,4);i.marker=a.read(1),i.version=a.read(7),i.seqProfile=a.read(3),i.seqLevelIdx0=a.read(5),i.seqTier0=a.read(1),i.highBitdepth=a.read(1),i.twelveBit=a.read(1),i.monochrome=a.read(1),i.chromaSubsamplingX=a.read(1),i.chromaSubsamplingY=a.read(1),i.chromaSamplePosition=a.read(2),i.reserved=a.read(3),i.initialPresentationDelayPresent=a.read(1),i.initialPresentationDelayPresent?i.initialPresentationDelayMinusOne=a.read(4):i.initialPresentationDelayMinusOne=0,i.configOBUs=s.readToUint8();var l;i.seqLevelIdx0===2&&i.highBitdepth===1?l=i.twelveBit===1?"12":"10":i.seqProfile<=2&&(l=i.highBitdepth===1?"10":"08"),i.codec=["av01",i.seqProfile,(i.seqLevelIdx0<10?"0"+i.seqLevelIdx0:i.seqLevelIdx0)+(i.seqTier0?"H":"M"),l].join(".")})}},{key:"avc1",value:function(e){return ae(e,!1,function(i,t,s){var a=Is(i,t),l=t.subarray(a);s+=a,i.avcC=n.avcC(n.findBox(l,["avcC"],s)[0]),i.pasp=n.pasp(n.findBox(l,["pasp"],s)[0])})}},{key:"avcC",value:function(e){return ae(e,!1,function(i,t){i.data=e.data,i.configurationVersion=t[0],i.AVCProfileIndication=t[1],i.profileCompatibility=t[2],i.AVCLevelIndication=t[3],i.codec=Ud([t[1],t[2],t[3]]),i.lengthSizeMinusOne=t[4]&3,i.spsLength=t[5]&31,i.sps=[];for(var s=6,a=0;a<i.spsLength;a++){var l=xe(t,s);s+=2,i.sps.push(t.subarray(s,s+l)),s+=l}i.ppsLength=t[s],s+=1,i.pps=[];for(var o=0;o<i.ppsLength;o++){var u=xe(t,s);s+=2,i.pps.push(t.subarray(s,s+=u)),s+=u}})}},{key:"hvc1",value:function(e){return ae(e,!1,function(i,t,s){var a=Is(i,t),l=t.subarray(a);s+=a,i.hvcC=n.hvcC(n.findBox(l,["hvcC"],s)[0]),i.pasp=n.pasp(n.findBox(l,["pasp"],s)[0])})}},{key:"hvcC",value:function(e){return ae(e,!1,function(i,t){i.data=e.data,i.codec="hev1.1.6.L93.B0",i.configurationVersion=t[0];var s=t[1];i.generalProfileSpace=s>>6,i.generalTierFlag=(s&32)>>5,i.generalProfileIdc=s&31,i.generalProfileCompatibility=B(t,2),i.generalConstraintIndicatorFlags=t.subarray(6,12),i.generalLevelIdc=t[12],i.avgFrameRate=xe(t,19),i.numOfArrays=t[22],i.vps=[],i.sps=[],i.pps=[];for(var a=23,l=0,o=0,u=0,d=0;d<i.numOfArrays;d++){l=t[a]&63,o=xe(t,a+1),a+=3;for(var c=[],h=0;h<o;h++)u=xe(t,a),a+=2,c.push(t.subarray(a,a+u)),a+=u;if(l===32){var f;(f=i.vps).push.apply(f,c)}else if(l===33){var p;(p=i.sps).push.apply(p,c)}else if(l===34){var m;(m=i.pps).push.apply(m,c)}}})}},{key:"pasp",value:function(e){return ae(e,!1,function(i,t){i.hSpacing=B(t),i.vSpacing=B(t,4)})}},{key:"mp4a",value:function(e){return ae(e,!1,function(i,t,s){var a=No(i,t);i.esds=n.esds(n.findBox(t.subarray(a),["esds"],s+a)[0])})}},{key:"esds",value:function(e){return ae(e,!0,function(i,t){i.codec="mp4a.";for(var s=0,a=0,l=0,o=0;t.length;){for(s=0,o=t[s],a=t[s+1],s+=2;a&128;)l=(a&127)<<7,a=t[s],s+=1;if(l+=a&127,o===3)t=t.subarray(s+3);else if(o===4)i.codec+=(t[s].toString(16)+".").padStart(3,"0"),t=t.subarray(s+13);else if(o===5){var u=i.config=t.subarray(s,s+l),d=(u[0]&248)>>3;d===31&&u.length>=2&&(d=32+((u[0]&7)<<3)+((u[1]&224)>>5)),i.objectType=d,i.codec+=d.toString(16),i.codec[i.codec.length-1]==="."&&(i.codec=i.codec.substring(0,i.codec.length-1));return}else{i.codec[i.codec.length-1]==="."&&(i.codec=i.codec.substring(0,i.codec.length-1));return}}})}},{key:"alaw",value:function(e){return ae(e,!1,function(i,t){No(i,t)})}},{key:"stts",value:function(e){return ae(e,!0,function(i,t){for(var s=B(t),a=[],l=4,o=0;o<s;o++)a.push({count:B(t,l),delta:B(t,l+4)}),l+=8;i.entryCount=s,i.entries=a})}},{key:"ctts",value:function(e){return ae(e,!0,function(i,t){var s=B(t),a=[],l=4;if(i.version===1)for(var o=0;o<s;o++)a.push({count:B(t,l),offset:B(t,l+4)}),l+=8;else for(var u=0;u<s;u++)a.push({count:B(t,l),offset:-(~B(t,l+4)+1)}),l+=8;i.entryCount=s,i.entries=a})}},{key:"stsc",value:function(e){return ae(e,!0,function(i,t){for(var s=B(t),a=[],l=4,o=0;o<s;o++)a.push({firstChunk:B(t,l),samplesPerChunk:B(t,l+4),sampleDescriptionIndex:B(t,l+8)}),l+=12;i.entryCount=s,i.entries=a})}},{key:"stsz",value:function(e){return ae(e,!0,function(i,t){var s=B(t),a=B(t,4),l=[];if(!s)for(var o=8,u=0;u<a;u++)l.push(B(t,o)),o+=4;i.sampleSize=s,i.sampleCount=a,i.entrySizes=l})}},{key:"stco",value:function(e){return ae(e,!0,function(i,t){for(var s=B(t),a=[],l=4,o=0;o<s;o++)a.push(B(t,l)),l+=4;i.entryCount=s,i.entries=a})}},{key:"co64",value:function(e){return ae(e,!0,function(i,t){for(var s=B(t),a=[],l=4,o=0;o<s;o++)a.push(Yi(t,l)),l+=8;i.entryCount=s,i.entries=a})}},{key:"stss",value:function(e){return ae(e,!0,function(i,t){for(var s=B(t),a=[],l=4,o=0;o<s;o++)a.push(B(t,l)),l+=4;i.entryCount=s,i.entries=a})}},{key:"moof",value:function(e){return ae(e,!1,function(i,t,s){i.mfhd=n.mfhd(n.findBox(t,["mfhd"],s)[0]),i.traf=n.findBox(t,["traf"],s).map(function(a){return n.traf(a)})})}},{key:"mfhd",value:function(e){return ae(e,!0,function(i,t){i.sequenceNumber=B(t)})}},{key:"traf",value:function(e){return ae(e,!1,function(i,t,s){i.tfhd=n.tfhd(n.findBox(t,["tfhd"],s)[0]),i.tfdt=n.tfdt(n.findBox(t,["tfdt"],s)[0]),i.trun=n.trun(n.findBox(t,["trun"],s)[0])})}},{key:"trun",value:function(e){return ae(e,!0,function(i,t){var s=i.version,a=i.flags,l=t.length,o=i.sampleCount=B(t),u=4;if(l>u&&a&1&&(i.dataOffset=-(~B(t,u)+1),u+=4),l>u&&a&4&&(i.firstSampleFlags=B(t,u),u+=4),i.samples=[],l>u)for(var d,c=0;c<o;c++)d={},a&256&&(d.duration=B(t,u),u+=4),a&512&&(d.size=B(t,u),u+=4),a&1024&&(d.flags=B(t,u),u+=4),a&2048&&(s?d.cts=-(~B(t,u+4)+1):d.cts=B(t,u),u+=4),i.samples.push(d)})}},{key:"tfdt",value:function(e){return ae(e,!0,function(i,t){i.version===1?i.baseMediaDecodeTime=Yi(t):i.baseMediaDecodeTime=B(t)})}},{key:"probe",value:function(e){return!!n.findBox(e,["ftyp"])}},{key:"parseSampleFlags",value:function(e){return{isLeading:(e[0]&12)>>>2,dependsOn:e[0]&3,isDependedOn:(e[1]&192)>>>6,hasRedundancy:(e[1]&48)>>>4,paddingValue:(e[1]&14)>>>1,isNonSyncSample:e[1]&1,degradationPriority:e[2]<<8|e[3]}}},{key:"moovToTrack",value:function(e,i,t){var s,a,l=e.trak;if(!(!l||!l.length)){var o=l.find(function(bi){var Wt,Pt;return((Wt=bi.mdia)===null||Wt===void 0||(Pt=Wt.hdlr)===null||Pt===void 0?void 0:Pt.handlerType)==="vide"}),u=l.find(function(bi){var Wt,Pt;return((Wt=bi.mdia)===null||Wt===void 0||(Pt=Wt.hdlr)===null||Pt===void 0?void 0:Pt.handlerType)==="soun"});if(o&&i){var d,c,h,f,p,m,g,b=i,w=(d=o.tkhd)===null||d===void 0?void 0:d.trackId;w!=null&&(b.id=o.tkhd.trackId),b.tkhdDuration=o.tkhd.duration,b.mvhdDurtion=e.mvhd.duration,b.mvhdTimecale=e.mvhd.timescale,b.timescale=b.formatTimescale=o.mdia.mdhd.timescale,b.duration=o.mdia.mdhd.duration||b.mvhdDurtion/b.mvhdTimecale*b.timescale,b.rotation=o.tkhd.rotation,b.matrix=o.tkhd.matrix;var S=o.mdia.minf.stbl.stsd.entries[0];if(b.width=S.width,b.height=S.height,S.pasp&&(b.sarRatio=[S.pasp.hSpacing,S.pasp.vSpacing]),S.av1C)b.codecType=ii.AV1,b.codec=S.av1C.codec,b.av1C=S.av1C.data,b.colr=S.colr.data;else if(S.hvcC)b.codecType=ii.HEVC,b.codec=S.hvcC.codec,b.vps=S.hvcC.vps,b.sps=S.hvcC.sps,b.pps=S.hvcC.pps,b.hvcC=S.hvcC.data;else if(S.avcC)b.codec=S.avcC.codec,b.sps=S.avcC.sps,b.pps=S.avcC.pps;else throw new Error("unknown video stsd entry");if(b.present=!0,b.ext={},b.ext.stss=(c=o.mdia)===null||c===void 0||(h=c.minf)===null||h===void 0||(f=h.stbl)===null||f===void 0?void 0:f.stss,b.ext.ctts=(p=o.mdia)===null||p===void 0||(m=p.minf)===null||m===void 0||(g=m.stbl)===null||g===void 0?void 0:g.ctts,S&&S.type==="encv"){var k,L,T,X,G,C,x,N;b.isVideoEncryption=!0,S.default_KID=(k=S.sinf)===null||k===void 0||(L=k.schi)===null||L===void 0?void 0:L.tenc.default_KID,S.default_IsEncrypted=(T=S.sinf)===null||T===void 0||(X=T.schi)===null||X===void 0?void 0:X.tenc.default_IsEncrypted,S.default_IV_size=(G=S.sinf)===null||G===void 0||(C=G.schi)===null||C===void 0?void 0:C.tenc.default_IV_size,b.videoSenc=o.mdia.minf.stbl.senc&&o.mdia.minf.stbl.senc.samples,S.data_format=(x=S.sinf)===null||x===void 0||(N=x.frma)===null||N===void 0?void 0:N.data_format,b.useEME=e.useEME,b.kidValue=e.kidValue,b.pssh=e.pssh,b.encv=S}}if(u&&t){var y,v,Z,W,E,R,M,P,Y,D=t,q=(y=u.tkhd)===null||y===void 0?void 0:y.trackId;q!=null&&(D.id=u.tkhd.trackId),D.tkhdDuration=u.tkhd.duration,D.mvhdDurtion=e.mvhd.duration,D.mvhdTimecale=e.mvhd.timescale,D.timescale=D.formatTimescale=u.mdia.mdhd.timescale,D.duration=u.mdia.mdhd.duration||D.mvhdDurtion/D.mvhdTimecale*D.timescale;var F=u.mdia.minf.stbl.stsd.entries[0];switch(D.sampleSize=F.sampleSize,D.sampleRate=F.sampleRate,D.channelCount=F.channelCount,D.present=!0,F.type){case"alaw":D.codecType=D.codec=ni.G711PCMA,D.sampleRate=8e3;break;case"ulaw":D.codecType=D.codec=ni.G711PCMU,D.sampleRate=8e3;break;default:D.sampleDuration=Mt.getFrameDuration(D.sampleRate,D.timescale),D.sampleRateIndex=Mt.getRateIndexByRate(D.sampleRate),D.objectType=((s=F.esds)===null||s===void 0?void 0:s.objectType)||2,F.esds&&(D.config=Array.from(F.esds.config)),D.codec=((a=F.esds)===null||a===void 0?void 0:a.codec)||"mp4a.40.2";break}if(D.sampleDuration=Mt.getFrameDuration(D.sampleRate,D.timescale),D.objectType=((v=F.esds)===null||v===void 0?void 0:v.objectType)||2,F.esds&&(F.esds.config?D.config=Array.from(F.esds.config):console.warn("esds config is null")),D.codec=((Z=F.esds)===null||Z===void 0?void 0:Z.codec)||"mp4a.40.2",D.sampleRateIndex=Mt.getRateIndexByRate(D.sampleRate),D.ext={},D.ext.stss=(W=u.mdia)===null||W===void 0||(E=W.minf)===null||E===void 0||(R=E.stbl)===null||R===void 0?void 0:R.stss,D.ext.ctts=(M=u.mdia)===null||M===void 0||(P=M.minf)===null||P===void 0||(Y=P.stbl)===null||Y===void 0?void 0:Y.ctts,D.present=!0,F&&F.type==="enca"){var Se,fe,Pe,z,se,te,be,Ee;D.isAudioEncryption=!0,F.data_format=(Se=F.sinf)===null||Se===void 0||(fe=Se.frma)===null||fe===void 0?void 0:fe.data_format,F.default_KID=(Pe=F.sinf)===null||Pe===void 0||(z=Pe.schi)===null||z===void 0?void 0:z.tenc.default_KID,F.default_IsEncrypted=(se=F.sinf)===null||se===void 0||(te=se.schi)===null||te===void 0?void 0:te.tenc.default_IsEncrypted,F.default_IV_size=(be=F.sinf)===null||be===void 0||(Ee=be.schi)===null||Ee===void 0?void 0:Ee.tenc.default_IV_size,D.audioSenc=u.mdia.minf.stbl.senc&&u.mdia.minf.stbl.senc.samples,D.useEME=e.useEME,D.kidValue=e.kidValue,D.enca=F}}if(t&&(t.isVideoEncryption=i?i.isVideoEncryption:!1),i&&(i.isAudioEncryption=t?t.isAudioEncryption:!1),i!=null&&i.encv||t!=null&&t.enca){var Ne,ai,li=i==null||(Ne=i.encv)===null||Ne===void 0?void 0:Ne.default_KID,xi=t==null||(ai=t.enca)===null||ai===void 0?void 0:ai.default_KID,Ii=li||xi?(li||xi).join(""):null;i&&(i.kid=Ii),t&&(t.kid=Ii)}return i&&(i.flags=3841),t&&(t.flags=1793),{videoTrack:i,audioTrack:t}}}},{key:"evaluateDefaultDuration",value:function(e,i,t){var s,a=i==null||(s=i.samples)===null||s===void 0?void 0:s.length;if(!a)return 1024;var l=1024*a/i.timescale;return l*e.timescale/t}},{key:"moofToSamples",value:function(e,i,t){var s={};return e.mfhd&&(i&&(i.sequenceNumber=e.mfhd.sequenceNumber),t&&(t.sequenceNumber=e.mfhd.sequenceNumber)),e.traf.forEach(function(a){var l=a.tfhd,o=a.tfdt,u=a.trun;if(!(!l||!u)){o&&(i&&i.id===l.trackId&&(i.baseMediaDecodeTime=o.baseMediaDecodeTime),t&&t.id===l.trackId&&(t.baseMediaDecodeTime=o.baseMediaDecodeTime));var d=l.defaultSampleSize||0,c=l.defaultSampleDuration||n.evaluateDefaultDuration(i,t,u.samples.length||u.sampleCount),h=u.dataOffset||0,f=0,p=-1;if(!u.samples.length&&u.sampleCount){s[l.trackId]=[];for(var m=0;m<u.sampleCount;m++)s[l.trackId].push({offset:h,dts:f,duration:c,size:d}),f+=c,h+=d}else s[l.trackId]=u.samples.map(function(g,b){return g={offset:h,dts:f,pts:f+(g.cts||0),duration:g.duration||c,size:g.size||d,gopId:p,keyframe:b===0||g.flags!==null&&g.flags!==void 0&&(g.flags&65536)>>>0!==65536},g.keyframe&&(p++,g.gopId=p),f+=g.duration,h+=g.size,g})}}),s}},{key:"moovToSamples",value:function(e){var i=e.trak;if(!(!i||!i.length)){var t=i.find(function(x){var N,y;return((N=x.mdia)===null||N===void 0||(y=N.hdlr)===null||y===void 0?void 0:y.handlerType)==="vide"}),s=i.find(function(x){var N,y;return((N=x.mdia)===null||N===void 0||(y=N.hdlr)===null||y===void 0?void 0:y.handlerType)==="soun"});if(!(!t&&!s)){var a,l;if(t){var o,u,d=(o=t.mdia)===null||o===void 0||(u=o.minf)===null||u===void 0?void 0:u.stbl;if(!d)return;var c=d.stts,h=d.stsc,f=d.stsz,p=d.stco,m=d.stss,g=d.ctts;if(!c||!h||!f||!p||!m)return;a=Ko(c,h,f,p,g,m)}if(s){var b,w,S,k=(b=s.mdia)===null||b===void 0||(w=b.minf)===null||w===void 0?void 0:w.stbl;if(!k)return;var L=(S=s.mdia.mdhd)===null||S===void 0?void 0:S.timescale,T=k.stts,X=k.stsc,G=k.stsz,C=k.stco;if(!L||!T||!X||!G||!C)return;l=Ko(T,X,G,C)}return{videoSamples:a,audioSamples:l}}}}}]),n}();function Ko(n,r,e,i,t,s){var a=[],l=t==null?void 0:t.entries,o=r.entries,u=i.entries,d=e.entrySizes,c=s==null?void 0:s.entries,h;c&&(h={},c.forEach(function(X){h[X-1]=!0}));var f;l&&(f=[],l.forEach(function(X){for(var G=X.count,C=X.offset,x=0;x<G;x++)f.push(C)}));var p,m=-1,g=0,b=0,w=0,S=0,k=0,L=o[0].samplesPerChunk,T=o[1]?o[1].firstChunk-1:1/0;return n.entries.forEach(function(X){for(var G=X.count,C=X.delta,x=0;x<G;x++)p={dts:g,duration:C,size:d[b]||e.sampleSize,offset:u[w]+k,index:b},c&&(p.keyframe=h[b],p.keyframe&&m++,p.gopId=m),f&&b<f.length&&(p.pts=p.dts+f[b]),a.push(p),g+=C,b++,b<L?k+=p.size:(w++,k=0,w>=T&&(S++,T=o[S+1]?o[S+1].firstChunk-1:1/0),L+=o[S].samplesPerChunk)}),a}function Is(n,r){return n.dataReferenceIndex=xe(r,6),n.width=xe(r,24),n.height=xe(r,26),n.horizresolution=B(r,28),n.vertresolution=B(r,32),n.frameCount=xe(r,40),n.depth=xe(r,74),78}function No(n,r){return n.dataReferenceIndex=xe(r,6),n.channelCount=xe(r,16),n.sampleSize=xe(r,18),n.sampleRate=B(r,24)/65536,28}function ae(n,r,e){if(n){if(n.size!==n.data.length)throw new Error("box ".concat(n.type," size !== data.length"));var i={start:n.start,size:n.size,headerSize:n.headerSize,type:n.type};return r&&(i.version=n.data[n.headerSize],i.flags=$g(n.data,n.headerSize+1),i.headerSize+=4),e(i,n.data.subarray(i.headerSize),i.start+i.headerSize),i}}var o1=function(r,e,i){for(var t=String(i),s=e>>0,a=Math.ceil(s/t.length),l=[],o=String(r);a--;)l.push(t);return l.join("").substring(0,s-o.length)+o},_s=function(){for(var r=[],e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return i.forEach(function(s){r.push(o1(Number(s).toString(16),2,0))}),r[0]},Bd=function(){function n(r,e,i){Ge(this,n),K(this,"__loadedMoofWraps",[]),K(this,"__lastRemainData",null),K(this,"__lastRemainDataStart",0),K(this,"__nextMoofStart",-1),this.videoTrack=r||new ps,this.audioTrack=e||new fs,this.metadataTrack=i||new ms}return We(n,[{key:"demuxPart",value:function(e,i,t){var s=this,a=this.videoTrack,l=this.audioTrack,o=a.exist(),u=l.exist(),d=/av01/.test(a.codec);a.samples=[],l.samples=[];var c=e,h=i;if(this.__lastRemainData){var f=this.__lastRemainDataStart+this.__lastRemainData.byteLength,p=i<=f&&i>this.__lastRemainDataStart&&i+e.byteLength>f;if(p){var m=e.subarray(this.__lastRemainData.byteLength+this.__lastRemainDataStart-i);c=gt(this.__lastRemainData,m),h=this.__lastRemainDataStart,this.__lastRemainData=null}else this.__lastRemainData=null,this.__lastRemainDataStart=0,this.__nextMoofStart=-1}if(!t){var g=oe.findBox(c,["moov"])[0];if(!g)throw new Error("cannot found moov box");t=oe.moov(g)}if(c){var b=h+c.byteLength;!o&&!u&&oe.moovToTrack(t,a,l);var w=[];this.__nextMoofStart<0?oe.findBox(c,["moof"],h).forEach(function(X){return w.push(X)}):this.__nextMoofStart>=h&&this.__nextMoofStart<=b-8&&oe.findBox(c.subarray(this.__nextMoofStart-h),["moof"],this.__nextMoofStart).forEach(function(X){return w.push(X)}),w.filter(function(X){return X.size<=X.data.length}).forEach(function(X){var G=oe.moof(X);s.__nextMoofStart=G.start+Math.max.apply(Math,lt(G.traf.map(function(C){return C.trun.samples.reduce(function(x,N){return x+N.size},C.trun.dataOffset||0)}))),s.__loadedMoofWraps.push({start:G.start,nextMoofStart:s.__nextMoofStart,moof:G}),s.__loadedMoofWraps.sort(function(C,x){return C.start-x.start})});var S=Ng(this.__loadedMoofWraps),k;try{var L=function(){var G=k.value;if(G.start>b||G.nextMoofStart<h)return"continue";var C=G.start,x=oe.moofToSamples(G.moof,a,l),N=a.baseMediaDecodeTime,y=l.baseMediaDecodeTime,v;Object.keys(x).forEach(function(Z){a.id==Z?x[Z].some(function(W){var E=W.offset+=C;if(!(E<h)){if(E+W.size>b)return!0;var R=new Zn((W.pts||W.dts)+N,W.dts+N);R.duration=W.duration,R.gopId=W.gopId,W.keyframe&&R.setToKeyframe();var M=c.subarray(E-h,E-h+W.size);if(R.data=M,!d)for(var P=0,Y=M.length-1;P<Y;)v=B(M,P),P+=4,R.units.push(M.subarray(P,P+v)),P+=v;s.__lastRemainDataStart=E+W.size,a.samples.push(R)}}):l.id==Z&&x[Z].some(function(W){var E=W.offset+C;if(!(E<h)){if(E+W.size>b)return!0;var R=c.subarray(E-h,E-h+W.size);l.samples.push(new ri(W.dts+y,R,W.duration)),s.__lastRemainDataStart=E+W.size}})})};for(S.s();!(k=S.n()).done;)var T=L()}catch(X){S.e(X)}finally{S.f()}}return this.__lastRemainDataStart>h&&this.__lastRemainDataStart<c.byteLength+h?this.__lastRemainData=c.subarray(this.__lastRemainDataStart-h):(this.__lastRemainData=c,this.__lastRemainDataStart=h),a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].pts),l.samples.length&&(l.baseMediaDecodeTime=l.samples[0].pts),{videoTrack:a,audioTrack:l,metadataTrack:this.metadataTrack}}},{key:"demux",value:function(e,i){var t=this.videoTrack,s=this.audioTrack,a=t.exist(),l=s.exist();if(t.samples=[],s.samples=[],i){if(!l){var o=oe.findBox(i,["moov"])[0];if(!o)throw new Error("cannot found moov box");oe.moovToTrack(oe.moov(o),null,s)}var u=oe.findBox(i,["moof"])[0];if(u){var d=oe.moofToSamples(oe.moof(u),null,s)[s.id],c=s.baseMediaDecodeTime;if(d){var h=u.start;d.map(function(k){k.offset+=h;var L=i.subarray(k.offset,k.offset+k.size);s.samples.push(new ri(k.dts+c,L,k.duration))})}}}if(e){if(!a&&!l){var f=oe.findBox(e,["moov"])[0];if(!f)throw new Error("cannot found moov box");oe.moovToTrack(oe.moov(f),t,s)}var p=oe.findBox(e,["moof"])[0];if(p){var m=oe.moofToSamples(oe.moof(p),t,s),g=t.baseMediaDecodeTime,b=s.baseMediaDecodeTime,w=p.start,S;Object.keys(m).forEach(function(k){t.id==k?m[k].map(function(L){L.offset+=w;var T=new Zn((L.pts||L.dts)+g,L.dts+g);T.duration=L.duration,T.gopId=L.gopId,L.keyframe&&T.setToKeyframe();var X=e.subarray(L.offset,L.offset+L.size);T.data=X;for(var G=0,C=X.length-1;G<C;)S=B(X,G),G+=4,T.units.push(X.subarray(G,G+S)),G+=S;t.samples.push(T)}):s.id==k&&m[k].map(function(L){L.offset+=w;var T=e.subarray(L.offset,L.offset+L.size);s.samples.push(new ri(L.dts+b,T,L.duration))})})}}return{videoTrack:t,audioTrack:s,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}}],[{key:"probe",value:function(e){return oe.probe(e)}}]),n}();function u1(n){for(var r=0,e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];i.forEach(function(l){r+=l.length});var s=new n(r),a=0;return i.forEach(function(l){s.set(l,a),a+=l.length}),s}var je=function(){function n(){Ge(this,n),this.buffer=new Uint8Array(0)}return We(n,[{key:"write",value:function(){for(var e=this,i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];t.forEach(function(a){a?e.buffer=u1(Uint8Array,e.buffer,a):window.console.warn(a)})}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,e&255])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,e&255])}}]),n}(),Ho=Math.pow(2,32)-1,ue=function(){function n(){Ge(this,n)}return We(n,null,[{key:"box",value:function(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),s=1;s<i;s++)t[s-1]=arguments[s];t=t.filter(Boolean);var a=8+t.reduce(function(u,d){return u+d.byteLength},0),l=new Uint8Array(a);l[0]=a>>24&255,l[1]=a>>16&255,l[2]=a>>8&255,l[3]=a&255,l.set(e,4);var o=8;return t.forEach(function(u){l.set(u,o),o+=u.byteLength}),l}},{key:"ftyp",value:function(e){var i=e.find(function(t){return t.type===Ri.VIDEO&&t.codecType===ii.HEVC});return i?n.FTYPHEV1:n.FTYPAVC1}},{key:"initSegment",value:function(e){var i=n.ftyp(e),t=gt(i,n.moov(e));return t}},{key:"pssh",value:function(e){var i=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],Yo(e.kid),[0,0,0,0]));return n.box(n.types.pssh,i)}},{key:"moov",value:function(e){if(e[0].useEME&&(e[0].encv||e[0].enca)){e[0].pssh||(e[0].pssh={kid:e[0].kid});var i=this.pssh(e[0].pssh);return n.box.apply(n,[n.types.moov,n.mvhd(e[0].mvhdDurtion||e[0].duration,e[0].mvhdTimecale||e[0].timescale),n.mvex(e)].concat(lt(e.map(function(t){return n.trak(t)})),[i]))}else return n.box.apply(n,[n.types.moov,n.mvhd(e[0].mvhdDurtion||e[0].duration,e[0].mvhdTimecale||e[0].timescale)].concat(lt(e.map(function(t){return n.trak(t)})),[n.mvex(e)]))}},{key:"mvhd",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,t=n.box(n.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255,e>>24&255,e>>16&255,e>>8&255,e&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return t}},{key:"trak",value:function(e){var i=n.box(n.types.trak,n.tkhd(e.id,e.tkhdDuration||0,e.width,e.height),n.mdia(e));return i}},{key:"tkhd",value:function(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=n.box(n.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,t>>8&255,t&255,0,0,s>>8&255,s&255,0,0]));return a}},{key:"mdia",value:function(e){var i=n.box(n.types.mdia,n.mdhd(e.duration,e.timescale),n.hdlr(e.type),n.minf(e));return i}},{key:"mdhd",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,t=n.box(n.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255,e>>24&255,e>>16&255,e>>8&255,e&255,85,196,0,0]));return t}},{key:"hdlr",value:function(e){var i=n.box(n.types.hdlr,n.HDLR_TYPES[e]);return i}},{key:"minf",value:function(e){var i=n.box(n.types.minf,e.type===Ri.VIDEO?n.VMHD:n.SMHD,n.DINF,n.stbl(e));return i}},{key:"stbl",value:function(e){var i=[];e&&e.ext&&e.ext.stss&&i.push(n.stss(e.ext.stss.entries));var t=n.box(n.types.stbl,n.stsd(e),n.STTS,i[0],n.STSC,n.STSZ,n.STCO);return t}},{key:"stsd",value:function(e){var i;e.type==="audio"?e.useEME&&e.enca?i=n.enca(e):i=n.mp4a(e):e.useEME&&e.encv?i=n.encv(e):e.av1C?i=n.av01(e):i=n.avc1hev1(e);var t=n.box(n.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),i);return t}},{key:"enca",value:function(e){var i=e.enca.channelCount,t=e.enca.sampleRate,s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,t>>8&255,t&255,0,0]),a=n.esds(e.config),l=n.sinf(e.enca);return n.box(n.types.enca,s,a,l)}},{key:"encv",value:function(e){var i,t,s=e.sps.length>0?e.sps[0]:[],a=e.pps.length>0?e.pps[0]:[],l=e.width,o=e.height,u=e.sarRatio[0],d=e.sarRatio[1],c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,o>>8&255,o&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h=new Uint8Array((i=(t=[1,s[1],s[2],s[3],255,225,s.length>>>8&255,s.length&255]).concat.apply(t,lt(s)).concat([1,a.length>>>8&255,a.length&255])).concat.apply(i,lt(a))),f=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),p=n.sinf(e.encv),m=new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255]);return n.box(n.types.encv,c,n.box(n.types.avcC,h),n.box(n.types.btrt,f),p,n.box(n.types.pasp,m))}},{key:"schi",value:function(e){var i=new Uint8Array([]),t=n.tenc(e);return n.box(n.types.schi,i,t)}},{key:"tenc",value:function(e){var i=new Uint8Array([0,0,0,0,0,0,e.default_IsEncrypted&255,e.default_IV_size&255].concat(Yo(e.default_KID)));return n.box(n.types.tenc,i)}},{key:"sinf",value:function(e){var i=new Uint8Array([]),t=new Uint8Array([e.data_format.charCodeAt(0),e.data_format.charCodeAt(1),e.data_format.charCodeAt(2),e.data_format.charCodeAt(3)]),s=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),a=n.schi(e);return n.box(n.types.sinf,i,n.box(n.types.frma,t),n.box(n.types.schm,s),a)}},{key:"av01",value:function(e){return n.box(n.types.av01,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e.width>>8&255,e.width&255,e.height>>8&255,e.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e.av1C,e.colr)}},{key:"avc1hev1",value:function(e){var i=e.codecType===ii.HEVC,t=i?n.types.hvc1:n.types.avc1,s=i?n.hvcC(e):n.avcC(e),a=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e.width>>8&255,e.width&255,e.height>>8&255,e.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s];return i?a.push(n.box(n.types.fiel,new Uint8Array([1,0]))):e.sarRatio&&e.sarRatio.length>1&&a.push(n.pasp(e.sarRatio)),n.box.apply(n,[t].concat(a))}},{key:"avcC",value:function(e){var i,t,s=[],a=[],l;return e.sps.forEach(function(o){l=o.byteLength,s.push(l>>>8&255),s.push(l&255),s.push.apply(s,lt(o))}),e.pps.forEach(function(o){l=o.byteLength,a.push(l>>>8&255),a.push(l&255),a.push.apply(a,lt(o))}),n.box(n.types.avcC,new Uint8Array((i=(t=[1,s[3],s[4],s[5],255,224|e.sps.length]).concat.apply(t,s).concat([e.pps.length])).concat.apply(i,a)))}},{key:"hvcC",value:function(e){var i=e.hvcC;if(i instanceof ArrayBuffer||i instanceof Uint8Array)return i;var t=e.vps,s=e.sps,a=e.pps,l;if(i){var o=i.generalProfileCompatibilityFlags,u=i.generalConstraintIndicatorFlags,d=(t.length&&1)+(s.length&&1)+(a.length&&1);l=[1,i.generalProfileSpace<<6|i.generalTierFlag<<5|i.generalProfileIdc,o>>>24,o>>>16,o>>>8,o,u[0],u[1],u[2],u[3],u[4],u[5],i.generalLevelIdc,240,0,252,i.chromaFormatIdc|252,i.bitDepthLumaMinus8|248,i.bitDepthChromaMinus8|248,0,0,i.numTemporalLayers<<3|i.temporalIdNested<<2|3,d];var c=function(f){var p;l.push(f.length>>8,f.length),(p=l).push.apply(p,lt(f))};t.length&&(l.push(160,0,t.length),t.forEach(c)),s.length&&(l.push(161,0,s.length),s.forEach(c)),a.length&&(l.push(162,0,a.length),a.forEach(c))}else l=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return n.box(n.types.hvcC,new Uint8Array(l))}},{key:"pasp",value:function(e){var i=_g(e,2),t=i[0],s=i[1];return n.box(n.types.pasp,new Uint8Array([t>>24,t>>16&255,t>>8&255,t&255,s>>24,s>>16&255,s>>8&255,s&255]))}},{key:"mp4a",value:function(e){return n.box(n.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,e.sampleRate>>8&255,e.sampleRate&255,0,0]),e.config.length?n.esds(e.config):void 0)}},{key:"esds",value:function(e){var i=e.length,t=n.box(n.types.esds,new Uint8Array([0,0,0,0,3,23+i,0,0,0,4,15+i,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([i]).concat(e).concat([6,1,2])));return t}},{key:"mvex",value:function(e){var i=n.box.apply(n,[n.types.mvex].concat(lt(e.map(function(t){return n.trex(t.id)}))));return i}},{key:"trex",value:function(e){var i=n.box(n.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]));return i}},{key:"trex1",value:function(e){var i=n.box(n.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]));return i}},{key:"trex2",value:function(e){var i=n.box(n.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]));return i}},{key:"moof",value:function(e){var i=n.box.apply(n,[n.types.moof,n.mfhd(e[0].samples?e[0].samples[0].gopId:0)].concat(lt(e.map(function(t){return n.traf(t)}))));return i}},{key:"mfhd",value:function(e){var i=n.box(n.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]));return i}},{key:"traf",value:function(e){var i=n.tfhd(e.id),t=n.tfdt(e,e.baseMediaDecodeTime),s=0,a;if(e.isVideo&&e.videoSenc&&(a=e.videoSenc,a.forEach(function(v){s=s+8,v.subsamples&&v.subsamples.length&&(s=s+2,s=s+v.subsamples.length*6)})),e.videoSencLength=s,!e.useEME||!e.isVideoEncryption&&!e.isAudioEncryption){var l=n.sdtp(e),o=76;return n.box(n.types.traf,i,t,l,n.trun(e.samples,l.byteLength+o))}else if(e.isVideoEncryption)if(e.isVideo){var u=n.saiz(e),d=n.saio(e),c=n.trun1(e),h=n.senc(e),f=n.box(n.types.traf,i,t,u,d,c,h);return f}else if(e.isAudioEncryption){var g=n.sbgp(),b=n.saiz(e),w=n.saio(e),S=n.senc(e),k=n.trun1(e),L=n.box(n.types.traf,i,t,g,b,w,S,k);return L}else{var p=n.sbgp(),m=n.trun1(e);return n.box(n.types.traf,i,t,p,m)}else if(e.isVideo){var T=n.trun1(e);return n.box(n.types.traf,i,t,T)}else{var X=n.sbgp(),G=n.saiz(e),C=n.saio(e),x=n.senc(e),N=n.trun1(e),y=n.box(n.types.traf,i,t,X,G,C,x,N);return y}}},{key:"sdtp",value:function(e){var i=new je;return e.samples.forEach(function(t){i.write(new Uint8Array(e.isVideo?[t.keyframe?32:16]:[16]))}),n.box(n.types.sdtp,this.extension(0,0),i.buffer)}},{key:"trun1",value:function(e){var i=new je,t=je.writeUint32(e.samples.length),s=null;if(e.isVideo){var a=e.videoSencLength;s=je.writeUint32(e.samples.length*16+a+149),!e.isVideoEncryption&&e.isAudioEncryption&&(s=je.writeUint32(e.samples.length*16+92))}else{var l=e.samples.length*12+124;e.isAudioEncryption&&(l=e.samples.length*12+8*e.audioSenc.length+177),s=je.writeUint32(l)}return e.samples.forEach(function(o){i.write(je.writeUint32(o.duration)),i.write(je.writeUint32(o.size)),i.write(je.writeUint32(o.keyframe?33554432:65536)),e.isVideo&&i.write(je.writeUint32(o.cts?o.cts:0))}),n.box(n.types.trun,this.extension(0,e.flags),t,s,i.buffer)}},{key:"senc",value:function(e){var i=new je,t=e.samples.length,s=e.isVideo?16:8,a=e.isVideo?2:0,l=[],o=0;return e.isVideo?(l=e.videoSenc,o=e.videoSencLength):l=e.audioSenc,o=o||s*t,i.write(je.writeUint32(16+o),n.types.senc,this.extension(0,a)),i.write(je.writeUint32(t)),l.forEach(function(u){for(var d=0;d<u.InitializationVector.length;d++)i.write(new Uint8Array([u.InitializationVector[d]]));u.subsamples&&u.subsamples.length&&(i.write(je.writeUint16(u.subsamples.length)),u.subsamples.forEach(function(c){i.write(je.writeUint16(c.BytesOfClearData)),i.write(je.writeUint32(c.BytesOfProtectedData))}))}),i.buffer}},{key:"saio",value:function(e){var i=e.samples.length*12+141;!e.isVideo&&e.isAudioEncryption&&(i=149);var t=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255]);return n.box(n.types.saio,t)}},{key:"saiz",value:function(e){var i=e.samples.length,t=new Uint8Array([0,0,0,0,16,i>>24&255,i>>16&255,i>>8&255,i&255]);return n.box(n.types.saiz,t)}},{key:"sbgp",value:function(){var e=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return n.box(n.types.sbgp,this.extension(0,0),e)}},{key:"extension",value:function(e,i){return new Uint8Array([e,i>>16&255,i>>8&255,i&255])}},{key:"tfhd",value:function(e){return n.box(n.types.tfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}},{key:"tfdt",value:function(e,i){var t=Math.floor(i/(Ho+1)),s=Math.floor(i%(Ho+1));return e.useEME&&(e.isVideoEncryption||e.isAudioEncryption)?n.box(n.types.tfdt,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])):n.box(n.types.tfdt,new Uint8Array([1,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,s>>24,s>>16&255,s>>8&255,s&255]))}},{key:"trun",value:function(e,i){var t=e.length,s=12+16*t;i+=8+s;var a=new Uint8Array(s);a.set([0,0,15,1,t>>>24&255,t>>>16&255,t>>>8&255,t&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255],0);for(var l=0;l<t;l++){var o=e[l],u=o.duration,d=o.size,c=o.flag,h=c===void 0?{}:c,f=o.cts,p=f===void 0?0:f;a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,h.isLeading<<2|(h.dependsOn===null||h.dependsOn===void 0?1:h.dependsOn),h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|(h.isNonSyncSample===null||h.isNonSyncSample===void 0?1:h.isNonSyncSample),h.degradationPriority&61440,h.degradationPriority&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*l)}return n.box(n.types.trun,a)}},{key:"moovMP4",value:function(e){return n.box.apply(n,[n.types.moov,n.mvhd(e[0].duration,e[0].timescale)].concat(lt(e.map(function(i){return n.trackMP4(i)}))))}},{key:"trackMP4",value:function(e){return n.box(n.types.trak,n.tkhd(e.id,e.duration,e.width,e.height),n.mdiaMP4(e))}},{key:"mdiaMP4",value:function(e){return n.box(n.types.mdia,n.mdhd(e.duration,e.timescale),n.hdlr(e.type),n.minfMP4(e))}},{key:"minfMP4",value:function(e){return n.box(n.types.minf,e.type===Ri.VIDEO?n.VMHD:n.SMHD,n.DINF,n.stblMP4(e))}},{key:"stblMP4",value:function(e){var i=e.ext,t=[n.stsd(e),n.stts(i.stts),n.stsc(i.stsc),n.stsz(i.stsz),n.stco(i.stco)];return i.stss.length&&t.push(n.stss(i.stss)),i.ctts.length&&t.push(n.ctts(i.ctts)),n.box.apply(n,[n.types.stbl].concat(t))}},{key:"stts",value:function(e){var i=e.length,t=new Uint8Array(8*i),s=0;return e.forEach(function(a){var l=a.value,o=a.count;t.set([o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255],s),s+=8}),n.box(n.types.stts,gt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),t))}},{key:"stsc",value:function(e){var i=e.length,t=new Uint8Array(12*i),s=0;return e.forEach(function(a){var l=a.firstChunk,o=a.samplesPerChunk,u=a.sampleDescIndex;t.set([l>>24,l>>16&255,l>>8&255,l&255,o>>24,o>>16&255,o>>8&255,o&255,u>>24,u>>16&255,u>>8&255,u&255],s),s+=12}),n.box(n.types.stsc,gt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),t))}},{key:"stsz",value:function(e){var i=e.length,t=new Uint8Array(4*i),s=0;return e.forEach(function(a){t.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),n.box(n.types.stsz,gt(new Uint8Array([0,0,0,0,0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),t))}},{key:"stco",value:function(e){var i=e.length,t=new Uint8Array(4*i),s=0;return e.forEach(function(a){t.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),n.box(n.types.stco,gt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),t))}},{key:"stss",value:function(e){var i=e.length,t=new Uint8Array(4*i),s=0;return e.forEach(function(a){t.set([a>>24,a>>16&255,a>>8&255,a&255],s),s+=4}),n.box(n.types.stss,gt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),t))}},{key:"ctts",value:function(e){var i=e.length,t=new Uint8Array(8*i),s=0;return e.forEach(function(a){var l=a.value,o=a.count;t.set([o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255],s),s+=8}),n.box(n.types.ctts,gt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255]),t))}},{key:"styp",value:function(){return n.box(n.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(e){var i=e.timescale,t=e.samples[0].duration,s=t*e.samples.length,a=e.samples[0].sampleOffset*t,l=8;e.samples.forEach(function(h){l+=h.size});var o=0;if(e.isVideo){var u=0,d;e.videoSenc&&(d=e.videoSenc),e.isVideo&&d.forEach(function(h){u=u+8,h.subsamples&&h.subsamples.length&&(u=u+2,u=u+h.subsamples.length*6)}),e.videoSencLength=u,o=l+141+e.samples.length*16+u,e.useEME&&e.isAudioEncryption&&!e.isVideoEncryption&&(o=l+e.samples.length*16+84)}else o=l+116+e.samples.length*12,e.useEME&&e.isAudioEncryption&&(o=l+169+e.samples.length*12+8*e.audioSenc.length);var c=new Uint8Array([0,0,0,0,0,0,0,e.id&255,i>>24&255,i>>16&255,i>>8&255,i&255,a>>24&255,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,1,0,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255,144,0,0,0]);return n.box(n.types.sidx,c)}},{key:"mdat",value:function(e){var i=n.box(n.types.mdat,e);return i}}]),n}();K(ue,"types",["av01","av1C","avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce(function(n,r){return n[r]=[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3)],n},Object.create(null)));K(ue,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])});K(ue,"FTYPAVC1",ue.box(ue.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49])));K(ue,"FTYPHEV1",ue.box(ue.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49])));K(ue,"DINF",ue.box(ue.types.dinf,ue.box(ue.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]))));K(ue,"VMHD",ue.box(ue.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])));K(ue,"SMHD",ue.box(ue.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0])));K(ue,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0]));K(ue,"STTS",ue.box(ue.types.stts,ue.StblTable));K(ue,"STSC",ue.box(ue.types.stsc,ue.StblTable));K(ue,"STSZ",ue.box(ue.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])));K(ue,"STCO",ue.box(ue.types.stco,ue.StblTable));var el=function(){function n(r,e){Ge(this,n),this.name=r||"",this._prefix="[".concat(this.name,"]"),n.disabled=e}return We(n,[{key:"debug",value:function(){var e;if(!n.disabled){for(var i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];(e=console).debug.apply(e,[this._prefix].concat(t))}}},{key:"log",value:function(){var e;if(!n.disabled){for(var i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];(e=console).log.apply(e,[this._prefix].concat(t))}}},{key:"warn",value:function(){var e;if(!n.disabled){for(var i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];(e=console).warn.apply(e,[this._prefix].concat(t))}}},{key:"error",value:function(){var e;if(!n.disabled){for(var i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];(e=console).error.apply(e,[this._prefix].concat(t))}}},{key:"table",value:function(){var e;n.disabled||(console.group(this._prefix),(e=console).table.apply(e,arguments),console.groupEnd())}}],[{key:"enable",value:function(){n.disabled=!1}},{key:"disable",value:function(){n.disabled=!0}}]),n}();K(el,"disabled",!0);var tl=function(){function n(r,e,i){Ge(this,n),this.videoTrack=r,this.audioTrack=e;var t=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=t&&Number(t[1])<50,this.log=new el("FMP4Remuxer",i&&i.openLog?!i.openLog:!0)}return We(n,[{key:"remux",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=this.videoTrack,s=this.audioTrack,a=t.exist(),l=s.exist(),o,u,d,c=[];e&&(i&&i.initMerge?(a&&c.push(this.videoTrack),l&&c.push(this.audioTrack),d=ue.initSegment(c)):(a&&(o=ue.initSegment([this.videoTrack])),l&&(u=ue.initSegment([this.audioTrack]))));var h,f;return a&&t.hasSample()&&(h=this._remuxVideo()),l&&s.hasSample()&&(f=this._remuxAudio()),t.samples=[],s.samples=[],{initSegment:d,videoInitSegment:o,audioInitSegment:u,videoSegment:h,audioSegment:f}}},{key:"_remuxVideo",value:function(){var e=this.videoTrack;this.forceFirstIDR&&(e.samples[0].flag={dependsOn:2,isNonSyncSample:0});var i=e.samples,t=/av01/.test(e.codec),s=0;t?i.forEach(function(S){s+=S.data.byteLength}):i.forEach(function(S){s+=S.units.reduce(function(k,L){return k+L.byteLength},0),s+=S.units.length*4});var a=new Uint8Array(s);if(t)for(var l=0,o=i.length,u=0,d;l<o;l++)d=i[l],a.set(d.data,u),d.size=d.data.byteLength,u+=d.size;else for(var c=new DataView(a.buffer),h=function(k,L){L=i[f];var T=0;L.units.forEach(function(X){c.setUint32(k,X.byteLength),k+=4,a.set(X,k),k+=X.byteLength,T+=4+X.byteLength}),L.size=T,m=k,g=L},f=0,p=i.length,m=0,g;f<p;f++)h(m,g);var b=ue.mdat(a),w=ue.moof([e]);return gt(w,b)}},{key:"_remuxAudio",value:function(){var e=this.audioTrack,i=new Uint8Array(e.samples.reduce(function(a,l){return a+l.size},0));e.samples.reduce(function(a,l){return i.set(l.data,a),a+l.size},0);var t=ue.mdat(i),s=ue.moof([e]);return gt(s,t)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),n}();class pt{static create(...r){return new this(...r)}mixIn(r){return Object.assign(this,r)}clone(){const r=new this.constructor;return Object.assign(r,this),r}}class ft extends pt{constructor(r=[],e=r.length*4){super();let i=r;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),(i instanceof Int8Array||i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array||i instanceof Float64Array)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),i instanceof Uint8Array){const t=i.byteLength,s=[];for(let a=0;a<t;a+=1)s[a>>>2]|=i[a]<<24-a%4*8;this.words=s,this.sigBytes=t}else this.words=r,this.sigBytes=e}static random(r){const e=[],i=t=>{let s=t,a=987654321;const l=4294967295;return()=>{a=36969*(a&65535)+(a>>16)&l,s=18e3*(s&65535)+(s>>16)&l;let o=(a<<16)+s&l;return o/=4294967296,o+=.5,o*(Math.random()>.5?1:-1)}};for(let t=0,s;t<r;t+=4){const a=i((s||Math.random())*4294967296);s=a()*987654071,e.push(a()*4294967296|0)}return new ft(e,r)}toString(r=pa){return r.stringify(this)}concat(r){const e=this.words,i=r.words,t=this.sigBytes,s=r.sigBytes;if(this.clamp(),t%4)for(let a=0;a<s;a+=1){const l=i[a>>>2]>>>24-a%4*8&255;e[t+a>>>2]|=l<<24-(t+a)%4*8}else for(let a=0;a<s;a+=4)e[t+a>>>2]=i[a>>>2];return this.sigBytes+=s,this}clamp(){const{words:r,sigBytes:e}=this;r[e>>>2]&=4294967295<<32-e%4*8,r.length=Math.ceil(e/4)}clone(){const r=super.clone.call(this);return r.words=this.words.slice(0),r}}const pa={stringify(n){const{words:r,sigBytes:e}=n,i=[];for(let t=0;t<e;t+=1){const s=r[t>>>2]>>>24-t%4*8&255;i.push((s>>>4).toString(16)),i.push((s&15).toString(16))}return i.join("")},parse(n){const r=n.length,e=[];for(let i=0;i<r;i+=2)e[i>>>3]|=parseInt(n.substr(i,2),16)<<24-i%8*4;return new ft(e,r/2)}},Uo={stringify(n){const{words:r,sigBytes:e}=n,i=[];for(let t=0;t<e;t+=1){const s=r[t>>>2]>>>24-t%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse(n){const r=n.length,e=[];for(let i=0;i<r;i+=1)e[i>>>2]|=(n.charCodeAt(i)&255)<<24-i%4*8;return new ft(e,r)}},Jd={stringify(n){try{return decodeURIComponent(escape(Uo.stringify(n)))}catch{throw new Error("Malformed UTF-8 data")}},parse(n){return Uo.parse(unescape(encodeURIComponent(n)))}};class jd extends pt{constructor(){super(),this._minBufferSize=0}reset(){this._data=new ft,this._nDataBytes=0}_append(r){let e=r;typeof e=="string"&&(e=Jd.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(r){let e;const{_data:i,blockSize:t}=this,s=i.words,a=i.sigBytes,l=t*4;let o=a/l;r?o=Math.ceil(o):o=Math.max((o|0)-this._minBufferSize,0);const u=o*t,d=Math.min(u*4,a);if(u){for(let c=0;c<u;c+=t)this._doProcessBlock(s,c);e=s.splice(0,u),i.sigBytes-=d}return new ft(e,d)}clone(){const r=super.clone.call(this);return r._data=this._data.clone(),r}}class d1 extends jd{constructor(r){super(),this.blockSize=512/32,this.cfg=Object.assign(new pt,r),this.reset()}static _createHelper(r){return(e,i)=>new r(i).finalize(e)}static _createHmacHelper(r){return(e,i)=>new c1(r,i).finalize(e)}reset(){super.reset.call(this),this._doReset()}update(r){return this._append(r),this._process(),this}finalize(r){return r&&this._append(r),this._doFinalize()}}class c1 extends pt{constructor(r,e){super();const i=new r;this._hasher=i;let t=e;typeof t=="string"&&(t=Jd.parse(t));const s=i.blockSize,a=s*4;t.sigBytes>a&&(t=i.finalize(e)),t.clamp();const l=t.clone();this._oKey=l;const o=t.clone();this._iKey=o;const u=l.words,d=o.words;for(let c=0;c<s;c+=1)u[c]^=1549556828,d[c]^=909522486;l.sigBytes=a,o.sigBytes=a,this.reset()}reset(){const r=this._hasher;r.reset(),r.update(this._iKey)}update(r){return this._hasher.update(r),this}finalize(r){const e=this._hasher,i=e.finalize(r);return e.reset(),e.finalize(this._oKey.clone().concat(i))}}const h1=(n,r,e)=>{const i=[];let t=0;for(let s=0;s<r;s+=1)if(s%4){const a=e[n.charCodeAt(s-1)]<<s%4*2,l=e[n.charCodeAt(s)]>>>6-s%4*2,o=a|l;i[t>>>2]|=o<<24-t%4*8,t+=1}return ft.create(i,t)},Oo={stringify(n){const{words:r,sigBytes:e}=n,i=this._map;n.clamp();const t=[];for(let a=0;a<e;a+=3){const l=r[a>>>2]>>>24-a%4*8&255,o=r[a+1>>>2]>>>24-(a+1)%4*8&255,u=r[a+2>>>2]>>>24-(a+2)%4*8&255,d=l<<16|o<<8|u;for(let c=0;c<4&&a+c*.75<e;c+=1)t.push(i.charAt(d>>>6*(3-c)&63))}const s=i.charAt(64);if(s)for(;t.length%4;)t.push(s);return t.join("")},parse(n){let r=n.length;const e=this._map;let i=this._reverseMap;if(!i){this._reverseMap=[],i=this._reverseMap;for(let s=0;s<e.length;s+=1)i[e.charCodeAt(s)]=s}const t=e.charAt(64);if(t){const s=n.indexOf(t);s!==-1&&(r=s)}return h1(n,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},j=[];for(let n=0;n<64;n+=1)j[n]=Math.abs(Math.sin(n+1))*4294967296|0;const tt=(n,r,e,i,t,s,a)=>{const l=n+(r&e|~r&i)+t+a;return(l<<s|l>>>32-s)+r},it=(n,r,e,i,t,s,a)=>{const l=n+(r&i|e&~i)+t+a;return(l<<s|l>>>32-s)+r},nt=(n,r,e,i,t,s,a)=>{const l=n+(r^e^i)+t+a;return(l<<s|l>>>32-s)+r},rt=(n,r,e,i,t,s,a)=>{const l=n+(e^(r|~i))+t+a;return(l<<s|l>>>32-s)+r};class p1 extends d1{_doReset(){this._hash=new ft([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(r,e){const i=r;for(let C=0;C<16;C+=1){const x=e+C,N=r[x];i[x]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}const t=this._hash.words,s=i[e+0],a=i[e+1],l=i[e+2],o=i[e+3],u=i[e+4],d=i[e+5],c=i[e+6],h=i[e+7],f=i[e+8],p=i[e+9],m=i[e+10],g=i[e+11],b=i[e+12],w=i[e+13],S=i[e+14],k=i[e+15];let L=t[0],T=t[1],X=t[2],G=t[3];L=tt(L,T,X,G,s,7,j[0]),G=tt(G,L,T,X,a,12,j[1]),X=tt(X,G,L,T,l,17,j[2]),T=tt(T,X,G,L,o,22,j[3]),L=tt(L,T,X,G,u,7,j[4]),G=tt(G,L,T,X,d,12,j[5]),X=tt(X,G,L,T,c,17,j[6]),T=tt(T,X,G,L,h,22,j[7]),L=tt(L,T,X,G,f,7,j[8]),G=tt(G,L,T,X,p,12,j[9]),X=tt(X,G,L,T,m,17,j[10]),T=tt(T,X,G,L,g,22,j[11]),L=tt(L,T,X,G,b,7,j[12]),G=tt(G,L,T,X,w,12,j[13]),X=tt(X,G,L,T,S,17,j[14]),T=tt(T,X,G,L,k,22,j[15]),L=it(L,T,X,G,a,5,j[16]),G=it(G,L,T,X,c,9,j[17]),X=it(X,G,L,T,g,14,j[18]),T=it(T,X,G,L,s,20,j[19]),L=it(L,T,X,G,d,5,j[20]),G=it(G,L,T,X,m,9,j[21]),X=it(X,G,L,T,k,14,j[22]),T=it(T,X,G,L,u,20,j[23]),L=it(L,T,X,G,p,5,j[24]),G=it(G,L,T,X,S,9,j[25]),X=it(X,G,L,T,o,14,j[26]),T=it(T,X,G,L,f,20,j[27]),L=it(L,T,X,G,w,5,j[28]),G=it(G,L,T,X,l,9,j[29]),X=it(X,G,L,T,h,14,j[30]),T=it(T,X,G,L,b,20,j[31]),L=nt(L,T,X,G,d,4,j[32]),G=nt(G,L,T,X,f,11,j[33]),X=nt(X,G,L,T,g,16,j[34]),T=nt(T,X,G,L,S,23,j[35]),L=nt(L,T,X,G,a,4,j[36]),G=nt(G,L,T,X,u,11,j[37]),X=nt(X,G,L,T,h,16,j[38]),T=nt(T,X,G,L,m,23,j[39]),L=nt(L,T,X,G,w,4,j[40]),G=nt(G,L,T,X,s,11,j[41]),X=nt(X,G,L,T,o,16,j[42]),T=nt(T,X,G,L,c,23,j[43]),L=nt(L,T,X,G,p,4,j[44]),G=nt(G,L,T,X,b,11,j[45]),X=nt(X,G,L,T,k,16,j[46]),T=nt(T,X,G,L,l,23,j[47]),L=rt(L,T,X,G,s,6,j[48]),G=rt(G,L,T,X,h,10,j[49]),X=rt(X,G,L,T,S,15,j[50]),T=rt(T,X,G,L,d,21,j[51]),L=rt(L,T,X,G,b,6,j[52]),G=rt(G,L,T,X,o,10,j[53]),X=rt(X,G,L,T,m,15,j[54]),T=rt(T,X,G,L,a,21,j[55]),L=rt(L,T,X,G,f,6,j[56]),G=rt(G,L,T,X,k,10,j[57]),X=rt(X,G,L,T,c,15,j[58]),T=rt(T,X,G,L,w,21,j[59]),L=rt(L,T,X,G,u,6,j[60]),G=rt(G,L,T,X,g,10,j[61]),X=rt(X,G,L,T,l,15,j[62]),T=rt(T,X,G,L,p,21,j[63]),t[0]=t[0]+L|0,t[1]=t[1]+T|0,t[2]=t[2]+X|0,t[3]=t[3]+G|0}_doFinalize(){const r=this._data,e=r.words,i=this._nDataBytes*8,t=r.sigBytes*8;e[t>>>5]|=128<<24-t%32;const s=Math.floor(i/4294967296),a=i;e[(t+64>>>9<<4)+15]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,e[(t+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360,r.sigBytes=(e.length+1)*4,this._process();const l=this._hash,o=l.words;for(let u=0;u<4;u+=1){const d=o[u];o[u]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360}return l}clone(){const r=super.clone.call(this);return r._hash=this._hash.clone(),r}}class f1 extends pt{constructor(r){super(),this.cfg=Object.assign(new pt,{keySize:128/32,hasher:p1,iterations:1},r)}compute(r,e){let i;const{cfg:t}=this,s=t.hasher.create(),a=ft.create(),l=a.words,{keySize:o,iterations:u}=t;for(;l.length<o;){i&&s.update(i),i=s.update(r).finalize(e),s.reset();for(let d=1;d<u;d+=1)i=s.finalize(i),s.reset();a.concat(i)}return a.sigBytes=o*4,a}}class rr extends jd{constructor(r,e,i){super(),this.cfg=Object.assign(new pt,i),this._xformMode=r,this._key=e,this.reset()}static createEncryptor(r,e){return this.create(this._ENC_XFORM_MODE,r,e)}static createDecryptor(r,e){return this.create(this._DEC_XFORM_MODE,r,e)}static _createHelper(r){const e=i=>typeof i=="string"?ec:cn;return{encrypt(i,t,s){return e(t).encrypt(r,i,t,s)},decrypt(i,t,s){return e(t).decrypt(r,i,t,s)}}}reset(){super.reset.call(this),this._doReset()}process(r){return this._append(r),this._process()}finalize(r){return r&&this._append(r),this._doFinalize()}}rr._ENC_XFORM_MODE=1;rr._DEC_XFORM_MODE=2;rr.keySize=128/32;rr.ivSize=128/32;class Qd extends pt{constructor(r,e){super(),this._cipher=r,this._iv=e}static createEncryptor(r,e){return this.Encryptor.create(r,e)}static createDecryptor(r,e){return this.Decryptor.create(r,e)}}function $d(n,r,e){const i=n;let t;const s=this._iv;s?(t=s,this._iv=void 0):t=this._prevBlock;for(let a=0;a<e;a+=1)i[r+a]^=t[a]}class Jn extends Qd{}Jn.Encryptor=class extends Jn{processBlock(n,r){const e=this._cipher,{blockSize:i}=e;$d.call(this,n,r,i),e.encryptBlock(n,r),this._prevBlock=n.slice(r,r+i)}};Jn.Decryptor=class extends Jn{processBlock(n,r){const e=this._cipher,{blockSize:i}=e,t=n.slice(r,r+i);e.decryptBlock(n,r),$d.call(this,n,r,i),this._prevBlock=t}};const m1={pad(n,r){const e=r*4,i=e-n.sigBytes%e,t=i<<24|i<<16|i<<8|i,s=[];for(let l=0;l<i;l+=4)s.push(t);const a=ft.create(s,i);n.concat(a)},unpad(n){const r=n,e=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=e}};class qd extends rr{constructor(r,e,i){super(r,e,Object.assign({mode:Jn,padding:m1},i)),this.blockSize=128/32}reset(){let r;super.reset.call(this);const{cfg:e}=this,{iv:i,mode:t}=e;this._xformMode===this.constructor._ENC_XFORM_MODE?r=t.createEncryptor:(r=t.createDecryptor,this._minBufferSize=1),this._mode=r.call(t,this,i&&i.words),this._mode.__creator=r}_doProcessBlock(r,e){this._mode.processBlock(r,e)}_doFinalize(){let r;const{padding:e}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),r=this._process(!0)):(r=this._process(!0),e.unpad(r)),r}}class ys extends pt{constructor(r){super(),this.mixIn(r)}toString(r){return(r||this.formatter).stringify(this)}}const v1={stringify(n){let r;const{ciphertext:e,salt:i}=n;return i?r=ft.create([1398893684,1701076831]).concat(i).concat(e):r=e,r.toString(Oo)},parse(n){let r;const e=Oo.parse(n),i=e.words;return i[0]===1398893684&&i[1]===1701076831&&(r=ft.create(i.slice(2,4)),i.splice(0,4),e.sigBytes-=16),ys.create({ciphertext:e,salt:r})}};class cn extends pt{static encrypt(r,e,i,t){const s=Object.assign(new pt,this.cfg,t),a=r.createEncryptor(i,s),l=a.finalize(e),o=a.cfg;return ys.create({ciphertext:l,key:i,iv:o.iv,algorithm:r,mode:o.mode,padding:o.padding,blockSize:a.blockSize,formatter:s.format})}static decrypt(r,e,i,t){let s=e;const a=Object.assign(new pt,this.cfg,t);return s=this._parse(s,a.format),r.createDecryptor(i,a).finalize(s.ciphertext)}static _parse(r,e){return typeof r=="string"?e.parse(r,this):r}}cn.cfg=Object.assign(new pt,{format:v1});const y1={execute(n,r,e,i){let t=i;t||(t=ft.random(64/8));const s=f1.create({keySize:r+e}).compute(n,t),a=ft.create(s.words.slice(r),e*4);return s.sigBytes=r*4,ys.create({key:s,iv:a,salt:t})}};class ec extends cn{static encrypt(r,e,i,t){const s=Object.assign(new pt,this.cfg,t),a=s.kdf.execute(i,r.keySize,r.ivSize);s.iv=a.iv;const l=cn.encrypt.call(this,r,e,a.key,s);return l.mixIn(a),l}static decrypt(r,e,i,t){let s=e;const a=Object.assign(new pt,this.cfg,t);s=this._parse(s,a.format);const l=a.kdf.execute(i,r.keySize,r.ivSize,s.salt);return a.iv=l.iv,cn.decrypt.call(this,r,s,l.key,a)}}ec.cfg=Object.assign(cn.cfg,{kdf:y1});const yt=[],tc=[],ic=[],nc=[],rc=[],sc=[],fa=[],ma=[],va=[],ya=[],Ht=[];for(let n=0;n<256;n+=1)n<128?Ht[n]=n<<1:Ht[n]=n<<1^283;let Nt=0,ui=0;for(let n=0;n<256;n+=1){let r=ui^ui<<1^ui<<2^ui<<3^ui<<4;r=r>>>8^r&255^99,yt[Nt]=r,tc[r]=Nt;const e=Ht[Nt],i=Ht[e],t=Ht[i];let s=Ht[r]*257^r*16843008;ic[Nt]=s<<24|s>>>8,nc[Nt]=s<<16|s>>>16,rc[Nt]=s<<8|s>>>24,sc[Nt]=s,s=t*16843009^i*65537^e*257^Nt*16843008,fa[r]=s<<24|s>>>8,ma[r]=s<<16|s>>>16,va[r]=s<<8|s>>>24,ya[r]=s,Nt?(Nt=e^Ht[Ht[Ht[t^e]]],ui^=Ht[Ht[ui]]):(ui=1,Nt=ui)}const b1=[0,1,2,4,8,16,32,64,128,27,54];class ac extends qd{_doReset(){let r;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const e=this._keyPriorReset,i=e.words,t=e.sigBytes/4;this._nRounds=t+6;const a=(this._nRounds+1)*4;this._keySchedule=[];const l=this._keySchedule;for(let u=0;u<a;u+=1)u<t?l[u]=i[u]:(r=l[u-1],u%t?t>6&&u%t===4&&(r=yt[r>>>24]<<24|yt[r>>>16&255]<<16|yt[r>>>8&255]<<8|yt[r&255]):(r=r<<8|r>>>24,r=yt[r>>>24]<<24|yt[r>>>16&255]<<16|yt[r>>>8&255]<<8|yt[r&255],r^=b1[u/t|0]<<24),l[u]=l[u-t]^r);this._invKeySchedule=[];const o=this._invKeySchedule;for(let u=0;u<a;u+=1){const d=a-u;u%4?r=l[d]:r=l[d-4],u<4||d<=4?o[u]=r:o[u]=fa[yt[r>>>24]]^ma[yt[r>>>16&255]]^va[yt[r>>>8&255]]^ya[yt[r&255]]}}encryptBlock(r,e){this._doCryptBlock(r,e,this._keySchedule,ic,nc,rc,sc,yt)}decryptBlock(r,e){const i=r;let t=i[e+1];i[e+1]=i[e+3],i[e+3]=t,this._doCryptBlock(i,e,this._invKeySchedule,fa,ma,va,ya,tc),t=i[e+1],i[e+1]=i[e+3],i[e+3]=t}_doCryptBlock(r,e,i,t,s,a,l,o){const u=r,d=this._nRounds;let c=u[e]^i[0],h=u[e+1]^i[1],f=u[e+2]^i[2],p=u[e+3]^i[3],m=4;for(let k=1;k<d;k+=1){const L=t[c>>>24]^s[h>>>16&255]^a[f>>>8&255]^l[p&255]^i[m];m+=1;const T=t[h>>>24]^s[f>>>16&255]^a[p>>>8&255]^l[c&255]^i[m];m+=1;const X=t[f>>>24]^s[p>>>16&255]^a[c>>>8&255]^l[h&255]^i[m];m+=1;const G=t[p>>>24]^s[c>>>16&255]^a[h>>>8&255]^l[f&255]^i[m];m+=1,c=L,h=T,f=X,p=G}const g=(o[c>>>24]<<24|o[h>>>16&255]<<16|o[f>>>8&255]<<8|o[p&255])^i[m];m+=1;const b=(o[h>>>24]<<24|o[f>>>16&255]<<16|o[p>>>8&255]<<8|o[c&255])^i[m];m+=1;const w=(o[f>>>24]<<24|o[p>>>16&255]<<16|o[c>>>8&255]<<8|o[h&255])^i[m];m+=1;const S=(o[p>>>24]<<24|o[c>>>16&255]<<16|o[h>>>8&255]<<8|o[f&255])^i[m];m+=1,u[e]=g,u[e+1]=b,u[e+2]=w,u[e+3]=S}}ac.keySize=256/32;const g1=qd._createHelper(ac);class jn extends Qd{}jn.Encryptor=class extends jn{processBlock(n,r){const e=n,i=this._cipher,{blockSize:t}=i,s=this._iv;let a=this._counter;s&&(this._counter=s.slice(0),a=this._counter,this._iv=void 0);const l=a.slice(0);i.encryptBlock(l,0),a[t-1]=a[t-1]+1|0;for(let o=0;o<t;o+=1)e[r+o]^=l[o]}};jn.Decryptor=jn.Encryptor;const Z1={pad(){},unpad(){}};var Cr={decryptWordArray:function(r,e,i){var t=pa.parse(e),s=pa.parse(qg(i)),a=ft.create(new Uint8Array(r)),l=g1.decrypt(ys.create({ciphertext:a}),t,{iv:s,mode:jn,padding:Z1});return Cr.wordArrayToUint8Array(l)},wordArrayToUint8Array:function(r){for(var e=r.sigBytes,i=r.words,t=new Uint8Array(e),s=0,a=0;s!==e;){var l=i[a++];if(t[s++]=(l&4278190080)>>>24,s===e||(t[s++]=(l&16711680)>>>16,s===e)||(t[s++]=(l&65280)>>>8,s===e))break;t[s++]=l&255}return t},decoderAESCTRData:function(r,e,i){if(r.videoSenc){var t=r.kidValue,s=r.videoSenc;r.samples.forEach(function(o,u){var d=s[u],c=o.data,h=[],f=[],p=d.InitializationVector;if(d.subsamples&&d.subsamples.length)d.subsamples.forEach(function(S){var k=S.BytesOfClearData+S.BytesOfProtectedData,L=c.slice(0,k);h.push(L.slice(0,S.BytesOfClearData)),f.push(L.slice(S.BytesOfClearData)),c=c.slice(k)});else{var m=o.size;h.push(c.slice(0,0)),f.push(c.slice(0,m)),c=c.slice(m)}var g=new je;g.write.apply(g,f);var b=i?i(g.buffer,t,p):Cr.decryptWordArray(g.buffer,t,p),w=new je;h.forEach(function(S,k){var L=f[k].length,T=b.slice(0,L);w.write(S),w.write(T),b=b.slice(L)}),r.samples[u].data=w.buffer})}if(e.audioSenc){var a=e.kidValue,l=e.audioSenc;e.samples.forEach(function(o,u){var d=l[u],c=i?i(o.data,a,d.InitializationVector):Cr.decryptWordArray(o.data,a,d.InitializationVector);e.samples[u].data=c})}}},zo=20,k1=function(){function n(r,e,i,t){var s=this;Ge(this,n),K(this,"_videoSamples",[]),K(this,"_audioSamples",[]),K(this,"_lastRemainBuffer",[]),K(this,"_lastRemainBufferStartPos",0),this.videoTrack=new ps,this.audioTrack=new fs,this.metadataTrack=i||new ms,this.log=new el("MP4Demuxer",t&&t.openLog?!t.openLog:!0),r&&r.forEach(function(a){var l;(l=s._videoSamples).push.apply(l,lt(a.frames))}),e&&e.forEach(function(a){var l;(l=s._audioSamples).push.apply(l,lt(a.frames))})}return We(n,[{key:"parseSamples",value:function(e){if(!e)throw new Error("moov is required");if(!this.videoTrack.codec&&!this.audioTrack.codec&&(oe.moovToTrack(e,this.videoTrack,this.audioTrack),this.videoSenc=this.videoTrack.videoSenc,this.audioSenc=this.audioTrack.audioSenc),!this._audioSamples.length&&!this._videoSamples.length){var i=oe.moovToSamples(e);if(!i)throw new Error("cannot parse samples from moov box");this._videoSamples=i.videoSamples||[],this._audioSamples=i.audioSamples||[]}}},{key:"demux",value:function(e,i,t,s,a){this.parseSamples(a);var l=this.videoTrack,o=this.audioTrack;l.samples=[],o.samples=[];var u,d,c;if(t){for(var h,f=0,p=t[0],m=t[1];p<=m;p++){if(u=this._videoSamples[p],!u)throw new Error("cannot found video frame #".concat(p));c=u.offset-i,d=e.subarray(c,c+u.size),h=new Zn(u.pts||u.dts,u.dts),h.duration=u.duration,h.gopId=u.gopId,u.keyframe&&h.setToKeyframe();for(var g=0,b=d.length-1;g<b;)f=B(d,g),g+=4,h.units.push(d.subarray(g,g+f)),g+=f;l.samples.push(h)}l.baseMediaDecodeTime=l.samples[0].dts}if(s){for(var w=s[0],S=s[1];w<=S;w++){if(u=this._audioSamples[w],!u)throw new Error("cannot found video frame #".concat(w));c=u.offset-i,d=e.subarray(c,c+u.size),o.samples.push(new ri(u.dts,d,u.duration))}o.baseMediaDecodeTime=o.samples[0].dts}return{videoTrack:l,audioTrack:o,metadataTrack:this.metadataTrack}}},{key:"demuxPart",value:function(e,i,t,s,a,l,o,u){if(this.parseSamples(a),this.videoTrack.useEME=l,this.audioTrack.useEME=l,this._lastRemainBuffer&&this._lastRemainBuffer.byteLength>0&&i>this._lastRemainBufferStartPos&&i<=this._lastRemainBufferStartPos+this._lastRemainBuffer.byteLength)for(var d=0;d<zo;)try{var c=this._lastRemainBuffer.subarray(0,i-this._lastRemainBufferStartPos),h=new Uint8Array(e.byteLength+c.byteLength);h.set(c,0),h.set(new Uint8Array(e),c.byteLength),e=h,i-=c.byteLength,this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0;break}catch(v){if(d<zo)d++;else throw new Error("new Uint8Array error:,"+v.errorMessage)}var f=this.videoTrack,p=this.audioTrack;f.samples=[],p.samples=[],f.videoSenc=null,p.audioSenc=null;var m,g,b,w=0,S=0;if(this._videoSamples.length>0&&t.length>0){for(var k,L=e.byteLength+i,T=t[0];T<=t[1];T++){if(m=this._videoSamples[T],!m)throw new Error("cannot found video frame #".concat(T));m.offset>=i&&m.offset+m.size<=L&&(b=m.offset-i,w=b+m.size,g=e.subarray(b,w),k=new Zn(m.pts||m.dts,m.dts),k.duration=m.duration,k.gopId=m.gopId,k.sampleOffset=m.index,m.keyframe&&k.setToKeyframe(),k.data=g,k.size=m.size,f.samples.push(k))}f.samples.length>0&&(f.gopId=f.samples[0].gopId,f.baseMediaDecodeTime=f.samples[0].dts,f.startPts=f.samples[0].pts/f.timescale,f.endPts=f.samples[f.samples.length-1].pts/f.timescale,this.videoSenc&&(f.videoSenc=this.videoSenc.slice(f.samples[0].sampleOffset,f.samples[0].sampleOffset+f.samples.length),f.kidValue=o))}if(this._audioSamples.length>0&&s.length>0){for(var X=s[0];X<=s[1];X++){if(m=this._audioSamples[X],!m)throw new Error("cannot found video frame #".concat(X));m.offset>=i&&m.offset+m.size<=e.byteLength+i&&(b=m.offset-i,S=b+m.size,g=e.subarray(b,S),p.samples.push(new ri(m.dts,g,m.duration,m.index)))}p.samples.length>0&&(p.gopId=p.samples[0].gopId||f.gopId,p.baseMediaDecodeTime=p.samples[0].dts,p.startPts=p.samples[0].pts/p.timescale,p.endPts=p.samples[p.samples.length-1].pts/p.timescale,this.audioSenc&&(p.audioSenc=this.audioSenc.slice(p.samples[0].sampleOffset,p.samples[0].sampleOffset+p.samples.length),p.kidValue=o))}this.decoderData(f,p,u);for(var G=0,C=0;C<f.samples.length;C++)for(var x=0,N=f.samples[C].data,y=N.length-1;x<y;)G=B(N,x),x+=4,f.samples[C].units.push(N.subarray(x,x+G)),x+=G;return this._lastRemainBuffer=e.subarray(Math.max(w,S)),this._lastRemainBuffer.byteLength>0?this._lastRemainBufferStartPos=i+e.byteLength-this._lastRemainBuffer.byteLength:this._lastRemainBufferStartPos=0,{videoTrack:f,audioTrack:p,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this._videoSamples=[],this._audioSamples=[],this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0,this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}},{key:"decoderData",value:function(e,i,t){e.useEME||i.useEME||Cr.decoderAESCTRData(e,i,t)}}],[{key:"probe",value:function(e){return oe.probe(e)}}]),n}(),di=new ut("BufferService"),S1=function(){function n(r,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};cs(this,n),ee(this,"flv",null),ee(this,"_demuxer",new zd),ee(this,"_remuxer",null),ee(this,"_mse",null),ee(this,"_softVideo",null),ee(this,"_sourceCreated",!1),ee(this,"_needInitSegment",!0),ee(this,"_discontinuity",!0),ee(this,"_contiguous",!1),ee(this,"_initSegmentId",""),ee(this,"_cachedBuffer",null),ee(this,"_demuxStartTime",0),ee(this,"_opts",null),this.flv=r,this._opts=i,e?this._softVideo=e:(this._remuxer=new tl(this._demuxer.videoTrack,this._demuxer.audioTrack),this._mse=new Ie(null,{preferMMS:typeof i.preferMMS=="boolean"?i.preferMMS:!!i.perferMMS}),this._mse.bindMedia(r.media))}return hs(n,[{key:"baseDts",get:function(){var e,i;return(e=this._demuxer)===null||e===void 0||(i=e._fixer)===null||i===void 0?void 0:i._baseDts}},{key:"blobUrl",get:function(){var e;return(e=this._mse)===null||e===void 0?void 0:e.url}},{key:"isFull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ie.VIDEO;return this._mse.isFull(e)}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0,this._discontinuity=!0,this._contiguous=!0,this._initSegmentId=""}},{key:"unContiguous",value:function(e){this._contiguous=!1,this._demuxStartTime=e}},{key:"reset",value:function(){var r=at(ve().mark(function i(){var t,s=arguments;return ve().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=s.length>0&&s[0]!==void 0?s[0]:!1,!(this._mse&&!t)){l.next=6;break}return l.next=4,this._mse.unbindMedia();case 4:return l.next=6,this._mse.bindMedia(this.flv.media);case 6:this._needInitSegment=!0,this._discontinuity=!0,this._contiguous=!1,this._sourceCreated=!1,this._initSegmentId="";case 11:case"end":return l.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"endOfStream",value:function(){var r=at(ve().mark(function i(){return ve().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=7;break}if(!this._sourceCreated){s.next=5;break}return s.next=4,this._mse.endOfStream();case 4:this.flv.emit(U.BUFFEREOS);case 5:s.next=8;break;case 7:this._softVideo&&this._softVideo.endOfStream();case 8:case"end":return s.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"updateDuration",value:function(){var r=at(ve().mark(function i(t){return ve().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this._mse){a.next=7;break}if(this._mse.isOpened){a.next=4;break}return a.next=4,this._mse.open();case 4:return di.debug("update duration",t),a.next=7,this._mse.updateDuration(t);case 7:case"end":return a.stop()}},i,this)}));function e(i){return r.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var r=at(ve().mark(function i(){return ve().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=3;break}return s.next=3,this._mse.unbindMedia();case 3:this._mse=null,this._softVideo=null,this._demuxer=null,this._remuxer=null;case 7:case"end":return s.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"appendBuffer",value:function(){var r=at(ve().mark(function i(t){var s,a,l,o,u,d,c,h,f,p,m,g,b,w;return ve().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this._cachedBuffer&&(t=zi(this._cachedBuffer,t),this._cachedBuffer=null),s=this._demuxer,!(!t||!t.length||!s)){k.next=4;break}return k.abrupt("return");case 4:k.prev=4,s.demuxAndFix(t,this._discontinuity,this._contiguous,this._demuxStartTime),k.next=11;break;case 8:throw k.prev=8,k.t0=k.catch(4),new Te(J.DEMUX,J.SUB_TYPES.FLV,k.t0);case 11:if(a=s.videoTrack,l=s.audioTrack,o=s.metadataTrack,u=a.exist(),d=l.exist(),this._opts.onlyAudio&&(u=!1,a.present=!1),this._opts.onlyVideo&&(d=!1,l.present=!1),!(!u&&a.present||!d&&l.present)){k.next=29;break}if(c=0,h=u?a:d?l:void 0,h&&h.samples.length&&(c=(h.samples[h.samples.length-1].originPts-h.samples[0].originPts)/h.timescale*1e3),!(c>this._opts.analyzeDuration)){k.next=27;break}di.warn("analyze duration exceeded, ".concat(c,"ms"),h),a.present=u,l.present=d,this.flv.emit(U.ANALYZE_DURATION_EXCEEDED,{duration:c}),k.next=29;break;case 27:return this._cachedBuffer=t,k.abrupt("return");case 29:if(f=a.type,p=l.type,this._fireEvents(a,l,o),this._discontinuity=!1,this._contiguous=!0,this._demuxStartTime=0,m=this._mse,this.flv.emit(U.DEMUXED_TRACK,{videoTrack:a}),g="".concat(a.codec,"/").concat(a.width,"/").concat(a.height,"/").concat(l.codec,"/").concat(l.config),g!==this._initSegmentId&&(this._needInitSegment=!0,this._initSegmentId=g,this._emitMetaParsedEvent(a,l)),!m){k.next=66;break}if(this._sourceCreated){k.next=47;break}return k.next=43,m.open();case 43:u&&(di.log("codec: video/mp4;codecs=".concat(a.codec)),m.createSource(f,"video/mp4;codecs=".concat(a.codec))),d&&(di.log("codec: audio/mp4;codecs=".concat(l.codec)),m.createSource(p,"audio/mp4;codecs=".concat(l.codec))),this._sourceCreated=!0,this.flv.emit(U.SOURCEBUFFER_CREATED);case 47:k.prev=47,this._needInitSegment&&!this._opts.mseLowLatency&&(a.duration=this._opts.durationForMSELowLatencyOff*a.timescale,l.duration=this._opts.durationForMSELowLatencyOff*d.timescale),b=this._remuxer.remux(this._needInitSegment),k.next=55;break;case 52:throw k.prev=52,k.t1=k.catch(47),new Te(J.REMUX,J.SUB_TYPES.FMP4,k.t1);case 55:if(!(this._needInitSegment&&!b.videoInitSegment&&!b.audioInitSegment)){k.next=57;break}return k.abrupt("return");case 57:return this._needInitSegment=!1,w=[],b.videoInitSegment&&w.push(m.append(f,b.videoInitSegment)),b.audioInitSegment&&w.push(m.append(p,b.audioInitSegment)),b.videoSegment&&w.push(m.append(f,b.videoSegment)),b.audioSegment&&w.push(m.append(p,b.audioSegment)),k.abrupt("return",Promise.all(w));case 66:this._softVideo&&this._softVideo.appendBuffer(a,l);case 67:case"end":return k.stop()}},i,this,[[4,8],[47,52]])}));function e(i){return r.apply(this,arguments)}return e}()},{key:"evictBuffer",value:function(){var r=at(ve().mark(function i(t){var s=this,a,l,o,u;return ve().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=this.flv.media,!(!this._mse||!this._demuxer||!a||!t||t<0)){c.next=3;break}return c.abrupt("return");case 3:if(l=a.currentTime,o=l-t,!(o<=0)){c.next=7;break}return c.abrupt("return");case 7:if(u=De.start(De.get(a)),!(u+1>=o)){c.next=10;break}return c.abrupt("return");case 10:return c.abrupt("return",this._mse.clearBuffer(0,o).then(function(){return s.flv.emit(U.REMOVE_BUFFER,{removeEnd:o})}));case 11:case"end":return c.stop()}},i,this)}));function e(i){return r.apply(this,arguments)}return e}()},{key:"_emitMetaParsedEvent",value:function(e,i){e.exist()&&this.flv.emit(U.METADATA_PARSED,{type:"video",track:e,meta:{codec:e.codec,timescale:e.timescale,width:e.width,height:e.height,sarRatio:e.sarRatio,baseDts:e.baseDts}}),i.exist()&&this.flv.emit(U.METADATA_PARSED,{type:"audio",track:i,meta:{codec:i.codec,channelCount:i.channelCount,sampleRate:i.sampleRate,timescale:i.timescale,baseDts:i.baseDts}}),di.debug("track parsed",e,i)}},{key:"_fireEvents",value:function(e,i,t){var s=this;di.debug(e.samples,i.samples),t.flvScriptSamples.forEach(function(a){s.flv.emit(U.FLV_SCRIPT_DATA,a),di.debug("flvScriptData",a)}),e.samples.forEach(function(a){a.keyframe&&s.flv.emit(U.KEYFRAME,{pts:a.pts})}),e.warnings.forEach(function(a){var l;switch(a.type){case Ke.LARGE_AV_SHIFT:l=U.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case Ke.LARGE_VIDEO_GAP:l=U.LARGE_VIDEO_DTS_GAP_DETECT;break;case Ke.LARGE_VIDEO_GAP_BETWEEN_CHUNK:l=U.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}l&&s.flv.emit(U.STREAM_EXCEPTION,ht(ht({},a),{},{type:l})),di.warn("video exception",a)}),i.warnings.forEach(function(a){var l;switch(a.type){case Ke.LARGE_AUDIO_GAP:l=U.LARGE_AUDIO_DTS_GAP_DETECT;break;case Ke.AUDIO_FILLED:l=U.AUDIO_GAP_DETECT;break;case Ke.AUDIO_DROPPED:l=U.AUDIO_OVERLAP_DETECT;break}l&&s.flv.emit(U.STREAM_EXCEPTION,ht(ht({},a),{},{type:l})),di.warn("audio exception",a)}),t.seiSamples.forEach(function(a){s.flv.emit(U.SEI,ht(ht({},a),{},{sei:{code:a.data.type,content:a.data.payload,dts:a.pts}}))})}}]),n}();function L1(n){var r=ht({retryCount:3,retryDelay:1e3,disconnectRetryCount:0,loadTimeout:1e4,maxReaderInterval:5e3,preloadTime:5,defaultVodLoadSize:1e7,isLive:!1,softDecode:!1,bufferBehind:10,maxJumpDistance:3,analyzeDuration:2e4,seamlesslyReload:!1,keepStatusAfterSwitch:!0,onlyVideo:!1,onlyAudio:!1,preferMMS:!1,mseLowLatency:!0,durationForMSELowLatencyOff:6,chunkCountForSpeed:50,skipChunkSize:1e3,longtimeNoReceived:3e3},n);return r.isLive&&r.preloadTime&&(r.maxLatency||(r.maxLatency=r.preloadTime*2),r.targetLatency||(r.targetLatency=r.preloadTime),(r.disconnectTime===null||r.disconnectTime===void 0)&&(r.disconnectTime=r.maxLatency)),r}function Ao(n,r){var e=0,i=n.length-1,t=0,s=0,a=i;for(r<n[0]&&(e=0,s=a+1);s<=a;)if(t=s+Math.floor((a-s)/2),t===i||r>=n[t]&&r<n[t+1]){e=t;break}else n[t]<r?s=t+1:a=t-1;return e}var ci=new ut("flv"),Sr=.1,E1=.3,Qn=function(n){Ld(e,n);var r=Ed(e);function e(i){var t;return cs(this,e),t=r.call(this),ee(de(t),"media",null),ee(de(t),"_loading",!1),ee(de(t),"_opts",null),ee(de(t),"_bufferService",null),ee(de(t),"_gapService",null),ee(de(t),"_stats",null),ee(de(t),"_mediaLoader",null),ee(de(t),"_maxChunkWaitTimer",null),ee(de(t),"_tickTimer",null),ee(de(t),"_tickInterval",500),ee(de(t),"_urlSwitching",!1),ee(de(t),"_seamlessSwitching",!1),ee(de(t),"_disconnectRetryCount",0),ee(de(t),"_preLoadEndPoint",0),ee(de(t),"_keyframes",null),ee(de(t),"_acceptRanges",!0),ee(de(t),"_onProgress",function(){var s=at(ve().mark(function a(l,o,u,d){var c,h,f,p,m,g,b,w,S;return ve().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(c=u.startTime,h=u.endTime,f=u.st,p=u.firstByteTime,t._loading=!o,t._firstProgressEmit){L.next=11;break}if(t.media){L.next=6;break}return(m=t._mediaLoader)===null||m===void 0||m.cancel(),L.abrupt("return");case 6:g=d.headers,t.emit(U.TTFB,{url:t._opts.url,responseUrl:d.url,elapsed:f?p-f:h-c}),t.emit(U.LOAD_RESPONSE_HEADERS,{headers:g}),t._acceptRanges=!!(g!=null&&g.get("Accept-Ranges"))||!!(g!=null&&g.get("Content-Range")),t._firstProgressEmit=!0;case 11:if(t._bufferService){L.next=13;break}return L.abrupt("return");case 13:return clearTimeout(t._maxChunkWaitTimer),t._bandwidthService.addChunkRecord(l==null?void 0:l.byteLength,h-c),L.prev=15,L.next=18,t._bufferService.appendBuffer(l);case 18:(b=t._bufferService)===null||b===void 0||b.evictBuffer(t._opts.bufferBehind),L.next=31;break;case 21:if(L.prev=21,L.t0=L.catch(15),!(!t.isLive&&t._bufferService.isFull())){L.next=30;break}return L.next=26,t._mediaLoader.cancel();case 26:return t._loading=!1,w=t.bufferInfo().remaining,t._opts.preloadTime=parseInt(w)/2,L.abrupt("return");case 30:return L.abrupt("return",t._emitError(Te.create(L.t0)));case 31:if(t._urlSwitching&&(t._urlSwitching=!1,t.emit(U.SWITCH_URL_SUCCESS,{url:t._opts.url})),t._seamlessSwitching&&(t._seamlessSwitching=!1,t._tick()),!(o&&!t.media.seeking)){L.next=38;break}return t.emit(U.LOAD_COMPLETE),ci.debug("load done"),t.isLive&&t._disconnectRetryCount<=0&&t._end(),L.abrupt("return");case 38:if(t.isLive){L.next=40;break}return L.abrupt("return");case 40:S=t._opts.maxReaderInterval,S&&t._firstProgressEmit&&(clearTimeout(t._maxChunkWaitTimer),t._maxChunkWaitTimer=setTimeout(function(){if(t._disconnectRetryCount){t._disconnectRetryCount--,t.load();return}ci.debug("onMaxChunkWait",S),t._end()},S));case 42:case"end":return L.stop()}},a,null,[[15,21]])}));return function(a,l,o,u){return s.apply(this,arguments)}}()),ee(de(t),"_onRetryError",function(s,a){ci.debug("load retry",s,a),t.emit(U.LOAD_RETRY,{error:Te.network(s),retryTime:a})}),ee(de(t),"_end",function(){t._clear(),t._bufferService&&t._bufferService.endOfStream(),ci.debug("end stream")}),ee(de(t),"_resetDisconnectCount",function(){t._disconnectRetryCount=t._opts.disconnectRetryCount}),ee(de(t),"_tick",function(){clearTimeout(t._tickTimer);var s=de(t),a=s.media;if(a){t._tickTimer=setTimeout(t._tick,t._tickInterval);var l=De.end(De.get(a));if(!(l<Sr||!a.readyState)){var o=t._opts;if(Cd(a))t._gapService&&t._gapService.do(a,o.maxJumpDistance,t.isLive,3);else{if(!a.currentTime&&t._gapService){var u=t._opts.mseLowLatency||t._opts.mseLowLatency===!1&&t.bufferInfo(E1).nextStart;u&&t._gapService.do(a,o.maxJumpDistance,t.isLive,3);return}o.isLive&&a.readyState===4&&l-a.currentTime>o.disconnectTime&&t.disconnect()}}}}),ee(de(t),"_onPlay",function(){var s,a,l=t._opts.softDecode||((s=t.media)===null||s===void 0||(a=s.buffered)===null||a===void 0?void 0:a.length);if(t.isLive){!t._loading&&l&&t.replay(void 0,!0);return}var o=t.bufferInfo();(o.start||o.nextStart)>Sr&&t._tick()}),ee(de(t),"_onLoadeddata",function(){t.isLive&&!t._opts.mseLowLatency&&t.media.duration!==1/0&&t._bufferService.updateDuration(1/0).catch(function(s){})}),ee(de(t),"_onSeeking",at(ve().mark(function s(){return ve().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:!t.isLive&&t.seekable&&(t._preLoadEndPoint=-1,t._checkPreload());case 1:case"end":return l.stop()}},s)}))),ee(de(t),"_onTimeupdate",function(){if(t.media){var s=t._opts,a=t.media.currentTime;if(s.isLive&&s.maxLatency&&s.targetLatency){var l=De.end(De.get(t.media)),o=l-a;o>=s.maxLatency&&(t.media.currentTime=l-s.targetLatency,t.emit(U.CHASEFRAME,{currentTime:t.media.currentTime,latency:s.targetLatency}))}t._seiService.throw(a,!0),!(s.isLive||!t.seekable||t._loading)&&t._checkPreload()}}),ee(de(t),"_onWaiting",function(){t.isLive&&!t._loading&&t._disconnectRetryCount&&(t._disconnectRetryCount--,t.load())}),ee(de(t),"_onBufferUpdate",function(){if(!t._opts.isLive){var s=t.bufferInfo(),a=s.end,l=s.nextEnd;Math.abs((a||l)-t.media.duration)<1&&(t._end(),t.media.readyState<=2&&t._tick())}}),ee(de(t),"_checkPreload",at(ve().mark(function s(){var a,l,o,u,d,c,h,f,p,m;return ve().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(a=t.bufferInfo(),l=a.remaining,o=l===void 0?0:l,u=t._opts,d=t._keyframes.filepositions,c=t._keyframes.times,h=t.media.currentTime,!(o<u.preloadTime)){b.next=19;break}if(f=Ao(t._keyframes.times,h+o+Sr),p=Ao(t._keyframes.times,h+o+t._opts.preloadTime),p===f&&(p=f+1),t._preLoadEndPoint!==p){b.next=11;break}return b.abrupt("return");case 11:if(m=d[f],m!=null){b.next=14;break}return b.abrupt("return");case 14:return b.next=16,t._mediaLoader.cancel();case 16:t._loadData(null,[m,d[p]]),t._preLoadEndPoint=p,t._bufferService.unContiguous(c[f]);case 19:case"end":return b.stop()}},s)}))),ee(de(t),"_onFlvScriptData",function(s){var a,l,o,u,d=(a=s.data)===null||a===void 0||(l=a.onMetaData)===null||l===void 0?void 0:l.keyframes,c=(o=s.data)===null||o===void 0||(u=o.onMetaData)===null||u===void 0?void 0:u.duration;d&&(t._keyframes=d),!t._opts.isLive&&c&&t._bufferService.updateDuration(c)}),t._opts=L1(i),t.media=t._opts.media||document.createElement("video"),t._opts.media=null,t._firstProgressEmit=!1,t._mediaLoader=new Wi(ht(ht({},t._opts.fetchOptions),{},{retry:t._opts.retryCount,retryDelay:t._opts.retryDelay,timeout:t._opts.loadTimeout,onRetryError:t._onRetryError,onProgress:t._onProgress,responseType:"arraybuffer"})),t._disconnectRetryCount=t._opts.disconnectRetryCount,t._bufferService=new S1(de(t),t._opts.softDecode?t.media:void 0,t._opts),t._seiService=new Id(de(t)),t._bandwidthService=new _d({chunkCountForSpeed:t._opts.chunkCountForSpeed,skipChunkSize:t._opts.skipChunkSize,longtimeNoReceived:t._opts.longtimeNoReceived}),t._stats=new Fd(de(t)),t._opts.softDecode||(t._gapService=new xd),t.media.addEventListener("play",t._onPlay),t.media.addEventListener("loadeddata",t._onLoadeddata),t.media.addEventListener("seeking",t._onSeeking),t.media.addEventListener("timeupdate",t._onTimeupdate),t.media.addEventListener("progress",t._onBufferUpdate),t.media.addEventListener("waiting",t._onWaiting),t.on(U.FLV_SCRIPT_DATA,t._onFlvScriptData),t}return hs(e,[{key:"version",get:function(){return"3.0.19"}},{key:"isLive",get:function(){return this._opts.isLive}},{key:"baseDts",get:function(){var t;return(t=this._bufferService)===null||t===void 0?void 0:t.baseDts}},{key:"seekable",get:function(){return!!this._keyframes&&this._acceptRanges}},{key:"loader",get:function(){return this._mediaLoader}},{key:"blobUrl",get:function(){var t;return(t=this._bufferService)===null||t===void 0?void 0:t.blobUrl}},{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed(),totalSize:this._bandwidthService.getTotalSize(),totalCost:this._bandwidthService.getTotalCost()}}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"bufferInfo",value:function(){var t,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sr;return De.info(De.get(this.media),(t=this.media)===null||t===void 0?void 0:t.currentTime,s)}},{key:"playbackQuality",value:function(){return Md(this.media)}},{key:"load",value:function(){var i=at(ve().mark(function s(a){var l,o=arguments;return ve().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(l=o.length>1&&o[1]!==void 0?o[1]:!1,this._bufferService){d.next=3;break}return d.abrupt("return");case 3:return d.next=5,this._reset(l);case 5:this._loadData(a,this._opts.isLive?[]:[0,this._opts.defaultVodLoadSize]),clearTimeout(this._tickTimer),this._tickTimer=setTimeout(this._tick,this._tickInterval);case 8:case"end":return d.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"replay",value:function(){var i=at(ve().mark(function s(){var a=this,l,o,u=arguments;return ve().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(l=u.length>0&&u[0]!==void 0?u[0]:this._opts.seamlesslyReload,o=u.length>1?u[1]:void 0,this.media){c.next=4;break}return c.abrupt("return");case 4:if(this._resetDisconnectCount(),!l){c.next=11;break}return c.next=8,this._clear();case 8:setTimeout(function(){a._loadData(a._opts.url),a._bufferService.seamlessSwitch(),a._seamlessSwitching=!0}),c.next=13;break;case 11:return c.next=13,this.load();case 13:return c.abrupt("return",this.media.play(!o).catch(function(){}));case 14:case"end":return c.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){return ci.debug("disconnect!"),this._clear()}},{key:"switchURL",value:function(){var i=at(ve().mark(function s(a,l){var o=this;return ve().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this._bufferService){d.next=2;break}return d.abrupt("return");case 2:if(this._resetDisconnectCount(),!(!l||!this._opts.isLive)){d.next=8;break}return d.next=6,this.load(a);case 6:return this._urlSwitching=!0,d.abrupt("return",this.media.play(!0).catch(function(){}));case 8:return d.next=10,this._clear();case 10:setTimeout(function(){o._urlSwitching=!0,o._seamlessSwitching=!0,o._loadData(a),o._bufferService.seamlessSwitch()});case 11:case"end":return d.stop()}},s,this)}));function t(s,a){return i.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var i=at(ve().mark(function s(){return ve().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.media){l.next=2;break}return l.abrupt("return");case 2:return this.removeAllListeners(),this._seiService.reset(),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("loadeddata",this._onLoadeddata),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),this.media.removeEventListener("waiting",this._onWaiting),this.media.removeEventListener("progress",this._onBufferUpdate),l.next=12,Promise.all([this._clear(),this._bufferService.destroy()]);case 12:this.media=null,this._bufferService=null;case 14:case"end":return l.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_emitError",value:function(t){var s,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;ci.table(t),ci.error(t),ci.error((s=this.media)===null||s===void 0?void 0:s.error),this._urlSwitching&&(this._urlSwitching=!1,this._seamlessSwitching=!1,this.emit(U.SWITCH_URL_FAILED,t)),this.emit(U.ERROR,t),a&&(this._seiService.reset(),this._end())}},{key:"_reset",value:function(){var i=at(ve().mark(function s(){var a,l=arguments;return ve().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=l.length>0&&l[0]!==void 0?l[0]:!1,this._seiService.reset(),this._bandwidthService.reset(),this._stats.reset(),u.next=6,this._clear();case 6:return u.next=8,this._bufferService.reset(a);case 8:case"end":return u.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_loadData",value:function(){var i=at(ve().mark(function s(a,l){var o;return ve().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a&&(this._opts.url=a),o=a=this._opts.url,a){d.next=4;break}throw new Error("Source url is missing");case 4:if(this._opts.preProcessUrl&&(o=this._opts.preProcessUrl(a).url),this._mediaLoader.finnalUrl=o,this.emit(U.LOAD_START,{url:o,seamlessSwitching:this._seamlessSwitching}),ci.debug("load data, loading:",this._loading,o),!this._loading){d.next=11;break}return d.next=11,this._mediaLoader.cancel();case 11:return this._loading=!0,d.prev=12,d.next=15,this._mediaLoader.load({url:o,range:l});case 15:d.next=21;break;case 17:return d.prev=17,d.t0=d.catch(12),this._loading=!1,d.abrupt("return",this._emitError(Te.network(d.t0),!1));case 21:case"end":return d.stop()}},s,this,[[12,17]])}));function t(s,a){return i.apply(this,arguments)}return t}()},{key:"_clear",value:function(){var i=at(ve().mark(function s(){return ve().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this._mediaLoader){l.next=3;break}return l.next=3,this._mediaLoader.cancel();case 3:clearTimeout(this._maxChunkWaitTimer),clearTimeout(this._tickTimer),this._loading=!1,this._firstProgressEmit=!1;case 7:case"end":return l.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()}],[{key:"isSupported",value:function(t){return!t||t==="video"||t==="audio"?Ie.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){ut.enable(),ji.enable()}},{key:"disableLogger",value:function(){ut.disable(),ji.disable()}}]),e}(Ci);try{localStorage.getItem("xgd")?Qn.enableLogger():Qn.disableLogger()}catch{}var w1=function(){function n(r,e){var i=this;cs(this,n),ee(this,"_onLowDecode",function(){var t,s,a,l,o=i._opts,u=o.media,d=o.innerDegrade,c=o.backupURL;(t=i._plugin)===null||t===void 0||(s=t.player)===null||s===void 0||s.emit("lowdecode",u.degradeInfo),(a=i._plugin)===null||a===void 0||(l=a.player)===null||l===void 0||l.emit("core_event",ht(ht({},u.degradeInfo),{},{eventName:U.LOWDECODE})),(d===1||d===3)&&c&&i._degrade(c)}),ee(this,"_degrade",function(t){var s=i._plugin.player,a=s.video;if((a==null?void 0:a.TAG)==="MVideo"){var l=s.video.degradeVideo;s.video=l,a.degrade(t),t&&(s.config.url=t);var o=s.root.firstChild;o.TAG==="MVideo"&&s.root.replaceChild(l,o);var u=i._plugin.constructor.pluginName.toLowerCase();s.unRegisterPlugin(u),s.once("canplay",function(){s.play()})}}),ee(this,"forceDegradeToVideo",function(t){var s=i._opts.innerDegrade;(s===1||s===3)&&i._degrade(t)}),this._opts=r,this._plugin=e,this._init()}return hs(n,[{key:"_init",value:function(){var e=this._opts,i=e.media,t=e.preloadTime,s=e.innerDegrade,a=e.decodeMode;i&&(s&&i.setAttribute("innerdegrade",s),t&&i.setAttribute("preloadtime",t),i.setDecodeMode&&i.setDecodeMode(a),this._bindEvents())}},{key:"_bindEvents",value:function(){var e=this._opts.media;e.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var e,i;(e=this._opts)===null||e===void 0||(i=e.media)===null||i===void 0||i.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),n}(),lc=function(n){Ld(e,n);var r=Ed(e);function e(){var i;cs(this,e);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return i=r.call.apply(r,[this].concat(s)),ee(de(i),"flv",null),ee(de(i),"pluginExtension",null),ee(de(i),"getStats",function(){var l;return(l=i.flv)===null||l===void 0?void 0:l.getStats()}),ee(de(i),"destroy",function(){var l;i.flv&&(i.flv.destroy(),i.flv=null),(l=i.pluginExtension)===null||l===void 0||l.destroy(),i.pluginExtension=null}),ee(de(i),"_onSwitchURL",function(l,o){if(i.flv){var u,d;i.player.config.url=l,ra(o)==="object"&&(o=o.seamless),i.flv.switchURL(l,o),!o&&(u=i.player.config)!==null&&u!==void 0&&(d=u.flv)!==null&&d!==void 0&&d.keepStatusAfterSwitch&&i._keepPauseStatus()}}),ee(de(i),"_keepPauseStatus",function(){var l=i.player.paused;l&&i.player.once("canplay",function(){i.player.pause()})}),ee(de(i),"_onDefinitionChange",function(l){var o=l.to;i.flv&&i.flv.switchURL(o)}),i}return hs(e,[{key:"core",get:function(){return this.flv}},{key:"version",get:function(){var t;return(t=this.flv)===null||t===void 0?void 0:t.version}},{key:"softDecode",get:function(){var t,s,a=(t=this.player)===null||t===void 0||(s=t.config)===null||s===void 0?void 0:s.mediaType;return!!a&&a!=="video"&&a!=="audio"}},{key:"loader",get:function(){var t;return(t=this.flv)===null||t===void 0?void 0:t.loader}},{key:"beforePlayerInit",value:function(){var t=this,s=this.player.config;if(s.url){this.flv&&this.flv.destroy(),this.player.switchURL=this._onSwitchURL;var a=s.flv||{};if((a.disconnectTime===null||a.disconnectTime===void 0)&&(a.disconnectTime=0),this.flv=new Qn(ht({softDecode:this.softDecode,isLive:s.isLive,media:this.player.video,preProcessUrl:function(u,d){var c,h;return((c=t.player)===null||c===void 0||(h=c.preProcessUrl)===null||h===void 0?void 0:h.call(c,u,d))||{url:u,ext:d}}},a)),this.softDecode||hn.defineGetterOrSetter(this.player,{url:{get:function(){var u;return(u=t.flv)===null||u===void 0?void 0:u.blobUrl},configurable:!0}}),this.softDecode&&(this.pluginExtension=new w1(ht({media:this.player.video},s.flv),this),this.player.forceDegradeToVideo=function(){for(var o,u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];return(o=t.pluginExtension)===null||o===void 0?void 0:o.forceDegradeToVideo.apply(o,d)}),s.isLive){var l;(l=this.player)===null||l===void 0||l.useHooks("replay",function(){var o;return(o=t.flv)===null||o===void 0?void 0:o.replay()})}this.on(Cn,this._onSwitchURL),this.on(vu,this.destroy),this._transError(),this._transCoreEvent(U.TTFB),this._transCoreEvent(U.LOAD_START),this._transCoreEvent(U.LOAD_RESPONSE_HEADERS),this._transCoreEvent(U.LOAD_COMPLETE),this._transCoreEvent(U.LOAD_RETRY),this._transCoreEvent(U.SOURCEBUFFER_CREATED),this._transCoreEvent(U.ANALYZE_DURATION_EXCEEDED),this._transCoreEvent(U.REMOVE_BUFFER),this._transCoreEvent(U.BUFFEREOS),this._transCoreEvent(U.KEYFRAME),this._transCoreEvent(U.CHASEFRAME),this._transCoreEvent(U.METADATA_PARSED),this._transCoreEvent(U.SEI),this._transCoreEvent(U.SEI_IN_TIME),this._transCoreEvent(U.FLV_SCRIPT_DATA),this._transCoreEvent(U.STREAM_EXCEPTION),this._transCoreEvent(U.SWITCH_URL_SUCCESS),this._transCoreEvent(U.SWITCH_URL_FAILED),this.flv.load(s.url,!0)}}},{key:"_transError",value:function(){var t=this;this.flv.on(U.ERROR,function(s){t.player&&t.player.emit(yu,new Di(t.player,s))})}},{key:"_transCoreEvent",value:function(t){var s=this;this.flv.on(t,function(a){s.player&&s.player.emit("core_event",ht(ht({},a),{},{eventName:t}))})}}],[{key:"pluginName",get:function(){return"flv"}},{key:"isSupported",value:function(t,s){return Qn.isSupported(t,s)}},{key:"isSupportedMMS",value:function(){return typeof ManagedMediaSource<"u"}}]),e}(hn);ee(lc,"Flv",Qn);function X1(n,r){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,t,s,a,l=[],o=!0,u=!1;try{if(s=(e=e.call(n)).next,r===0){if(Object(e)!==e)return;o=!1}else for(;!(o=(i=s.call(e)).done)&&(l.push(i.value),l.length!==r);o=!0);}catch(d){u=!0,t=d}finally{try{if(!o&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(u)throw t}}return l}}function Bo(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);r&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,i)}return e}function ye(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Bo(Object(e),!0).forEach(function(i){V(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Bo(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Q(){Q=function(){return n};var n={},r=Object.prototype,e=r.hasOwnProperty,i=Object.defineProperty||function(y,v,Z){y[v]=Z.value},t=typeof Symbol=="function"?Symbol:{},s=t.iterator||"@@iterator",a=t.asyncIterator||"@@asyncIterator",l=t.toStringTag||"@@toStringTag";function o(y,v,Z){return Object.defineProperty(y,v,{value:Z,enumerable:!0,configurable:!0,writable:!0}),y[v]}try{o({},"")}catch{o=function(v,Z,W){return v[Z]=W}}function u(y,v,Z,W){var E=v&&v.prototype instanceof h?v:h,R=Object.create(E.prototype),M=new C(W||[]);return i(R,"_invoke",{value:L(y,Z,M)}),R}function d(y,v,Z){try{return{type:"normal",arg:y.call(v,Z)}}catch(W){return{type:"throw",arg:W}}}n.wrap=u;var c={};function h(){}function f(){}function p(){}var m={};o(m,s,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(x([])));b&&b!==r&&e.call(b,s)&&(m=b);var w=p.prototype=h.prototype=Object.create(m);function S(y){["next","throw","return"].forEach(function(v){o(y,v,function(Z){return this._invoke(v,Z)})})}function k(y,v){function Z(E,R,M,P){var Y=d(y[E],y,R);if(Y.type!=="throw"){var D=Y.arg,q=D.value;return q&&typeof q=="object"&&e.call(q,"__await")?v.resolve(q.__await).then(function(F){Z("next",F,M,P)},function(F){Z("throw",F,M,P)}):v.resolve(q).then(function(F){D.value=F,M(D)},function(F){return Z("throw",F,M,P)})}P(Y.arg)}var W;i(this,"_invoke",{value:function(E,R){function M(){return new v(function(P,Y){Z(E,R,P,Y)})}return W=W?W.then(M,M):M()}})}function L(y,v,Z){var W="suspendedStart";return function(E,R){if(W==="executing")throw new Error("Generator is already running");if(W==="completed"){if(E==="throw")throw R;return N()}for(Z.method=E,Z.arg=R;;){var M=Z.delegate;if(M){var P=T(M,Z);if(P){if(P===c)continue;return P}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(W==="suspendedStart")throw W="completed",Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);W="executing";var Y=d(y,v,Z);if(Y.type==="normal"){if(W=Z.done?"completed":"suspendedYield",Y.arg===c)continue;return{value:Y.arg,done:Z.done}}Y.type==="throw"&&(W="completed",Z.method="throw",Z.arg=Y.arg)}}}function T(y,v){var Z=v.method,W=y.iterator[Z];if(W===void 0)return v.delegate=null,Z==="throw"&&y.iterator.return&&(v.method="return",v.arg=void 0,T(y,v),v.method==="throw")||Z!=="return"&&(v.method="throw",v.arg=new TypeError("The iterator does not provide a '"+Z+"' method")),c;var E=d(W,y.iterator,v.arg);if(E.type==="throw")return v.method="throw",v.arg=E.arg,v.delegate=null,c;var R=E.arg;return R?R.done?(v[y.resultName]=R.value,v.next=y.nextLoc,v.method!=="return"&&(v.method="next",v.arg=void 0),v.delegate=null,c):R:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,c)}function X(y){var v={tryLoc:y[0]};1 in y&&(v.catchLoc=y[1]),2 in y&&(v.finallyLoc=y[2],v.afterLoc=y[3]),this.tryEntries.push(v)}function G(y){var v=y.completion||{};v.type="normal",delete v.arg,y.completion=v}function C(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(X,this),this.reset(!0)}function x(y){if(y){var v=y[s];if(v)return v.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var Z=-1,W=function E(){for(;++Z<y.length;)if(e.call(y,Z))return E.value=y[Z],E.done=!1,E;return E.value=void 0,E.done=!0,E};return W.next=W}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(w,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=o(p,l,"GeneratorFunction"),n.isGeneratorFunction=function(y){var v=typeof y=="function"&&y.constructor;return!!v&&(v===f||(v.displayName||v.name)==="GeneratorFunction")},n.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,p):(y.__proto__=p,o(y,l,"GeneratorFunction")),y.prototype=Object.create(w),y},n.awrap=function(y){return{__await:y}},S(k.prototype),o(k.prototype,a,function(){return this}),n.AsyncIterator=k,n.async=function(y,v,Z,W,E){E===void 0&&(E=Promise);var R=new k(u(y,v,Z,W),E);return n.isGeneratorFunction(v)?R:R.next().then(function(M){return M.done?M.value:R.next()})},S(w),o(w,l,"Generator"),o(w,s,function(){return this}),o(w,"toString",function(){return"[object Generator]"}),n.keys=function(y){var v=Object(y),Z=[];for(var W in v)Z.push(W);return Z.reverse(),function E(){for(;Z.length;){var R=Z.pop();if(R in v)return E.value=R,E.done=!1,E}return E.done=!0,E}},n.values=x,C.prototype={constructor:C,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!y)for(var v in this)v.charAt(0)==="t"&&e.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if(y.type==="throw")throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var v=this;function Z(Y,D){return R.type="throw",R.arg=y,v.next=Y,D&&(v.method="next",v.arg=void 0),!!D}for(var W=this.tryEntries.length-1;W>=0;--W){var E=this.tryEntries[W],R=E.completion;if(E.tryLoc==="root")return Z("end");if(E.tryLoc<=this.prev){var M=e.call(E,"catchLoc"),P=e.call(E,"finallyLoc");if(M&&P){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0);if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}else if(M){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}}}},abrupt:function(y,v){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var W=this.tryEntries[Z];if(W.tryLoc<=this.prev&&e.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var E=W;break}}E&&(y==="break"||y==="continue")&&E.tryLoc<=v&&v<=E.finallyLoc&&(E=null);var R=E?E.completion:{};return R.type=y,R.arg=v,E?(this.method="next",this.next=E.finallyLoc,c):this.complete(R)},complete:function(y,v){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&v&&(this.next=v),c},finish:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.finallyLoc===y)return this.complete(Z.completion,Z.afterLoc),G(Z),c}},catch:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.tryLoc===y){var W=Z.completion;if(W.type==="throw"){var E=W.arg;G(Z)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(y,v,Z){return this.delegate={iterator:x(y),resultName:v,nextLoc:Z},this.method==="next"&&(this.arg=void 0),c}},n}function Ur(n){"@babel/helpers - typeof";return Ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ur(n)}function Jo(n,r,e,i,t,s,a){try{var l=n[s](a),o=l.value}catch(u){e(u);return}l.done?r(o):Promise.resolve(o).then(i,t)}function ge(n){return function(){var r=this,e=arguments;return new Promise(function(i,t){var s=n.apply(r,e);function a(o){Jo(s,i,t,a,l,"next",o)}function l(o){Jo(s,i,t,a,l,"throw",o)}a(void 0)})}}function Be(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function jo(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,uc(i.key),i)}}function Je(n,r,e){return r&&jo(n.prototype,r),e&&jo(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function V(n,r,e){return r=uc(r),r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function bs(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&ba(n,r)}function Or(n){return Or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Or(n)}function ba(n,r){return ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},ba(n,r)}function T1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G1(n,r){if(n==null)return{};var e={},i=Object.keys(n),t,s;for(s=0;s<i.length;s++)t=i[s],!(r.indexOf(t)>=0)&&(e[t]=n[t]);return e}function Qo(n,r){if(n==null)return{};var e=G1(n,r),i,t;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(t=0;t<s.length;t++)i=s[t],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function le(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function W1(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return le(n)}function gs(n){var r=T1();return function(){var i=Or(n),t;if(r){var s=Or(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return W1(this,t)}}function yi(n,r){return C1(n)||X1(n,r)||oc(n,r)||I1()}function R1(n){return V1(n)||M1(n)||oc(n)||x1()}function V1(n){if(Array.isArray(n))return ga(n)}function C1(n){if(Array.isArray(n))return n}function M1(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function oc(n,r){if(n){if(typeof n=="string")return ga(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ga(n,r)}}function ga(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,i=new Array(r);e<r;e++)i[e]=n[e];return i}function x1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _1(n,r){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function uc(n){var r=_1(n,"string");return typeof r=="symbol"?r:String(r)}var F1=function(){function n(){Be(this,n);var r=window.crypto||window.msCrypto;this.subtle=r&&(r.subtle||r.webkitSubtle),this.externalDecryptor=null}return Je(n,[{key:"destroy",value:function(){var e;(e=this.externalDecryptor)!==null&&e!==void 0&&e.destroy&&this.externalDecryptor.destroy()}},{key:"decrypt",value:function(e,i){if(!(!e&&!i)){var t=[];return e&&(t[0]=this._decryptSegment(e)),i&&(t[1]=this._decryptSegment(i)),Promise.all(t)}}},{key:"_decryptSegment",value:function(){var r=ge(Q().mark(function i(t){var s;return Q().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(s=t.data,!t.key){l.next=5;break}return l.next=4,this._decryptData(t.data,t.key,t.keyIv);case 4:s=l.sent;case 5:if(t.map){l.next=7;break}return l.abrupt("return",s);case 7:return l.abrupt("return",zi(t.map,s));case 8:case"end":return l.stop()}},i,this)}));function e(i){return r.apply(this,arguments)}return e}()},{key:"_decryptData",value:function(){var r=ge(Q().mark(function i(t,s,a){var l;return Q().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.externalDecryptor){u.next=6;break}return u.next=3,this.externalDecryptor.decrypt(t,s,a);case 3:return u.abrupt("return",u.sent);case 6:if(this.subtle){u.next=8;break}throw new Error("crypto is not defined");case 8:return u.next=10,this.subtle.importKey("raw",s,{name:"AES-CBC"},!1,["encrypt","decrypt"]);case 10:return l=u.sent,u.t0=Uint8Array,u.next=14,this.subtle.decrypt({name:"AES-CBC",iv:a},l,t);case 14:return u.t1=u.sent,u.abrupt("return",new u.t0(u.t1));case 16:case"end":return u.stop()}},i,this)}));function e(i,t,s){return r.apply(this,arguments)}return e}()}]),n}(),ce=ye(ye({},U),{},{STREAM_PARSED:"core.streamparsed",NO_AUDIO_TRACK:"core.noaudiotrack",SUBTITLE_SEGMENTS:"core.subtitlesegments",SUBTITLE_PLAYLIST:"core.subtitleplaylist",SEI_PAYLOAD_TIME:"core.seipayloadtime",APPEND_COST:"core.appendcost"}),Fs=new ut("Transmuxer"),$o=function(){function n(r,e,i,t){Be(this,n),V(this,"_initSegmentId",""),this.hls=r,this._demuxer=e?new Bd:new Ad(null,null,null,t),this._isMP4=e,i&&(this._remuxer=new tl(this._demuxer.videoTrack,this._demuxer.audioTrack))}return Je(n,[{key:"transmux",value:function(e,i,t,s,a,l){var o=this._demuxer;try{this._isMP4?o.demux(e,i):o.demuxAndFix(zi(e,i),t,s,a)}catch(T){throw new Te(J.DEMUX,J.SUB_TYPES.HLS,T)}var u=o.videoTrack,d=o.audioTrack,c=o.metadataTrack,h={codec:u.codec,timescale:u.timescale,firstDts:u.firstDts/u.timescale,firstPts:u.firstPts/u.timescale,duration:u.samplesDuration/u.timescale},f={codec:d.codec,timescale:d.timescale,firstDts:d.firstDts/u.timescale,firstPts:d.firstPts/u.timescale,duration:d.samplesDuration/u.timescale},p="".concat(u.codec,"/").concat(u.width,"/").concat(u.height,"/").concat(d.codec,"/").concat(d.config);if(p!==this._initSegmentId&&(this._initSegmentId=p,l=!0),this._fireEvents(u,d,c,t||l),this.hls.emit(ce.DEMUXED_TRACK,{videoTrack:u,audioTrack:d}),this._remuxer){l&&this.hls.isLive&&!this.hls.config.mseLowLatency&&(u.duration=this.hls.totalDuration*u.timescale,d.duration=this.hls.totalDuration*d.timescale);try{var m=this._remuxer.remux(l),g=m.videoInitSegment,b=m.videoSegment,w=m.audioInitSegment,S=m.audioSegment,k=zi(g,b),L=zi(w,S);return[k?ye(ye({},h),{},{data:k}):void 0,L?ye(ye({},f),{},{data:L}):void 0]}catch(T){throw new Te(J.REMUX,J.SUB_TYPES.FMP4,T)}}else return[u,d]}},{key:"_fireEvents",value:function(e,i,t,s){var a=this,l=[e,i],o="discontinuity: ".concat(s);l.forEach(function(u){var d;(d=u.samples)!==null&&d!==void 0&&d.length&&(o+="; ".concat(u.samples.length," ").concat(u.type===Ri.VIDEO?"video":"audio"," samples, firstDts/firstPts/duration: ").concat((u.firstDts/u.timescale).toFixed(3),"/").concat((u.firstPts/u.timescale).toFixed(3),"/").concat((u.samplesDuration/u.timescale).toFixed(3))),s&&u.exist()&&a.hls.emit(ce.METADATA_PARSED,{type:u.type,track:u,meta:ye({codec:u.codec,timescale:u.timescale,baseDts:u.baseDts},u.type===Ri.VIDEO?{width:u.width,height:u.height,sarRatio:u.sarRatio}:{codec:u.codec,channelCount:u.channelCount,sampleRate:u.sampleRate})})}),Fs.debug(o),e.warnings.forEach(function(u){var d;switch(u.type){case Ke.LARGE_AV_SHIFT:d=ce.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case Ke.LARGE_VIDEO_GAP:d=ce.LARGE_VIDEO_DTS_GAP_DETECT;break;case Ke.LARGE_VIDEO_GAP_BETWEEN_CHUNK:d=ce.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}d&&a.hls.emit(ce.STREAM_EXCEPTION,ye(ye({},u),{},{type:d})),Fs.warn("video exception",u)}),i.warnings.forEach(function(u){var d;switch(u.type){case Ke.LARGE_AUDIO_GAP:d=ce.LARGE_AUDIO_DTS_GAP_DETECT;break;case Ke.AUDIO_FILLED:d=ce.AUDIO_GAP_DETECT;break;case Ke.AUDIO_DROPPED:d=ce.AUDIO_OVERLAP_DETECT;break}d&&a.hls.emit(ce.STREAM_EXCEPTION,ye(ye({},u),{},{type:d})),Fs.warn("audio exception",u)}),e.samples.forEach(function(u){u.keyframe&&a.hls.emit(ce.KEYFRAME,{pts:u.pts})}),t.seiSamples.forEach(function(u){a.hls.emit(ce.SEI,ye(ye({},u),{},{originPts:u.originPts/90,sei:{code:u.data.type,content:u.data.payload,dts:u.pts}}))})}}]),n}(),Y1=["data"],P1=["data"],qo=new ut("BufferService"),D1=function(){function n(r){var e=this;Be(this,n),V(this,"_decryptor",new F1),V(this,"_transmuxer",null),V(this,"_mse",null),V(this,"_softVideo",null),V(this,"_sourceCreated",!1),V(this,"_needInitSegment",!0),V(this,"_directAppend",!1),this.hls=r,r.config.softDecode?this._softVideo=r.media:(this._mse=new Ie(null,{preferMMS:r.config.preferMMS}),r.config.url&&this._mse.bindMedia(r.media).then(function(i){e.hls.emit(U.MEDIASOURCE_OPENED,i)})),r.config.decryptor&&(this._decryptor.externalDecryptor=r.config.decryptor)}return Je(n,[{key:"baseDts",get:function(){var e,i,t;return(e=this._transmuxer)===null||e===void 0||(i=e._demuxer)===null||i===void 0||(t=i._fixer)===null||t===void 0?void 0:t._baseDts}},{key:"nbSb",get:function(){var e;return(e=this._mse)!==null&&e!==void 0&&e._sourceBuffer?Object.keys(this._mse._sourceBuffer).length:0}},{key:"msIsOpened",get:function(){var e;return(e=this._mse)===null||e===void 0?void 0:e.isOpened}},{key:"msHasOpTasks",get:function(){var e;return(e=this._mse)===null||e===void 0?void 0:e.hasOpTasks}},{key:"msStreaming",get:function(){var e;return(e=this._mse)===null||e===void 0?void 0:e.streaming}},{key:"updateDuration",value:function(){var r=ge(Q().mark(function i(t){return Q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(qo.debug("update duration",t),!this._mse){a.next=9;break}if(this._mse.isOpened){a.next=5;break}return a.next=5,this._mse.open();case 5:return a.next=7,this._mse.updateDuration(t);case 7:a.next=10;break;case 9:this._softVideo&&(this._softVideo.duration=t);case 10:case"end":return a.stop()}},i,this)}));function e(i){return r.apply(this,arguments)}return e}()},{key:"createSource",value:function(e,i,t,s){if(!this._sourceCreated){var a=e||i;if(a){if(Ad.probe(a))this._transmuxer||(this._transmuxer=new $o(this.hls,!1,!this._softVideo,this.hls.config.fixerConfig));else if(oe.probe(a))if(this._softVideo)this._transmuxer||(this._transmuxer=new $o(this.hls,!0,null,this.hls.config.fixerConfig));else{this._directAppend=!0;var l=!1;e&&!t&&oe.findBox(e,["moov","trak"]).forEach(function(o){var u=oe.findBox(o.data,["trak","mdia","minf","stbl","stsd"])[0];if(u){var d=oe.stsd(u).entries[0];if(d){if(d.hvcC)t=d.hvcC.codec||"hev1.1.6.L93.B0";else if(d.avcC)t=d.avcC.codec;else if(d.sampleRate||d.esds){var c;s=((c=d.esds)===null||c===void 0?void 0:c.codec)||"mp4a.40.2",l=!0}}}}),i&&!s&&oe.findBox(i,["moov","trak","mdia","minf","stbl","stsd"]).forEach(function(o){var u=oe.stsd(o).entries[0];u&&u.esds&&(s=u.esds.codec)}),e&&!t&&(t="avc1.42e01e"),i&&!s&&(s="mp4a.40.2"),l&&(t+=", ".concat(s),s=""),this._createMseSource(t,s)}else throw new Te(J.OTHER,null,null,null,"unsupported stream");this._softVideo&&(this._sourceCreated=!0)}}}},{key:"appendBuffer",value:function(){var r=ge(Q().mark(function i(t,s,a,l,o,u,d){var c,h,f,p,m,g,b,w,S,k,L,T,X;return Q().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(!(a!=null&&a.length)&&!(l!=null&&l.length))){C.next=2;break}return C.abrupt("return");case 2:if(!this._directAppend){C.next=7;break}return c=[],a&&c.push(this._mse.append(Ie.VIDEO,a)),l&&c.push(this._mse.append(Ie.AUDIO,l)),C.abrupt("return",Promise.all(c));case 7:if(h=this._needInitSegment||o,f=this._transmuxer.transmux(a,l,h,u,d,this._needInitSegment||o),p=yi(f,2),m=p[0],g=p[1],l&&s&&(s==null||s.setTrackExist(!1,!0)),l&&t&&(t==null||t.setTrackExist(!0,!1)),s||t==null||t.setTrackExist(!!m,!!g),m&&!g&&this.hls.emit(ce.NO_AUDIO_TRACK),!this._softVideo){C.next=18;break}this._softVideo.appendBuffer(m,g),this._needInitSegment=!1,C.next=28;break;case 18:if(!this._mse){C.next=28;break}return b=!this._sourceCreated,b&&this._createMseSource(m==null?void 0:m.codec,g==null?void 0:g.codec),this._needInitSegment=!1,w=this._mse,S=[],h&&!b&&this._handleCodecChange(m,g).forEach(function(x){return S.push(x)}),m&&(k=m.data,L=Qo(m,Y1),S.push(w.append(Ie.VIDEO,k,L))),g&&(T=g.data,X=Qo(g,P1),S.push(w.append(Ie.AUDIO,T,X))),C.abrupt("return",Promise.all(S));case 28:case"end":return C.stop()}},i,this)}));function e(i,t,s,a,l,o,u){return r.apply(this,arguments)}return e}()},{key:"removeBuffer",value:function(){var r=ge(Q().mark(function i(){var t=this,s,a,l,o=arguments;return Q().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s=o.length>0&&o[0]!==void 0?o[0]:0,a=o.length>1&&o[1]!==void 0?o[1]:1/0,l=this.hls.media,!(!this._mse||!l||s<0||a<s||s>=this._mse.duration)){d.next=5;break}return d.abrupt("return");case 5:return d.abrupt("return",this._mse.clearBuffer(s,a).then(function(){return t.hls.emit(U.REMOVE_BUFFER,{start:s,end:a,removeEnd:a})}));case 6:case"end":return d.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"evictBuffer",value:function(){var r=ge(Q().mark(function i(t){var s,a,l,o;return Q().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s=this.hls.media,!(!this._mse||!s||!t||t<0)){d.next=3;break}return d.abrupt("return");case 3:if(a=s.currentTime,l=a-t,!(l<=0)){d.next=7;break}return d.abrupt("return");case 7:if(o=De.start(De.get(s)),!(o+1>=l)){d.next=10;break}return d.abrupt("return");case 10:return d.abrupt("return",this.removeBuffer(0,l));case 11:case"end":return d.stop()}},i,this)}));function e(i){return r.apply(this,arguments)}return e}()},{key:"clearAllBuffer",value:function(){var r=ge(Q().mark(function i(){return Q().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=2;break}return s.abrupt("return",this._mse.clearAllBuffer());case 2:case"end":return s.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"decryptBuffer",value:function(e,i){return this._decryptor.decrypt(e,i)}},{key:"reset",value:function(){var r=ge(Q().mark(function i(){var t,s=arguments;return Q().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=s.length>0&&s[0]!==void 0?s[0]:!1,!(this._mse&&!t)){l.next=8;break}return this._transmuxer=null,this._sourceCreated=!1,l.next=6,this._mse.unbindMedia();case 6:return l.next=8,this._mse.bindMedia(this.hls.media);case 8:this._needInitSegment=!0,this._directAppend=!1;case 10:case"end":return l.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"endOfStream",value:function(){var r=ge(Q().mark(function i(){return Q().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this._mse){s.next=5;break}if(!this._sourceCreated){s.next=5;break}return s.next=4,this._mse.endOfStream();case 4:this.hls.emit(U.BUFFEREOS);case 5:this._softVideo&&this._softVideo.endOfStream();case 6:case"end":return s.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"setLiveSeekableRange",value:function(){var r=ge(Q().mark(function i(t,s){return Q().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:this._mse&&this._mse.setLiveSeekableRange(t,s);case 1:case"end":return l.stop()}},i,this)}));function e(i,t){return r.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var r=ge(Q().mark(function i(){var t;return Q().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if((t=this._decryptor)===null||t===void 0||t.destroy(),!this._mse){a.next=4;break}return a.next=4,this._mse.unbindMedia();case 4:this._decryptor=null,this._mse=null,this._softVideo=null;case 7:case"end":return a.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"_createMseSource",value:function(e,i){qo.debug("create mse source, videoCodec=".concat(e,", audioCodec=").concat(i));var t=this._mse;t&&(e&&(t.createSource(Ie.VIDEO,"video/mp4;codecs=".concat(e)),this._sourceCreated=!0),i&&(t.createSource(Ie.AUDIO,"audio/mp4;codecs=".concat(i)),this._sourceCreated=!0),this.hls.emit(U.SOURCEBUFFER_CREATED))}},{key:"_handleCodecChange",value:function(e,i){var t=[],s=this._mse,a=[{type:Ie.VIDEO,codecs:e==null?void 0:e.codec},{type:Ie.AUDIO,codecs:i==null?void 0:i.codec}];return a.filter(function(l){return!!l.codecs}).forEach(function(l){var o=l.type,u=l.codecs,d=s.getSourceBuffer(o);if(d){var c=u.split(",")[0];new RegExp(c,"ig").test(d.mimeType)||t.push(s.changeType(o,"".concat(o,"/mp4;codecs=").concat(u)))}}),t}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0}},{key:"isFull",value:function(){var e,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ie.VIDEO;return(e=this._mse)===null||e===void 0?void 0:e.isFull(i)}}]),n}();function K1(n){var r=(n==null?void 0:n.media)||document.createElement("video");return ye(ye({maxPlaylistSize:50,retryCount:3,retryDelay:1e3,pollRetryCount:2,loadTimeout:1e4,manifestLoadTimeout:1e4,preloadTime:30,softDecode:!1,bufferBehind:10,maxJumpDistance:3,startTime:0,useLowLatency:!0,targetLatency:10,maxLatency:20,allowedStreamTrackChange:!0,seiInTime:!1,manifestList:[],minSegmentsStartPlay:3,preferMMS:!1,preferMMSStreaming:!1,mseLowLatency:!0,fixerConfig:{forceFixLargeGap:!1,largeGapThreshold:5}},n),{},{media:r})}var N1=Je(function n(){Be(this,n),V(this,"version",0),V(this,"streams",[]),V(this,"isMaster",!0)}),dc={Audio:"AUDIO",Video:"VIDEO",SubTitle:"SUBTITLE",ClosedCaptions:"CLOSED-CAPTIONS"},Lr={CLEAR_KEY:"org.w3.clearkey",FAIRPLAY:["urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2","com.apple.streamingkeydelivery"],WIDEVINE:["urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha","com.widevine"],PLAYREADY:["urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready"]};function cc(n){for(var r=[],e=0;e<n.length;e++)Array.isArray(n[e])?r=r.concat(cc(n[e])):r.push(n[e]);return r}var il=Je(function n(){Be(this,n),V(this,"id",0),V(this,"url",""),V(this,"default",!1),V(this,"autoSelect",!1),V(this,"forced",!1),V(this,"group",""),V(this,"name",""),V(this,"lang",""),V(this,"segments",[]),V(this,"endSN",0)}),H1=function(n){bs(e,n);var r=gs(e);function e(){var i;Be(this,e);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return i=r.call.apply(r,[this].concat(s)),V(le(i),"mediaType",dc.Audio),V(le(i),"channels",0),i}return Je(e)}(il),U1=function(n){bs(e,n);var r=gs(e);function e(){var i;Be(this,e);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return i=r.call.apply(r,[this].concat(s)),V(le(i),"mediaType",dc.SubTitle),i}return Je(e)}(il),O1=Je(function n(){Be(this,n),V(this,"id",0),V(this,"bitrate",0),V(this,"width",0),V(this,"height",0),V(this,"name",""),V(this,"url",""),V(this,"audioCodec",""),V(this,"videoCodec",""),V(this,"textCodec",""),V(this,"audioGroup",""),V(this,"audioStreams",[]),V(this,"subtitleStreams",[]),V(this,"closedCaptionsStream",[])}),z1=Je(function n(){Be(this,n),V(this,"version",0),V(this,"url",""),V(this,"type",""),V(this,"startCC",0),V(this,"endCC",0),V(this,"startSN",0),V(this,"endSN",0),V(this,"totalDuration",0),V(this,"targetDuration",0),V(this,"partTargetDuration",0),V(this,"canSkipUntil",0),V(this,"canSkipDateRanges",!1),V(this,"skippedSegments",0),V(this,"canBlockReload",!1),V(this,"partHoldBack",0),V(this,"live",!0),V(this,"lowLatency",!1),V(this,"endPartIndex",0),V(this,"segments",[])}),Er=function(){function n(r){Be(this,n),V(this,"sn",0),V(this,"cc",0),V(this,"url",""),V(this,"parentUrl",""),V(this,"title",""),V(this,"start",0),V(this,"duration",0),V(this,"dataTime",""),V(this,"key",null),V(this,"byteRange",null),V(this,"isInitSegment",!1),V(this,"initSegment",null),V(this,"isLast",!1),V(this,"hasAudio",!1),V(this,"hasVideo",!1),V(this,"independent",!1),V(this,"partIndex",0),this.parentUrl=r}return Je(n,[{key:"end",get:function(){return this.start+this.duration}},{key:"setTrackExist",value:function(e,i){this.hasVideo=e,this.hasAudio=i}},{key:"setByteRange",value:function(e,i){this.byteRange=[0];var t=e.split("@");t.length===1&&i&&i.byteRange?(this.byteRange[0]=i.byteRange[1]||0,this.byteRange[0]&&(this.byteRange[0]+=1)):this.byteRange[0]=parseInt(t[1]),this.byteRange[1]=this.byteRange[0]+parseInt(t[0])-1}}]),n}(),A1=function(){function n(r){Be(this,n),V(this,"method",""),V(this,"url",""),V(this,"iv",null),V(this,"keyFormat",""),V(this,"keyFormatVersions",""),r instanceof n&&(this.method=r.method,this.url=r.url,this.keyFormat=r.keyFormat,this.keyFormatVersions=r.keyFormatVersions,r.iv&&(this.iv=new Uint8Array(r.iv)))}return Je(n,[{key:"clone",value:function(e){var i=new n(this);return e!=null&&i.setIVFromSN(e),i}},{key:"setIVFromSN",value:function(e){if(!this.iv&&this.method==="AES-128"&&typeof e=="number"&&this.url){this.iv=new Uint8Array(16);for(var i=12;i<16;i++)this.iv[i]=e>>8*(15-i)&255}}},{key:"isSegmentEncrypted",value:function(){var e=this.method;return e==="AES-128"}},{key:"isValidKeySystem",value:function(){var e=cc([Lr.CLEAR_KEY,Lr.FAIRPLAY,Lr.WIDEVINE,Lr.PLAYREADY]).indexOf(this.keyFormat)>-1;if(!e)return!1;var i=["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)>-1;return!!i}},{key:"isSupported",value:function(){return this.method?this.isSegmentEncrypted()?!0:!!this.isValidKeySystem():!1}}]),n}(),B1=/^#(EXT[^:]*)(?::(.*))?$/,eu=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,J1=/^(?:[a-zA-Z0-9+\-.]+:)?\/\//,j1=/^((?:[a-zA-Z0-9+\-.]+:)?\/\/[^/?#]*)?([^?#]*\/)?/;function Q1(n){return n.split(/[\r\n]/).map(function(r){return r.trim()}).filter(Boolean)}function hc(n){var r=n.match(B1);if(!(!r||!r[1]))return[r[1].replace("EXT-X-",""),r[2]]}function Ki(n){for(var r={},e=eu.exec(n);e;)r[e[1]]=e[2]||e[3],e=eu.exec(n);return r}function dn(n,r){if(!r||!n||J1.test(n))return n;var e=j1.exec(r);return e?n[0]==="/"?e[1]+n:e[1]+e[2]+n:n}var $1={audio:[/^mp4a/,/^vorbis$/,/^opus$/,/^flac$/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Ys(n,r){var e=$1[n];if(!(!e||!r||!r.length)){for(var i=0;i<e.length;i++)for(var t=0;t<r.length;t++)if(e[i].test(r[t]))return r[t]}}function q1(n,r){for(var e=new N1,i=0,t,s=[],a=[];t=n[i++];){var l=hc(t);if(l){var o=yi(l,2),u=o[0],d=o[1];if(u==="VERSION")e.version=parseInt(d);else if(u==="MEDIA"&&d){var c=Ki(d),h=void 0;switch(c.TYPE){case"AUDIO":h=new H1;break;case"SUBTITLES":h=new U1;break;default:h=new il}h.url=dn(c.URI,r),h.default=c.DEFAULT==="YES",h.autoSelect=c.AUTOSELECT==="YES",h.group=c["GROUP-ID"],h.name=c.NAME,h.lang=c.LANGUAGE,c.CHANNELS&&(h.channels=Number(c.CHANNELS.split("/")[0]),Number.isNaN(h.channels)&&(h.channels=0)),c.TYPE==="AUDIO"&&c.URI&&s.push(h),c.TYPE==="SUBTITLES"&&a.push(h)}else if(u==="STREAM-INF"&&d){var f=new O1,p=Ki(d);if(f.bitrate=parseInt(p["AVERAGE-BANDWIDTH"]||p.BANDWIDTH),f.name=p.NAME,f.url=dn(n[i++],r),p.RESOLUTION){var m=p.RESOLUTION.split("x"),g=yi(m,2),b=g[0],w=g[1];f.width=parseInt(b),f.height=parseInt(w)}if(p.CODECS){var S=p.CODECS.split(/[ ,]+/).filter(Boolean);f.videoCodec=Ys("video",S),f.audioCodec=Ys("audio",S),f.textCodec=Ys("text",S)}f.audioGroup=p.AUDIO,f.subtitleGroup=p.SUBTITLES,e.streams.push(f)}}}return e.streams.forEach(function(k,L){k.id=L}),s.length&&(s.forEach(function(k,L){k.id=L}),e.streams.forEach(function(k){k.audioGroup&&(k.audioStreams=s.filter(function(L){return L.group===k.audioGroup}))})),a.length&&(a.forEach(function(k,L){k.id=L}),e.streams.forEach(function(k){k.subtitleGroup&&(k.subtitleStreams=a.filter(function(L){return L.group===k.subtitleGroup}))})),e}function e2(n,r,e){var i=new z1;i.url=r;for(var t=new Er(r),s=null,a=null,l=0,o=0,u=0,d=0,c,h=!1,f=0;c=n[d++];){if(c[0]!=="#"){if(i.lowLatency){o++;continue}t.sn=o,t.cc=u,t.url=dn(c,r),a&&(t.key=a.clone(o)),s&&(t.initSegment=s),i.segments.push(t),t=new Er(r),o++;continue}var p=hc(c);if(p){var m=yi(p,2),g=m[0],b=m[1];switch(g){case"VERSION":i.version=parseInt(b);break;case"PLAYLIST-TYPE":i.type=b==null?void 0:b.toUpperCase();break;case"TARGETDURATION":i.targetDuration=parseFloat(b);break;case"PART-INF":{e&&(i.lowLatency=!0);var w=Ki(b);w["PART-TARGET"]&&(i.partTargetDuration=parseFloat(w["PART-TARGET"]))}break;case"SERVER-CONTROL":{var S=Ki(b);i.canBlockReload=S["CAN-BLOCK-RELOAD"]==="YES",i.partHoldBack=parseFloat(S["PART-HOLD-BACK"]||0),i.canSkipUntil=parseFloat(S["CAN-SKIP-UNTIL"]||0),i.canSkipDateRanges=S["CAN-SKIP-DATERANGES"]==="YES"}break;case"ENDLIST":h=!0;break;case"MEDIA-SEQUENCE":o=i.startSN=parseInt(b);break;case"DISCONTINUITY-SEQUENCE":u=i.startCC=parseInt(b);break;case"DISCONTINUITY":u++;break;case"BYTERANGE":t.setByteRange(b,i.segments[i.segments.length-1]);break;case"PART":{if(!i.lowLatency)break;var k=Ki(b);t.duration=parseFloat(k.DURATION),t.independent=k.INDEPENDENT==="YES",t.sn=o,t.cc=u,t.partIndex=f,t.start=l,t.duration=parseFloat(k.DURATION),l+=t.duration,t.url=dn(k.URI,r),a&&(t.key=a.clone(o)),s&&(t.initSegment=s),i.segments.push(t),t=new Er(r),f++}break;case"PRELOAD-HINT":break;case"PROGRAM-DATE-TIME":t.dataTime=b;break;case"EXTINF":{if(i.lowLatency){f=0;break}var L=b.split(","),T=yi(L,2),X=T[0],G=T[1];t.start=l,t.duration=parseFloat(X),l+=t.duration,t.title=G}break;case"KEY":{var C=Ki(b);if(C.METHOD==="NONE"){a=null;break}if(a=new A1,a.method=C.METHOD,a.url=/^blob:/.test(C.URI)?C.URI:dn(C.URI,r),a.keyFormat=C.KEYFORMAT||"identity",a.keyFormatVersions=C.KEYFORMATVERSIONS,!a.isSupported())throw new Error("encrypt ".concat(C.METHOD,"/").concat(C.KEYFORMAT," is not supported"));if(C.IV){var x=C.IV.slice(2);x=(x.length&1?"0":"")+x,a.iv=new Uint8Array(x.length/2);for(var N=0,y=x.length/2;N<y;N++)a.iv[N]=parseInt(x.slice(N*2,N*2+2),16)}}break;case"MAP":{var v=Ki(b);t.url=dn(v.URI,r),v.BYTERANGE&&t.setByteRange(v.BYTERANGE),t.isInitSegment=!0,t.sn=0,a&&(t.key=a.clone(0)),s=t,t=new Er(r)}break}}}i.segments=i.segments.filter(function(W){return W.duration!==0});var Z=i.segments[i.segments.length-1];return Z&&(h&&(Z.isLast=!0),i.endSN=Z.sn,i.endPartIndex=Z.partIndex),h&&(i.live=!1),i.totalDuration=l,i.endCC=u,i}var wr=function(){function n(){Be(this,n)}return Je(n,null,[{key:"parse",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;if(!e.includes("#EXTM3U"))throw new Error("Invalid m3u8 file");var s=Q1(e);return n.isMediaPlaylist(e)?e2(s,i,t):q1(s,i)}},{key:"isMediaPlaylist",value:function(e){return e.includes("#EXTINF:")||e.includes("#EXT-X-TARGETDURATION:")}}]),n}(),t2=function(){function n(r){var e=this;Be(this,n),V(this,"_emitOnLoaded",function(o,u){var d=o.response,c=o.options,h=c||{},f=h.firstByteTime,p=h.startTime,m=h.endTime,g=h.contentLength,b=m-p;e.hls.emit(U.SPEED,{time:b,byteLength:g,url:u}),e.hls.emit(U.LOAD_COMPLETE,{url:u,elapsed:b||0}),e.hls.emit(U.TTFB,{url:u,responseUrl:d.url,elapsed:f-p}),e.hls.emit(U.LOAD_RESPONSE_HEADERS,{headers:d.headers,url:u})}),V(this,"_onLoaderRetry",function(o,u){e.hls.emit(ce.LOAD_RETRY,{error:Te.network(o),retryTime:u})}),this.hls=r,this._timer=null,this._useLowLatency=r.config.useLowLatency;var i=this.hls.config,t=i.retryCount,s=i.retryDelay,a=i.manifestLoadTimeout,l=i.fetchOptions;this._loader=new Wi(ye(ye({},l),{},{responseType:"text",retry:t,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._audioLoader=new Wi(ye(ye({},l),{},{responseType:"text",retry:t,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._subtitleLoader=new Wi(ye(ye({},l),{},{responseType:"text",retry:t,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry}))}return Je(n,[{key:"load",value:function(){var r=ge(Q().mark(function i(t,s,a){var l,o,u,d,c,h,f,p,m,g,b,w,S,k,L,T,X,G,C,x;return Q().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return l=[this._loader.load(t)],s&&l.push(this._audioLoader.load(s)),a&&l.push(this._subtitleLoader.load(a)),y.prev=3,y.next=6,Promise.all(l);case 6:if(p=y.sent,m=yi(p,3),g=m[0],b=m[1],w=m[2],g){y.next=13;break}return y.abrupt("return",[]);case 13:this._emitOnLoaded(g,t),o=g.data,c=g.response.url||t,s?(u=b==null?void 0:b.data,d=w==null?void 0:w.data,h=(b==null||(S=b.response)===null||S===void 0?void 0:S.url)||s,f=(w==null||(k=w.response)===null||k===void 0?void 0:k.url)||a,u&&this._emitOnLoaded(b,s),d&&this._emitOnLoaded(w,a)):(d=b==null?void 0:b.data,f=(b==null||(L=b.response)===null||L===void 0?void 0:L.url)||a,d&&this._emitOnLoaded(b,a)),y.next=22;break;case 19:throw y.prev=19,y.t0=y.catch(3),Te.network(y.t0);case 22:if(T=this.hls.config.onPreM3U8Parse,y.prev=23,T&&(o=T(o)||o,u&&(u=T(u,!0)||u),d&&(d=T(d,!0)||d)),X=wr.parse(o,c,this._useLowLatency),!(((x=X)===null||x===void 0?void 0:x.live)===!1&&X.segments&&!X.segments.length)){y.next=28;break}throw new Error("empty segments list");case 28:u&&(G=wr.parse(u,h,this._useLowLatency)),d&&(C=wr.parse(d,f,this._useLowLatency)),y.next=35;break;case 32:throw y.prev=32,y.t1=y.catch(23),new Te(J.MANIFEST,J.SUB_TYPES.HLS,y.t1);case 35:return X&&(X.isMaster?this.hls.emit(ce.HLS_MANIFEST_LOADED,{playlist:X}):this.hls.emit(ce.HLS_LEVEL_LOADED,{playlist:X})),y.abrupt("return",[X,G,C]);case 37:case"end":return y.stop()}},i,this,[[3,19],[23,32]])}));function e(i,t,s){return r.apply(this,arguments)}return e}()},{key:"parseText",value:function(e,i){var t=this.hls.config.onPreM3U8Parse,s;try{var a;if(t&&(e=t(e)||e),s=wr.parse(e,i,this._useLowLatency),((a=s)===null||a===void 0?void 0:a.live)===!1&&s.segments&&!s.segments.length)throw new Error("empty segments list")}catch(l){throw new Te(J.MANIFEST,J.SUB_TYPES.HLS,l)}return s&&(s.isMaster?this.hls.emit(ce.HLS_MANIFEST_LOADED,{playlist:s}):this.hls.emit(ce.HLS_LEVEL_LOADED,{playlist:s})),[s]}},{key:"poll",value:function(e,i,t,s,a,l){var o=this;clearTimeout(this._timer),l=l||3e3;var u=this.hls.config.pollRetryCount,d=function(){var c=ge(Q().mark(function h(){var f;return Q().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return clearTimeout(o._timer),m.prev=1,m.next=4,o.load(e,i,t);case 4:if(f=m.sent,f[0]){m.next=7;break}return m.abrupt("return");case 7:u=o.hls.config.pollRetryCount,s(f[0],f[1],f[2]),m.next=15;break;case 11:m.prev=11,m.t0=m.catch(1),u--,u<=0&&a(m.t0);case 15:o._timer=setTimeout(d,l);case 16:case"end":return m.stop()}},h,null,[[1,11]])}));return function(){return c.apply(this,arguments)}}();this._timer=setTimeout(d,l)}},{key:"stopPoll",value:function(){return clearTimeout(this._timer),this.cancel()}},{key:"cancel",value:function(){return Promise.all([this._loader.cancel(),this._audioLoader.cancel()])}}]),n}();function pc(n,r,e){return r>e&&(e=r),Math.min(Math.max(n,r),e)}var Ps=new ut("playlist"),tu=function(){function n(r,e,i){Be(this,n),V(this,"live",void 0),V(this,"id",0),V(this,"bitrate",0),V(this,"width",0),V(this,"height",0),V(this,"name",""),V(this,"url",""),V(this,"audioCodec",""),V(this,"videoCodec",""),V(this,"textCodec",""),V(this,"startCC",0),V(this,"endCC",0),V(this,"startSN",0),V(this,"endSN",-1),V(this,"totalDuration",0),V(this,"targetDuration",0),V(this,"partTargetDuration",0),V(this,"canSkipUntil",0),V(this,"canSkipDateRanges",!1),V(this,"skippedSegments",0),V(this,"canBlockReload",!1),V(this,"partHoldBack",0),V(this,"lowLatency",!1),V(this,"endPartIndex",0),V(this,"snDiff",null),V(this,"segments",[]),V(this,"audioStreams",[]),V(this,"subtitleStreams",[]),V(this,"closedCaptions",[]),V(this,"currentAudioStream",null),V(this,"currentSubtitleStream",null),this.update(this._setLLPlaybackPoint(r),e,i)}return Je(n,[{key:"lastSegment",get:function(){return this.segments.length?this.segments[this.segments.length-1]:null}},{key:"segmentDuration",get:function(){var e;return this.targetDuration||((e=this.segments[0])===null||e===void 0?void 0:e.duration)||0}},{key:"liveEdge",get:function(){return this.endTime},set:function(e){this.endTime=e}},{key:"endTime",get:function(){var e;return((e=this.lastSegment)===null||e===void 0?void 0:e.end)||0},set:function(e){var i=this.lastSegment;i&&(i.duration=e-i.start)}},{key:"currentSubtitleEndSn",get:function(){var e;return((e=this.currentSubtitleStream)===null||e===void 0?void 0:e.endSN)||0}},{key:"clearOldSegment",value:function(e,i){return this.currentAudioStream&&this._clearSegments(e,i),this._clearSegments(e,i)}},{key:"getAudioSegment",value:function(e){if(!(!e||!this.currentAudioStream)){var i=e.sn-this.snDiff;return this.currentAudioStream.segments.find(function(t){return t.sn===i})}}},{key:"update",value:function(e,i){this.url=e.url,Array.isArray(e.segments)?((this.live===null||this.live===void 0)&&(this.live=e.live),this._updateSegments(e,this),this.startCC=e.startCC,this.endCC=e.endCC,this.startSN=e.startSN,this.endSN=e.endSN||-1,this.totalDuration=e.totalDuration,this.targetDuration=e.targetDuration,this.live=e.live,this.lowLatency=e.lowLatency,this.canBlockReload=e.canBlockReload,this.canSkipDateRanges=e.canSkipDateRanges,this.canSkipUntil=e.canSkipUntil,this.partHoldBack=e.partHoldBack,this.partTargetDuration=e.partTargetDuration,this.skippedSegments=e.skippedSegments,this.endPartIndex=e.endPartIndex,i&&this.currentAudioStream&&Array.isArray(i.segments)&&(this._updateSegments(i,this.currentAudioStream),(this.snDiff===null||this.snDiff===void 0)&&e.segments.length&&i.segments.length&&(this.snDiff=e.segments[0].sn-i.segments[0].sn))):(this.id=e.id,this.bitrate=e.bitrate,this.width=e.width,this.height=e.height,this.name=e.name,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.textCodec=e.textCodec,this.audioStreams=e.audioStreams,this.subtitleStreams=e.subtitleStreams,!this.currentAudioStream&&this.audioStreams.length&&(this.currentAudioStream=this.audioStreams.find(function(t){return t.default})||this.audioStreams[0]),!this.currentSubtitleStream&&this.subtitleStreams.length&&(this.currentSubtitleStream=this.subtitleStreams.find(function(t){return t.default})||this.subtitleStreams[0]))}},{key:"updateSubtitle",value:function(e){var i=this;if(e&&this.currentSubtitleStream&&Array.isArray(e.segments)){var t=this._updateSegments(e,this.currentSubtitleStream),s=this.currentSubtitleStream.segments;if(s.length>100&&(this.currentSubtitleStream.segments=s.slice(100)),!!t)return t.map(function(a){return{sn:a.sn,url:a.url,duration:a.duration,start:a.start,end:a.end,lang:i.currentSubtitleStream.lang}})}}},{key:"switchSubtitle",value:function(e){var i=this.subtitleStreams.find(function(s){return s.lang===e}),t=this.currentSubtitleStream;i&&(this.currentSubtitleStream=i,t.segments=[])}},{key:"_setLLPlaybackPoint",value:function(e){if(!e.lowLatency||!e.segments.length)return e;for(var i=e.totalDuration-e.partHoldBack,t=e.segments,s=0,a=0,l=t.length;a<l;a++)t[a].start<=i&&t[a].independent&&(s=a);var o=t.slice(s),u=0;return o.forEach(function(d){d.start=u,u=d.end}),e.segments=o,e.totalDuration=u,e.startSN=o[0].sn,e.startCC=o[0].cc,Ps.log("set ll-hls playback point: SN=".concat(e.startSN," partIndex=").concat(o[0].partIndex,", duration=").concat(u)),e}},{key:"_clearSegments",value:function(e,i){for(var t=0,s=this.segments,a=0,l=s.length;a<l;a++)if(s[a].end>=e){t=a;break}return t>i&&(t=i),t&&(this.segments=this.segments.slice(t),this.currentAudioStream&&(this.currentAudioStream.segments=this.currentAudioStream.segments.slice(t))),i-t}},{key:"_updateSegments",value:function(e,i){var t=i.segments;if(this.live){var s,a=e.lowLatency,l=t[t.length-1],o=(s=l==null?void 0:l.sn)!==null&&s!==void 0?s:-1,u=(l==null?void 0:l.partIndex)||0,d=o<e.endSN&&e.segments.length;if(a&&(d=d||u<e.endPartIndex),d){Ps.log("update segments: endSN:".concat(o,", partIndex:").concat(u," --> endSN:").concat(e.endSN,", partIndex:").concat(e.endPartIndex));var c=e.segments.findIndex(function(g){return g.sn===o&&g.partIndex===u}),h=c<0?e.segments:e.segments.slice(c+1);if(t.length&&h.length){var f=l.end,p=f;h.forEach(function(g){g.start=f,f=g.end}),Ps.log("liveEdge: ".concat(p," -> ").concat(f));var m=(l==null?void 0:l.cc)||-1;m>h[0].cc&&h.forEach(function(g){return g.cc+=m})}return i.endSN=e.endSN,i.segments=t.concat(h),h}}else i.segments=e.segments}}]),n}(),i2=function(){function n(r){Be(this,n),V(this,"streams",[]),V(this,"currentStream",null),V(this,"dvrWindow",0),V(this,"_segmentPointer",-1),this.hls=r}return Je(n,[{key:"lowLatency",get:function(){var e;return(e=this.currentStream)===null||e===void 0?void 0:e.lowLatency}},{key:"lastSegment",get:function(){var e;return(e=this.currentStream)===null||e===void 0?void 0:e.lastSegment}},{key:"currentSegment",get:function(){var e;return(e=this.currentSegments)===null||e===void 0?void 0:e[this._segmentPointer]}},{key:"nextSegment",get:function(){var e;return(e=this.currentSegments)===null||e===void 0?void 0:e[this._segmentPointer+1]}},{key:"currentSegments",get:function(){var e;return(e=this.currentStream)===null||e===void 0?void 0:e.segments}},{key:"currentSubtitleEndSn",get:function(){var e;return(e=this.currentStream)===null||e===void 0?void 0:e.currentSubtitleEndSn}},{key:"liveEdge",get:function(){var e;return(e=this.currentStream)===null||e===void 0?void 0:e.liveEdge},set:function(e){this.currentStream&&(this.currentStream.liveEdge=e)}},{key:"totalDuration",get:function(){var e;return((e=this.currentStream)===null||e===void 0?void 0:e.totalDuration)||0}},{key:"seekRange",get:function(){var e=this.currentSegments;if(!(!e||!e.length))return[e[0].start,e[e.length-1].end]}},{key:"nbSegments",get:function(){var e;return((e=this.currentSegments)===null||e===void 0?void 0:e.length)||0}},{key:"isEmpty",get:function(){var e;return!((e=this.currentSegments)!==null&&e!==void 0&&e.length)}},{key:"isLive",get:function(){var e;return(e=this.currentStream)===null||e===void 0?void 0:e.live}},{key:"hadSegmentLoaded",get:function(){return this._segmentPointer!==-1}},{key:"hasSubtitle",get:function(){var e;return!!((e=this.currentStream)!==null&&e!==void 0&&e.currentSubtitleStream)}},{key:"getAudioSegment",value:function(e){var i;return(i=this.currentStream)===null||i===void 0?void 0:i.getAudioSegment(e)}},{key:"moveSegmentPointer",value:function(e){var i;e==null&&(e=this._segmentPointer+1),this._segmentPointer=pc(e,-1,(i=this.currentSegments)===null||i===void 0?void 0:i.length)}},{key:"reset",value:function(){this.streams=[],this.currentStream=null,this.dvrWindow=0,this._segmentPointer=-1}},{key:"getSegmentByIndex",value:function(e){var i;return(i=this.currentSegments)===null||i===void 0?void 0:i[e]}},{key:"setNextSegmentByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this._segmentPointer=e-1}},{key:"setNextSegmentBySN",value:function(){var e,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=(e=this.currentSegments)===null||e===void 0?void 0:e.findIndex(function(s){return s.sn===i});return t!==-1&&this.setNextSegmentByIndex(t+1),t}},{key:"findSegmentIndexByTime",value:function(e){var i=this.currentSegments;if(i){for(var t=0,s=i.length,a;t<s;t++)if(a=i[t],e>=a.start&&e<a.end)return t;var l=i[i.length-1];if(Math.abs(e-(l==null?void 0:l.end))<.2)return i.length-1}}},{key:"upsertPlaylist",value:function(e,i,t){var s=this;if(e){if(e.isMaster)this.streams.length=e.streams.length,e.streams.filter(function(u){return u.url}).forEach(function(u,d){s.streams[d]?s.streams[d].update(u):s.streams[d]=new tu(u)}),this.currentStream=this.streams[0];else if(Array.isArray(e.segments)){var a=this.currentStream;if(a){a.update(e,i,t);var l=a.updateSubtitle(t);l&&this.hls.emit(ce.SUBTITLE_SEGMENTS,{list:l})}else this.reset(),this.currentStream=this.streams[0]=new tu(e,i,t)}var o=this.currentStream;o&&this.hls.isLive&&!this.dvrWindow&&(this.dvrWindow=this.currentSegments.reduce(function(u,d){return u+=d.duration,u},0))}}},{key:"updateSegmentsRanges",value:function(e,i){var t,s=(t=this.currentSegments)===null||t===void 0?void 0:t.filter(function(a){return a.sn>=e});s.forEach(function(a){a.start=i,i=a.end})}},{key:"switchSubtitle",value:function(e){var i;(i=this.currentStream)===null||i===void 0||i.switchSubtitle(e)}},{key:"clearOldSegment",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,i=this.currentStream;if(!(!this.dvrWindow||!i)){var t=i.endTime-this.dvrWindow;if(!(t<=0)){var s=i.segments;s.length<=e||(this._segmentPointer=i.clearOldSegment(t,this._segmentPointer))}}}},{key:"checkSegmentTrackChange",value:function(e,i){var t=this.findSegmentIndexByTime(e),s=this.getSegmentByIndex(t);if(s&&!(!s.hasAudio&&!s.hasVideo)){if(i!==2&&s.hasAudio&&s.hasVideo)return s;if(!(s.end-e>.3)){var a=this.getSegmentByIndex(t+1);if(a&&!(!a.hasAudio&&!a.hasVideo)&&(a.hasAudio!==s.hasAudio||a.hasVideo!==s.hasVideo))return a}}}},{key:"feedbackLiveEdge",value:function(e,i){var t,s=this.currentSegments;if(s){var a=((t=this.lastSegment)===null||t===void 0?void 0:t.sn)===e.sn;if(a){this.liveEdge=i;return}this.updateSegmentsRanges(e.sn+1,i)}}}]),n}(),n2=function(){function n(r){var e=this;Be(this,n),V(this,"error",null),V(this,"_emitOnLoaded",function(o,u){var d=o.data,c=o.response,h=o.options,f=h||{},p=f.firstByteTime,m=f.startTime,g=f.endTime,b=f.contentLength,w=g-m;e._bandwidthService.addRecord(b||d.byteLength,w),e.hls.emit(U.SPEED,{time:w,byteLength:b,url:u}),e.hls.emit(U.LOAD_COMPLETE,{url:u,elapsed:w||0}),e.hls.emit(U.TTFB,{url:u,responseUrl:c.url,elapsed:p-m}),e.hls.emit(U.LOAD_RESPONSE_HEADERS,{headers:c.headers,url:u})}),V(this,"_onLoaderRetry",function(o,u){e.hls.emit(U.LOAD_RETRY,{error:Te.network(o),retryTime:u})}),this.hls=r,this._bandwidthService=new _d,this._mapCache={},this._keyCache={};var i=this.hls.config,t=i.retryCount,s=i.retryDelay,a=i.loadTimeout,l=i.fetchOptions;this._segmentLoader=new Wi(ye(ye({},l),{},{responseType:"arraybuffer",retry:t,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._audioSegmentLoader=new Wi(ye(ye({},l),{},{responseType:"arraybuffer",retry:t,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry})),this._keyLoader=new Wi(ye(ye({},l),{},{responseType:"arraybuffer",retry:t,retryDelay:s,timeout:a,onRetryError:this._onLoaderRetry}))}return Je(n,[{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"load",value:function(e,i,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,a=[];return e&&(a[0]=this.loadVideoSegment(e,t)),i&&(a[1]=this.loadAudioSegment(i,s)),Promise.all(a)}},{key:"loadVideoSegment",value:function(e,i){return this._loadSegment(this._segmentLoader,e,i)}},{key:"loadAudioSegment",value:function(e,i){return this._loadSegment(this._audioSegmentLoader,e,i)}},{key:"_loadSegment",value:function(){var r=ge(Q().mark(function i(t,s,a){var l=this,o,u,d,c,h,f,p,m,g,b,w,S,k,L,T;return Q().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return p=[],this.hls.emit(U.LOAD_START,{url:s.url}),p[0]=t.load(s.url),a&&s.initSegment&&(g=s.initSegment.url,u=this._mapCache[g],u||(this.hls.emit(U.LOAD_START,{url:g}),p[1]=t.load(g).then(function(C){if(C){var x=Object.keys(l._mapCache);x>30&&(l._mapCache={}),u=l._mapCache[g]=C.data,l._emitOnLoaded(C,g)}})),b=(m=s.initSegment.key)===null||m===void 0?void 0:m.url,b&&(f=s.initSegment.key.iv,h=this._keyCache[b],h||(this.hls.emit(U.LOAD_START,{url:b}),p[2]=this._keyLoader.load(b).then(function(C){C&&(h=l._keyCache[b]=C.data,l._emitOnLoaded(C,b))})))),w=(o=s.key)===null||o===void 0?void 0:o.url,w&&s.key.isSegmentEncrypted()&&(c=s.key.iv,d=this._keyCache[w],d||(this.hls.emit(U.LOAD_START,{url:w}),p[3]=this._keyLoader.load(w).then(function(C){C&&(d=l._keyCache[w]=C.data,l._emitOnLoaded(C,w))}))),G.next=8,Promise.all(p);case 8:if(S=G.sent,k=yi(S,1),L=k[0],L){G.next=13;break}return G.abrupt("return");case 13:return T=L.data,this._emitOnLoaded(L,s.url),G.abrupt("return",{data:T,map:u,key:d,mapKey:h,keyIv:c,mapKeyIv:f});case 16:case"end":return G.stop()}},i,this)}));function e(i,t,s){return r.apply(this,arguments)}return e}()},{key:"reset",value:function(){this.error=null,this._mapCache={},this._keyCache={},this._bandwidthService.reset()}},{key:"cancel",value:function(){var r=ge(Q().mark(function i(){return Q().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Promise.all([this._keyLoader.cancel(),this._segmentLoader.cancel(),this._audioSegmentLoader.cancel()]);case 2:case"end":return s.stop()}},i,this)}));function e(){return r.apply(this,arguments)}return e}()}]),n}(),dt=new ut("hls"),kn=function(n){bs(e,n);var r=gs(e);function e(i){var t;return Be(this,e),t=r.call(this),V(le(t),"version",e.version),V(le(t),"media",null),V(le(t),"config",null),V(le(t),"_manifestLoader",null),V(le(t),"_segmentLoader",null),V(le(t),"_playlist",null),V(le(t),"_bufferService",null),V(le(t),"_gapService",null),V(le(t),"_seiService",null),V(le(t),"_stats",null),V(le(t),"_prevSegSn",null),V(le(t),"_prevSegCc",null),V(le(t),"_tickTimer",null),V(le(t),"_tickInterval",500),V(le(t),"_segmentProcessing",!1),V(le(t),"_reloadOnPlay",!1),V(le(t),"_switchUrlOpts",null),V(le(t),"_isProcessQuotaExceeded",!1),V(le(t),"_loadSegment",ge(Q().mark(function s(){var a,l,o,u,d,c,h,f,p;return Q().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(t._segmentProcessing||!t.media)){g.next=2;break}return g.abrupt("return");case 2:if(a=t._playlist,l=a.nextSegment,o=a.lastSegment,u=le(t),d=u.config,c=.016,h=Math.min(Math.max((o==null?void 0:o.duration)-c/2||0,c),.1),l){g.next=8;break}return g.abrupt("return");case 8:if(t.isLive){g.next=18;break}if(f=t.bufferInfo(),t.media.paused&&!t.media.currentTime&&(f=t.bufferInfo(f.nextStart||.5)),p=Math.abs(f.end-t.media.duration)<h,!(f.remaining>=d.preloadTime||p)){g.next=15;break}return t._tryEos(),g.abrupt("return");case 15:if(!(d.preferMMSStreaming&&!t._bufferService.msStreaming)){g.next=17;break}return g.abrupt("return");case 17:!t._urlSwitching&&t._prevSegSn!==l.sn-1&&f.end&&Math.abs(l.start-f.end)>1&&t._playlist.setNextSegmentByIndex(t._playlist.findSegmentIndexByTime(f.end+.1));case 18:return g.abrupt("return",t._loadSegmentDirect());case 19:case"end":return g.stop()}},s)}))),V(le(t),"_onLoadeddata",function(){t.isLive&&!t.config.mseLowLatency&&t.media.duration!==1/0&&t._bufferService.updateDuration(1/0).catch(function(s){})}),V(le(t),"_onPlay",ge(Q().mark(function s(){return Q().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(t.media.seeking&&t.media.currentTime===0)){l.next=3;break}return dt.debug("replay currentTime 0, return"),l.abrupt("return");case 3:if(clearTimeout(t._disconnectTimer),!t._reloadOnPlay){l.next=9;break}t._reloadOnPlay=!1,t.replay(!0),l.next=12;break;case 9:return l.next=11,t._loadSegment();case 11:t._startTick();case 12:case"end":return l.stop()}},s)}))),V(le(t),"_onPause",function(){if(t.isLive){if(!t._reloadOnPlay){var s=t.config.disconnectTime;if(s==null&&(s=t._playlist.dvrWindow),!Number.isFinite(s))return;clearTimeout(t._disconnectTimer),t._disconnectTimer=setTimeout(function(){t._reloadOnPlay=!0,t._clear()},s||0)}}else t._stopTick()}),V(le(t),"_onSeeking",ge(Q().mark(function s(){var a,l,o,u,d,c,h;return Q().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(t.media){p.next=2;break}return p.abrupt("return");case 2:if(t._onCheckQuotaExceeded(),a=t.media.currentTime,l=t._playlist.seekRange,!l){p.next=10;break}if(o=pc(a,l[0],t.isLive?l[1]:t.media.duration),!(o>=0&&Math.abs(a-o)>=.1)){p.next=10;break}return t.media.currentTime=o,p.abrupt("return");case 10:if(u=t._playlist.currentSegment,d=De.info(De.get(t.media),a,.1),!u){p.next=17;break}if(!(d.end&&Math.abs(d.end-u.end)<.2)){p.next=15;break}return p.abrupt("return");case 15:if(!(t.isLive&&d.end)){p.next=17;break}return p.abrupt("return");case 17:if(c=t._playlist.findSegmentIndexByTime(a),h=t._playlist.getSegmentByIndex(c),!(c==null||!h||t._segmentProcessing&&h===t._playlist.nextSegment)){p.next=21;break}return p.abrupt("return");case 21:return dt.debug("seek to",a,h),t._playlist.setNextSegmentByIndex(c),t._stopTick(),p.next=26,t._segmentLoader.cancel();case 26:if(t._segmentProcessing=!1,!(!d.end||t.isLive)){p.next=30;break}return p.next=30,t._loadSegmentDirect(!0);case 30:t._startTick();case 31:case"end":return p.stop()}},s)}))),V(le(t),"_onTimeupdate",function(){if(t.media){var s=t.config;if(s.isLive&&s.maxLatency&&s.targetLatency&&t.media){var a=t._playlist.liveEdge;if(!a)return;var l=a-t.media.currentTime;l>=s.maxLatency&&(dt.debug("latency jump, currentTime:".concat(t.media.currentTime,", liveEdge:").concat(a,",  latency=").concat(l)),t.media.currentTime=a-s.targetLatency)}if(s.seiInTime){var o;(o=t._seiService)===null||o===void 0||o.throw(t.media.currentTime)}t.config.allowedStreamTrackChange&&!t.config.softDecode&&t._checkStreamTrackChange(t.media.currentTime)}}),V(le(t),"_tick",function(){if(t.media){t._startTick();var s=t.media,a=De.get(s),l=t._segmentLoader.error;if(t._onCheckQuotaExceeded(),t._isProcessQuotaExceeded&&(t._bufferService.isFull()||(t._isProcessQuotaExceeded=!1,t._segmentProcessing=!1)),l){var o=.5;(!s.readyState||t.bufferInfo(o).remaining<1)&&(l.fatal=!0,t._emitError(Te.network(l)));return}De.end(a)>=.1&&s.readyState&&(Cd(s)?(t._loadSegment(),t._gapService&&t._gapService.do(s,t.config.maxJumpDistance,t.isLive)):s.readyState<2&&t._gapService&&t._gapService.do(s,t.config.maxJumpDistance,s.currentTime?t.isLive:!0)),t.isLive||t._tryEos()}}),t.config=i=K1(i),t.media=t.config.media,t._manifestLoader=new t2(le(t)),t._segmentLoader=new n2(le(t)),t._playlist=new i2(le(t)),t._bufferService=new D1(le(t)),i.seiInTime&&(t._seiService=new Id(le(t))),i.softDecode||(t._gapService=new xd),t._stats=new Fd(le(t),9e4),t.media.addEventListener("loadeddata",t._onLoadeddata),t.media.addEventListener("play",t._onPlay),t.media.addEventListener("pause",t._onPause),t.media.addEventListener("seeking",t._onSeeking),t.media.addEventListener("timeupdate",t._onTimeupdate),t}return Je(e,[{key:"isLive",get:function(){return this._playlist.isLive}},{key:"streams",get:function(){return this._playlist.streams}},{key:"currentStream",get:function(){return this._playlist.currentStream}},{key:"hasSubtitle",get:function(){return this._playlist.hasSubtitle}},{key:"totalDuration",get:function(){return this._playlist.totalDuration}},{key:"baseDts",get:function(){var t;return(t=this._bufferService)===null||t===void 0?void 0:t.baseDts}},{key:"speedInfo",value:function(){return this._segmentLoader.speedInfo()}},{key:"bufferInfo",value:function(){var t,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return De.info(De.get(this.media),(t=this.media)===null||t===void 0?void 0:t.currentTime,s)}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"playbackQuality",value:function(){return Md(this.media)}},{key:"load",value:function(){var i=ge(Q().mark(function s(a){var l,o=arguments;return Q().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return l=o.length>1&&o[1]!==void 0?o[1]:!1,a&&(this.config.url=a),a=this.config.url,d.next=5,this._reset(l);case 5:return d.next=7,this._loadData(a);case 7:this._startTick();case 8:case"end":return d.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"_loadData",value:function(){var i=ge(Q().mark(function s(a){var l,o,u,d,c,h,f,p,m,g,b;return Q().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:try{a&&(a=a.trim())}catch{}if(a){S.next=3;break}throw this._emitError(new Te(J.OTHER,J.SUB_TYPES.OPTION,null,null,"m3u8 url is missing"));case 3:return S.next=5,this._loadM3U8(a);case 5:if(l=S.sent,o=this._playlist.currentStream,!(this._urlSwitching&&!this.isLive)){S.next=17;break}if(o.bitrate===0&&(u=this._switchUrlOpts)!==null&&u!==void 0&&u.bitrate&&(o.bitrate=(d=this._switchUrlOpts)===null||d===void 0?void 0:d.bitrate),c=this._getSeamlessSwitchPoint(),this.config.startTime=c,h=this._playlist.findSegmentIndexByTime(c),f=this._playlist.getSegmentByIndex(h+1),!f){S.next=17;break}return p=f.start,S.next=17,this._bufferService.removeBuffer(p);case 17:if(this._urlSwitching&&this.isLive&&(m=this._playlist.setNextSegmentBySN(this._prevSegSn),dt.log("segment nb=".concat(this._prevSegSn," index of ").concat(m," in the new playlist")),m===-1&&(this._prevSegCc=null,this._prevSegSn=null)),l){S.next=20;break}return S.abrupt("return");case 20:if(!this.isLive){S.next=31;break}if(this._bufferService.setLiveSeekableRange(0,4294967295),dt.log("totalDuration first time got:",this._playlist.totalDuration),dt.log("nb segments got:",this._playlist.nbSegments),this.config.targetLatency<this._playlist.totalDuration&&(this.config.targetLatency=this._playlist.totalDuration,this.config.maxLatency=1.5*this.config.targetLatency),l.isMaster||this._pollM3U8(a),!(this._playlist.nbSegments<this.config.minSegmentsStartPlay)){S.next=28;break}return S.abrupt("return");case 28:return S.next=30,this._loadSegment();case 30:return S.abrupt("return");case 31:return S.next=33,this._bufferService.updateDuration(o.totalDuration);case 33:return g=this.config.startTime,g&&((b=this._switchUrlOpts)!==null&&b!==void 0&&b.seamless||(this.media.currentTime=g),this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(g)||0)),S.next=37,this._loadSegment();case 37:case"end":return S.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"replay",value:function(){var i=ge(Q().mark(function s(a){return Q().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.config.startTime=0,o.next=3,this.load();case 3:return this._reloadOnPlay=!1,o.abrupt("return",this.media.play(!a));case 5:case"end":return o.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"switchURL",value:function(){var i=ge(Q().mark(function s(a){var l,o,u,d,c,h,f,p=arguments;return Q().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:l=p.length>1&&p[1]!==void 0?p[1]:{},o={seamless:!1,startTime:0,bitrate:0},g.t0=Ur(l),g.next=g.t0==="number"?5:g.t0==="boolean"?7:g.t0==="object"?9:11;break;case 5:return l={startTime:l},g.abrupt("break",12);case 7:return l={seamless:l},g.abrupt("break",12);case 9:for(u in l)(l[u]===void 0||l[u]===null)&&delete l[u];return g.abrupt("break",12);case 11:throw"unsupported switchURL args: ".concat(l);case 12:if(l=Object.assign({},o,l),d=l,c=d.seamless,h=d.startTime,this.config.url=a,this.config.startTime=h,this._switchUrlOpts=l,c){g.next=38;break}if(g.prev=18,!this.config.softDecode){g.next=23;break}g.t1=this.load(a),g.next=26;break;case 23:return g.next=25,this.load(a);case 25:g.t1=g.sent;case 26:f=g.t1,g.next=33;break;case 29:throw g.prev=29,g.t2=g.catch(18),this.emit(ce.SWITCH_URL_FAILED,g.t2),g.t2;case 33:return this._reloadOnPlay=!1,f&&this.emit(ce.SWITCH_URL_SUCCESS,{url:a}),g.abrupt("return",this.media.play(!0));case 38:return this._urlSwitching=!0,this.isLive||(this._prevSegSn=null,this._prevSegCc=null),this._playlist.reset(),this._bufferService.seamlessSwitch(),g.next=44,this._clear();case 44:return g.next=46,this._loadData(a);case 46:this._startTick();case 47:this._switchUrlOpts=null;case 48:case"end":return g.stop()}},s,this,[[18,29]])}));function t(s){return i.apply(this,arguments)}return t}()},{key:"switchStream",value:function(){var i=ge(Q().mark(function s(a){var l,o,u,d,c,h=arguments;return Q().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(l=h.length>1&&h[1]!==void 0?h[1]:!0,o=this.currentStream,u=this.streams,!(!o||o.id===a||!u||u.length<2)){p.next=5;break}return p.abrupt("return");case 5:if(d=u.find(function(m){return m.id===a}),d){p.next=8;break}return p.abrupt("return");case 8:return p.prev=8,p.next=11,this._clear();case 11:if(!l){p.next=14;break}return p.next=14,this._bufferService.clearAllBuffer();case 14:p.next=19;break;case 16:throw p.prev=16,p.t0=p.catch(8),this._emitError(Te.create(p.t0));case 19:if(o.currentAudioStream&&d.audioStreams.length>2&&(c=o.currentAudioStream.id,d.currentAudioStream=d.audioStreams.find(function(m){return m.id===c})||d.currentAudioStream),this._playlist.currentStream=d,p.prev=21,!(this.isLive||!d.segments.length)){p.next=25;break}return p.next=25,this._refreshM3U8();case 25:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,p.next=29,this._loadSegmentDirect();case 29:p.next=35;break;case 31:throw p.prev=31,p.t1=p.catch(21),this._playlist.currentStream=o,p.t1;case 35:return this._startTick(),p.abrupt("return",d);case 37:case"end":return p.stop()}},s,this,[[8,16],[21,31]])}));function t(s){return i.apply(this,arguments)}return t}()},{key:"switchAudioStream",value:function(){var i=ge(Q().mark(function s(a){var l,o,u,d,c=arguments;return Q().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(l=c.length>1&&c[1]!==void 0?c[1]:!0,o=this.currentStream,o){f.next=4;break}return f.abrupt("return");case 4:if(u=o.currentAudioStream,!(!u||u.id===a||o.audioStreams.length<2)){f.next=7;break}return f.abrupt("return");case 7:if(d=o.audioStreams.find(function(p){return p.id===a}),d){f.next=10;break}return f.abrupt("return");case 10:return f.prev=10,f.next=13,this._clear();case 13:if(!l){f.next=16;break}return f.next=16,this._bufferService.clearAllBuffer();case 16:f.next=21;break;case 18:throw f.prev=18,f.t0=f.catch(10),this._emitError(Te.create(f.t0));case 21:if(o.currentAudioStream=d,f.prev=22,!(this.isLive||!d.segments.length)){f.next=26;break}return f.next=26,this._refreshM3U8();case 26:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,f.next=30,this._loadSegmentDirect();case 30:f.next=36;break;case 32:throw f.prev=32,f.t1=f.catch(22),o.currentAudioStream=u,f.t1;case 36:return this._startTick(),f.abrupt("return",d);case 38:case"end":return f.stop()}},s,this,[[10,18],[22,32]])}));function t(s){return i.apply(this,arguments)}return t}()},{key:"switchSubtitleStream",value:function(){var i=ge(Q().mark(function s(a){return Q().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this._playlist.switchSubtitle(a),o.next=3,this._manifestLoader.stopPoll();case 3:return o.next=5,this._refreshM3U8();case 5:case"end":return o.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var i=ge(Q().mark(function s(){var a;return Q().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.media){o.next=2;break}return o.abrupt("return");case 2:return this.removeAllListeners(),this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this.media.removeEventListener("loadeddata",this._onLoadeddata),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("pause",this._onPause),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),o.next=13,Promise.all([this._clear(),this._bufferService.destroy()]);case 13:this.media=null;case 14:case"end":return o.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_loadM3U8",value:function(){var i=ge(Q().mark(function s(a){var l,o,u,d,c,h,f;return Q().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(m.prev=0,d=(o=this.config.manifestList)===null||o===void 0||(u=o.filter(function(g){return g.url===a})[0])===null||u===void 0?void 0:u.manifest,!d){m.next=6;break}m.t0=this._manifestLoader.parseText(d,a),m.next=9;break;case 6:return m.next=8,this._manifestLoader.load(a);case 8:m.t0=m.sent;case 9:c=m.t0,h=yi(c,1),l=h[0],m.next=17;break;case 14:throw m.prev=14,m.t1=m.catch(0),this._emitError(Te.create(m.t1));case 17:if(l){m.next=19;break}return m.abrupt("return");case 19:if(this._playlist.upsertPlaylist(l),!l.isMaster){m.next=24;break}return(f=this._playlist.currentStream.subtitleStreams)!==null&&f!==void 0&&f.length&&this.emit(ce.SUBTITLE_PLAYLIST,{list:this._playlist.currentStream.subtitleStreams}),m.next=24,this._refreshM3U8();case 24:return this.emit(ce.STREAM_PARSED),m.abrupt("return",l);case 26:case"end":return m.stop()}},s,this,[[0,14]])}));function t(s){return i.apply(this,arguments)}return t}()},{key:"_refreshM3U8",value:function(){var t,s,a=this,l=this._playlist.currentStream;if(!l||!l.url)throw this._emitError(Te.create(null,null,new Error("m3u8 url is not defined")));var o=l.url,u=(t=l.currentAudioStream)===null||t===void 0?void 0:t.url,d=(s=l.currentSubtitleStream)===null||s===void 0?void 0:s.url;return this._manifestLoader.load(o,u,d).then(function(c){var h=yi(c,3),f=h[0],p=h[1],m=h[2];f&&(a._playlist.upsertPlaylist(f,p,m),a.isLive&&a._pollM3U8(o,u,d))}).catch(function(c){throw a._emitError(Te.create(c))})}},{key:"_pollM3U8",value:function(t,s,a){var l=this,o=this._playlist.isEmpty,u;if(this._playlist.lowLatency)u=(this._playlist.currentStream.partTargetDuration*2||0)*1e3;else{var d;u=(((d=this._playlist.lastSegment)===null||d===void 0?void 0:d.duration)||0)*1e3}this._manifestLoader.poll(t,s,a,function(c,h,f){l._playlist.upsertPlaylist(c,h,f),l._playlist.clearOldSegment();var p=c&&o&&!l._playlist.isEmpty;(p||!l._playlist.hadSegmentLoaded&&l._playlist.nbSegments>=l.config.minSegmentsStartPlay)&&l._loadSegment(),o&&(o=l._playlist.isEmpty)},function(c){l._emitError(Te.create(c))},u)}},{key:"_loadSegmentDirect",value:function(){var i=ge(Q().mark(function s(a){var l,o,u,d,c,h;return Q().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(l=this._playlist.nextSegment,l){p.next=3;break}return p.abrupt("return");case 3:return o=!1,u=null,p.prev=5,this._segmentProcessing=!0,dt.log("load segment, sn:".concat(l.sn,", [").concat(l.start,", ").concat(l.end,"], partIndex:").concat(l.partIndex)),p.next=10,this._reqAndBufferSegment(l,this._playlist.getAudioSegment(l));case 10:o=p.sent,p.next=16;break;case 13:p.prev=13,p.t0=p.catch(5),u=p.t0;case 16:return p.prev=16,this._segmentProcessing=!1,p.finish(16);case 19:if(!u){p.next=26;break}if(!this._bufferService.isFull()){p.next=25;break}return dt.log("load segment, sn:".concat(l.sn,", partIndex:").concat(l.partIndex)),this._segmentProcessing=!0,this._isProcessQuotaExceeded=!0,p.abrupt("return",!1);case 25:return p.abrupt("return",this._emitError(Te.create(u)));case 26:return o&&(c=this.bufferInfo().end,this.isLive&&!this.media.seeking&&c&&Math.abs(l.end-c)>1&&(dt.warn("segment: ".concat(l.sn," expected end=").concat(l.end,", real end=").concat(c)),this._playlist.feedbackLiveEdge(l,c)),h=((d=this._playlist.currentStream)===null||d===void 0?void 0:d.url)===l.parentUrl,this._urlSwitching&&!h&&(dt.warn("pre playlist segment appended!"),this._bufferService.seamlessSwitch()),this.isLive&&this._urlSwitching&&h&&(this._urlSwitching=!1,this.emit(ce.SWITCH_URL_SUCCESS,{url:this.config.url})),this._playlist.moveSegmentPointer(),l.isLast?this._end():a||this._loadSegment()),p.abrupt("return",o);case 28:case"end":return p.stop()}},s,this,[[5,13,16,19]])}));function t(s){return i.apply(this,arguments)}return t}()},{key:"_reqAndBufferSegment",value:function(){var i=ge(Q().mark(function s(a,l){var o,u,d,c,h,f,p,m,g,b,w;return Q().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return u=a?a.cc:l.cc,d=this._prevSegCc!==u,c=[],k.prev=3,k.next=6,this._segmentLoader.load(a,l,d);case 6:c=k.sent,k.next=14;break;case 9:throw k.prev=9,k.t0=k.catch(3),k.t0.fatal=!1,this._segmentLoader.error=k.t0,k.t0;case 14:if(c[0]){k.next=16;break}return k.abrupt("return");case 16:return k.next=18,(o=this._bufferService).decryptBuffer.apply(o,R1(c));case 18:if(h=k.sent,h){k.next=21;break}return k.abrupt("return");case 21:return f=a?a.sn:l.sn,p=a?a.start:l.start,m=this._playlist.currentStream,this._bufferService.createSource(h[0],h[1],m==null?void 0:m.videoCodec,m==null?void 0:m.audioCodec),g=Date.now(),b=this._prevSegSn===f-1,this.isLive&&this._urlSwitching&&(w=this.bufferInfo().end,this._playlist.updateSegmentsRanges(f,w),dt.warn("update the new playlist liveEdge, segment id=".concat(f,", buffer start=").concat(w,", liveEdge=").concat(this._playlist.liveEdge)),p=w),k.next=30,this._bufferService.appendBuffer(a,l,h[0],h[1],d,b,p);case 30:return this.emit(ce.APPEND_COST,{elapsed:Date.now()-g,url:a.url}),k.next=33,this._bufferService.evictBuffer(this.config.bufferBehind);case 33:return this._prevSegCc=u,this._prevSegSn=f,k.abrupt("return",!0);case 36:case"end":return k.stop()}},s,this,[[3,9]])}));function t(s,a){return i.apply(this,arguments)}return t}()},{key:"_onCheckQuotaExceeded",value:function(){var i=ge(Q().mark(function s(){var a,l,o,u,d,c;return Q().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=this.media.currentTime,l=this.media.buffered,o=!1,u=0;case 4:if(!(u<l.length)){f.next=11;break}if(!(l.start(0)>=a&&a<l.end(u))){f.next=8;break}return o=!0,f.abrupt("break",11);case 8:u++,f.next=4;break;case 11:if(!this._bufferService.isFull()){f.next=17;break}if(d=o?this.config.bufferBehind:5,c=this.media.currentTime,!(c-d>0)){f.next=17;break}return f.next=17,this._bufferService.removeBuffer(0,c-d);case 17:case"end":return f.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_checkStreamTrackChange",value:function(t){var s=this._playlist.checkSegmentTrackChange(t,this._bufferService.nbSb);s&&this.switchURL(this.config.url,s.start+.2)}},{key:"_clear",value:function(){var i=ge(Q().mark(function s(){return Q().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return clearTimeout(this._disconnectTimer),this._stopTick(),l.next=4,Promise.all([this._segmentLoader.cancel(),this._manifestLoader.stopPoll()]);case 4:this._segmentProcessing=!1;case 5:case"end":return l.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_reset",value:function(){var i=ge(Q().mark(function s(){var a,l,o=arguments;return Q().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return l=o.length>0&&o[0]!==void 0?o[0]:!1,this._reloadOnPlay=!1,this._prevSegSn=null,this._prevSegCc=null,this._switchUrlOpts=null,this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this._stats.reset(),d.next=11,this._clear();case 11:return d.abrupt("return",this._bufferService.reset(l));case 12:case"end":return d.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_end",value:function(){this._clear(),this._bufferService.endOfStream(),(this.media.readyState<=2||this.media.buffered.length>1)&&this._startTick()}},{key:"_stopTick",value:function(){this._tickTimer&&clearTimeout(this._tickTimer),this._tickTimer=null}},{key:"_startTick",value:function(){this._stopTick(),this._tickTimer=setTimeout(this._tick,this._tickInterval)}},{key:"_emitError",value:function(t){var s,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(((s=t.originError)===null||s===void 0?void 0:s.fatal)===!1)dt.warn(t);else{var l,o,u;dt.table(t),dt.error(t),dt.error((l=this.media)===null||l===void 0?void 0:l.error),(o=this.media)!==null&&o!==void 0&&o.readyState&&this.media.pause(),this._stopTick(),this._urlSwitching&&(this._urlSwitching=!1,this.emit(ce.SWITCH_URL_FAILED,t)),this.emit(ce.ERROR,t),a&&this._end(),(u=this._seiService)===null||u===void 0||u.reset()}return t}},{key:"_getSeamlessSwitchPoint",value:function(){var t=this.media,s=t.currentTime;if(!t.paused){var a,l=this._playlist.findSegmentIndexByTime(t.currentTime),o=this._playlist.getSegmentByIndex(l),u=(a=this._stats)===null||a===void 0?void 0:a.getStats().downloadSpeed;if(u&&o){var d=o.duration*this._playlist.currentStream.bitrate/u+1;s+=d}else s+=5}return s}},{key:"_tryEos",value:function(){var t,s,a=this.media,l=this._playlist,o=l.nextSegment,u=l.lastSegment,d=(!o||u&&De.isBuffered(a,u.start+u.duration/2))&&a.readyState&&a.duration>0&&((t=this._bufferService)===null||t===void 0?void 0:t.msIsOpened)&&!((s=this._bufferService)!==null&&s!==void 0&&s.msHasOpTasks);if(d){var c=this.bufferInfo();a.paused&&!a.currentTime&&(c=this.bufferInfo(c.nextStart||.5));var h=Math.abs(c.end-a.duration)<.1||!this.isLive&&u&&c.end>=u.start+u.duration;h&&this._bufferService.endOfStream()}}}],[{key:"isSupported",value:function(t){return!t||t==="video"||t==="audio"?Ie.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){ut.enable(),ji.enable()}},{key:"disableLogger",value:function(){ut.disable(),ji.disable()}}]),e}(Ci);V(kn,"version","3.0.19");try{localStorage.getItem("xgd")?kn.enableLogger():kn.disableLogger()}catch{}var r2=function(){function n(r,e){var i=this;Be(this,n),V(this,"_opts",null),V(this,"_plugin",null),V(this,"_onLowDecode",function(){var t,s,a,l,o=i._opts,u=o.media,d=o.innerDegrade;(t=i._plugin)===null||t===void 0||(s=t.player)===null||s===void 0||s.emit("lowdecode",u.degradeInfo),(a=i._plugin)===null||a===void 0||(l=a.player)===null||l===void 0||l.emit("core_event",ye(ye({},u.degradeInfo),{},{eventName:ce.LOWDECODE})),d===1&&i._degrade(u.src)}),V(this,"_degrade",function(t){var s=i._plugin.player,a=s.video;if(!(a&&a.TAG!=="MVideo")){var l=s.video.degradeVideo;s.video=l,a.degrade(t),t&&(s.config.url=t);var o=s.root.firstChild;o.TAG==="MVideo"&&s.root.replaceChild(l,o);var u=i._plugin.constructor.pluginName.toLowerCase();s.unRegisterPlugin(u),s.once("canplay",function(){s.play()})}}),V(this,"forceDegradeToVideo",function(t){var s=i._opts.innerDegrade;s===1&&i._degrade(t)}),this._opts=r,this._plugin=e,this._init()}return Je(n,[{key:"_init",value:function(){var e=this._opts,i=e.media,t=e.preloadTime,s=e.innerDegrade,a=e.isLive;if(i){if(!a&&i.setPlayMode){i.setPlayMode("VOD");return}s&&i.setAttribute("innerdegrade",s),t&&i.setAttribute("preloadtime",t),this._bindEvents()}}},{key:"_bindEvents",value:function(){var e=this._opts.media;e.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var e,i;(e=this._opts)===null||e===void 0||(i=e.media)===null||i===void 0||i.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),n}();function s2(n,r){var e=r.player,i=e.currentTime,t={startTime:i};switch(Ur(n)){case"boolean":t.seamless=n;break;case"object":Object.assign(t,n);break}return t}var zr=function(n){bs(e,n);var r=gs(e);function e(){var i;Be(this,e);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return i=r.call.apply(r,[this].concat(s)),V(le(i),"hls",null),V(le(i),"pluginExtension",null),V(le(i),"getStats",function(){var l;return(l=i.hls)===null||l===void 0?void 0:l.getStats()}),V(le(i),"_onSwitchSubtitle",function(l){var o,u=l.lang;(o=i.hls)===null||o===void 0||o.switchSubtitleStream(u)}),V(le(i),"_onSwitchURL",function(l,o){return new Promise(function(u,d){var c=le(i),h=c.player,f=c.hls;if(f){var p,m,g=s2(o,le(i));h.config.url=l,f.switchURL(l,g).then(function(){return u(!0)}).catch(d),!g.seamless&&(p=i.player.config)!==null&&p!==void 0&&(m=p.hls)!==null&&m!==void 0&&m.keepStatusAfterSwitch&&i._keepPauseStatus()}else d()})}),V(le(i),"_keepPauseStatus",function(){var l=i.player.paused;l&&i.player.once("canplay",function(){i.player.pause()})}),i}return Je(e,[{key:"core",get:function(){return this.hls}},{key:"version",get:function(){var t;return(t=this.hls)===null||t===void 0?void 0:t.version}},{key:"softDecode",get:function(){var t,s,a=(t=this.player)===null||t===void 0||(s=t.config)===null||s===void 0?void 0:s.mediaType;return!!a&&a!=="video"&&a!=="audio"}},{key:"beforePlayerInit",value:function(){var t=this,s=this.player.config,a=s.hls||{};if(!(!s.url&&!s.__allowHlsEmptyUrl__||!a.preferMMS&&Ie.isMMSOnly())){if(this.hls&&this.hls.destroy(),this.player.switchURL=this._onSwitchURL,this.player.handleSource=!1,a.innerDegrade=a.innerDegrade||s.innerDegrade,(a.disconnectTime===null||a.disconnectTime===void 0)&&(a.disconnectTime=0),this.hls=new kn(ye({softDecode:this.softDecode,isLive:s.isLive,media:this.player.media||this.player.video,startTime:s.startTime,url:s.url},a)),this.softDecode||hn.defineGetterOrSetter(this.player,{url:{get:function(){var u,d;return(u=t.hls)===null||u===void 0||(d=u.media)===null||d===void 0?void 0:d.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new r2(ye({isLive:s.isLive,media:this.player.video},a),this),this.player.forceDegradeToVideo=function(){for(var o,u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];return(o=t.pluginExtension)===null||o===void 0?void 0:o.forceDegradeToVideo.apply(o,d)}),s.isLive){var l;(l=this.player)===null||l===void 0||l.useHooks("replay",function(){var o;return(o=t.hls)===null||o===void 0?void 0:o.replay()})}this.on(Pc,this._onSwitchSubtitle),this.on(Cn,this._onSwitchURL),this.on(vu,this.destroy.bind(this)),this._transError(),this._transCoreEvent(U.TTFB),this._transCoreEvent(U.LOAD_START),this._transCoreEvent(U.LOAD_RESPONSE_HEADERS),this._transCoreEvent(U.LOAD_COMPLETE),this._transCoreEvent(U.LOAD_RETRY),this._transCoreEvent(U.SOURCEBUFFER_CREATED),this._transCoreEvent(U.MEDIASOURCE_OPENED),this._transCoreEvent(U.REMOVE_BUFFER),this._transCoreEvent(U.BUFFEREOS),this._transCoreEvent(U.KEYFRAME),this._transCoreEvent(U.METADATA_PARSED),this._transCoreEvent(U.DEMUXED_TRACK),this._transCoreEvent(U.SEI),this._transCoreEvent(U.SEI_IN_TIME),this._transCoreEvent(U.SPEED),this._transCoreEvent(U.HLS_MANIFEST_LOADED),this._transCoreEvent(U.HLS_LEVEL_LOADED),this._transCoreEvent(U.STREAM_EXCEPTION),this._transCoreEvent(U.SWITCH_URL_SUCCESS),this._transCoreEvent(U.SWITCH_URL_FAILED),this._transCoreEvent(ce.NO_AUDIO_TRACK),this._transCoreEvent(ce.STREAM_PARSED),this._transCoreEvent(ce.SUBTITLE_SEGMENTS),this._transCoreEvent(ce.SUBTITLE_PLAYLIST),this._transCoreEvent(ce.APPEND_COST),s.url&&this.hls.load(s.url,!0).catch(function(o){})}}},{key:"destroy",value:function(){var t;this.hls&&(this.hls.destroy(),this.hls=null),(t=this.pluginExtension)===null||t===void 0||t.destroy(),this.pluginExtension=null}},{key:"_transError",value:function(){var t=this;this.hls.on(ce.ERROR,function(s){t.player&&t.player.emit(yu,new Di(t.player,s))})}},{key:"_transCoreEvent",value:function(t){var s=this;this.hls.on(t,function(a){s.player&&(s.player.emit("core_event",ye(ye({},a),{},{eventName:t})),t===U.SEI_IN_TIME&&s.hls.hasSubtitle&&s._emitSeiPaylodTime(a))})}},{key:"_emitSeiPaylodTime",value:function(t){try{var s=JSON.parse(Array.from(t.data.payload).map(function(a){return String.fromCharCode(a)}).join("").slice(0,-1));if(!s.rtmp_dts)return;this.player.emit("core_event",{eventName:ce.SEI_PAYLOAD_TIME,time:s.rtmp_dts})}catch{}}}],[{key:"pluginName",get:function(){return"hls"}},{key:"isSupported",value:function(t,s){return kn.isSupported(t,s)}}]),e}(hn);V(zr,"Hls",kn);V(zr,"EVENT",ce);function iu(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);r&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,i)}return e}function wi(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?iu(Object(e),!0).forEach(function(i){Xt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):iu(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function me(){me=function(){return n};var n={},r=Object.prototype,e=r.hasOwnProperty,i=Object.defineProperty||function(y,v,Z){y[v]=Z.value},t=typeof Symbol=="function"?Symbol:{},s=t.iterator||"@@iterator",a=t.asyncIterator||"@@asyncIterator",l=t.toStringTag||"@@toStringTag";function o(y,v,Z){return Object.defineProperty(y,v,{value:Z,enumerable:!0,configurable:!0,writable:!0}),y[v]}try{o({},"")}catch{o=function(v,Z,W){return v[Z]=W}}function u(y,v,Z,W){var E=v&&v.prototype instanceof h?v:h,R=Object.create(E.prototype),M=new C(W||[]);return i(R,"_invoke",{value:L(y,Z,M)}),R}function d(y,v,Z){try{return{type:"normal",arg:y.call(v,Z)}}catch(W){return{type:"throw",arg:W}}}n.wrap=u;var c={};function h(){}function f(){}function p(){}var m={};o(m,s,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(x([])));b&&b!==r&&e.call(b,s)&&(m=b);var w=p.prototype=h.prototype=Object.create(m);function S(y){["next","throw","return"].forEach(function(v){o(y,v,function(Z){return this._invoke(v,Z)})})}function k(y,v){function Z(E,R,M,P){var Y=d(y[E],y,R);if(Y.type!=="throw"){var D=Y.arg,q=D.value;return q&&typeof q=="object"&&e.call(q,"__await")?v.resolve(q.__await).then(function(F){Z("next",F,M,P)},function(F){Z("throw",F,M,P)}):v.resolve(q).then(function(F){D.value=F,M(D)},function(F){return Z("throw",F,M,P)})}P(Y.arg)}var W;i(this,"_invoke",{value:function(E,R){function M(){return new v(function(P,Y){Z(E,R,P,Y)})}return W=W?W.then(M,M):M()}})}function L(y,v,Z){var W="suspendedStart";return function(E,R){if(W==="executing")throw new Error("Generator is already running");if(W==="completed"){if(E==="throw")throw R;return N()}for(Z.method=E,Z.arg=R;;){var M=Z.delegate;if(M){var P=T(M,Z);if(P){if(P===c)continue;return P}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(W==="suspendedStart")throw W="completed",Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);W="executing";var Y=d(y,v,Z);if(Y.type==="normal"){if(W=Z.done?"completed":"suspendedYield",Y.arg===c)continue;return{value:Y.arg,done:Z.done}}Y.type==="throw"&&(W="completed",Z.method="throw",Z.arg=Y.arg)}}}function T(y,v){var Z=v.method,W=y.iterator[Z];if(W===void 0)return v.delegate=null,Z==="throw"&&y.iterator.return&&(v.method="return",v.arg=void 0,T(y,v),v.method==="throw")||Z!=="return"&&(v.method="throw",v.arg=new TypeError("The iterator does not provide a '"+Z+"' method")),c;var E=d(W,y.iterator,v.arg);if(E.type==="throw")return v.method="throw",v.arg=E.arg,v.delegate=null,c;var R=E.arg;return R?R.done?(v[y.resultName]=R.value,v.next=y.nextLoc,v.method!=="return"&&(v.method="next",v.arg=void 0),v.delegate=null,c):R:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,c)}function X(y){var v={tryLoc:y[0]};1 in y&&(v.catchLoc=y[1]),2 in y&&(v.finallyLoc=y[2],v.afterLoc=y[3]),this.tryEntries.push(v)}function G(y){var v=y.completion||{};v.type="normal",delete v.arg,y.completion=v}function C(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(X,this),this.reset(!0)}function x(y){if(y){var v=y[s];if(v)return v.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var Z=-1,W=function E(){for(;++Z<y.length;)if(e.call(y,Z))return E.value=y[Z],E.done=!1,E;return E.value=void 0,E.done=!0,E};return W.next=W}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(w,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=o(p,l,"GeneratorFunction"),n.isGeneratorFunction=function(y){var v=typeof y=="function"&&y.constructor;return!!v&&(v===f||(v.displayName||v.name)==="GeneratorFunction")},n.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,p):(y.__proto__=p,o(y,l,"GeneratorFunction")),y.prototype=Object.create(w),y},n.awrap=function(y){return{__await:y}},S(k.prototype),o(k.prototype,a,function(){return this}),n.AsyncIterator=k,n.async=function(y,v,Z,W,E){E===void 0&&(E=Promise);var R=new k(u(y,v,Z,W),E);return n.isGeneratorFunction(v)?R:R.next().then(function(M){return M.done?M.value:R.next()})},S(w),o(w,l,"Generator"),o(w,s,function(){return this}),o(w,"toString",function(){return"[object Generator]"}),n.keys=function(y){var v=Object(y),Z=[];for(var W in v)Z.push(W);return Z.reverse(),function E(){for(;Z.length;){var R=Z.pop();if(R in v)return E.value=R,E.done=!1,E}return E.done=!0,E}},n.values=x,C.prototype={constructor:C,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!y)for(var v in this)v.charAt(0)==="t"&&e.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if(y.type==="throw")throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var v=this;function Z(Y,D){return R.type="throw",R.arg=y,v.next=Y,D&&(v.method="next",v.arg=void 0),!!D}for(var W=this.tryEntries.length-1;W>=0;--W){var E=this.tryEntries[W],R=E.completion;if(E.tryLoc==="root")return Z("end");if(E.tryLoc<=this.prev){var M=e.call(E,"catchLoc"),P=e.call(E,"finallyLoc");if(M&&P){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0);if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}else if(M){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}}}},abrupt:function(y,v){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var W=this.tryEntries[Z];if(W.tryLoc<=this.prev&&e.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var E=W;break}}E&&(y==="break"||y==="continue")&&E.tryLoc<=v&&v<=E.finallyLoc&&(E=null);var R=E?E.completion:{};return R.type=y,R.arg=v,E?(this.method="next",this.next=E.finallyLoc,c):this.complete(R)},complete:function(y,v){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&v&&(this.next=v),c},finish:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.finallyLoc===y)return this.complete(Z.completion,Z.afterLoc),G(Z),c}},catch:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.tryLoc===y){var W=Z.completion;if(W.type==="throw"){var E=W.arg;G(Z)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(y,v,Z){return this.delegate={iterator:x(y),resultName:v,nextLoc:Z},this.method==="next"&&(this.arg=void 0),c}},n}function nu(n,r,e,i,t,s,a){try{var l=n[s](a),o=l.value}catch(u){e(u);return}l.done?r(o):Promise.resolve(o).then(i,t)}function st(n){return function(){var r=this,e=arguments;return new Promise(function(i,t){var s=n.apply(r,e);function a(o){nu(s,i,t,a,l,"next",o)}function l(o){nu(s,i,t,a,l,"throw",o)}a(void 0)})}}function $i(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ru(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,fc(i.key),i)}}function qi(n,r,e){return r&&ru(n.prototype,r),e&&ru(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Xt(n,r,e){return r=fc(r),r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function nl(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&Za(n,r)}function Ar(n){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ar(n)}function Za(n,r){return Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},Za(n,r)}function a2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function l2(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qe(n)}function rl(n){var r=a2();return function(){var i=Ar(n),t;if(r){var s=Ar(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return l2(this,t)}}function o2(n,r){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function fc(n){var r=o2(n,"string");return typeof r=="symbol"?r:String(r)}var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.default=function(n){for(var r=0,e=arguments.length,i=Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];var s=!0,a=!1,l=void 0;try{for(var o=i[Symbol.iterator](),u;!(s=(u=o.next()).done);s=!0){var d=u.value;r+=d.length}}catch(S){a=!0,l=S}finally{try{!s&&o.return&&o.return()}finally{if(a)throw l}}var c=new n(r),h=0,f=!0,p=!1,m=void 0;try{for(var g=i[Symbol.iterator](),b;!(f=(b=g.next()).done);f=!0){var w=b.value;c.set(w,h),h+=w.length}}catch(S){p=!0,m=S}finally{try{!f&&g.return&&g.return()}finally{if(p)throw m}}return c};var u2=sl,d2=c2(u2);function c2(n){return n&&n.__esModule?n:{default:n}}var h2=d2.default;const p2=Dc(h2);var mc="3.0.19",Ut={416:Ue[J.NETWROK_RANGE_NOT_SATISFIABLE],403:Ue[J.NETWORK_FORBIDDEN],404:Ue[J.NETWORK_NOTFOUND],timeout:Ue[J.NETWORK_TIMEOUT],"4xx":"".concat(Ue[J.NETWORK],"4XX"),"5xx":"".concat(Ue[J.NETWORK],"5XX"),networkError:Ue[J.NETWORK],contentError:"".concat(Ue[J.NETWORK],"contentError"),mse:Ue[J.MEDIA][J.SUB_TYPES.MSE_OTHER],mseOpen:Ue[J.MEDIA][J.SUB_TYPES.MSE_ADD_SB],mseAppend:Ue[J.MEDIA][J.SUB_TYPES.MSE_APPEND_BUFFER],mse_hijack:Ue[J.MEDIA][J.SUB_TYPES.MSE_HIJACK],eme_hijack:Ue[J.MEDIA][J.SUB_TYPES.EME_HIJACK],metaError:Ue[J.DEMUX][J.SUB_TYPES.MP4],muxError:Ue[J.REMUX][J.SUB_TYPES.FMP4],other:Ue[J.OTHER],waitTimeout:Ue[J.RUNTIME][J.SUB_TYPES.BUFFERBREAK_ERROR],waitTimeoutWithHidden:Ue[J.RUNTIME][J.SUB_TYPES.WAITING_TIMEOUT_ERROR],drm:Ue[J.DRM][J.SUB_TYPES.LICENSE]},un=J;function f2(n){return Ut[n]||n}var m2=qi(function n(r,e,i){$i(this,n);var t=0,s=0;i&&i.range&&i.range.length>1&&(t=i.range[0],s=i.range[1]);var a=f2(e);return{errorCode:a,errorType:r,errorMessage:(i==null?void 0:i.httpText)||(i==null?void 0:i.message),url:i==null?void 0:i.url,httpCode:e,version:mc,rangeStart:t,rangeEnd:s,ext:i,mediaError:{code:a,message:(i==null?void 0:i.httpText)||(i==null?void 0:i.message)}}}),v2=qi(function n(r,e,i){return $i(this,n),{errorCode:e,errorType:r,version:mc,errorMessage:i.msg,ext:i,mediaError:{code:e,message:i.msg}}}),jt={};jt.nowTime=function(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}};jt.concatData=function(n,r){var e=[],i=0;n&&e.push(n),r&&e.push(r),e.every(function(a){return a&&(i+=a.byteLength),!0});var t=new Uint8Array(i),s=0;return e.every(function(a){return a&&(t.set(a,s),s+=a.byteLength),!0}),t};function y2(n,r){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,t,s,a,l=[],o=!0,u=!1;try{if(s=(e=e.call(n)).next,r===0){if(Object(e)!==e)return;o=!1}else for(;!(o=(i=s.call(e)).done)&&(l.push(i.value),l.length!==r);o=!0);}catch(d){u=!0,t=d}finally{try{if(!o&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(u)throw t}}return l}}function su(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);r&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,i)}return e}function ka(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?su(Object(e),!0).forEach(function(i){bt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):su(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function we(){we=function(){return n};var n={},r=Object.prototype,e=r.hasOwnProperty,i=Object.defineProperty||function(y,v,Z){y[v]=Z.value},t=typeof Symbol=="function"?Symbol:{},s=t.iterator||"@@iterator",a=t.asyncIterator||"@@asyncIterator",l=t.toStringTag||"@@toStringTag";function o(y,v,Z){return Object.defineProperty(y,v,{value:Z,enumerable:!0,configurable:!0,writable:!0}),y[v]}try{o({},"")}catch{o=function(v,Z,W){return v[Z]=W}}function u(y,v,Z,W){var E=v&&v.prototype instanceof h?v:h,R=Object.create(E.prototype),M=new C(W||[]);return i(R,"_invoke",{value:L(y,Z,M)}),R}function d(y,v,Z){try{return{type:"normal",arg:y.call(v,Z)}}catch(W){return{type:"throw",arg:W}}}n.wrap=u;var c={};function h(){}function f(){}function p(){}var m={};o(m,s,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(x([])));b&&b!==r&&e.call(b,s)&&(m=b);var w=p.prototype=h.prototype=Object.create(m);function S(y){["next","throw","return"].forEach(function(v){o(y,v,function(Z){return this._invoke(v,Z)})})}function k(y,v){function Z(E,R,M,P){var Y=d(y[E],y,R);if(Y.type!=="throw"){var D=Y.arg,q=D.value;return q&&typeof q=="object"&&e.call(q,"__await")?v.resolve(q.__await).then(function(F){Z("next",F,M,P)},function(F){Z("throw",F,M,P)}):v.resolve(q).then(function(F){D.value=F,M(D)},function(F){return Z("throw",F,M,P)})}P(Y.arg)}var W;i(this,"_invoke",{value:function(E,R){function M(){return new v(function(P,Y){Z(E,R,P,Y)})}return W=W?W.then(M,M):M()}})}function L(y,v,Z){var W="suspendedStart";return function(E,R){if(W==="executing")throw new Error("Generator is already running");if(W==="completed"){if(E==="throw")throw R;return N()}for(Z.method=E,Z.arg=R;;){var M=Z.delegate;if(M){var P=T(M,Z);if(P){if(P===c)continue;return P}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(W==="suspendedStart")throw W="completed",Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);W="executing";var Y=d(y,v,Z);if(Y.type==="normal"){if(W=Z.done?"completed":"suspendedYield",Y.arg===c)continue;return{value:Y.arg,done:Z.done}}Y.type==="throw"&&(W="completed",Z.method="throw",Z.arg=Y.arg)}}}function T(y,v){var Z=v.method,W=y.iterator[Z];if(W===void 0)return v.delegate=null,Z==="throw"&&y.iterator.return&&(v.method="return",v.arg=void 0,T(y,v),v.method==="throw")||Z!=="return"&&(v.method="throw",v.arg=new TypeError("The iterator does not provide a '"+Z+"' method")),c;var E=d(W,y.iterator,v.arg);if(E.type==="throw")return v.method="throw",v.arg=E.arg,v.delegate=null,c;var R=E.arg;return R?R.done?(v[y.resultName]=R.value,v.next=y.nextLoc,v.method!=="return"&&(v.method="next",v.arg=void 0),v.delegate=null,c):R:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,c)}function X(y){var v={tryLoc:y[0]};1 in y&&(v.catchLoc=y[1]),2 in y&&(v.finallyLoc=y[2],v.afterLoc=y[3]),this.tryEntries.push(v)}function G(y){var v=y.completion||{};v.type="normal",delete v.arg,y.completion=v}function C(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(X,this),this.reset(!0)}function x(y){if(y){var v=y[s];if(v)return v.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var Z=-1,W=function E(){for(;++Z<y.length;)if(e.call(y,Z))return E.value=y[Z],E.done=!1,E;return E.value=void 0,E.done=!0,E};return W.next=W}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(w,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=o(p,l,"GeneratorFunction"),n.isGeneratorFunction=function(y){var v=typeof y=="function"&&y.constructor;return!!v&&(v===f||(v.displayName||v.name)==="GeneratorFunction")},n.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,p):(y.__proto__=p,o(y,l,"GeneratorFunction")),y.prototype=Object.create(w),y},n.awrap=function(y){return{__await:y}},S(k.prototype),o(k.prototype,a,function(){return this}),n.AsyncIterator=k,n.async=function(y,v,Z,W,E){E===void 0&&(E=Promise);var R=new k(u(y,v,Z,W),E);return n.isGeneratorFunction(v)?R:R.next().then(function(M){return M.done?M.value:R.next()})},S(w),o(w,l,"Generator"),o(w,s,function(){return this}),o(w,"toString",function(){return"[object Generator]"}),n.keys=function(y){var v=Object(y),Z=[];for(var W in v)Z.push(W);return Z.reverse(),function E(){for(;Z.length;){var R=Z.pop();if(R in v)return E.value=R,E.done=!1,E}return E.done=!0,E}},n.values=x,C.prototype={constructor:C,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!y)for(var v in this)v.charAt(0)==="t"&&e.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if(y.type==="throw")throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var v=this;function Z(Y,D){return R.type="throw",R.arg=y,v.next=Y,D&&(v.method="next",v.arg=void 0),!!D}for(var W=this.tryEntries.length-1;W>=0;--W){var E=this.tryEntries[W],R=E.completion;if(E.tryLoc==="root")return Z("end");if(E.tryLoc<=this.prev){var M=e.call(E,"catchLoc"),P=e.call(E,"finallyLoc");if(M&&P){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0);if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}else if(M){if(this.prev<E.catchLoc)return Z(E.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return Z(E.finallyLoc)}}}},abrupt:function(y,v){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var W=this.tryEntries[Z];if(W.tryLoc<=this.prev&&e.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var E=W;break}}E&&(y==="break"||y==="continue")&&E.tryLoc<=v&&v<=E.finallyLoc&&(E=null);var R=E?E.completion:{};return R.type=y,R.arg=v,E?(this.method="next",this.next=E.finallyLoc,c):this.complete(R)},complete:function(y,v){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&v&&(this.next=v),c},finish:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.finallyLoc===y)return this.complete(Z.completion,Z.afterLoc),G(Z),c}},catch:function(y){for(var v=this.tryEntries.length-1;v>=0;--v){var Z=this.tryEntries[v];if(Z.tryLoc===y){var W=Z.completion;if(W.type==="throw"){var E=W.arg;G(Z)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(y,v,Z){return this.delegate={iterator:x(y),resultName:v,nextLoc:Z},this.method==="next"&&(this.arg=void 0),c}},n}function au(n,r,e,i,t,s,a){try{var l=n[s](a),o=l.value}catch(u){e(u);return}l.done?r(o):Promise.resolve(o).then(i,t)}function vt(n){return function(){var r=this,e=arguments;return new Promise(function(i,t){var s=n.apply(r,e);function a(o){au(s,i,t,a,l,"next",o)}function l(o){au(s,i,t,a,l,"throw",o)}a(void 0)})}}function al(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function lu(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,yc(i.key),i)}}function ll(n,r,e){return r&&lu(n.prototype,r),e&&lu(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function bt(n,r,e){return r=yc(r),r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function b2(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&Sa(n,r)}function Br(n){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Br(n)}function Sa(n,r){return Sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},Sa(n,r)}function g2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Z2(n,r){if(n==null)return{};var e={},i=Object.keys(n),t,s;for(s=0;s<i.length;s++)t=i[s],!(r.indexOf(t)>=0)&&(e[t]=n[t]);return e}function k2(n,r){if(n==null)return{};var e=Z2(n,r),i,t;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(t=0;t<s.length;t++)i=s[t],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function wt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function S2(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wt(n)}function L2(n){var r=g2();return function(){var i=Br(n),t;if(r){var s=Br(this).constructor;t=Reflect.construct(i,arguments,s)}else t=i.apply(this,arguments);return S2(this,t)}}function E2(n,r){return T2(n)||y2(n,r)||vc(n,r)||R2()}function w2(n){return X2(n)||G2(n)||vc(n)||W2()}function X2(n){if(Array.isArray(n))return La(n)}function T2(n){if(Array.isArray(n))return n}function G2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function vc(n,r){if(n){if(typeof n=="string")return La(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return La(n,r)}}function La(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,i=new Array(r);e<r;e++)i[e]=n[e];return i}function W2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V2(n,r){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function yc(n){var r=V2(n,"string");return typeof r=="symbol"?r:String(r)}function C2(n){return ka({vid:"",moovEnd:8e4,segmentDuration:2,maxDownloadInfoSize:30,responseType:"arraybuffer",cache:null},n)}var Xr=ll(function n(r,e){al(this,n),this.type="file",this.message=r,this.data=e}),M2=function(){function n(){al(this,n),bt(this,"_data",Object.create(null))}return ll(n,[{key:"set",value:function(e,i){this._data[e]=i}},{key:"get",value:function(e){return this._data[e]}},{key:"clear",value:function(){this._data=Object.create(null)}}]),n}();function ou(n,r){var e=n.trak;if(!(!e||!e.length)){var i=e.find(function(f){var p,m;return((p=f.mdia)===null||p===void 0||(m=p.hdlr)===null||m===void 0?void 0:m.handlerType)==="vide"}),t=e.find(function(f){var p,m;return((p=f.mdia)===null||p===void 0||(m=p.hdlr)===null||m===void 0?void 0:m.handlerType)==="soun"});if(!(!i&&!t)){var s=[],a=[];if(r){var l=[],o=0,u=r.start+r.size;r.references.forEach(function(f,p){l.push({index:p,startTime:o,endTime:o+f.subsegment_duration/r.timescale,duration:f.subsegment_duration/r.timescale,range:[u,u+f.referenced_size],frames:[]}),o+=f.subsegment_duration/r.timescale,u+=f.referenced_size}),s=l,a=l}else{var d,c,h=function(p){return p?[{index:0,startTime:0,endTime:p.duration/p.timescale,duration:p.duration/p.timescale,range:[n.start+n.size,""],frames:[]}]:[]};a=h(n.mvhd.duration?n.mvhd:(d=i.mdia)===null||d===void 0?void 0:d.mdhd),s=h(n.mvhd.duration?n.mvhd:(c=t.mdia)===null||c===void 0?void 0:c.mdhd)}return{videoSegments:a,audioSegments:s}}}}function Ds(n,r){var e=n.trak;if(!(!e||!e.length)){var i=e.find(function(y){var v,Z;return((v=y.mdia)===null||v===void 0||(Z=v.hdlr)===null||Z===void 0?void 0:Z.handlerType)==="vide"}),t=e.find(function(y){var v,Z;return((v=y.mdia)===null||v===void 0||(Z=v.hdlr)===null||Z===void 0?void 0:Z.handlerType)==="soun"});if(!(!i&&!t)){var s=[],a=[],l;if(i){var o,u,d,c=(o=i.mdia)===null||o===void 0||(u=o.minf)===null||u===void 0?void 0:u.stbl;if(!c)return;var h=(d=i.mdia.mdhd)===null||d===void 0?void 0:d.timescale,f=c.stts,p=c.stsc,m=c.stsz,g=c.stco,b=c.stss,w=c.ctts;if(!h||!f||!p||!m||!g||!b)return;s=uu(r,h,f,p,m,g,b,w),l=s.map(function(y){return y.duration})}if(t){var S,k,L,T=(S=t.mdia)===null||S===void 0||(k=S.minf)===null||k===void 0?void 0:k.stbl;if(!T)return;var X=(L=t.mdia.mdhd)===null||L===void 0?void 0:L.timescale,G=T.stts,C=T.stsc,x=T.stsz,N=T.stco;if(!X||!G||!C||!x||!N)return;a=uu(r,X,G,C,x,N,null,null,l)}return{videoSegments:s,audioSegments:a}}}}function uu(n,r,e,i,t,s,a,l,o){var u,d=[],c=[],h=[],f=i.entries,p=s.entries,m=t.entrySizes,g=a==null?void 0:a.entries,b=l==null?void 0:l.entries,w;b&&(w=[],b.forEach(function(te){for(var be=te.count,Ee=te.offset,Ne=0;Ne<be;Ne++)w.push(Ee)}));var S;g&&(S={},g.forEach(function(te){S[te-1]=!0}));var k,L,T=0,X=0,G=0,C=0,x=0,N=(u=f[0])===null||u===void 0?void 0:u.samplesPerChunk,y=f[1]?f[1].firstChunk-1:1/0,v=0,Z=-1;e.entries.forEach(function(te){var be=te.count,Ee=te.delta;L=Ee;for(var Ne=0;Ne<be;Ne++)k={dts:v,startTime:T,duration:L,size:m[X]||t.sampleSize,offset:p[G]+x,index:X},g&&(k.keyframe=S[X],k.keyframe?(Z++,c.push([k]),h.push(k.duration)):(c[c.length-1].push(k),h[c.length-1]+=k.duration),k.gopId=Z),w&&X<w.length&&(k.pts=v+w[X]),X===0&&(k.pts=0),d.push(k),T+=L,v+=Ee,X++,X<N?x+=k.size:(G++,x=0,G>=y&&(C++,y=f[C+1]?f[C+1].firstChunk-1:1/0),N+=f[C].samplesPerChunk)});var W=d.length;if(!W||a&&!d[0].keyframe)return[];var E=[],R=[],M=0,P,Y=0,D=function(be){var Ee;P=R[R.length-1],E.push({index:E.length,startTime:((Ee=E[E.length-1])===null||Ee===void 0?void 0:Ee.endTime)||R[0].startTime/r,endTime:(P.startTime+P.duration)/r,duration:be,range:[R[0].offset,P.offset+P.size],frames:R}),M=0,R=[]};if(a)for(var q=n*r,F=0,Se=c.length;F<Se;F++){var fe;M+=h[F],(fe=R).push.apply(fe,w2(c[F])),F+1<Se?(F===0||M>q)&&D(M/r):D(M/r)}else{o=o||[];for(var Pe=o[0]||n,z=0;z<W;z++){R.push(d[z]),M+=d[z].duration;var se=M/r;(z+1>=W||se+Y>=Pe)&&(Y+=se-Pe,D(se),Pe=o[E.length]||n)}}return E}function du(n,r){var e="",i="",t=0,s=0,a=0,l=0,o=0,u=0,d=0;n.mvhd&&(o=n.mvhd.duration/n.mvhd.timescale);var c=n.trak;if(c){var h=c.find(function(E){var R,M;return((R=E.mdia)===null||R===void 0||(M=R.hdlr)===null||M===void 0?void 0:M.handlerType)==="vide"}),f=c.find(function(E){var R,M;return((R=E.mdia)===null||R===void 0||(M=R.hdlr)===null||M===void 0?void 0:M.handlerType)==="soun"}),p=null,m;if(h){var g,b,w;if(p=(g=h.mdia)===null||g===void 0||(b=g.minf)===null||b===void 0||(w=b.stbl)===null||w===void 0?void 0:w.stsd.entries[0],p){var S,k,L;if(t=p.width,s=p.height,u=(S=h.mdia)===null||S===void 0||(k=S.mdhd)===null||k===void 0?void 0:k.timescale,e=(L=p.avcC||p.hvcC||p.av1C)===null||L===void 0?void 0:L.codec,p.type==="encv"){var T,X;m=(T=p.sinf)===null||T===void 0||(X=T.schi)===null||X===void 0?void 0:X.tenc.default_KID}}}if(f){var G,C,x;if(p=(G=f.mdia)===null||G===void 0||(C=G.minf)===null||C===void 0||(x=C.stbl)===null||x===void 0?void 0:x.stsd.entries[0],p){var N,y,v;if(a=p.channelCount,l=p.sampleRate,i=(N=p.esds)===null||N===void 0?void 0:N.codec,d=(y=f.mdia)===null||y===void 0||(v=y.mdhd)===null||v===void 0?void 0:v.timescale,p.type==="enca"){var Z,W;m=m||((Z=p.sinf)===null||Z===void 0||(W=Z.schi)===null||W===void 0?void 0:W.tenc.default_KID)}}}return{kid:m?m.join(""):null,videoCodec:e,audioCodec:i,width:t,height:s,videoTimescale:u,audioChannelCount:a,audioSampleRate:l,duration:o,audioTimescale:d,moov:n,isFragmentMP4:r}}}function cu(n){return typeof n=="number"&&!Number.isNaN(n)}var x2=["vid","cache"],I2=function(n){b2(e,n);var r=L2(e);function e(i){var t;al(this,e),t=r.call(this),bt(wt(t),"vid",""),bt(wt(t),"url",""),bt(wt(t),"meta",{}),bt(wt(t),"downloadInfo",[]),bt(wt(t),"videoSegments",[]),bt(wt(t),"audioSegments",[]),bt(wt(t),"cache",null),bt(wt(t),"_currentSegmentIndex",-1),bt(wt(t),"_currentLoadingSegmentIndex",-1),bt(wt(t),"buffer",void 0),bt(wt(t),"_error",void 0),bt(wt(t),"_transformError",function(u){return u}),t._config=C2(i);var s=t._config,a=s.vid,l=s.cache,o=k2(s,x2);return t.cache=l||new M2,t.vid=a||o.url,t.url=o.url,o.transformError=t._transformError,t.logger=new ut("MP4Loader_"+t.vid),i.openLog&&ut.enable(),o.logger=t.logger,t._loader=new Wi(o),t._loader.on(U.REAL_TIME_SPEED,function(u){t.emit(U.REAL_TIME_SPEED,u)}),t}return ll(e,[{key:"isMetaLoaded",get:function(){return this.videoSegments.length||this.audioSegments.length}},{key:"setCurrentSegment",value:function(t){cu(t)&&(this._currentSegmentIndex=t)}},{key:"isLastSegment",value:function(t){if(cu(t)){var s,a,l=((s=this.videoSegments[this.videoSegments.length-1])===null||s===void 0?void 0:s.index)||((a=this.audioSegments[this.audioSegments.length-1])===null||a===void 0?void 0:a.index)||0;return t>=l}return!1}},{key:"isSegmentLoading",value:function(t){return t===this._currentLoadingSegmentIndex}},{key:"changeUrl",value:function(){var i=vt(we().mark(function s(a){var l,o,u,d=arguments;return we().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l=d.length>1&&d[1]!==void 0?d[1]:a,o=d.length>2?d[2]:void 0,u=d.length>3?d[3]:void 0,h.next=5,this.reset(u);case 5:a&&(this.url=a),l&&(this.vid=l),o&&(this._config.moovEnd=o);case 8:case"end":return h.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"getOrLoadMeta",value:function(){var i=vt(we().mark(function s(a){return we().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.isMetaLoaded){o.next=3;break}return o.next=3,this.loadMeta(a);case 3:return o.abrupt("return",this.meta);case 4:case"end":return o.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"loadMetaProcess",value:function(){var i=vt(we().mark(function s(a,l,o,u){var d=this,c,h,f,p;return we().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return c=E2(l,2),h=c[0],f=c[1],this._error=!1,this.logger.debug("[loadMetaProcess start], range,",[h,f]),p=function(){var b=vt(we().mark(function w(S,k,L){var T,X,G,C,x,N,y,v,Z,W,E,R,M;return we().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(d.meta&&L!==null&&L!==void 0&&L.range&&L.range.length>0&&L.range[1]>=f&&(k=!0,d.logger.debug("[loadMetaProcess],data done,setstate true,[",h,f,"]")),k&&L!==null&&L!==void 0&&L.range&&L.range.length>0&&L.range[1]<f&&(k=!1,d.logger.debug("[loadMetaProcess],data not done,setstate false,[",h,f,"]")),d.logger.debug("[loadMetaProcess],task,[",h,f,"], range,",L.range,",dataLen,",S?S.byteLength:void 0,", state,",k,",err,",d._error),!d._error&&S&&S.byteLength>0&&o(S,k,L),!(d.meta.moov||d._error)){Y.next=6;break}return Y.abrupt("return");case 6:if(!(S&&S.byteLength>0)){Y.next=51;break}if(d.buffer=zi(d.buffer,S),T=oe.findBox(d.buffer,["moov"])[0],T){Y.next=23;break}if(X=oe.findBox(d.buffer,["mdat"])[0],!k){Y.next=23;break}if(X){Y.next=18;break}return d._error=!0,o(null,k,L,{err:"cannot find moov or mdat box"}),Y.abrupt("return");case 18:return G=X.start+X.size,Y.next=21,d.loadData([G,""],a,u);case 21:C=Y.sent,C&&(T=oe.findBox(C.data,["moov"])[0]);case 23:if(!(T&&k&&T.size>T.data.length)){Y.next=27;break}return d.logger.debug("[loadMetaProcess],moov not all, range,",L.range[1],",dataLen,",d.buffer.byteLength,", state,",k),Y.next=27,d.loadMetaProcess(a,[L.range[1],T.start+T.size-1],o);case 27:if(!(T&&T.size<=T.data.length&&!d.meta.moov)){Y.next=51;break}if(x=oe.moov(T),x){Y.next=33;break}return d._error=!0,o(null,k,L,{err:"cannot parse moov box"}),Y.abrupt("return");case 33:if(N=Ds(x,d._config.segmentDuration),y=function(){var D=vt(we().mark(function q(F){var Se,fe;return we().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Se=oe.findBox(d.buffer,[F])[0],!Se){z.next=11;break}if(!(Se.size>Se.data.length)){z.next=10;break}return z.next=5,d.loadData([Se.start,Se.start+Se.size-1],a,u);case 5:if(fe=z.sent,!fe){z.next=8;break}return z.abrupt("return",oe.findBox(fe.data,[F])[0]);case 8:z.next=11;break;case 10:return z.abrupt("return",Se);case 11:case"end":return z.stop()}},q)}));return function(F){return D.apply(this,arguments)}}(),v=!1,N&&N.videoSegments.length&&N.audioSegments.length){Y.next=41;break}return Y.next=39,y("sidx");case 39:Z=Y.sent,Z&&(W=oe.sidx(Z),W&&(N=ou(x,W),v=!0));case 41:if(N){Y.next=45;break}return d._error=!0,o(null,k,L,{err:"cannot parse segments"}),Y.abrupt("return");case 45:d.meta=du(x,v),E=N,R=E.videoSegments,M=E.audioSegments,d.videoSegments=R,d.audioSegments=M,d.logger.debug("[loadMetaProcess] moov ok"),o(void 0,k,{meta:{meta:d.meta,videoSegments:R,audioSegments:M}});case 51:case"end":return Y.stop()}},w)}));return function(S,k,L){return b.apply(this,arguments)}}(),g.next=6,this.loadData([h,f||this._config.moovEnd],a,ka({onProgress:p},u));case 6:case"end":return g.stop()}},s,this)}));function t(s,a,l,o){return i.apply(this,arguments)}return t}()},{key:"loadMeta",value:function(){var i=vt(we().mark(function s(a,l,o){var u,d,c,h,f,p,m,g,b,w,S,k,L,T;return we().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return u=[],this.logger.debug("[loadMeta start]"),G.next=4,this.loadData([0,l||this._config.moovEnd],a,o);case 4:if(d=G.sent,d){G.next=7;break}return G.abrupt("return");case 7:if(u.push(d),c=oe.findBox(d.data,["moov"])[0],c){G.next=23;break}if(h=oe.findBox(d.data,["mdat"])[0],h){G.next=13;break}throw new Xr("cannot find moov or mdat box",d.data);case 13:return f=h.start+h.size,G.next=16,this.loadData([f],a,o);case 16:if(d=G.sent,d){G.next=19;break}return G.abrupt("return");case 19:if(u.push(d),c=oe.findBox(d.data,["moov"],f)[0],c){G.next=23;break}throw new Xr("cannot find moov box",d.data);case 23:if(!(c.size>c.data.length)){G.next=31;break}return G.next=26,this.loadData([d.data.length,c.start+c.size-1],a,o);case 26:if(d=G.sent,d){G.next=29;break}return G.abrupt("return");case 29:u.push(d),c.data=zi(c.data,d.data);case 31:if(p=oe.moov(c),p){G.next=34;break}throw new Xr("cannot parse moov box",c.data);case 34:if(m=Ds(p,this._config.segmentDuration),m){G.next=37;break}throw new Xr("cannot parse segments",c.data);case 37:return m.videoSegments.length&&m.audioSegments.length||(b=oe.findBox(this.buffer,["moof"])[0],w=oe.findBox(this.buffer,["sidx"])[0],b&&b.size<=b.data.length&&w&&(S=oe.moof(b),g=oe.sidx(w),S&&g&&(m=ou(p,g)))),this.meta=du(p,g),k=m,L=k.videoSegments,T=k.audioSegments,this.videoSegments=L,this.audioSegments=T,this.logger.debug("[load moov end!!!!!]"),G.abrupt("return",{meta:this.meta,videoSegments:L,audioSegments:T,responses:u});case 44:case"end":return G.stop()}},s,this)}));function t(s,a,l){return i.apply(this,arguments)}return t}()},{key:"loadCacheMeta",value:function(t,s){var a=t.moov,l=Ds(a,this._config.segmentDuration),o=l.videoSegments,u=l.audioSegments;this.videoSegments=o,this.audioSegments=u,this._currentSegmentIndex=s,this.meta=t}},{key:"getSegmentByTime",value:function(t){var s,a;return this.videoSegments.length?(s=this.videoSegments.find(function(l){return l.startTime<=t&&l.endTime>t}),s&&(a=this.audioSegments[s.index])):a=this.audioSegments.find(function(l){return l.startTime<=t&&l.endTime>t}),{video:s,audio:a}}},{key:"loadSegmentByTime",value:function(){var i=vt(we().mark(function s(a,l){var o,u,d,c,h,f=arguments;return we().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(o=f.length>2&&f[2]!==void 0?f[2]:!0,u=f.length>3&&f[3]!==void 0?f[3]:{},this.isMetaLoaded){m.next=5;break}return m.next=5,this.loadMeta(l);case 5:return d=this.getSegmentByTime(a),c=d.video,h=d.audio,m.abrupt("return",this._loadSegment(c,h,l,o,u));case 7:case"end":return m.stop()}},s,this)}));function t(s,a){return i.apply(this,arguments)}return t}()},{key:"loadNextSegment",value:function(){var i=vt(we().mark(function s(a){var l,o,u,d,c=arguments;return we().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(l=c.length>1&&c[1]!==void 0?c[1]:!0,o=c.length>2&&c[2]!==void 0?c[2]:{},this.isMetaLoaded){f.next=5;break}return f.next=5,this.loadMeta();case 5:return u=this.videoSegments[this._currentSegmentIndex+1],d=this.audioSegments[this._currentSegmentIndex+1],f.abrupt("return",this._loadSegment(u,d,a,l,o));case 8:case"end":return f.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"preload",value:function(){var i=vt(we().mark(function s(a){var l=this,o,u,d,c,h,f,p;return we().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.isMetaLoaded){g.next=3;break}return g.next=3,this.loadMeta(!0);case 3:if(!(!a||a<0)){g.next=5;break}return g.abrupt("return");case 5:if(o=this.getSegmentByTime(a),u=o.video,d=o.audio,c=Math.max((u==null?void 0:u.index)||0,(d==null?void 0:d.index)||0),c){g.next=9;break}return g.abrupt("return");case 9:return h=this.videoSegments.slice(0,c),f=this.audioSegments.slice(0,c),p=function(){var b=vt(we().mark(function w(S){return we().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!(S>c)){L.next=2;break}return L.abrupt("return");case 2:return L.next=4,l._loadSegment(h[S],f[S],!0,!1);case 4:return L.next=6,p(S+1);case 6:case"end":return L.stop()}},w)}));return function(S){return b.apply(this,arguments)}}(),g.next=14,p(0);case 14:case"end":return g.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"cancel",value:function(){return this._loader.cancel()}},{key:"reset",value:function(){var i=vt(we().mark(function s(){var a,l=arguments;return we().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=l.length>0&&l[0]!==void 0?l[0]:!1,a){u.next=5;break}return this.logger.debug("[MP4loader reset func call loader.cancel]"),u.next=5,this._loader.cancel();case 5:this.vid=this.url="",this.meta={},this.downloadInfo=[],this.videoSegments=[],this.audioSegments=[],this._currentSegmentIndex=-1,this._currentLoadingSegmentIndex=-1;case 12:case"end":return u.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var i=vt(we().mark(function s(){return we().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.reset();case 2:this.cache.clear();case 3:case"end":return l.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_loadSegment",value:function(){var i=vt(we().mark(function s(a,l,o,u,d){var c,h;return we().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!a&&!l)){p.next=2;break}return p.abrupt("return");case 2:return c=(a==null?void 0:a.index)||(l==null?void 0:l.index)||0,this._currentLoadingSegmentIndex=c,p.prev=4,p.next=7,this.loadData([Math.min((a==null?void 0:a.range[0])||1/0,(l==null?void 0:l.range[0])||1/0),Math.max((a==null?void 0:a.range[1])||0,(l==null?void 0:l.range[1])||0)],o,d);case 7:h=p.sent;case 8:return p.prev=8,this._currentLoadingSegmentIndex=-1,p.finish(8);case 11:if(h){p.next=13;break}return p.abrupt("return");case 13:return u&&(this._currentSegmentIndex=c),h.video=a,h.audio=l,p.abrupt("return",h);case 17:case"end":return p.stop()}},s,this,[[4,,8,11]])}));function t(s,a,l,o,u){return i.apply(this,arguments)}return t}()},{key:"loadData",value:function(){var i=vt(we().mark(function s(a,l,o){var u,d,c,h;return we().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u=this._getCacheKey(a),p.next=3,this.cache.get(u);case 3:if(d=p.sent,d){p.next=11;break}return h=o&&o.url?o.url:this.url,p.next=8,this._loader.load(h,ka({range:a,vid:this.vid},o));case 8:c=p.sent,p.next=12;break;case 11:c={data:d,state:!0,options:{fromCache:!0,range:a,vid:this.vid}};case 12:if(c){p.next=14;break}return p.abrupt("return");case 14:return d||(c.data&&this.downloadInfo.push({startTime:c.startTime,endTime:c.endTime,size:c.data.byteLength,range:a}),this.downloadInfo&&this.downloadInfo.length>this._config.maxDownloadInfoSize&&(this.downloadInfo=this.downloadInfo.slice(-this._config.maxDownloadInfoSize))),p.abrupt("return",c);case 17:case"end":return p.stop()}},s,this)}));function t(s,a,l){return i.apply(this,arguments)}return t}()},{key:"_getCacheKey",value:function(t){return(this.vid||this.url)+":"+t}}]),e}(Ci),bc=P2(),_2=Vn();D2();function F2(){try{return typeof localStorage<"u"&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch{return!1}}function Y2(){var n="_localstorage_support_test";try{return window.localStorage.setItem(n,!0),window.localStorage.removeItem(n),!1}catch{return!0}}function Vn(){if(bc)try{return!!window.localStorage.getItem("playerlog")}catch{return!1}return!1}function P2(){return F2()&&!Y2()}function gc(n){for(var r,e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];_2&&console.log&&(r=console).log.apply(r,["[logger]",jt.nowTime(),n].concat(i))}function D2(){if(bc)try{return!!window.localStorage.getItem("playertestlog")}catch{return!1}return!1}var Zc="IWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGUoZSx0KXt2YXIgcj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgYT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihhPWEuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLHIucHVzaC5hcHBseShyLGEpfXJldHVybiByfWZ1bmN0aW9uIHQodCl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIGE9bnVsbCE9YXJndW1lbnRzW3JdP2FyZ3VtZW50c1tyXTp7fTtyJTI/ZShPYmplY3QoYSksITApLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kodCxlLGFbZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoYSkpOmUoT2JqZWN0KGEpKS5mb3JFYWNoKChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxlKSl9KSl9cmV0dXJuIHR9ZnVuY3Rpb24gcihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGEoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGE9dFtyXTthLmVudW1lcmFibGU9YS5lbnVtZXJhYmxlfHwhMSxhLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gYSYmKGEud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGsoYS5rZXkpLGEpfX1mdW5jdGlvbiBuKGUsdCxyKXtyZXR1cm4gdCYmYShlLnByb3RvdHlwZSx0KSxyJiZhKGUsciksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksZX1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4odD1rKHQpKWluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09cixlfWZ1bmN0aW9uIHMoZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksdCYmdShlLHQpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuKG89T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9KShlKX1mdW5jdGlvbiB1KGUsdCl7cmV0dXJuKHU9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fX3Byb3RvX189dCxlfSkoZSx0KX1mdW5jdGlvbiBjKCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBSZWZsZWN0fHwhUmVmbGVjdC5jb25zdHJ1Y3QpcmV0dXJuITE7aWYoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZigiZnVuY3Rpb24iPT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX1mdW5jdGlvbiBsKGUsdCxyKXtyZXR1cm4obD1jKCk/UmVmbGVjdC5jb25zdHJ1Y3QuYmluZCgpOmZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1bbnVsbF07YS5wdXNoLmFwcGx5KGEsdCk7dmFyIG49bmV3KEZ1bmN0aW9uLmJpbmQuYXBwbHkoZSxhKSk7cmV0dXJuIHImJnUobixyLnByb3RvdHlwZSksbn0pLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBmKGUsdCl7aWYodCYmKCJvYmplY3QiPT10eXBlb2YgdHx8ImZ1bmN0aW9uIj09dHlwZW9mIHQpKXJldHVybiB0O2lmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTtyZXR1cm4gZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiBlfShlKX1mdW5jdGlvbiBkKGUpe3ZhciB0PWMoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcixhPW8oZSk7aWYodCl7dmFyIG49byh0aGlzKS5jb25zdHJ1Y3RvcjtyPVJlZmxlY3QuY29uc3RydWN0KGEsYXJndW1lbnRzLG4pfWVsc2Ugcj1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZih0aGlzLHIpfX1mdW5jdGlvbiBoKGUsdCl7Zm9yKDshT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCkmJm51bGwhPT0oZT1vKGUpKTspO3JldHVybiBlfWZ1bmN0aW9uIHAoKXtyZXR1cm4gcD0idW5kZWZpbmVkIiE9dHlwZW9mIFJlZmxlY3QmJlJlZmxlY3QuZ2V0P1JlZmxlY3QuZ2V0LmJpbmQoKTpmdW5jdGlvbihlLHQscil7dmFyIGE9aChlLHQpO2lmKGEpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSx0KTtyZXR1cm4gbi5nZXQ/bi5nZXQuY2FsbChhcmd1bWVudHMubGVuZ3RoPDM/ZTpyKTpuLnZhbHVlfX0scC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gdihlLHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfShlKXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1udWxsPT1lP251bGw6InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXXx8ZVsiQEBpdGVyYXRvciJdO2lmKG51bGwhPXIpe3ZhciBhLG4saSxzLG89W10sdT0hMCxjPSExO3RyeXtpZihpPShyPXIuY2FsbChlKSkubmV4dCwwPT09dCl7aWYoT2JqZWN0KHIpIT09cilyZXR1cm47dT0hMX1lbHNlIGZvcig7ISh1PShhPWkuY2FsbChyKSkuZG9uZSkmJihvLnB1c2goYS52YWx1ZSksby5sZW5ndGghPT10KTt1PSEwKTt9Y2F0Y2gobCl7Yz0hMCxuPWx9ZmluYWxseXt0cnl7aWYoIXUmJm51bGwhPXIucmV0dXJuJiYocz1yLnJldHVybigpLE9iamVjdChzKSE9PXMpKXJldHVybn1maW5hbGx5e2lmKGMpdGhyb3cgbn19cmV0dXJuIG99fShlLHQpfHxtKGUsdCl8fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX0oKX1mdW5jdGlvbiB5KGUpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBnKGUpfShlKXx8ZnVuY3Rpb24oZSl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJm51bGwhPWVbU3ltYm9sLml0ZXJhdG9yXXx8bnVsbCE9ZVsiQEBpdGVyYXRvciJdKXJldHVybiBBcnJheS5mcm9tKGUpfShlKXx8bShlKXx8ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX0oKX1mdW5jdGlvbiBtKGUsdCl7aWYoZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBnKGUsdCk7dmFyIHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09ciYmZS5jb25zdHJ1Y3RvciYmKHI9ZS5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PXJ8fCJTZXQiPT09cj9BcnJheS5mcm9tKGUpOiJBcmd1bWVudHMiPT09cnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qocik/ZyhlLHQpOnZvaWQgMH19ZnVuY3Rpb24gZyhlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgcj0wLGE9bmV3IEFycmF5KHQpO3I8dDtyKyspYVtyXT1lW3JdO3JldHVybiBhfWZ1bmN0aW9uIGsoZSl7dmFyIHQ9ZnVuY3Rpb24oZSx0KXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lKXJldHVybiBlO3ZhciByPWVbU3ltYm9sLnRvUHJpbWl0aXZlXTtpZih2b2lkIDAhPT1yKXt2YXIgYT1yLmNhbGwoZSx0fHwiZGVmYXVsdCIpO2lmKCJvYmplY3QiIT10eXBlb2YgYSlyZXR1cm4gYTt0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpfXJldHVybigic3RyaW5nIj09PXQ/U3RyaW5nOk51bWJlcikoZSl9KGUsInN0cmluZyIpO3JldHVybiJzeW1ib2wiPT10eXBlb2YgdD90OlN0cmluZyh0KX12YXIgYj0idmlkZW8iLF89ImF1ZGlvIix3PSJtZXRhZGF0YSIseD0iYXYxIixTPSJhdmMiLEE9ImhldmMiLEQ9ImFhYyIsQj0iZzcxMTBhIixFPSJnNzExMG0iLFQ9IkxBUkdFX0FWX1NISUZUIixVPSJMQVJHRV9WSURFT19HQVAiLEM9IkxBUkdFX1ZJREVPX0dBUF9CRVRXRUVOX0NIVU5LIixQPSJMQVJHRV9BVURJT19HQVAiLEk9IkFVRElPX0ZJTExFRCIsTT0iQVVESU9fRFJPUFBFRCIsej1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSksaSh0aGlzLCJpZCIsMSksaSh0aGlzLCJ0eXBlIixiKSxpKHRoaXMsImNvZGVjVHlwZSIsUyksaSh0aGlzLCJwaWQiLC0xKSxpKHRoaXMsImh2Y0MiLHZvaWQgMCksaSh0aGlzLCJjb2RlYyIsIiIpLGkodGhpcywidGltZXNjYWxlIiwwKSxpKHRoaXMsImZvcm1hdFRpbWVzY2FsZSIsMCksaSh0aGlzLCJzZXF1ZW5jZU51bWJlciIsMCksaSh0aGlzLCJiYXNlTWVkaWFEZWNvZGVUaW1lIiwwKSxpKHRoaXMsImJhc2VEdHMiLDApLGkodGhpcywiZHVyYXRpb24iLDApLGkodGhpcywid2FybmluZ3MiLFtdKSxpKHRoaXMsInNhbXBsZXMiLFtdKSxpKHRoaXMsInBwcyIsW10pLGkodGhpcywic3BzIixbXSksaSh0aGlzLCJ2cHMiLFtdKSxpKHRoaXMsImZwc051bSIsMCksaSh0aGlzLCJmcHNEZW4iLDApLGkodGhpcywic2FyUmF0aW8iLFtdKSxpKHRoaXMsIndpZHRoIiwwKSxpKHRoaXMsImhlaWdodCIsMCksaSh0aGlzLCJuYWxVbml0U2l6ZSIsNCksaSh0aGlzLCJwcmVzZW50IiwhMSksaSh0aGlzLCJpc1ZpZGVvRW5jcnlwdGlvbiIsITEpLGkodGhpcywiaXNBdWRpb0VuY3J5cHRpb24iLCExKSxpKHRoaXMsImlzVmlkZW8iLCEwKSxpKHRoaXMsImtpZCIsbnVsbCksaSh0aGlzLCJwc3NoIixudWxsKSxpKHRoaXMsImV4dCIsdm9pZCAwKX1yZXR1cm4gbihlLFt7a2V5OiJyZXNldCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNlcXVlbmNlTnVtYmVyPXRoaXMud2lkdGg9dGhpcy5oZWlnaHQ9dGhpcy5mcHNEZW49dGhpcy5mcHNOdW09dGhpcy5kdXJhdGlvbj10aGlzLmJhc2VNZWRpYURlY29kZVRpbWU9dGhpcy50aW1lc2NhbGU9MCx0aGlzLmNvZGVjPSIiLHRoaXMucHJlc2VudD0hMSx0aGlzLnBpZD0tMSx0aGlzLnBwcz1bXSx0aGlzLnNwcz1bXSx0aGlzLnZwcz1bXSx0aGlzLnNhclJhdGlvPVtdLHRoaXMuc2FtcGxlcz1bXSx0aGlzLndhcm5pbmdzPVtdLHRoaXMuaHZjQz1udWxsfX0se2tleToiZmlyc3REdHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNhbXBsZXMubGVuZ3RoP3RoaXMuc2FtcGxlc1swXS5kdHM6bnVsbH19LHtrZXk6ImZpcnN0UHRzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zYW1wbGVzLmxlbmd0aD90aGlzLnNhbXBsZXNbMF0ucHRzOm51bGx9fSx7a2V5OiJzYW1wbGVzRHVyYXRpb24iLGdldDpmdW5jdGlvbigpe2lmKHRoaXMuc2FtcGxlcy5sZW5ndGg+MCl7dmFyIGU9dGhpcy5zYW1wbGVzWzBdLHQ9dGhpcy5zYW1wbGVzW3RoaXMuc2FtcGxlcy5sZW5ndGgtMV07cmV0dXJuIHQuZHRzLWUuZHRzK3QuZHVyYXRpb259cmV0dXJuIDB9fSx7a2V5OiJleGlzdCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hIS9hdjAxLy50ZXN0KHRoaXMuY29kZWMpfHwhISh0aGlzLnBwcy5sZW5ndGgmJnRoaXMuc3BzLmxlbmd0aCYmdGhpcy5jb2RlYyl9fSx7a2V5OiJoYXNTYW1wbGUiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnNhbXBsZXMubGVuZ3RofX0se2tleToiaXNFbmNyeXB0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZpZGVvRW5jcnlwdGlvbn19XSksZX0oKSxPPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKSxpKHRoaXMsImlkIiwyKSxpKHRoaXMsInR5cGUiLF8pLGkodGhpcywiY29kZWNUeXBlIixEKSxpKHRoaXMsInBpZCIsLTEpLGkodGhpcywiY29kZWMiLCIiKSxpKHRoaXMsInNlcXVlbmNlTnVtYmVyIiwwKSxpKHRoaXMsInNhbXBsZUR1cmF0aW9uIiwwKSxpKHRoaXMsInRpbWVzY2FsZSIsMCksaSh0aGlzLCJmb3JtYXRUaW1lc2NhbGUiLDApLGkodGhpcywiYmFzZU1lZGlhRGVjb2RlVGltZSIsMCksaSh0aGlzLCJkdXJhdGlvbiIsMCksaSh0aGlzLCJ3YXJuaW5ncyIsW10pLGkodGhpcywic2FtcGxlcyIsW10pLGkodGhpcywiYmFzZUR0cyIsMCksaSh0aGlzLCJzYW1wbGVTaXplIiwxNiksaSh0aGlzLCJzYW1wbGVSYXRlIiwwKSxpKHRoaXMsImNoYW5uZWxDb3VudCIsMCksaSh0aGlzLCJvYmplY3RUeXBlIiwwKSxpKHRoaXMsInNhbXBsZVJhdGVJbmRleCIsMCksaSh0aGlzLCJjb25maWciLFtdKSxpKHRoaXMsInByZXNlbnQiLCExKSxpKHRoaXMsImlzVmlkZW9FbmNyeXB0aW9uIiwhMSksaSh0aGlzLCJpc0F1ZGlvRW5jcnlwdGlvbiIsITEpLGkodGhpcywia2lkIixudWxsKSxpKHRoaXMsImV4dCIsdm9pZCAwKX1yZXR1cm4gbihlLFt7a2V5OiJyZXNldCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNlcXVlbmNlTnVtYmVyPTAsdGhpcy50aW1lc2NhbGU9MCx0aGlzLnNhbXBsZUR1cmF0aW9uPTAsdGhpcy5zYW1wbGVSYXRlPTAsdGhpcy5jaGFubmVsQ291bnQ9MCx0aGlzLmJhc2VNZWRpYURlY29kZVRpbWU9MCx0aGlzLnByZXNlbnQ9ITEsdGhpcy5waWQ9LTEsdGhpcy5jb2RlYz0iIix0aGlzLnNhbXBsZXM9W10sdGhpcy5jb25maWc9W10sdGhpcy53YXJuaW5ncz1bXX19LHtrZXk6ImV4aXN0Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEhKHRoaXMuc2FtcGxlUmF0ZSYmdGhpcy5jaGFubmVsQ291bnQmJnRoaXMuY29kZWMmJnRoaXMuY29kZWNUeXBlPT09RCl9fSx7a2V5OiJoYXNTYW1wbGUiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnNhbXBsZXMubGVuZ3RofX0se2tleToiaXNFbmNyeXB0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0F1ZGlvRW5jcnlwdGlvbn19LHtrZXk6ImZpcnN0RHRzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zYW1wbGVzLmxlbmd0aD90aGlzLnNhbXBsZXNbMF0uZHRzOm51bGx9fSx7a2V5OiJmaXJzdFB0cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2FtcGxlcy5sZW5ndGg/dGhpcy5zYW1wbGVzWzBdLnB0czpudWxsfX0se2tleToic2FtcGxlc0R1cmF0aW9uIixnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnNhbXBsZXMubGVuZ3RoPjApe3ZhciBlPXRoaXMuc2FtcGxlc1swXSx0PXRoaXMuc2FtcGxlc1t0aGlzLnNhbXBsZXMubGVuZ3RoLTFdO3JldHVybiB0LmR0cy1lLmR0cyt0LmR1cmF0aW9ufXJldHVybiAwfX1dKSxlfSgpLFI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSxuKXtyKHRoaXMsZSksaSh0aGlzLCJmbGFnIix7fSksaSh0aGlzLCJrZXlmcmFtZSIsITEpLGkodGhpcywiZ29wSWQiLDApLGkodGhpcywiZHVyYXRpb24iLDApLGkodGhpcywic2l6ZSIsMCksaSh0aGlzLCJ1bml0cyIsW10pLGkodGhpcywiY2hyb21hRm9ybWF0Iiw0MjApLHRoaXMub3JpZ2luUHRzPXRoaXMucHRzPXQsdGhpcy5vcmlnaW5EdHM9dGhpcy5kdHM9YSxuJiYodGhpcy51bml0cz1uKX1yZXR1cm4gbihlLFt7a2V5OiJjdHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy10aGlzLmR0c319LHtrZXk6InNldFRvS2V5ZnJhbWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5rZXlmcmFtZT0hMCx0aGlzLmZsYWcuZGVwZW5kc09uPTIsdGhpcy5mbGFnLmlzTm9uU3luY1NhbXBsZT0wfX1dKSxlfSgpLEw9bigoZnVuY3Rpb24gZSh0LGEsbixzKXtyKHRoaXMsZSksaSh0aGlzLCJkdXJhdGlvbiIsMTAyNCksaSh0aGlzLCJmbGFnIix7ZGVwZW5kc09uOjIsaXNOb25TeW5jU2FtcGxlOjB9KSxpKHRoaXMsImtleWZyYW1lIiwhMCksdGhpcy5vcmlnaW5QdHM9dGhpcy5wdHM9dGhpcy5kdHM9dCx0aGlzLmRhdGE9YSx0aGlzLnNpemU9YS5ieXRlTGVuZ3RoLHRoaXMuc2FtcGxlT2Zmc2V0PXMsbiYmKHRoaXMuZHVyYXRpb249bil9KSksVj1uKChmdW5jdGlvbiBlKHQsYSl7cih0aGlzLGUpLGkodGhpcywidGltZSIsMCksdGhpcy5kYXRhPXQsdGhpcy5vcmlnaW5QdHM9dGhpcy5wdHM9YX0pKSxGPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1kKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEpfShWKSxOPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1kKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEpfShWKSxqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKSxpKHRoaXMsImlkIiwzKSxpKHRoaXMsInR5cGUiLHcpLGkodGhpcywidGltZXNjYWxlIiwwKSxpKHRoaXMsImZsdlNjcmlwdFNhbXBsZXMiLFtdKSxpKHRoaXMsInNlaVNhbXBsZXMiLFtdKX1yZXR1cm4gbihlLFt7a2V5OiJleGlzdCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmZsdlNjcmlwdFNhbXBsZXMubGVuZ3RoJiYhdGhpcy5zZWlTYW1wbGVzLmxlbmd0aHx8IXRoaXMudGltZXNjYWxlKX19LHtrZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGltZXNjYWxlPTAsdGhpcy5mbHZTY3JpcHRTYW1wbGVzPVtdLHRoaXMuc2VpU2FtcGxlcz1bXX19LHtrZXk6Imhhc1NhbXBsZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmZsdlNjcmlwdFNhbXBsZXMubGVuZ3RoJiYhdGhpcy5zZWlTYW1wbGVzLmxlbmd0aCl9fV0pLGV9KCksRz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7aWYocih0aGlzLGUpLGkodGhpcywiX2J5dGVzQXZhaWxhYmxlIix2b2lkIDApLGkodGhpcywiX2JpdHNBdmFpbGFibGUiLDApLGkodGhpcywiX3dvcmQiLDApLCF0KXRocm93IG5ldyBFcnJvcigiRXhwR29sb21iIGRhdGEgcGFyYW1zIGlzIHJlcXVpcmVkIik7dGhpcy5fZGF0YT10LHRoaXMuX2J5dGVzQXZhaWxhYmxlPXQuYnl0ZUxlbmd0aCx0aGlzLl9ieXRlc0F2YWlsYWJsZSYmdGhpcy5fbG9hZFdvcmQoKX1yZXR1cm4gbihlLFt7a2V5OiJiaXRzQXZhaWxhYmxlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYml0c0F2YWlsYWJsZX19LHtrZXk6Il9sb2FkV29yZCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9kYXRhLmJ5dGVMZW5ndGgtdGhpcy5fYnl0ZXNBdmFpbGFibGUsdD1NYXRoLm1pbig0LHRoaXMuX2J5dGVzQXZhaWxhYmxlKTtpZigwPT09dCl0aHJvdyBuZXcgRXJyb3IoIk5vIGJ5dGVzIGF2YWlsYWJsZSIpO3ZhciByPW5ldyBVaW50OEFycmF5KDQpO3Iuc2V0KHRoaXMuX2RhdGEuc3ViYXJyYXkoZSxlK3QpKSx0aGlzLl93b3JkPW5ldyBEYXRhVmlldyhyLmJ1ZmZlcikuZ2V0VWludDMyKDApLHRoaXMuX2JpdHNBdmFpbGFibGU9OCp0LHRoaXMuX2J5dGVzQXZhaWxhYmxlLT10fX0se2tleToic2tpcEJpdHMiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX2JpdHNBdmFpbGFibGU+ZSl0aGlzLl93b3JkPDw9ZSx0aGlzLl9iaXRzQXZhaWxhYmxlLT1lO2Vsc2V7ZS09dGhpcy5fYml0c0F2YWlsYWJsZTt2YXIgdD1NYXRoLmZsb29yKGUvOCk7ZS09OCp0LHRoaXMuX2J5dGVzQXZhaWxhYmxlLT10LHRoaXMuX2xvYWRXb3JkKCksdGhpcy5fd29yZDw8PWUsdGhpcy5fYml0c0F2YWlsYWJsZS09ZX19fSx7a2V5OiJyZWFkQml0cyIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZT4zMil0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCByZWFkIG1vcmUgdGhhbiAzMiBiaXRzIik7dmFyIHQ9TWF0aC5taW4odGhpcy5fYml0c0F2YWlsYWJsZSxlKSxyPXRoaXMuX3dvcmQ+Pj4zMi10O3JldHVybiB0aGlzLl9iaXRzQXZhaWxhYmxlLT10LHRoaXMuX2JpdHNBdmFpbGFibGU+MD90aGlzLl93b3JkPDw9dDp0aGlzLl9ieXRlc0F2YWlsYWJsZT4wJiZ0aGlzLl9sb2FkV29yZCgpLCh0PWUtdCk+MCYmdGhpcy5fYml0c0F2YWlsYWJsZT9yPDx0fHRoaXMucmVhZEJpdHModCk6cn19LHtrZXk6InNraXBMWiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtmb3IoZT0wO2U8dGhpcy5fYml0c0F2YWlsYWJsZTsrK2UpaWYoMCE9KHRoaXMuX3dvcmQmMjE0NzQ4MzY0OD4+PmUpKXJldHVybiB0aGlzLl93b3JkPDw9ZSx0aGlzLl9iaXRzQXZhaWxhYmxlLT1lLGU7cmV0dXJuIHRoaXMuX2xvYWRXb3JkKCksZSt0aGlzLnNraXBMWigpfX0se2tleToic2tpcFVFRyIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNraXBCaXRzKDErdGhpcy5za2lwTFooKSl9fSx7a2V5OiJyZWFkVUVHIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc2tpcExaKCk7cmV0dXJuIHRoaXMucmVhZEJpdHMoZSsxKS0xfX0se2tleToicmVhZEVHIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVhZFVFRygpO3JldHVybiAxJmU/MStlPj4+MTotMSooZT4+PjEpfX0se2tleToicmVhZEJvb2wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PT10aGlzLnJlYWRCaXRzKDEpfX0se2tleToicmVhZFVCeXRlIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRCaXRzKDgpfX0se2tleToic2tpcFNjYWxpbmdMaXN0Iix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9OCxyPTgsYT0wO2E8ZTthKyspMCE9PXImJihyPSh0K3RoaXMucmVhZEVHKCkrMjU2KSUyNTYpLHQ9MD09PXI/dDpyfX1dKSxlfSgpLEg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3IodGhpcyxlKSx0aGlzLm5hbWU9dHx8IiIsdGhpcy5fcHJlZml4PSJbIi5jb25jYXQodGhpcy5uYW1lLCJdIil9cmV0dXJuIG4oZSxbe2tleToid2FybiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdDtpZighZS5kaXNhYmxlZCl7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkociksbj0wO248cjtuKyspYVtuXT1hcmd1bWVudHNbbl07KHQ9Y29uc29sZSkud2Fybi5hcHBseSh0LFt0aGlzLl9wcmVmaXhdLmNvbmNhdChhKSl9fX1dLFt7a2V5OiJlbmFibGUiLHZhbHVlOmZ1bmN0aW9uKCl7ZS5kaXNhYmxlZD0hMX19LHtrZXk6ImRpc2FibGUiLHZhbHVlOmZ1bmN0aW9uKCl7ZS5kaXNhYmxlZD0hMH19XSksZX0oKTtpKEgsImRpc2FibGVkIiwhMCk7dmFyIEs9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToiZGVjb2RlIix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIHI9W10sYT10LG49MCxpPXQubGVuZ3RoO248aTspaWYoYVtuXTwxMjgpci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYVtuXSkpLCsrbjtlbHNle2lmKGFbbl08MTkyKTtlbHNlIGlmKGFbbl08MjI0KXtpZihlLl9jaGVja0NvbnRpbnVhdGlvbihhLG4sMSkpe3ZhciBzPSgzMSZhW25dKTw8Nnw2MyZhW24rMV07aWYocz49MTI4KXtyLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSg2NTUzNSZzKSksbis9Mjtjb250aW51ZX19fWVsc2UgaWYoYVtuXTwyNDApe2lmKGUuX2NoZWNrQ29udGludWF0aW9uKGEsbiwyKSl7dmFyIG89KDE1JmFbbl0pPDwxMnwoNjMmYVtuKzFdKTw8Nnw2MyZhW24rMl07aWYobz49MjA0OCYmNTUyOTYhPSg2MzQ4OCZvKSl7ci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoNjU1MzUmbykpLG4rPTM7Y29udGludWV9fX1lbHNlIGlmKGFbbl08MjQ4JiZlLl9jaGVja0NvbnRpbnVhdGlvbihhLG4sMykpe3ZhciB1PSg3JmFbbl0pPDwxOHwoNjMmYVtuKzFdKTw8MTJ8KDYzJmFbbisyXSk8PDZ8NjMmYVtuKzNdO2lmKHU+NjU1MzYmJnU8MTExNDExMil7dS09NjU1MzYsci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodT4+PjEwfDU1Mjk2KSksci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMTAyMyZ1fDU2MzIwKSksbis9NDtjb250aW51ZX19ci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoNjU1MzMpKSwrK259cmV0dXJuIHIuam9pbigiIil9fSx7a2V5OiJfY2hlY2tDb250aW51YXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1lO2lmKHQrcjxhLmxlbmd0aCl7Zm9yKDtyLS07KWlmKDEyOCE9KDE5MiZhWysrdF0pKXJldHVybiExO3JldHVybiEwfXJldHVybiExfX1dKSxlfSgpLHE9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3csVz1xJiZuYXZpZ2F0b3IudXNlckFnZW50LnRvTG9jYWxlTG93ZXJDYXNlKCksWD1xJiYvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvLnRlc3QoVyksWT1xJiZXLmluY2x1ZGVzKCJmaXJlZm94IiksWj1xJiZXLmluY2x1ZGVzKCJhbmRyb2lkIik7ZnVuY3Rpb24gUSgpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9bmV3IEFycmF5KGUpLHI9MDtyPGU7cisrKXRbcl09YXJndW1lbnRzW3JdO3Q9dC5maWx0ZXIoQm9vbGVhbik7dmFyIGE9bmV3IFVpbnQ4QXJyYXkodC5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdC5ieXRlTGVuZ3RofSksMCkpLG49MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbihlKXthLnNldChlLG4pLG4rPWUuYnl0ZUxlbmd0aH0pKSxhfXZhciBKPU1hdGgucG93KDIsMzIpO2Z1bmN0aW9uICQoZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjA7cmV0dXJuKGVbdF08PDgpKyhlW3QrMV18fDApfWZ1bmN0aW9uIGVlKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowO3JldHVybihlW3RdPDwyND4+PjApKyhlW3QrMV08PDE2KSsoZVt0KzJdPDw4KSsoZVt0KzNdfHwwKX1mdW5jdGlvbiB0ZShlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MDtyZXR1cm4gZWUoZSx0KSpKK2VlKGUsdCs0KX1mdW5jdGlvbiByZShlKXtmb3IodmFyIHQscj0iYXZjMS4iLGE9MDthPDM7YSsrKSh0PWVbYV0udG9TdHJpbmcoMTYpKS5sZW5ndGg8MiYmKHQ9IjAiLmNvbmNhdCh0KSkscis9dDtyZXR1cm4gcn1mdW5jdGlvbiBhZShlKXt2YXIgdD0iIjtpZihlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QrPWZ1bmN0aW9uKGUpe3JldHVybigiMCIrTnVtYmVyKGUpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpLnRvVXBwZXJDYXNlKCl9KGUpfSkpLHQubGVuZ3RoPD0zMilmb3IodmFyIHI9MzItdC5sZW5ndGgsYT0wO2E8cjthKyspdCs9IjAiO3JldHVybiB0fWZ1bmN0aW9uIG5lKGUpe2lmKCFBcnJheS5pc0FycmF5KGUpKXtmb3IodmFyIHQ9W10scj0iIixhPTA7YTxlLmxlbmd0aDthKyspYSUyJiYocj1lW2EtMV0rZVthXSx0LnB1c2gocGFyc2VJbnQociwxNikpLHI9IiIpO3JldHVybiB0fXJldHVybiBlLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTYpfSkpfWZ1bmN0aW9uIGllKGUsdCl7cmV0dXJuIE51bWJlcihlKyIuIit0KX12YXIgc2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToicGFyc2VBbm5leEIiLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxyPTIsYT0wO251bGwhPT1lW3JdJiZ2b2lkIDAhPT1lW3JdJiYxIT09ZVtyXTspcisrO2lmKChhPSsrcisyKT49dClyZXR1cm5bXTtmb3IodmFyIG49W107YTx0Oylzd2l0Y2goZVthXSl7Y2FzZSAwOmlmKDAhPT1lW2EtMV0pe2ErPTI7YnJlYWt9aWYoMCE9PWVbYS0yXSl7YSsrO2JyZWFrfXIhPT1hLTImJm4ucHVzaChlLnN1YmFycmF5KHIsYS0yKSk7ZG97YSsrfXdoaWxlKDEhPT1lW2FdJiZhPHQpO2E9KHI9YSsxKSsyO2JyZWFrO2Nhc2UgMTppZigwIT09ZVthLTFdfHwwIT09ZVthLTJdKXthKz0zO2JyZWFrfXIhPT1hLTImJm4ucHVzaChlLnN1YmFycmF5KHIsYS0yKSksYT0ocj1hKzEpKzI7YnJlYWs7ZGVmYXVsdDphKz0zfXJldHVybiByPHQmJm4ucHVzaChlLnN1YmFycmF5KHIpKSxufX0se2tleToicGFyc2VBdmNDIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06NDtpZighKGUubGVuZ3RoPDQpKXtmb3IodmFyIHIsYT1lLmxlbmd0aCxuPVtdLGk9MDtpK3Q8YTspaWYocj1lZShlLGkpLDM9PT10JiYocj4+Pj04KSxpKz10LHIpe2lmKGkrcj5hKWJyZWFrO24ucHVzaChlLnN1YmFycmF5KGksaStyKSksaSs9cn1yZXR1cm4gbn19fSx7a2V5OiJwYXJzZVNFSSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZS5sZW5ndGgsYT10PzI6MSxuPTAsaT0wLHM9IiI7MjU1PT09ZVthXTspbis9MjU1LGErKztmb3Iobis9ZVthKytdOzI1NT09PWVbYV07KWkrPTI1NSxhKys7aWYoaSs9ZVthKytdLDU9PT1uJiZyPmErMTYpZm9yKHZhciBvPTA7bzwxNjtvKyspcys9ZVthXS50b1N0cmluZygxNiksYSsrO3JldHVybntwYXlsb2FkOmUuc3ViYXJyYXkoYSxhK2kpLHR5cGU6bixzaXplOmksdXVpZDpzfX19LHtrZXk6InJlbW92ZUVQQiIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuYnl0ZUxlbmd0aCxyPVtdLGE9MTthPHQtMjspMD09PWVbYV0mJjA9PT1lW2ErMV0mJjM9PT1lW2ErMl0/KHIucHVzaChhKzIpLGErPTIpOmErKztpZighci5sZW5ndGgpcmV0dXJuIGU7dmFyIG49dC1yLmxlbmd0aCxpPW5ldyBVaW50OEFycmF5KG4pLHM9MDtmb3IoYT0wO2E8bjtzKyssYSsrKXM9PT1yWzBdJiYocysrLHIuc2hpZnQoKSksaVthXT1lW3NdO3JldHVybiBpfX1dKSxlfSgpLG9lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKX1yZXR1cm4gbihlLG51bGwsW3trZXk6InBhcnNlQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEodC5sZW5ndGg8Nykpe2Zvcih2YXIgcixhLG49MSsoMyZ0WzRdKSxpPVtdLHM9W10sbz02LHU9MzEmdFs1XSxjPTA7Yzx1O2MrKylpZihhPXRbb108PDh8dFtvKzFdLG8rPTIsYSl7dmFyIGw9dC5zdWJhcnJheShvLG8rYSk7bys9YSxpLnB1c2gobCkscnx8KHI9ZS5wYXJzZVNQUyhzZS5yZW1vdmVFUEIobCkpKX12YXIgZixkPXRbb107bysrO2Zvcih2YXIgaD0wO2g8ZDtoKyspZj10W29dPDw4fHRbbysxXSxvKz0yLGYmJihzLnB1c2godC5zdWJhcnJheShvLG8rZikpLG8rPWYpO3JldHVybntzcHM6cixzcHNBcnI6aSxwcHNBcnI6cyxuYWxVbml0U2l6ZTpufX19fSx7a2V5OiJwYXJzZVNQUyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEcoZSk7dC5yZWFkVUJ5dGUoKTt2YXIgcj10LnJlYWRVQnl0ZSgpLGE9dC5yZWFkVUJ5dGUoKSxuPXQucmVhZFVCeXRlKCk7dC5za2lwVUVHKCk7dmFyIGk9NDIwO2lmKDEwMD09PXJ8fDExMD09PXJ8fDEyMj09PXJ8fDI0ND09PXJ8fDQ0PT09cnx8ODM9PT1yfHw4Nj09PXJ8fDExOD09PXJ8fDEyOD09PXJ8fDEzOD09PXJ8fDE0ND09PXIpe3ZhciBzPXQucmVhZFVFRygpO2lmKHM8PTMmJihpPVswLDQyMCw0MjIsNDQ0XVtzXSksMz09PXMmJnQuc2tpcEJpdHMoMSksdC5za2lwVUVHKCksdC5za2lwVUVHKCksdC5za2lwQml0cygxKSx0LnJlYWRCb29sKCkpZm9yKHZhciBvPTMhPT1zPzg6MTIsdT0wO3U8bzt1KyspdC5yZWFkQm9vbCgpJiYodTw2P3Quc2tpcFNjYWxpbmdMaXN0KDE2KTp0LnNraXBTY2FsaW5nTGlzdCg2NCkpfXQuc2tpcFVFRygpO3ZhciBjPXQucmVhZFVFRygpO2lmKDA9PT1jKXQucmVhZFVFRygpO2Vsc2UgaWYoMT09PWMpe3Quc2tpcEJpdHMoMSksdC5za2lwVUVHKCksdC5za2lwVUVHKCk7Zm9yKHZhciBsPXQucmVhZFVFRygpLGY9MDtmPGw7ZisrKXQuc2tpcFVFRygpfXQuc2tpcFVFRygpLHQuc2tpcEJpdHMoMSk7dmFyIGQ9dC5yZWFkVUVHKCksaD10LnJlYWRVRUcoKSxwPXQucmVhZEJpdHMoMSk7MD09PXAmJnQuc2tpcEJpdHMoMSksdC5za2lwQml0cygxKTt2YXIgdix5LG0sZyxrLGI9MCxfPTAsdz0wLHg9MDtpZih0LnJlYWRCb29sKCkmJihiPXQucmVhZFVFRygpLF89dC5yZWFkVUVHKCksdz10LnJlYWRVRUcoKSx4PXQucmVhZFVFRygpKSx0LnJlYWRCb29sKCkpe2lmKHQucmVhZEJvb2woKSlzd2l0Y2godC5yZWFkVUJ5dGUoKSl7Y2FzZSAxOnY9WzEsMV07YnJlYWs7Y2FzZSAyOnY9WzEyLDExXTticmVhaztjYXNlIDM6dj1bMTAsMTFdO2JyZWFrO2Nhc2UgNDp2PVsxNiwxMV07YnJlYWs7Y2FzZSA1OnY9WzQwLDMzXTticmVhaztjYXNlIDY6dj1bMjQsMTFdO2JyZWFrO2Nhc2UgNzp2PVsyMCwxMV07YnJlYWs7Y2FzZSA4OnY9WzMyLDExXTticmVhaztjYXNlIDk6dj1bODAsMzNdO2JyZWFrO2Nhc2UgMTA6dj1bMTgsMTFdO2JyZWFrO2Nhc2UgMTE6dj1bMTUsMTFdO2JyZWFrO2Nhc2UgMTI6dj1bNjQsMzNdO2JyZWFrO2Nhc2UgMTM6dj1bMTYwLDk5XTticmVhaztjYXNlIDE0OnY9WzQsM107YnJlYWs7Y2FzZSAxNTp2PVszLDJdO2JyZWFrO2Nhc2UgMTY6dj1bMiwxXTticmVhaztjYXNlIDI1NTp2PVt0LnJlYWRVQnl0ZSgpPDw4fHQucmVhZFVCeXRlKCksdC5yZWFkVUJ5dGUoKTw8OHx0LnJlYWRVQnl0ZSgpXX1pZih0LnJlYWRCb29sKCkmJnQucmVhZEJvb2woKSx0LnJlYWRCb29sKCkmJih0LnJlYWRCaXRzKDQpLHQucmVhZEJvb2woKSYmdC5yZWFkQml0cygyNCkpLHQucmVhZEJvb2woKSYmKHQucmVhZFVFRygpLHQucmVhZFVFRygpKSx0LnJlYWRCb29sKCkpe3ZhciBTPXQucmVhZEJpdHMoMzIpLEE9dC5yZWFkQml0cygzMik7eT10LnJlYWRCb29sKCksaz0obT1BKS8oZz0yKlMpfX1yZXR1cm57Y29kZWM6cmUoZS5zdWJhcnJheSgxLDQpKSxwcm9maWxlSWRjOnIscHJvZmlsZUNvbXBhdGliaWxpdHk6YSxsZXZlbElkYzpuLGNocm9tYUZvcm1hdDppLHdpZHRoOk1hdGguY2VpbCgxNiooZCsxKS0yKihiK18pKSxoZWlnaHQ6KDItcCkqKGgrMSkqMTYtKHA/Mjo0KSoodyt4KSxzYXJSYXRpbzp2LGZwc051bTptLGZwc0RlbjpnLGZwczprLGZpeGVkRnJhbWU6eX19fV0pLGV9KCksdWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToiZ2V0UmF0ZUluZGV4QnlSYXRlIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5GUkVRLmluZGV4T2YodCl9fSx7a2V5OiJwYXJzZUFEVFMiLHZhbHVlOmZ1bmN0aW9uKHQscil7Zm9yKHZhciBhPXQubGVuZ3RoLG49MDtuKzI8YSYmKDI1NSE9PXRbbl18fDI0MCE9KDI0NiZ0W24rMV0pKTspbisrO2lmKCEobj49YSkpe3ZhciBpPW4scz1bXSxvPSg2MCZ0W24rMl0pPj4+Mix1PWUuRlJFUVtvXTtpZighdSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc2FtcGxpbmcgaW5kZXg6ICIuY29uY2F0KG8pKTtmb3IodmFyIGMsbCxmPTErKCgxOTImdFtuKzJdKT4+PjYpLGQ9KDEmdFtuKzJdKTw8MnwoMTkyJnRbbiszXSk+Pj42LGg9ZS5fZ2V0Q29uZmlnKG8sZCxmKSxwPWguY29uZmlnLHY9aC5jb2RlYyx5PTAsbT1lLmdldEZyYW1lRHVyYXRpb24odSk7bis3PGE7KWlmKDI1NT09PXRbbl0mJjI0MD09KDI0NiZ0W24rMV0pKXtpZighKGw9KDMmdFtuKzNdKTw8MTF8dFtuKzRdPDwzfCgyMjQmdFtuKzVdKT4+NSl8fGEtbjxsKWJyZWFrO2M9MiooMSZ+dFtuKzFdKSxzLnB1c2goe3B0czpyK3kqbSxkYXRhOnQuc3ViYXJyYXkobis3K2MsbitsKX0pLHkrKyxuKz1sfWVsc2UgbisrO3JldHVybntza2lwOmkscmVtYWluaW5nOm4+PWE/dm9pZCAwOnQuc3ViYXJyYXkobiksZnJhbWVzOnMsc2FtcGxpbmdGcmVxdWVuY3lJbmRleDpvLHNhbXBsZVJhdGU6dSxvYmplY3RUeXBlOmYsY2hhbm5lbENvdW50OmQsY29kZWM6dixjb25maWc6cCxvcmlnaW5Db2RlYzoibXA0YS40MC4iLmNvbmNhdChmKX19fX0se2tleToicGFyc2VBdWRpb1NwZWNpZmljQ29uZmlnIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0Lmxlbmd0aCl7dmFyIHI9dFswXT4+PjMsYT0oNyZ0WzBdKTw8MXx0WzFdPj4+NyxuPSgxMjAmdFsxXSk+Pj4zLGk9ZS5GUkVRW2FdO2lmKGkpe3ZhciBzPWUuX2dldENvbmZpZyhhLG4scik7cmV0dXJue3NhbXBsaW5nRnJlcXVlbmN5SW5kZXg6YSxzYW1wbGVSYXRlOmksb2JqZWN0VHlwZTpyLGNoYW5uZWxDb3VudDpuLGNvbmZpZzpzLmNvbmZpZyxjb2RlYzpzLmNvZGVjLG9yaWdpbkNvZGVjOiJtcDRhLjQwLiIuY29uY2F0KHIpfX19fX0se2tleToiZ2V0RnJhbWVEdXJhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjllNDtyZXR1cm4gMTAyNCp0L2V9fSx7a2V5OiJfZ2V0Q29uZmlnIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIGEsbixpPVtdO3JldHVybiBZP2U+PTY/KGE9NSxuPWUtMyk6KGE9MixuPWUpOlo/KGE9MixuPWUpOihhPTI9PT1yfHw1PT09cj9yOjUsbj1lLGU+PTY/bj1lLTM6MT09PXQmJihhPTIsbj1lKSksaVswXT1hPDwzLGlbMF18PSgxNCZlKT4+MSxpWzFdPSgxJmUpPDw3LGlbMV18PXQ8PDMsNT09PWEmJihpWzFdfD0oMTQmbik+PjEsaVsyXT0oMSZuKTw8NyxpWzJdfD04LGlbM109MCkse2NvbmZpZzppLGNvZGVjOiJtcDRhLjQwLiIuY29uY2F0KGEpfX19LHtrZXk6ImdldFNpbGVudEZyYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCJtcDRhLjQwLjIiPT09ZSl7aWYoMT09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzNSwxMjhdKTtpZigyPT09dClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzMzLDAsNzMsMTQ0LDIsMjUsMCwzNSwxMjhdKTtpZigzPT09dClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzAsMjAwLDAsMTI4LDMyLDEzMiwxLDM4LDY0LDgsMTAwLDAsMTQyXSk7aWYoND09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEyOCw0NCwxMjgsOCwyLDU2XSk7aWYoNT09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEzMCw0OCw0LDE1MywwLDMzLDE0NCwyLDU2XSk7aWYoNj09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEzMCw0OCw0LDE1MywwLDMzLDE0NCwyLDAsMTc4LDAsMzIsOCwyMjRdKX1lbHNle2lmKDE9PT10KXJldHVybiBuZXcgVWludDhBcnJheShbMSw2NCwzNCwxMjgsMTYzLDc4LDIzMCwxMjgsMTg2LDgsMCwwLDAsMjgsNiwyNDEsMTkzLDEwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDk0XSk7aWYoMj09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFsxLDY0LDM0LDEyOCwxNjMsOTQsMjMwLDEyOCwxODYsOCwwLDAsMCwwLDE0OSwwLDYsMjQxLDE2MSwxMCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5NF0pO2lmKDM9PT10KXJldHVybiBuZXcgVWludDhBcnJheShbMSw2NCwzNCwxMjgsMTYzLDk0LDIzMCwxMjgsMTg2LDgsMCwwLDAsMCwxNDksMCw2LDI0MSwxNjEsMTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTRdKX19fV0pLGV9KCk7aSh1ZSwiRlJFUSIsWzk2ZTMsODgyMDAsNjRlMyw0OGUzLDQ0MTAwLDMyZTMsMjRlMywyMjA1MCwxNmUzLDEyZTMsMTEwMjUsOGUzLDczNTBdKTt2YXIgY2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsbnVsbCxbe2tleToicGFyc2VIRVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZighKHQubGVuZ3RoPDIzKSl7cj1yfHx7fTtmb3IodmFyIGEsbixpLHMsbyx1PTErKDMmdFsyMV0pLGM9W10sbD1bXSxmPVtdLGQ9MjMsaD10WzIyXSxwPTA7cDxoO3ArKyl7aT02MyZ0W2RdLHM9dFtkKzFdPDw4fHRbZCsyXSxkKz0zO2Zvcih2YXIgdj0wO3Y8czt2KyspaWYobz10W2RdPDw4fHRbZCsxXSxkKz0yLG8pe3N3aXRjaChpKXtjYXNlIDMyOnZhciB5PXQuc3ViYXJyYXkoZCxkK28pO2F8fChhPWUucGFyc2VWUFMoc2UucmVtb3ZlRVBCKHkpLHIpKSxmLnB1c2goeSk7YnJlYWs7Y2FzZSAzMzp2YXIgbT10LnN1YmFycmF5KGQsZCtvKTtufHwobj1lLnBhcnNlU1BTKHNlLnJlbW92ZUVQQihtKSxyKSksYy5wdXNoKG0pO2JyZWFrO2Nhc2UgMzQ6bC5wdXNoKHQuc3ViYXJyYXkoZCxkK28pKX1kKz1vfX1yZXR1cm57aHZjQzpyLHNwczpuLHNwc0FycjpjLHBwc0FycjpsLHZwc0FycjpmLG5hbFVuaXRTaXplOnV9fX19LHtrZXk6InBhcnNlVlBTIix2YWx1ZTpmdW5jdGlvbih0LHIpe3I9cnx8e307dmFyIGE9bmV3IEcodCk7YS5yZWFkVUJ5dGUoKSxhLnJlYWRVQnl0ZSgpLGEucmVhZEJpdHMoMTIpO3ZhciBuPWEucmVhZEJpdHMoMyk7cmV0dXJuIHIubnVtVGVtcG9yYWxMYXllcnM9TWF0aC5tYXgoci5udW1UZW1wb3JhbExheWVyc3x8MCxuKzEpLGEucmVhZEJpdHMoMTcpLGUuX3BhcnNlUHJvZmlsZVRpZXJMZXZlbChhLG4scikscn19LHtrZXk6InBhcnNlU1BTIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cj1yfHx7fTt2YXIgYT1uZXcgRyh0KTthLnJlYWRVQnl0ZSgpLGEucmVhZFVCeXRlKCksYS5yZWFkQml0cyg0KTt2YXIgbj1hLnJlYWRCaXRzKDMpO3IubnVtVGVtcG9yYWxMYXllcnM9TWF0aC5tYXgobisxLHIubnVtVGVtcG9yYWxMYXllcnN8fDApLHIudGVtcG9yYWxJZE5lc3RlZD1hLnJlYWRCaXRzKDEpLGUuX3BhcnNlUHJvZmlsZVRpZXJMZXZlbChhLG4sciksYS5yZWFkVUVHKCk7dmFyIGk9ci5jaHJvbWFGb3JtYXRJZGM9YS5yZWFkVUVHKCkscz00MjA7aTw9MyYmKHM9WzAsNDIwLDQyMiw0NDRdW2ldKTt2YXIgbz0wOzM9PT1pJiYobz1hLnJlYWRCaXRzKDEpKTt2YXIgdSxjLGwsZixkPWEucmVhZFVFRygpLGg9YS5yZWFkVUVHKCkscD1hLnJlYWRCaXRzKDEpO2lmKDE9PT1wJiYodT1hLnJlYWRVRUcoKSxjPWEucmVhZFVFRygpLGw9YS5yZWFkVUVHKCksZj1hLnJlYWRVRUcoKSksci5iaXREZXB0aEx1bWFNaW51czg9YS5yZWFkVUVHKCksci5iaXREZXB0aENocm9tYU1pbnVzOD1hLnJlYWRVRUcoKSwxPT09cCl7dmFyIHY9MSE9PWkmJjIhPT1pfHwwIT09bz8xOjIseT0xPT09aSYmMD09PW8/MjoxO2QtPXYqKGMrdSksaC09eSooZitsKX1yZXR1cm57Y29kZWM6ImhldjEuMS42Lkw5My5CMCIsd2lkdGg6ZCxoZWlnaHQ6aCxjaHJvbWFGb3JtYXQ6cyxodmNDOnJ9fX0se2tleToiX3BhcnNlUHJvZmlsZVRpZXJMZXZlbCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIuZ2VuZXJhbFRpZXJGbGFnfHwwO3IuZ2VuZXJhbFByb2ZpbGVTcGFjZT1lLnJlYWRCaXRzKDIpLHIuZ2VuZXJhbFRpZXJGbGFnPU1hdGgubWF4KGUucmVhZEJpdHMoMSksYSksci5nZW5lcmFsUHJvZmlsZUlkYz1NYXRoLm1heChlLnJlYWRCaXRzKDUpLHIuZ2VuZXJhbFByb2ZpbGVJZGN8fDApLHIuZ2VuZXJhbFByb2ZpbGVDb21wYXRpYmlsaXR5RmxhZ3M9ZS5yZWFkQml0cygzMiksci5nZW5lcmFsQ29uc3RyYWludEluZGljYXRvckZsYWdzPVtlLnJlYWRCaXRzKDgpLGUucmVhZEJpdHMoOCksZS5yZWFkQml0cyg4KSxlLnJlYWRCaXRzKDgpLGUucmVhZEJpdHMoOCksZS5yZWFkQml0cyg4KV07dmFyIG49ZS5yZWFkQml0cyg4KTthPHIuZ2VuZXJhbFRpZXJGbGFnP3IuZ2VuZXJhbExldmVsSWRjPW46ci5nZW5lcmFsTGV2ZWxJZGM9TWF0aC5tYXgobixyLmdlbmVyYWxMZXZlbElkY3x8MCk7dmFyIGk9W10scz1bXTtpZih0PmUuYml0c0F2YWlsYWJsZSl0aHJvdyBuZXcgRXJyb3IoIm1heFN1YkxheWVyc01pbnVzIGluYXZsaWQgc2l6ZSAiLmNvbmNhdCh0KSk7Zm9yKHZhciBvPTA7bzx0O28rKylpW29dPWUucmVhZEJpdHMoMSksc1tvXT1lLnJlYWRCaXRzKDEpO3Q+MCYmZS5yZWFkQml0cygyKig4LXQpKTtmb3IodmFyIHU9MDt1PHQ7dSsrKTAhPT1pW3VdJiYoZS5yZWFkQml0cygyKSxlLnJlYWRCaXRzKDEpLGUucmVhZEJpdHMoNSksZS5yZWFkQml0cygxNiksZS5yZWFkQml0cygxNiksZS5yZWFkQml0cyg0KSxlLnJlYWRCaXRzKDE2KSxlLnJlYWRCaXRzKDE2KSxlLnJlYWRCaXRzKDEyKSksMCE9PXNbdV0mJmUucmVhZEJpdHMoOCl9fV0pLGV9KCksbGU9MWUzLGZlPTVlMyxkZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxhLG4pe3IodGhpcyxlKSx0aGlzLnZpZGVvVHJhY2s9dCx0aGlzLmF1ZGlvVHJhY2s9YSx0aGlzLm1ldGFkYXRhVHJhY2s9bix0aGlzLl9iYXNlRHRzPS0xLHRoaXMuX2Jhc2VEdHNJbml0ZWQ9ITEsdGhpcy5fYXVkaW9OZXh0UHRzPXZvaWQgMCx0aGlzLl92aWRlb05leHREdHM9dm9pZCAwLHRoaXMuX2F1ZGlvVGltZXN0YW1wQnJlYWs9MCx0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrPTAsdGhpcy5fbGFzdFZpZGVvRHVyYXRpb249MCx0aGlzLl9rZXlGcmFtZUluTmV4dENodW5rPSExLHRoaXMuX2xhc3RBdWRpb0V4Y2VwdGlvbkdhcERvdD0tMS8wLHRoaXMuX2xhc3RBdWRpb0V4Y2VwdGlvbk92ZXJsYXBEb3Q9LTEvMCx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25MYXJnZUdhcERvdD0tMS8wLHRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkxhcmdlR2FwRG90PS0xLzAsdGhpcy5fbGFzdFZpZGVvRXhjZXB0aW9uQ2h1bmtGaXJzdER0c0RvdD0tMS8wfXJldHVybiBuKGUsW3trZXk6ImZpeCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAscj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLGE9IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXTt0PU1hdGgucm91bmQoMWUzKnQpO3ZhciBuPXRoaXMudmlkZW9UcmFjayxpPXRoaXMuYXVkaW9UcmFjazshciYmYXx8KHRoaXMuX3ZpZGVvTGFzdFNhbXBsZT1udWxsLHRoaXMuX2F1ZGlvTmV4dFB0cz12b2lkIDAsdGhpcy5fdmlkZW9OZXh0RHRzPXZvaWQgMCx0aGlzLl9hdWRpb1RpbWVzdGFtcEJyZWFrPTAsdGhpcy5fdmlkZW9UaW1lc3RhbXBCcmVhaz0wLHRoaXMuX2xhc3RBdWRpb0V4Y2VwdGlvbkdhcERvdD0tMS8wLHRoaXMuX2xhc3RBdWRpb0V4Y2VwdGlvbk92ZXJsYXBEb3Q9LTEvMCx0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25MYXJnZUdhcERvdD0tMS8wLHRoaXMuX2xhc3RWaWRlb0V4Y2VwdGlvbkxhcmdlR2FwRG90PS0xLzAsdGhpcy5fbGFzdFZpZGVvRXhjZXB0aW9uQ2h1bmtGaXJzdER0c0RvdD0tMS8wKSxyJiYhYSYmKHRoaXMuX2Jhc2VEdHNJbml0ZWQ9ITEpLHRoaXMuX2Jhc2VEdHNJbml0ZWR8fHRoaXMuX2NhbGN1bGF0ZUJhc2VEdHMoaSxuKSwhYSYmdCYmKHRoaXMuX2F1ZGlvTmV4dFB0cz10aGlzLl92aWRlb05leHREdHM9dCk7dmFyIHM9dGhpcy5fYmFzZUR0c0luaXRlZCYmKHRoaXMuX3ZpZGVvVGltZXN0YW1wQnJlYWt8fCF0aGlzLnZpZGVvVHJhY2suZXhpc3QoKSkmJih0aGlzLl9hdWRpb1RpbWVzdGFtcEJyZWFrfHwhdGhpcy5hdWRpb1RyYWNrLmV4aXN0KCkpO2lmKHMmJnRoaXMuX3Jlc2V0QmFzZUR0c1doZW5TdHJlYW1CcmVha2VkKCksdGhpcy5fZml4QXVkaW8oaSksdGhpcy5fa2V5RnJhbWVJbk5leHRDaHVuaz0hMSx0aGlzLl9maXhWaWRlbyhuKSx0aGlzLm1ldGFkYXRhVHJhY2suZXhpc3QoKSl7dmFyIG89dGhpcy5tZXRhZGF0YVRyYWNrLnRpbWVzY2FsZTt0aGlzLm1ldGFkYXRhVHJhY2suc2VpU2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnB0cz10Lm9yaWdpblB0cy1lLl9iYXNlRHRzLHQudGltZT1NYXRoLm1heCgwLHQucHRzKS9vfSkpLHRoaXMubWV0YWRhdGFUcmFjay5mbHZTY3JpcHRTYW1wbGVzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QucHRzPXQub3JpZ2luUHRzLWUuX2Jhc2VEdHMsdC50aW1lPU1hdGgubWF4KDAsdC5wdHMpL299KSl9bi5zYW1wbGVzLmxlbmd0aCYmKG4uYmFzZU1lZGlhRGVjb2RlVGltZT1uLnNhbXBsZXNbMF0uZHRzKSxpLnNhbXBsZXMubGVuZ3RoJiYoaS5iYXNlTWVkaWFEZWNvZGVUaW1lPWkuc2FtcGxlc1swXS5wdHMqaS50aW1lc2NhbGUvMWUzKX19LHtrZXk6Il9maXhWaWRlbyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuc2FtcGxlcztpZihyLmxlbmd0aCl7dmFyIGE7aWYoci5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmR0cy09dC5fYmFzZUR0cyxlLnB0cy09dC5fYmFzZUR0cyxlLmtleWZyYW1lJiYodC5fa2V5RnJhbWVJbk5leHRDaHVuaz0hMCl9KSksZS5mcHNOdW0mJmUuZnBzRGVuKWE9ZS50aW1lc2NhbGUqKGUuZnBzRGVuL2UuZnBzTnVtKTtlbHNlIGlmKGUubGVuZ3RoPjEpe3ZhciBuPWUuc2FtcGxlc1swXSxpPWUuc2FtcGxlc1tyLmxlbmd0aC0xXTthPU1hdGguZmxvb3IoKGkuZHRzLW4uZHRzKS8oci5sZW5ndGgtMSkpfWVsc2UgYT10aGlzLl9sYXN0VmlkZW9EdXJhdGlvbnx8NDA7dmFyIHM9ci5wb3AoKTtpZih0aGlzLl92aWRlb0xhc3RTYW1wbGUmJnIudW5zaGlmdCh0aGlzLl92aWRlb0xhc3RTYW1wbGUpLHRoaXMuX3ZpZGVvTGFzdFNhbXBsZT1zLHIubGVuZ3RoKXtpZih2b2lkIDA9PT10aGlzLl92aWRlb05leHREdHMpe3ZhciBvPXJbMF07dGhpcy5fdmlkZW9OZXh0RHRzPW8uZHRzfXZhciB1PXIubGVuZ3RoLGM9MCxsPXJbMF0sZj10aGlzLl92aWRlb05leHREdHMtbC5kdHM7aWYoTWF0aC5hYnMoZik+MjAwKXt2YXIgZDtpZihNYXRoLmFicyhsLmR0cy10aGlzLl9sYXN0VmlkZW9FeGNlcHRpb25DaHVua0ZpcnN0RHRzRG90KT41ZTMpdGhpcy5fbGFzdFZpZGVvRXhjZXB0aW9uQ2h1bmtGaXJzdER0c0RvdD1sLmR0cyxlLndhcm5pbmdzLnB1c2goe3R5cGU6QyxuZXh0RHRzOnRoaXMuX3ZpZGVvTmV4dER0cyxmaXJzdFNhbXBsZUR0czpsLmR0cyxuZXh0U2FtcGxlRHRzOm51bGw9PT0oZD1yWzFdKXx8dm9pZCAwPT09ZD92b2lkIDA6ZC5kdHMsc2FtcGxlRHVyYXRpb246Zn0pO3RoaXMuX3ZpZGVvVGltZXN0YW1wQnJlYWs+PTU/KHRoaXMuX3ZpZGVvTmV4dER0cz1sLmR0cyx0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrPTApOihsLmR0cys9ZixsLnB0cys9Zix0aGlzLmF1ZGlvVHJhY2suZXhpc3QoKXx8KHRoaXMuX3ZpZGVvVGltZXN0YW1wQnJlYWs9MSkpfWZvcih2YXIgaD0wO2g8dTtoKyspe3ZhciBwPXJbaF0uZHRzLHY9cltoKzFdOygoYz1oPHUtMT92LmR0cy1wOnM/cy5kdHMtcDphKT4xZTN8fGM8MCkmJih0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrKyssTWF0aC5hYnMocC10aGlzLl9sYXN0VmlkZW9FeGNlcHRpb25MYXJnZUdhcERvdCk+NWUzJiYodGhpcy5fbGFzdFZpZGVvRXhjZXB0aW9uTGFyZ2VHYXBEb3Q9cCxlLndhcm5pbmdzLnB1c2goe3R5cGU6VSx0aW1lOnAvZS50aW1lc2NhbGUsZHRzOnAsb3JpZ2luRHRzOnJbaF0ub3JpZ2luRHRzLG5leHREdHM6dGhpcy5fdmlkZW9OZXh0RHRzLHNhbXBsZUR1cmF0aW9uOmMscmVmU2FtcGxlRHVyYXRpb246YX0pKSxjPWEpLHJbaF0uZHVyYXRpb249Yyx0aGlzLl92aWRlb05leHREdHMrPWMsdGhpcy5fbGFzdFZpZGVvRHVyYXRpb249Y319fX19LHtrZXk6Il9maXhBdWRpbyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuc2FtcGxlcztyLmxlbmd0aCYmKHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5kdHM9ZS5wdHMtPXQuX2Jhc2VEdHN9KSksdGhpcy5fZG9GaXhBdWRpb0ludGVybmFsKGUsciwxZTMpKX19LHtrZXk6Il9jYWxjdWxhdGVCYXNlRHRzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUuc2FtcGxlcyxhPXQuc2FtcGxlcztpZighci5sZW5ndGgmJiFhLmxlbmd0aClyZXR1cm4hMTt2YXIgbj0xLzAsaT0xLzA7ci5sZW5ndGgmJihlLmJhc2VEdHM9bj1yWzBdLnB0cyksYS5sZW5ndGgmJih0LmJhc2VEdHM9aT1hWzBdLmR0cyksdGhpcy5fYmFzZUR0cz1NYXRoLm1pbihuLGkpO3ZhciBzPWktbjtyZXR1cm4gTnVtYmVyLmlzRmluaXRlKHMpJiZNYXRoLmFicyhzKT41MDAmJnQud2FybmluZ3MucHVzaCh7dHlwZTpULHZpZGVvQmFzZUR0czppLGF1ZGlvQmFzZVB0czpuLGJhc2VEdHM6dGhpcy5fYmFzZUR0cyxkZWx0YTpzfSksdGhpcy5fYmFzZUR0c0luaXRlZD0hMCwhMH19LHtrZXk6Il9yZXNldEJhc2VEdHNXaGVuU3RyZWFtQnJlYWtlZCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jYWxjdWxhdGVCYXNlRHRzKHRoaXMuYXVkaW9UcmFjayx0aGlzLnZpZGVvVHJhY2spJiYodGhpcy5hdWRpb1RyYWNrLmV4aXN0KCk/dGhpcy52aWRlb1RyYWNrLmV4aXN0KCk/dGhpcy5fYmFzZUR0cy09TWF0aC5taW4odGhpcy5fYXVkaW9OZXh0UHRzLHRoaXMuX3ZpZGVvTmV4dER0cyk6dGhpcy5fYmFzZUR0cy09dGhpcy5fYXVkaW9OZXh0UHRzOnRoaXMuX2Jhc2VEdHMtPXRoaXMuX3ZpZGVvTmV4dER0cyx0aGlzLl92aWRlb1RpbWVzdGFtcEJyZWFrPTAsdGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhaz0wKX19LHtrZXk6Il9kb0ZpeEF1ZGlvSW50ZXJuYWwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtlLnNhbXBsZUR1cmF0aW9ufHwoZS5zYW1wbGVEdXJhdGlvbj1lLmNvZGVjVHlwZT09PUQ/dWUuZ2V0RnJhbWVEdXJhdGlvbihlLnRpbWVzY2FsZSxyKTp0aGlzLl9nZXRHNzExRHVyYXRpb24oZSkpO3ZhciBhPWUuc2FtcGxlRHVyYXRpb24sbj1lLmNvZGVjVHlwZT09PUQ/MTAyNDphKmUudGltZXNjYWxlLzFlMztpZih2b2lkIDA9PT10aGlzLl9hdWRpb05leHRQdHMpe3ZhciBpPXRbMF07dGhpcy5fYXVkaW9OZXh0UHRzPWkucHRzfWZvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXt2YXIgbz10aGlzLl9hdWRpb05leHRQdHMsdT10W3NdLGM9dS5wdHMtbztpZigwPT09cyYmdGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhaz49NSYmdGhpcy5fa2V5RnJhbWVJbk5leHRDaHVuayYmKG89dGhpcy5fYXVkaW9OZXh0UHRzPXUuZHRzLGM9MCx0aGlzLl9hdWRpb1RpbWVzdGFtcEJyZWFrPTApLCF0aGlzLl9hdWRpb1RpbWVzdGFtcEJyZWFrJiZjPj0zKmEmJmM8PWxlJiYhWCl7dmFyIGw9dGhpcy5fZ2V0U2lsZW50RnJhbWUoZSl8fHRbMF0uZGF0YS5zdWJhcnJheSgpLGY9TWF0aC5mbG9vcihjL2EpO01hdGguYWJzKHUucHRzLXRoaXMuX2xhc3RBdWRpb0V4Y2VwdGlvbkdhcERvdCk+ZmUmJih0aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25HYXBEb3Q9dS5wdHMsZS53YXJuaW5ncy5wdXNoKHt0eXBlOkkscHRzOnUucHRzLG9yaWdpblB0czp1Lm9yaWdpblB0cyxjb3VudDpmLG5leHRQdHM6byxyZWZTYW1wbGVEdXJhdGlvbjphfSkpO2Zvcih2YXIgZD0wO2Q8ZjtkKyspe3ZhciBoPW5ldyBMKE1hdGguZmxvb3IodGhpcy5fYXVkaW9OZXh0UHRzK2EpLU1hdGguZmxvb3IodGhpcy5fYXVkaW9OZXh0UHRzKSxsLG4pO2gub3JpZ2luUHRzPU1hdGguZmxvb3IodGhpcy5fYmFzZUR0cytvKSx0LnNwbGljZShzLDAsaCksdGhpcy5fYXVkaW9OZXh0UHRzKz1hLHMrK31zLS19ZWxzZSBjPD0tMyphJiZjPj0tMWUzPyhNYXRoLmFicyh1LnB0cy10aGlzLl9sYXN0QXVkaW9FeGNlcHRpb25PdmVybGFwRG90KT5mZSYmKHRoaXMuX2xhc3RBdWRpb0V4Y2VwdGlvbk92ZXJsYXBEb3Q9dS5wdHMsZS53YXJuaW5ncy5wdXNoKHt0eXBlOk0scHRzOnUucHRzLG9yaWdpblB0czp1Lm9yaWdpblB0cyxuZXh0UHRzOm8scmVmU2FtcGxlRHVyYXRpb246YX0pKSx0LnNwbGljZShzLDEpLHMtLSk6KE1hdGguYWJzKGMpPmxlJiYodGhpcy5fYXVkaW9UaW1lc3RhbXBCcmVhaysrLE1hdGguYWJzKHUucHRzLXRoaXMuX2xhc3RBdWRpb0V4Y2VwdGlvbkxhcmdlR2FwRG90KT5mZSYmKHRoaXMuX2xhc3RBdWRpb0V4Y2VwdGlvbkxhcmdlR2FwRG90PXUucHRzLGUud2FybmluZ3MucHVzaCh7dHlwZTpQLHRpbWU6dS5wdHMvMWUzLHB0czp1LnB0cyxvcmlnaW5QdHM6dS5vcmlnaW5QdHMsbmV4dFB0czpvLHNhbXBsZUR1cmF0aW9uOmMscmVmU2FtcGxlRHVyYXRpb246YX0pKSksdS5kdHM9dS5wdHM9byx1LmR1cmF0aW9uPW4sdGhpcy5fYXVkaW9OZXh0UHRzKz1hKX19fSx7a2V5OiJfZ2V0RzcxMUR1cmF0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNhbXBsZVNpemUscj1lLmNoYW5uZWxDb3VudCxhPWUuc2FtcGxlUmF0ZSxuPWUuc2FtcGxlc1swXTtpZihuKXJldHVybiAyKm4uZGF0YS5ieXRlTGVuZ3RoL3IvKHQvOCkvYSoxZTN9fSx7a2V5OiJfZ2V0U2lsZW50RnJhbWUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvZGVjVHlwZT09PUQ/dWUuZ2V0U2lsZW50RnJhbWUoZS5jb2RlYyxlLmNoYW5uZWxDb3VudCk6bmV3IFVpbnQ4QXJyYXkoOCplLnNhbXBsZUR1cmF0aW9uKmUuY2hhbm5lbENvdW50KX19XSksZX0oKSxoZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSl9cmV0dXJuIG4oZSxudWxsLFt7a2V5OiJwYXJzZSIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0Lmxlbmd0aDwzKSl7dmFyIHI9e30sYT1lLl9wYXJzZVZhbHVlKG5ldyBEYXRhVmlldyh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKSksbj1lLl9wYXJzZVZhbHVlKG5ldyBEYXRhVmlldyh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrYS5zaXplLHQuYnl0ZUxlbmd0aC1hLnNpemUpKTtyZXR1cm4gclthLmRhdGFdPW4uZGF0YSxyfX19LHtrZXk6Il9wYXJzZVZhbHVlIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcixhPXQuYnl0ZUxlbmd0aCxuPTEsaT0hMTtzd2l0Y2godC5nZXRVaW50OCgwKSl7Y2FzZSAwOnI9dC5nZXRGbG9hdDY0KDEpLG4rPTg7YnJlYWs7Y2FzZSAxOnI9ISF0LmdldFVpbnQ4KDEpLG4rPTE7YnJlYWs7Y2FzZSAyOnZhciBzPWUuX3BhcnNlU3RyaW5nKG5ldyBEYXRhVmlldyh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbix0LmJ5dGVMZW5ndGgtbikpO3I9cy5kYXRhLG4rPXMuc2l6ZTticmVhaztjYXNlIDM6cj17fTt2YXIgbz0wO2Zvcig5PT0oMTY3NzcyMTUmdC5nZXRVaW50MzIoYS00KSkmJihvPTMpO248YS00Oyl7dmFyIHU9ZS5fcGFyc2VPYmplY3QobmV3IERhdGFWaWV3KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCtuLHQuYnl0ZUxlbmd0aC1uLW8pKSxjPXUuc2l6ZSxsPXUuZGF0YTtpZih1LmlzRW5kKWJyZWFrO3JbbC5uYW1lXT1sLnZhbHVlLG4rPWN9aWYobjw9YS0zKTk9PT0oMTY3NzcyMTUmdC5nZXRVaW50MzIobi0xKSkmJihuKz0zKTticmVhaztjYXNlIDg6cj17fSxuKz00O3ZhciBmPTA7Zm9yKDk9PSgxNjc3NzIxNSZ0LmdldFVpbnQzMihhLTQpKSYmKGY9Myk7bjxhLTg7KXt2YXIgZD1lLl9wYXJzZU9iamVjdChuZXcgRGF0YVZpZXcodC5idWZmZXIsdC5ieXRlT2Zmc2V0K24sdC5ieXRlTGVuZ3RoLW4tZikpLGg9ZC5zaXplLHA9ZC5kYXRhO2lmKGQuaXNFbmQpYnJlYWs7cltwLm5hbWVdPXAudmFsdWUsbis9aH1pZihuPD1hLTMpOT09PSgxNjc3NzIxNSZ0LmdldFVpbnQzMihuLTEpKSYmKG4rPTMpO2JyZWFrO2Nhc2UgOTpyPXZvaWQgMCxuPTEsaT0hMDticmVhaztjYXNlIDEwOnI9W107dmFyIHY9dC5nZXRVaW50MzIoMSk7bis9NDtmb3IodmFyIHk9MDt5PHY7eSsrKXt2YXIgbT1lLl9wYXJzZVZhbHVlKG5ldyBEYXRhVmlldyh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrbix0LmJ5dGVMZW5ndGgtbikpLGc9bS5kYXRhLGs9bS5zaXplO3IucHVzaChnKSxuKz1rfWJyZWFrO2Nhc2UgMTE6dmFyIGI9dC5nZXRGbG9hdDY0KG4pKzZlNCp0LmdldEludDE2KG4rOCk7cj1uZXcgRGF0ZShiKSxuKz0xMDticmVhaztjYXNlIDEyOnZhciBfPXQuZ2V0VWludDMyKDEpO24rPTQscj0iIixfPjAmJihyPUsuZGVjb2RlKG5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCtuLF8pKSksbis9XzticmVhaztkZWZhdWx0Om49YX1yZXR1cm57ZGF0YTpyLHNpemU6bixpc0VuZDppfX19LHtrZXk6Il9wYXJzZVN0cmluZyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRVaW50MTYoMCkscj0iIjtyZXR1cm4gdD4wJiYocj1LLmRlY29kZShuZXcgVWludDhBcnJheShlLmJ1ZmZlcixlLmJ5dGVPZmZzZXQrMix0KSkpLHtkYXRhOnIsc2l6ZToyK3R9fX0se2tleToiX3BhcnNlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbih0KXtpZighKHQuYnl0ZUxlbmd0aDwzKSl7dmFyIHI9ZS5fcGFyc2VTdHJpbmcodCksYT1lLl9wYXJzZVZhbHVlKG5ldyBEYXRhVmlldyh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQrci5zaXplLHQuYnl0ZUxlbmd0aC1yLnNpemUpKTtyZXR1cm57ZGF0YTp7bmFtZTpyLmRhdGEsdmFsdWU6YS5kYXRhfSxzaXplOnIuc2l6ZSthLnNpemUsaXNFbmQ6YS5pc0VuZH19fX1dKSxlfSgpLHBlPW5ldyBIKCJGbHZEZW11eGVyIiksdmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSxuKXtyKHRoaXMsZSksaSh0aGlzLCJfaGVhZGVyUGFyc2VkIiwhMSksaSh0aGlzLCJfcmVtYWluaW5nRGF0YSIsbnVsbCksaSh0aGlzLCJfZ29wSWQiLDApLGkodGhpcywiX25lZWRBZGRNZXRhQmVmb3JlS2V5RnJhbWVOYWwiLCEwKSx0aGlzLnZpZGVvVHJhY2s9dHx8bmV3IHosdGhpcy5hdWRpb1RyYWNrPWF8fG5ldyBPLHRoaXMubWV0YWRhdGFUcmFjaz1ufHxuZXcgaix0aGlzLl9maXhlcj1uZXcgZGUodGhpcy52aWRlb1RyYWNrLHRoaXMuYXVkaW9UcmFjayx0aGlzLm1ldGFkYXRhVHJhY2spfXJldHVybiBuKGUsW3trZXk6ImRlbXV4Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLGE9IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSxuPXRoaXMuYXVkaW9UcmFjayxpPXRoaXMudmlkZW9UcmFjayxzPXRoaXMubWV0YWRhdGFUcmFjaztpZighciYmYXx8KHRoaXMuX3JlbWFpbmluZ0RhdGE9bnVsbCksciYmKHRoaXMuX2hlYWRlclBhcnNlZD0hMSkscj8oaS5yZXNldCgpLG4ucmVzZXQoKSxzLnJlc2V0KCkpOihpLnNhbXBsZXM9W10sbi5zYW1wbGVzPVtdLHMuc2VpU2FtcGxlcz1bXSxzLmZsdlNjcmlwdFNhbXBsZXM9W10saS53YXJuaW5ncz1bXSxuLndhcm5pbmdzPVtdLHRoaXMuX3JlbWFpbmluZ0RhdGEmJih0PVEodGhpcy5fcmVtYWluaW5nRGF0YSx0KSx0aGlzLl9yZW1haW5pbmdEYXRhPW51bGwpKSwhdC5sZW5ndGgpcmV0dXJue3ZpZGVvVHJhY2s6aSxhdWRpb1RyYWNrOm4sbWV0YWRhdGFUcmFjazpzfTt2YXIgbz0wO2lmKCF0aGlzLl9oZWFkZXJQYXJzZWQpe2lmKCFlLnByb2JlKHQpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBmbHYgZmlsZSIpO24ucHJlc2VudD0oNCZ0WzRdKT4+PjIhPTAsaS5wcmVzZW50PTAhPSgxJnRbNF0pLHRoaXMuX2hlYWRlclBhcnNlZD0hMCxvPWVlKHQsNSkrNH1mb3IodmFyIHUsYyxsLGYsZCxoPXQubGVuZ3RoO28rMTU8aCYmKHU9dFtvXSwhKG8rMTUrKGM9dFtvKzFdPDwxNnx0W28rMl08PDh8dFtvKzNdKT5oKSk7KWw9KHRbbys3XTw8MjQ+Pj4wKSsodFtvKzRdPDwxNikrKHRbbys1XTw8OCkrdFtvKzZdLG8rPTExLGY9dC5zdWJhcnJheShvLG8rYyksOD09PXU/dGhpcy5fcGFyc2VBdWRpbyhmLGwpOjk9PT11P3RoaXMuX3BhcnNlVmlkZW8oZixsKToxOD09PXU/dGhpcy5fcGFyc2VTY3JpcHQoZixsKTpwZS53YXJuKCJJbnZhbGlkIHRhZyB0eXBlOiAiLmNvbmNhdCh1KSksKGQ9ZWUodCxvKz1jKSkhPT0xMStjJiZwZS53YXJuKCJJbnZhbGlkIFByZXZUYWdTaXplICIuY29uY2F0KGQsIiAoIikuY29uY2F0KDExK2MsIikiKSksbys9NDtyZXR1cm4gbzxoJiYodGhpcy5fcmVtYWluaW5nRGF0YT10LnN1YmFycmF5KG8pKSxuLmZvcm1hdFRpbWVzY2FsZT1pLmZvcm1hdFRpbWVzY2FsZT1pLnRpbWVzY2FsZT1zLnRpbWVzY2FsZT0xZTMsbi50aW1lc2NhbGU9bi5zYW1wbGVSYXRlfHwwLCFuLmV4aXN0KCkmJm4uaGFzU2FtcGxlKCkmJm4ucmVzZXQoKSwhaS5leGlzdCgpJiZpLmhhc1NhbXBsZSgpJiZpLnJlc2V0KCkse3ZpZGVvVHJhY2s6aSxhdWRpb1RyYWNrOm4sbWV0YWRhdGFUcmFjazpzfX19LHtrZXk6ImZpeCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLl9maXhlci5maXgoZSx0LHIpLHt2aWRlb1RyYWNrOnRoaXMudmlkZW9UcmFjayxhdWRpb1RyYWNrOnRoaXMuYXVkaW9UcmFjayxtZXRhZGF0YVRyYWNrOnRoaXMubWV0YWRhdGFUcmFja319fSx7a2V5OiJkZW11eEFuZEZpeCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7cmV0dXJuIHRoaXMuZGVtdXgoZSx0LHIpLHRoaXMuZml4KGEsdCxyKX19LHtrZXk6Il9wYXJzZUF1ZGlvIix2YWx1ZTpmdW5jdGlvbih0LHIpe2lmKHQubGVuZ3RoKXt2YXIgYT0oMjQwJnRbMF0pPj4+NCxuPXRoaXMuYXVkaW9UcmFjaztpZigxMCE9PWEmJjchPT1hJiY4IT09YSlyZXR1cm4gcGUud2FybigiVW5zdXBwb3J0ZWQgc291bmQgZm9ybWF0OiAiLmNvbmNhdChhKSksdm9pZCBuLnJlc2V0KCk7aWYoMTAhPT1hKXt2YXIgaT0oMTImdFswXSk+PjIscz0oMiZ0WzBdKT4+MSxvPTEmdFswXTtuLnNhbXBsZVJhdGU9ZS5BVURJT19SQVRFW2ldLG4uc2FtcGxlU2l6ZT1zPzE2Ojgsbi5jaGFubmVsQ291bnQ9bysxfTEwPT09YT90aGlzLl9wYXJzZUFhYyh0LHIpOnRoaXMuX3BhcnNlRzcxMSh0LHIsYSl9fX0se2tleToiX3BhcnNlRzcxMSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXRoaXMuYXVkaW9UcmFjazthLmNvZGVjVHlwZT03PT09cj9COkUsYS5zYW1wbGVSYXRlPThlMyxhLmNvZGVjPWEuY29kZWNUeXBlLGEuc2FtcGxlcy5wdXNoKG5ldyBMKHQsZS5zdWJhcnJheSgxKSkpfX0se2tleToiX3BhcnNlQWFjIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuYXVkaW9UcmFjaztpZihyLmNvZGVjVHlwZT1ELDA9PT1lWzFdKXt2YXIgYT11ZS5wYXJzZUF1ZGlvU3BlY2lmaWNDb25maWcoZS5zdWJhcnJheSgyKSk7YT8oci5jb2RlYz1hLmNvZGVjLHIuY2hhbm5lbENvdW50PWEuY2hhbm5lbENvdW50LHIuc2FtcGxlUmF0ZT1hLnNhbXBsZVJhdGUsci5jb25maWc9YS5jb25maWcsci5vYmplY3RUeXBlPWEub2JqZWN0VHlwZSxyLnNhbXBsZVJhdGVJbmRleD1hLnNhbXBsaW5nRnJlcXVlbmN5SW5kZXgpOihyLnJlc2V0KCkscGUud2FybigiQ2Fubm90IHBhcnNlIEF1ZGlvU3BlY2lmaWNDb25maWciLGUpKX1lbHNlIGlmKDE9PT1lWzFdKXtpZihudWxsPT10KXJldHVybjtyLnNhbXBsZXMucHVzaChuZXcgTCh0LGUuc3ViYXJyYXkoMikpKX1lbHNlIHBlLndhcm4oIlVua25vd24gQUFDUGFja2V0VHlwZTogIi5jb25jYXQoZVsxXSkpfX0se2tleToiX3BhcnNlVmlkZW8iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZighKGUubGVuZ3RoPDYpKXt2YXIgYT0oMjQwJmVbMF0pPj4+NCxuPTE1JmVbMF0saT10aGlzLnZpZGVvVHJhY2s7aWYoNyE9PW4mJjEyIT09bilyZXR1cm4gaS5yZXNldCgpLHZvaWQgcGUud2FybigiVW5zdXBwb3J0ZWQgY29kZWNJZDogIi5jb25jYXQobikpO3ZhciBzPTEyPT09bjtpLmNvZGVjVHlwZT1zP0E6Uzt2YXIgbz1lWzFdLHU9KGVbMl08PDE2fGVbM108PDh8ZVs0XSk8PDg+Pjg7aWYoMD09PW8pe3ZhciBjPWUuc3ViYXJyYXkoNSksbD1zP2NlLnBhcnNlSEVWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGMpOm9lLnBhcnNlQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQoYyk7aWYobCl7dmFyIGY9bC5odmNDLGQ9bC5zcHMsaD1sLnBwc0FycixwPWwuc3BzQXJyLHY9bC52cHNBcnIseT1sLm5hbFVuaXRTaXplO2YmJihpLmh2Y0M9aS5odmNDfHxmKSxkJiYoaS5jb2RlYz1kLmNvZGVjLGkud2lkdGg9ZC53aWR0aCxpLmhlaWdodD1kLmhlaWdodCxpLnNhclJhdGlvPWQuc2FyUmF0aW8saS5mcHNOdW09ZC5mcHNOdW0saS5mcHNEZW49ZC5mcHNEZW4pLHAubGVuZ3RoJiYoaS5zcHM9cCksaC5sZW5ndGgmJihpLnBwcz1oKSx2JiZ2Lmxlbmd0aCYmKGkudnBzPXYpLHkmJihpLm5hbFVuaXRTaXplPXkpfWVsc2UgcGUud2FybigiQ2Fubm90IHBhcnNlICIuY29uY2F0KHM/IkhFVkMiOiJBVkMiLCJEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCIpLGUpfWVsc2UgaWYoMT09PW8pe3ZhciBtPXNlLnBhcnNlQXZjQyhlLnN1YmFycmF5KDUpLGkubmFsVW5pdFNpemUpO2lmKChtPXRoaXMuX2NoZWNrQWRkTWV0YU5hbFRvVW5pdHMocyxtLGkpKSYmbS5sZW5ndGgpe3ZhciBnPW5ldyBSKHQrdSx0LG0pOzE9PT1hJiZnLnNldFRvS2V5ZnJhbWUoKSxpLnNhbXBsZXMucHVzaChnKSxtLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBhPXM/ZVswXT4+PjEmNjM6MzEmZVswXTtzd2l0Y2goYSl7Y2FzZSA1OmNhc2UgMTY6Y2FzZSAxNzpjYXNlIDE4OmNhc2UgMTk6Y2FzZSAyMDpjYXNlIDIxOmNhc2UgMjI6Y2FzZSAyMzppZighcyYmNSE9PWF8fHMmJjU9PT1hKWJyZWFrO2cuc2V0VG9LZXlmcmFtZSgpO2JyZWFrO2Nhc2UgNjpjYXNlIDM5OmNhc2UgNDA6aWYoIXMmJjYhPT1hfHxzJiY2PT09YSlicmVhaztyLm1ldGFkYXRhVHJhY2suc2VpU2FtcGxlcy5wdXNoKG5ldyBOKHNlLnBhcnNlU0VJKHNlLnJlbW92ZUVQQihlKSxzKSx0K3UpKX19KSksZy5rZXlmcmFtZSYmdGhpcy5fZ29wSWQrKyxnLmdvcElkPXRoaXMuX2dvcElkfWVsc2UgcGUud2FybigiQ2Fubm90IHBhcnNlIE5BTFVzIixlKX1lbHNlIDI9PT1vfHxwZS53YXJuKCJVbmtub3duIEFWQ1BhY2tldFR5cGU6ICIuY29uY2F0KG8pKX19fSx7a2V5OiJfY2hlY2tBZGRNZXRhTmFsVG9Vbml0cyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlJiZ0aGlzLl9uZWVkQWRkTWV0YUJlZm9yZUtleUZyYW1lTmFsP3QubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZVswXT4+PjEmNjN9KSkuaW5jbHVkZXMoMzIpPyh0aGlzLl9uZWVkQWRkTWV0YUJlZm9yZUtleUZyYW1lTmFsPSExLHQpOih0LnVuc2hpZnQoci5wcHNbMF0pLHQudW5zaGlmdChyLnNwc1swXSksdC51bnNoaWZ0KHIudnBzWzBdKSx0LmZpbHRlcihCb29sZWFuKSk6KHRoaXMuX25lZWRBZGRNZXRhQmVmb3JlS2V5RnJhbWVOYWw9ITEsdCl9fSx7a2V5OiJfcGFyc2VTY3JpcHQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5tZXRhZGF0YVRyYWNrLmZsdlNjcmlwdFNhbXBsZXMucHVzaChuZXcgRihoZS5wYXJzZShlKSx0KSl9fV0sW3trZXk6InByb2JlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gNzA9PT1lWzBdJiY3Nj09PWVbMV0mJjg2PT09ZVsyXSYmMT09PWVbM10mJmVlKGUsNSk+PTl9fV0pLGV9KCk7aSh2ZSwiQVVESU9fUkFURSIsWzU1MDAsMTFlMywyMmUzLDQ0ZTNdKSxuZXcgSCgiVHNEZW11eGVyIik7dmFyIHllPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEsbil7cih0aGlzLGUpLHRoaXMuZHY9bmV3IERhdGFWaWV3KHQpLHRoaXMuc3RhcnQ9dGhpcy5vZmZzZXQ9YXx8dGhpcy5kdi5ieXRlT2Zmc2V0LHRoaXMuZW5kPW4/dGhpcy5zdGFydCtuOnRoaXMuc3RhcnQrdGhpcy5kdi5ieXRlTGVuZ3RofXJldHVybiBuKGUsW3trZXk6ImJ1ZmZlciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHYuYnVmZmVyfX0se2tleToidW5yZWFkTGVuZ3RoIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgodGhpcy5lbmQtdGhpcy5vZmZzZXQsMCl9fSx7a2V5OiJzaXplIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmQtdGhpcy5zdGFydH19LHtrZXk6InJlYWRGbG9hdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9MDtzd2l0Y2goZSl7Y2FzZSA0OnQ9dGhpcy5kdi5nZXRGbG9hdDMyKHRoaXMub2Zmc2V0KTticmVhaztjYXNlIDg6dD10aGlzLmR2LmdldEZsb2F0NjQodGhpcy5vZmZzZXQpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJyZWFkICIuY29uY2F0KGUsIi1ieXRlIGZsb2F0IGlzIG5vdCBzdXBwb3J0ZWQiKSl9cmV0dXJuIHRoaXMub2Zmc2V0Kz1lLHR9fSx7a2V5OiJiYWNrIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLm9mZnNldC09ZX19LHtrZXk6InNraXAiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMub2Zmc2V0Kz1lfX0se2tleToicmVhZEludCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vZmZzZXQ7c3dpdGNoKHRoaXMub2Zmc2V0Kz1lLGUpe2Nhc2UgMTpyZXR1cm4gdGhpcy5kdi5nZXRJbnQ4KHQpO2Nhc2UgMjpyZXR1cm4gdGhpcy5kdi5nZXRJbnQxNih0KTtjYXNlIDQ6cmV0dXJuIHRoaXMuZHYuZ2V0SW50MzIodCk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoInJlYWQgIi5jb25jYXQoZSwiLWJ5dGUgaW50ZWdlcnMgaXMgbm90IHN1cHBvcnRlZCIpKX19fSx7a2V5OiJyZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9mZnNldDtzd2l0Y2godGhpcy5vZmZzZXQrPWUsZSl7Y2FzZSAxOnJldHVybiB0aGlzLmR2LmdldFVpbnQ4KHQpO2Nhc2UgMjpyZXR1cm4gdGhpcy5kdi5nZXRVaW50MTYodCk7Y2FzZSAzOnJldHVybih0aGlzLmR2LmdldFVpbnQxNih0KTw8OCkrdGhpcy5kdi5nZXRVaW50OCh0KzIpO2Nhc2UgNDpyZXR1cm4gdGhpcy5kdi5nZXRVaW50MzIodCk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5iYWNrKGUtNCksdGhpcy5yZWFkKGUtNCkrdGhpcy5kdi5nZXRVaW50MzIodCkqTWF0aC5wb3coMjU2LGUtNCl9fX0se2tleToid3JpdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5vZmZzZXQ7c3dpdGNoKHRoaXMub2Zmc2V0Kz1lLGUpe2Nhc2UgMTpyZXR1cm4gdGhpcy5kdi5zZXRVaW50OChyLHQpO2Nhc2UgMjpyZXR1cm4gdGhpcy5kdi5zZXRVaW50MTYocix0KTtjYXNlIDM6cmV0dXJuIHRoaXMuZHYuc2V0VWludDgocix0Pj4+MTYpLHRoaXMuZHYuc2V0VWludDE2KHIrMSw2NTUzNSZ0KTtjYXNlIDQ6cmV0dXJuIHRoaXMuZHYuc2V0VWludDMyKHIsdCk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIndyaXRlICIuY29uY2F0KGUsIi1ieXRlIGludGVnZXJzIGlzIG5vdCBzdXBwb3J0ZWQiKSl9fX0se2tleToicmVhZFRvQnVmZmVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdD10aGlzLm9mZnNldHx8ZT90aGlzLmR2LmJ1ZmZlci5zbGljZSh0aGlzLm9mZnNldCxlP3RoaXMub2Zmc2V0K2U6dGhpcy5lbmQpOnRoaXMuZHYuYnVmZmVyLHRoaXMub2Zmc2V0Kz10LmJ5dGVMZW5ndGgsdH19LHtrZXk6InJlYWRUb1VpbnQ4Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgVWludDhBcnJheSh0aGlzLmR2LmJ1ZmZlcix0aGlzLm9mZnNldCxlfHx0aGlzLnVucmVhZExlbmd0aCk7cmV0dXJuIHRoaXMub2Zmc2V0Kz10LmJ5dGVMZW5ndGgsdH19LHtrZXk6InJlYWRTdHJpbmciLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9IiI7dDxlO3QrKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuZHYuZ2V0VWludDgodGhpcy5vZmZzZXQpKSx0aGlzLm9mZnNldCsrO3JldHVybiByfX1dLFt7a2V5OiJmcm9tVWludDgiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKX19LHtrZXk6ImNvbmNhdFVpbnQ4cyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdC5ieXRlTGVuZ3RofSksMCkpLHI9MDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LnNldChlLHIpLHIrPWUuYnl0ZUxlbmd0aH0pKSx0fX0se2tleToiY29uY2F0VWludDgiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuIHRoaXMuY29uY2F0VWludDhzKHQpfX1dKSxlfSgpLG1lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEpe3IodGhpcyxlKSx0aGlzLm9mZnNldD0wLHRoaXMudmFsPXQsdGhpcy5zaXplPWF9cmV0dXJuIG4oZSxbe2tleToic2tpcCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5vZmZzZXQrPWV9fSx7a2V5OiJyZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNpemUtdGhpcy5vZmZzZXQtZTtpZih0Pj0wKXt2YXIgcj0wLGE9MDtpZih0aGlzLm9mZnNldCs9ZSx0aGlzLnNpemU+MzEpe2Zvcig7YTxlO2ErKylyKz1NYXRoLnBvdygyLGEpO3JldHVybiB0aGlzLnZhbC9NYXRoLnBvdygyLHQpJnJ9Zm9yKDthPGU7YSsrKXIrPTE8PGE7cmV0dXJuIHRoaXMudmFsPj4+dCZyfXRocm93IG5ldyBFcnJvcigidGhlIG51bWJlciBvZiB0aGUgcmVhZCBvcGVyYXRpb24gZXhjZWVkcyB0aGUgdG90YWwgbGVuZ3RoIGxpbWl0IG9mIGJpdHMiKX19XSxbe2tleToiZnJvbUJ5dGUiLHZhbHVlOmZ1bmN0aW9uKHQscil7cmV0dXJuIG5ldyBlKHQucmVhZChyKSxyPDwzKX19XSksZX0oKSxnZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSl9cmV0dXJuIG4oZSxudWxsLFt7a2V5OiJmaW5kQm94Iix2YWx1ZTpmdW5jdGlvbih0LHIpe3ZhciBhPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTowLG49W107aWYoIXQpcmV0dXJuIG47Zm9yKHZhciBpPTAscz0iIixvPTA7dC5sZW5ndGg+Nzspe2lmKGk9ZWUodCkscz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdC5zdWJhcnJheSg0LDgpKSxvPTgsMT09PWk/KGk9dGUodCw4KSxvKz04KTppfHwoaT10Lmxlbmd0aCksIXJbMF18fHM9PT1yWzBdKXt2YXIgdT10LnN1YmFycmF5KDAsaSk7aWYoIShyLmxlbmd0aDwyKSlyZXR1cm4gZS5maW5kQm94KHUuc3ViYXJyYXkobyksci5zbGljZSgxKSxhK28pO24ucHVzaCh7c3RhcnQ6YSxzaXplOmksaGVhZGVyU2l6ZTpvLHR5cGU6cyxkYXRhOnV9KX1hKz1pLHQ9dC5zdWJhcnJheShpKX1yZXR1cm4gbn19LHtrZXk6InRmaGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe2UudHJhY2tJZD1lZSh0KTt2YXIgcj00LGE9MSZlLmZsYWdzLG49MiZlLmZsYWdzLGk9OCZlLmZsYWdzLHM9MTYmZS5mbGFncyxvPTMyJmUuZmxhZ3M7YSYmKHIrPTQsZS5iYXNlRGF0YU9mZnNldD1lZSh0LHIpLHIrPTQpLG4mJihlLnNhbXBsZURlc2NyaXB0aW9uSW5kZXg9ZWUodCxyKSxyKz00KSxpJiYoZS5kZWZhdWx0U2FtcGxlRHVyYXRpb249ZWUodCxyKSxyKz00KSxzJiYoZS5kZWZhdWx0U2FtcGxlU2l6ZT1lZSh0LHIpLHIrPTQpLG8mJihlLmRlZmF1bHRTYW1wbGVGbGFncz1lZSh0LHIpKX0pKX19LHtrZXk6InNpZHgiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPTA7ZS5yZWZlcmVuY2VfSUQ9ZWUodCxyKSxyKz00LGUudGltZXNjYWxlPWVlKHQscikscis9NCwwPT09ZS52ZXJzaW9uPyhlLmVhcmxpZXN0X3ByZXNlbnRhdGlvbl90aW1lPWVlKHQscikscis9NCxlLmZpcnN0X29mZnNldD1lZSh0LHIpLHIrPTQpOihlLmVhcmxpZXN0X3ByZXNlbnRhdGlvbl90aW1lPXRlKHQscikscis9OCxlLmZpcnN0X29mZnNldD10ZSh0LHIpLHIrPTgpLHIrPTIsZS5yZWZlcmVuY2VzPVtdO3ZhciBhPSQodCxyKTtyKz0yO2Zvcih2YXIgbj0wO248YTtuKyspe3ZhciBpPXt9O2UucmVmZXJlbmNlcy5wdXNoKGkpO3ZhciBzPWVlKHQscik7cis9NCxpLnJlZmVyZW5jZV90eXBlPXM+PjMxJjEsaS5yZWZlcmVuY2VkX3NpemU9MjE0NzQ4MzY0NyZzLGkuc3Vic2VnbWVudF9kdXJhdGlvbj1lZSh0LHIpLHM9ZWUodCxyKz00KSxyKz00LGkuc3RhcnRzX3dpdGhfU0FQPXM+PjMxJjEsaS5TQVBfdHlwZT1zPj4yOCY3LGkuU0FQX2RlbHRhX3RpbWU9MjY4NDM1NDU1JnN9fSkpfX0se2tleToibW9vdiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0Lm12aGQ9ZS5tdmhkKGUuZmluZEJveChyLFsibXZoZCJdLGEpWzBdKSx0LnRyYWs9ZS5maW5kQm94KHIsWyJ0cmFrIl0sYSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZS50cmFrKHQpfSkpLHQucHNzaD1lLnBzc2goZS5maW5kQm94KHIsWyJwc3NoIl0sYSlbMF0pfSkpfX0se2tleToibXZoZCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7dmFyIHI9MDsxPT09ZS52ZXJzaW9uPyhlLnRpbWVzY2FsZT1lZSh0LDE2KSxlLmR1cmF0aW9uPXRlKHQsMjApLHIrPTI4KTooZS50aW1lc2NhbGU9ZWUodCw4KSxlLmR1cmF0aW9uPWVlKHQsMTIpLHIrPTE2KSxlLm5leHRUcmFja0lkPWVlKHQscis3Nil9KSl9fSx7a2V5OiJ0cmFrIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gd2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QudGtoZD1lLnRraGQoZS5maW5kQm94KHIsWyJ0a2hkIl0sYSlbMF0pLHQubWRpYT1lLm1kaWEoZS5maW5kQm94KHIsWyJtZGlhIl0sYSlbMF0pfSkpfX0se2tleToidGtoZCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7dmFyIHI9eWUuZnJvbVVpbnQ4KHQpOzE9PT1lLnZlcnNpb24/KHIucmVhZCg4KSxyLnJlYWQoOCksZS50cmFja0lkPXIucmVhZCg0KSxyLnJlYWQoNCksZS5kdXJhdGlvbj1yLnJlYWQoOCkpOihyLnJlYWQoNCksci5yZWFkKDQpLGUudHJhY2tJZD1yLnJlYWQoNCksci5yZWFkKDQpLGUuZHVyYXRpb249ci5yZWFkKDQpKSxyLnNraXAoMTYpLGUubWF0cml4PVtdO2Zvcih2YXIgYT0wO2E8MzY7YSsrKWUubWF0cml4LnB1c2goci5yZWFkKDEpKTtyLmJhY2soMzYpO2Zvcih2YXIgbixpPVtdLHM9MDtzPDM7cysrKWkucHVzaChpZShyLnJlYWRJbnQoMiksci5yZWFkSW50KDIpKSksaS5wdXNoKGllKHIucmVhZEludCgyKSxyLnJlYWRJbnQoMikpKSxuPXIucmVhZEludCg0KSxpLnB1c2goaWUobj4+MzAsMTA3Mzc0MTgyMyZuKSk7ZS5yb3RhdGlvbj1mdW5jdGlvbihlKXtpZihlLmxlbmd0aDw1KXJldHVybiAwO3ZhciB0PU1hdGguaHlwb3QoZVswXSxlWzNdKSxyPU1hdGguaHlwb3QoZVsxXSxlWzRdKTtyZXR1cm4gMD09PXR8fDA9PT1yPzA6MTgwKk1hdGguYXRhbjIoZVsxXS9yLGVbMF0vdCkvTWF0aC5QSX0oaSksZS53aWR0aD1yLnJlYWQoNCksZS5oZWlnaHQ9ci5yZWFkKDQpfSkpfX0se2tleToibWRpYSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0Lm1kaGQ9ZS5tZGhkKGUuZmluZEJveChyLFsibWRoZCJdLGEpWzBdKSx0LmhkbHI9ZS5oZGxyKGUuZmluZEJveChyLFsiaGRsciJdLGEpWzBdKSx0Lm1pbmY9ZS5taW5mKGUuZmluZEJveChyLFsibWluZiJdLGEpWzBdKX0pKX19LHtrZXk6Im1kaGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPTA7MT09PWUudmVyc2lvbj8oZS50aW1lc2NhbGU9ZWUodCwxNiksZS5kdXJhdGlvbj10ZSh0LDIwKSxyKz0yOCk6KGUudGltZXNjYWxlPWVlKHQsOCksZS5kdXJhdGlvbj1lZSh0LDEyKSxyKz0xNik7dmFyIGE9JCh0LHIpO2UubGFuZ3VhZ2U9U3RyaW5nLmZyb21DaGFyQ29kZSg5NisoYT4+MTAmMzEpLDk2KyhhPj41JjMxKSw5NisoMzEmYSkpfSkpfX0se2tleToiaGRsciIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHdlKGUsITAsKGZ1bmN0aW9uKGUsdCl7MD09PWUudmVyc2lvbiYmKGUuaGFuZGxlclR5cGU9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQuc3ViYXJyYXkoNCw4KSkpfSkpfX0se2tleToibWluZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LnZtaGQ9ZS52bWhkKGUuZmluZEJveChyLFsidm1oZCJdLGEpWzBdKSx0LnNtaGQ9ZS5zbWhkKGUuZmluZEJveChyLFsic21oZCJdLGEpWzBdKSx0LnN0Ymw9ZS5zdGJsKGUuZmluZEJveChyLFsic3RibCJdLGEpWzBdKX0pKX19LHtrZXk6InZtaGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe2UuZ3JhcGhpY3Ntb2RlPSQodCksZS5vcGNvbG9yPVskKHQsMiksJCh0LDQpLCQodCw2KV19KSl9fSx7a2V5OiJzbWhkIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtlLmJhbGFuY2U9JCh0KX0pKX19LHtrZXk6InN0YmwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB3ZSh0LCExLChmdW5jdGlvbih0LHIsYSl7dmFyIG4saSxzO3Quc3RzZD1lLnN0c2QoZS5maW5kQm94KHIsWyJzdHNkIl0sYSlbMF0pLHQuc3R0cz1lLnN0dHMoZS5maW5kQm94KHIsWyJzdHRzIl0sYSlbMF0pLHQuY3R0cz1lLmN0dHMoZS5maW5kQm94KHIsWyJjdHRzIl0sYSlbMF0pLHQuc3RzYz1lLnN0c2MoZS5maW5kQm94KHIsWyJzdHNjIl0sYSlbMF0pLHQuc3Rzej1lLnN0c3ooZS5maW5kQm94KHIsWyJzdHN6Il0sYSlbMF0pLHQuc3Rjbz1lLnN0Y28oZS5maW5kQm94KHIsWyJzdGNvIl0sYSlbMF0pLHQuc3Rjb3x8KHQuY282ND1lLmNvNjQoZS5maW5kQm94KHIsWyJjbzY0Il0sYSlbMF0pLHQuc3Rjbz10LmNvNjQpO3ZhciBvPW51bGw9PT0obj10LnN0c2QuZW50cmllc1swXSl8fHZvaWQgMD09PW58fG51bGw9PT0oaT1uLnNpbmYpfHx2b2lkIDA9PT1pfHxudWxsPT09KHM9aS5zY2hpKXx8dm9pZCAwPT09cz92b2lkIDA6cy50ZW5jLmRlZmF1bHRfSVZfc2l6ZTt0LnN0c3M9ZS5zdHNzKGUuZmluZEJveChyLFsic3RzcyJdLGEpWzBdKSx0LnNlbmM9ZS5zZW5jKGUuZmluZEJveChyLFsic2VuYyJdLGEpWzBdLG8pfSkpfX0se2tleToic2VuYyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjg7cmV0dXJuIHdlKGUsITAsKGZ1bmN0aW9uKGUscil7dmFyIGE9MCxuPWVlKHIsYSk7YSs9NCxlLnNhbXBsZXM9W107Zm9yKHZhciBpPTA7aTxuO2krKyl7Zm9yKHZhciBzPXtJbml0aWFsaXphdGlvblZlY3RvcjpbXX0sbz0wO288dDtvKyspcy5Jbml0aWFsaXphdGlvblZlY3RvcltvXT1yW2Erb107aWYoYSs9dCwyJmUuZmxhZ3Mpe3Muc3Vic2FtcGxlcz1bXTt2YXIgdT0kKHIsYSk7YSs9Mjtmb3IodmFyIGM9MDtjPHU7YysrKXt2YXIgbD17fTtsLkJ5dGVzT2ZDbGVhckRhdGE9JChyLGEpLGErPTIsbC5CeXRlc09mUHJvdGVjdGVkRGF0YT1lZShyLGEpLGErPTQscy5zdWJzYW1wbGVzLnB1c2gobCl9fWUuc2FtcGxlcy5wdXNoKHMpfX0pKX19LHtrZXk6InBzc2giLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxhPVtdLG49MCxpPTA7aTwxNjtpKyspYS5wdXNoKFNlKHRbbitpXSkpO2lmKG4rPTE2LGUudmVyc2lvbj4wKXt2YXIgcz1lZSh0LG4pO24rPTQ7Zm9yKHZhciBvPTA7bzwoIiIrcykubGVuZ3RoO28rKylmb3IodmFyIHU9MDt1PDE2O3UrKyl7dmFyIGM9dFtuXTtuKz0xLHIucHVzaChTZShjKSl9fXZhciBsPWVlKHQsbik7ZS5kYXRhX3NpemU9bCxuKz00LGUua2lkPXIsZS5zeXN0ZW1faWQ9YSxlLmJ1ZmZlcj10fSkpfX0se2tleToic3RzZCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHdlKHQsITAsKGZ1bmN0aW9uKHQscixhKXt0LmVudHJ5Q291bnQ9ZWUociksdC5lbnRyaWVzPWUuZmluZEJveChyLnN1YmFycmF5KDQpLFtdLGErNCkubWFwKChmdW5jdGlvbih0KXtzd2l0Y2godC50eXBlKXtjYXNlImF2MDEiOnJldHVybiBlLmF2MDEodCk7Y2FzZSJhdmMxIjpjYXNlImF2YzIiOmNhc2UiYXZjMyI6Y2FzZSJhdmM0IjpyZXR1cm4gZS5hdmMxKHQpO2Nhc2UiaHZjMSI6Y2FzZSJoZXYxIjpyZXR1cm4gZS5odmMxKHQpO2Nhc2UibXA0YSI6cmV0dXJuIGUubXA0YSh0KTtjYXNlImFsYXciOmNhc2UidWxhdyI6cmV0dXJuIGUuYWxhdyh0KTtjYXNlImVuY2EiOnJldHVybiB3ZSh0LCExLChmdW5jdGlvbih0LHIsYSl7dC5jaGFubmVsQ291bnQ9JChyLDE2KSx0LnNhbXBsZXNpemU9JChyLDE4KSx0LnNhbXBsZVJhdGU9ZWUociwyNCkvNjU1MzYscj1yLnN1YmFycmF5KDI4KSx0LnNpbmY9ZS5zaW5mKGUuZmluZEJveChyLFsic2luZiJdLGEpWzBdKSx0LmVzZHM9ZS5lc2RzKGUuZmluZEJveChyLFsiZXNkcyJdLGEpWzBdKX0pKTtjYXNlImVuY3YiOnJldHVybiB3ZSh0LCExLChmdW5jdGlvbih0LHIsYSl7dC53aWR0aD0kKHIsMjQpLHQuaGVpZ2h0PSQociwyNiksdC5ob3JpenJlc29sdXRpb249ZWUociwyOCksdC52ZXJ0cmVzb2x1dGlvbj1lZShyLDMyKSxyPXIuc3ViYXJyYXkoNzgpLHQuc2luZj1lLnNpbmYoZS5maW5kQm94KHIsWyJzaW5mIl0sYSlbMF0pLHQuYXZjQz1lLmF2Y0MoZS5maW5kQm94KHIsWyJhdmNDIl0sYSlbMF0pLHQuaHZjQz1lLmh2Y0MoZS5maW5kQm94KHIsWyJodmNDIl0sYSlbMF0pLHQucGFzcD1lLnBhc3AoZS5maW5kQm94KHIsWyJwYXNwIl0sYSlbMF0pfSkpfX0pKS5maWx0ZXIoQm9vbGVhbil9KSl9fSx7a2V5OiJ0ZW5jIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMSwoZnVuY3Rpb24oZSx0KXt2YXIgcj02O2UuZGVmYXVsdF9Jc0VuY3J5cHRlZD10W3JdLHIrPTEsZS5kZWZhdWx0X0lWX3NpemU9dFtyXSxyKz0xLGUuZGVmYXVsdF9LSUQ9W107Zm9yKHZhciBhPTA7YTwxNjthKyspZS5kZWZhdWx0X0tJRC5wdXNoKFNlKHRbcl0pKSxyKz0xfSkpfX0se2tleToic2NoaSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LnRlbmM9ZS50ZW5jKGUuZmluZEJveChyLFsidGVuYyJdLGEpWzBdKX0pKX19LHtrZXk6InNpbmYiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB3ZSh0LCExLChmdW5jdGlvbih0LHIsYSl7dC5zY2hpPWUuc2NoaShlLmZpbmRCb3gocixbInNjaGkiXSxhKVswXSksdC5mcm1hPWUuZnJtYShlLmZpbmRCb3gocixbImZybWEiXSxhKVswXSl9KSl9fSx7a2V5OiJmcm1hIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMSwoZnVuY3Rpb24oZSx0KXtlLmRhdGFfZm9ybWF0PSIiO2Zvcih2YXIgcj0wO3I8NDtyKyspZS5kYXRhX2Zvcm1hdCs9U3RyaW5nLmZyb21DaGFyQ29kZSh0W3JdKX0pKX19LHtrZXk6ImNvbHIiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCExLChmdW5jdGlvbih0LHIpe3ZhciBhPXllLmZyb21VaW50OChyKTt0LmRhdGE9ZS5kYXRhLHQuY29sb3JUeXBlPWEucmVhZFN0cmluZyg0KSwibmNseCI9PT10LmNvbG9yVHlwZT8odC5jb2xvclByaW1hcmllcz1hLnJlYWQoMiksdC50cmFuc2ZlckNoYXJhY3RlcmlzdGljcz1hLnJlYWQoMiksdC5tYXRyaXhDb2VmZmljaWVudHM9YS5yZWFkKDIpLHQuZnVsbFJhbmdlRmxhZz1hLnJlYWQoMSk+PjcpOiJySUNDIiE9PXQuY29sb3JUeXBlJiYicHJvZiIhPT10LmNvbG9yVHlwZXx8KHQuaWNjUHJvZmlsZT1yLnJlYWRUb1VpbnQ4KCkpfSkpfX0se2tleToiYXYwMSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt2YXIgbj1iZSh0LHIpLGk9ci5zdWJhcnJheShuKTthKz1uLHQuYXYxQz1lLmF2MUMoZS5maW5kQm94KGksWyJhdjFDIl0sYSlbMF0pLHQuY29scj1lLmNvbHIoZS5maW5kQm94KGksWyJjb2xyIl0sYSlbMF0pfSkpfX0se2tleToiYXYxQyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHdlKGUsITEsKGZ1bmN0aW9uKHQscil7dC5kYXRhPWUuZGF0YTt2YXIgYSxuPXllLmZyb21VaW50OChyKSxpPW1lLmZyb21CeXRlKG4sNCk7dC5tYXJrZXI9aS5yZWFkKDEpLHQudmVyc2lvbj1pLnJlYWQoNyksdC5zZXFQcm9maWxlPWkucmVhZCgzKSx0LnNlcUxldmVsSWR4MD1pLnJlYWQoNSksdC5zZXFUaWVyMD1pLnJlYWQoMSksdC5oaWdoQml0ZGVwdGg9aS5yZWFkKDEpLHQudHdlbHZlQml0PWkucmVhZCgxKSx0Lm1vbm9jaHJvbWU9aS5yZWFkKDEpLHQuY2hyb21hU3Vic2FtcGxpbmdYPWkucmVhZCgxKSx0LmNocm9tYVN1YnNhbXBsaW5nWT1pLnJlYWQoMSksdC5jaHJvbWFTYW1wbGVQb3NpdGlvbj1pLnJlYWQoMiksdC5yZXNlcnZlZD1pLnJlYWQoMyksdC5pbml0aWFsUHJlc2VudGF0aW9uRGVsYXlQcmVzZW50PWkucmVhZCgxKSx0LmluaXRpYWxQcmVzZW50YXRpb25EZWxheVByZXNlbnQ/dC5pbml0aWFsUHJlc2VudGF0aW9uRGVsYXlNaW51c09uZT1pLnJlYWQoNCk6dC5pbml0aWFsUHJlc2VudGF0aW9uRGVsYXlNaW51c09uZT0wLHQuY29uZmlnT0JVcz1uLnJlYWRUb1VpbnQ4KCksMj09PXQuc2VxTGV2ZWxJZHgwJiYxPT09dC5oaWdoQml0ZGVwdGg/YT0xPT09dC50d2VsdmVCaXQ/IjEyIjoiMTAiOnQuc2VxUHJvZmlsZTw9MiYmKGE9MT09PXQuaGlnaEJpdGRlcHRoPyIxMCI6IjA4IiksdC5jb2RlYz1bImF2MDEiLHQuc2VxUHJvZmlsZSwodC5zZXFMZXZlbElkeDA8MTA/IjAiK3Quc2VxTGV2ZWxJZHgwOnQuc2VxTGV2ZWxJZHgwKSsodC5zZXFUaWVyMD8iSCI6Ik0iKSxhXS5qb2luKCIuIil9KSl9fSx7a2V5OiJhdmMxIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gd2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3ZhciBuPWJlKHQsciksaT1yLnN1YmFycmF5KG4pO2ErPW4sdC5hdmNDPWUuYXZjQyhlLmZpbmRCb3goaSxbImF2Y0MiXSxhKVswXSksdC5wYXNwPWUucGFzcChlLmZpbmRCb3goaSxbInBhc3AiXSxhKVswXSl9KSl9fSx7a2V5OiJhdmNDIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMSwoZnVuY3Rpb24odCxyKXt0LmRhdGE9ZS5kYXRhLHQuY29uZmlndXJhdGlvblZlcnNpb249clswXSx0LkFWQ1Byb2ZpbGVJbmRpY2F0aW9uPXJbMV0sdC5wcm9maWxlQ29tcGF0aWJpbGl0eT1yWzJdLHQuQVZDTGV2ZWxJbmRpY2F0aW9uPXJbM10sdC5jb2RlYz1yZShbclsxXSxyWzJdLHJbM11dKSx0Lmxlbmd0aFNpemVNaW51c09uZT0zJnJbNF0sdC5zcHNMZW5ndGg9MzEmcls1XSx0LnNwcz1bXTtmb3IodmFyIGE9NixuPTA7bjx0LnNwc0xlbmd0aDtuKyspe3ZhciBpPSQocixhKTthKz0yLHQuc3BzLnB1c2goci5zdWJhcnJheShhLGEraSkpLGErPWl9dC5wcHNMZW5ndGg9clthXSxhKz0xLHQucHBzPVtdO2Zvcih2YXIgcz0wO3M8dC5wcHNMZW5ndGg7cysrKXt2YXIgbz0kKHIsYSk7YSs9Mix0LnBwcy5wdXNoKHIuc3ViYXJyYXkoYSxhKz1vKSksYSs9b319KSl9fSx7a2V5OiJodmMxIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gd2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3ZhciBuPWJlKHQsciksaT1yLnN1YmFycmF5KG4pO2ErPW4sdC5odmNDPWUuaHZjQyhlLmZpbmRCb3goaSxbImh2Y0MiXSxhKVswXSksdC5wYXNwPWUucGFzcChlLmZpbmRCb3goaSxbInBhc3AiXSxhKVswXSl9KSl9fSx7a2V5OiJodmNDIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMSwoZnVuY3Rpb24odCxyKXt0LmRhdGE9ZS5kYXRhLHQuY29kZWM9ImhldjEuMS42Lkw5My5CMCIsdC5jb25maWd1cmF0aW9uVmVyc2lvbj1yWzBdO3ZhciBhPXJbMV07dC5nZW5lcmFsUHJvZmlsZVNwYWNlPWE+PjYsdC5nZW5lcmFsVGllckZsYWc9KDMyJmEpPj41LHQuZ2VuZXJhbFByb2ZpbGVJZGM9MzEmYSx0LmdlbmVyYWxQcm9maWxlQ29tcGF0aWJpbGl0eT1lZShyLDIpLHQuZ2VuZXJhbENvbnN0cmFpbnRJbmRpY2F0b3JGbGFncz1yLnN1YmFycmF5KDYsMTIpLHQuZ2VuZXJhbExldmVsSWRjPXJbMTJdLHQuYXZnRnJhbWVSYXRlPSQociwxOSksdC5udW1PZkFycmF5cz1yWzIyXSx0LnZwcz1bXSx0LnNwcz1bXSx0LnBwcz1bXTtmb3IodmFyIG49MjMsaT0wLHM9MCxvPTAsdT0wO3U8dC5udW1PZkFycmF5czt1Kyspe2k9NjMmcltuXSxzPSQocixuKzEpLG4rPTM7Zm9yKHZhciBjLGw9W10sZj0wO2Y8cztmKyspbz0kKHIsbiksbis9MixsLnB1c2goci5zdWJhcnJheShuLG4rbykpLG4rPW87aWYoMzI9PT1pKShjPXQudnBzKS5wdXNoLmFwcGx5KGMsbCk7ZWxzZSBpZigzMz09PWkpe3ZhciBkOyhkPXQuc3BzKS5wdXNoLmFwcGx5KGQsbCl9ZWxzZSBpZigzND09PWkpe3ZhciBoOyhoPXQucHBzKS5wdXNoLmFwcGx5KGgsbCl9fX0pKX19LHtrZXk6InBhc3AiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCExLChmdW5jdGlvbihlLHQpe2UuaFNwYWNpbmc9ZWUodCksZS52U3BhY2luZz1lZSh0LDQpfSkpfX0se2tleToibXA0YSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt2YXIgbj1fZSh0LHIpO3QuZXNkcz1lLmVzZHMoZS5maW5kQm94KHIuc3ViYXJyYXkobiksWyJlc2RzIl0sYStuKVswXSl9KSl9fSx7a2V5OiJlc2RzIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtlLmNvZGVjPSJtcDRhLiI7Zm9yKHZhciByPTAsYT0wLG49MCxpPTA7dC5sZW5ndGg7KXtmb3IoaT10W3I9MF0sYT10W3IrMV0scis9MjsxMjgmYTspbj0oMTI3JmEpPDw3LGE9dFtyXSxyKz0xO2lmKG4rPTEyNyZhLDM9PT1pKXQ9dC5zdWJhcnJheShyKzMpO2Vsc2V7aWYoNCE9PWkpe2lmKDU9PT1pKXt2YXIgcz1lLmNvbmZpZz10LnN1YmFycmF5KHIscituKSxvPSgyNDgmc1swXSk+PjM7cmV0dXJuIDMxPT09byYmcy5sZW5ndGg+PTImJihvPTMyKygoNyZzWzBdKTw8MykrKCgyMjQmc1sxXSk+PjUpKSxlLm9iamVjdFR5cGU9byxlLmNvZGVjKz1vLnRvU3RyaW5nKDE2KSx2b2lkKCIuIj09PWUuY29kZWNbZS5jb2RlYy5sZW5ndGgtMV0mJihlLmNvZGVjPWUuY29kZWMuc3Vic3RyaW5nKDAsZS5jb2RlYy5sZW5ndGgtMSkpKX1yZXR1cm4gdm9pZCgiLiI9PT1lLmNvZGVjW2UuY29kZWMubGVuZ3RoLTFdJiYoZS5jb2RlYz1lLmNvZGVjLnN1YnN0cmluZygwLGUuY29kZWMubGVuZ3RoLTEpKSl9ZS5jb2RlYys9KHRbcl0udG9TdHJpbmcoMTYpKyIuIikucGFkU3RhcnQoMywiMCIpLHQ9dC5zdWJhcnJheShyKzEzKX19fSkpfX0se2tleToiYWxhdyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHdlKGUsITEsKGZ1bmN0aW9uKGUsdCl7X2UoZSx0KX0pKX19LHtrZXk6InN0dHMiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lZSh0KSxhPVtdLG49NCxpPTA7aTxyO2krKylhLnB1c2goe2NvdW50OmVlKHQsbiksZGVsdGE6ZWUodCxuKzQpfSksbis9ODtlLmVudHJ5Q291bnQ9cixlLmVudHJpZXM9YX0pKX19LHtrZXk6ImN0dHMiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPWVlKHQpLGE9W10sbj00O2lmKDE9PT1lLnZlcnNpb24pZm9yKHZhciBpPTA7aTxyO2krKylhLnB1c2goe2NvdW50OmVlKHQsbiksb2Zmc2V0OmVlKHQsbis0KX0pLG4rPTg7ZWxzZSBmb3IodmFyIHM9MDtzPHI7cysrKWEucHVzaCh7Y291bnQ6ZWUodCxuKSxvZmZzZXQ6LSgxK35lZSh0LG4rNCkpfSksbis9ODtlLmVudHJ5Q291bnQ9cixlLmVudHJpZXM9YX0pKX19LHtrZXk6InN0c2MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lZSh0KSxhPVtdLG49NCxpPTA7aTxyO2krKylhLnB1c2goe2ZpcnN0Q2h1bms6ZWUodCxuKSxzYW1wbGVzUGVyQ2h1bms6ZWUodCxuKzQpLHNhbXBsZURlc2NyaXB0aW9uSW5kZXg6ZWUodCxuKzgpfSksbis9MTI7ZS5lbnRyeUNvdW50PXIsZS5lbnRyaWVzPWF9KSl9fSx7a2V5OiJzdHN6Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMCwoZnVuY3Rpb24oZSx0KXt2YXIgcj1lZSh0KSxhPWVlKHQsNCksbj1bXTtpZighcilmb3IodmFyIGk9OCxzPTA7czxhO3MrKyluLnB1c2goZWUodCxpKSksaSs9NDtlLnNhbXBsZVNpemU9cixlLnNhbXBsZUNvdW50PWEsZS5lbnRyeVNpemVzPW59KSl9fSx7a2V5OiJzdGNvIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZWUodCksYT1bXSxuPTQsaT0wO2k8cjtpKyspYS5wdXNoKGVlKHQsbikpLG4rPTQ7ZS5lbnRyeUNvdW50PXIsZS5lbnRyaWVzPWF9KSl9fSx7a2V5OiJjbzY0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZWUodCksYT1bXSxuPTQsaT0wO2k8cjtpKyspYS5wdXNoKHRlKHQsbikpLG4rPTg7ZS5lbnRyeUNvdW50PXIsZS5lbnRyaWVzPWF9KSl9fSx7a2V5OiJzdHNzIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZWUodCksYT1bXSxuPTQsaT0wO2k8cjtpKyspYS5wdXNoKGVlKHQsbikpLG4rPTQ7ZS5lbnRyeUNvdW50PXIsZS5lbnRyaWVzPWF9KSl9fSx7a2V5OiJtb29mIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gd2UodCwhMSwoZnVuY3Rpb24odCxyLGEpe3QubWZoZD1lLm1maGQoZS5maW5kQm94KHIsWyJtZmhkIl0sYSlbMF0pLHQudHJhZj1lLmZpbmRCb3gocixbInRyYWYiXSxhKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWYodCl9KSl9KSl9fSx7a2V5OiJtZmhkIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMCwoZnVuY3Rpb24oZSx0KXtlLnNlcXVlbmNlTnVtYmVyPWVlKHQpfSkpfX0se2tleToidHJhZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHdlKHQsITEsKGZ1bmN0aW9uKHQscixhKXt0LnRmaGQ9ZS50ZmhkKGUuZmluZEJveChyLFsidGZoZCJdLGEpWzBdKSx0LnRmZHQ9ZS50ZmR0KGUuZmluZEJveChyLFsidGZkdCJdLGEpWzBdKSx0LnRydW49ZS50cnVuKGUuZmluZEJveChyLFsidHJ1biJdLGEpWzBdKX0pKX19LHtrZXk6InRydW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB3ZShlLCEwLChmdW5jdGlvbihlLHQpe3ZhciByPWUudmVyc2lvbixhPWUuZmxhZ3Msbj10Lmxlbmd0aCxpPWUuc2FtcGxlQ291bnQ9ZWUodCkscz00O2lmKG4+cyYmMSZhJiYoZS5kYXRhT2Zmc2V0PS0oMSt+ZWUodCxzKSkscys9NCksbj5zJiY0JmEmJihlLmZpcnN0U2FtcGxlRmxhZ3M9ZWUodCxzKSxzKz00KSxlLnNhbXBsZXM9W10sbj5zKWZvcih2YXIgbyx1PTA7dTxpO3UrKylvPXt9LDI1NiZhJiYoby5kdXJhdGlvbj1lZSh0LHMpLHMrPTQpLDUxMiZhJiYoby5zaXplPWVlKHQscykscys9NCksMTAyNCZhJiYoby5mbGFncz1lZSh0LHMpLHMrPTQpLDIwNDgmYSYmKG8uY3RzPXI/LSgxK35lZSh0LHMrNCkpOmVlKHQscykscys9NCksZS5zYW1wbGVzLnB1c2gobyl9KSl9fSx7a2V5OiJ0ZmR0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gd2UoZSwhMCwoZnVuY3Rpb24oZSx0KXsxPT09ZS52ZXJzaW9uP2UuYmFzZU1lZGlhRGVjb2RlVGltZT10ZSh0KTplLmJhc2VNZWRpYURlY29kZVRpbWU9ZWUodCl9KSl9fSx7a2V5OiJwcm9iZSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISFlLmZpbmRCb3godCxbImZ0eXAiXSl9fSx7a2V5OiJwYXJzZVNhbXBsZUZsYWdzIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm57aXNMZWFkaW5nOigxMiZlWzBdKT4+PjIsZGVwZW5kc09uOjMmZVswXSxpc0RlcGVuZGVkT246KDE5MiZlWzFdKT4+PjYsaGFzUmVkdW5kYW5jeTooNDgmZVsxXSk+Pj40LHBhZGRpbmdWYWx1ZTooMTQmZVsxXSk+Pj4xLGlzTm9uU3luY1NhbXBsZToxJmVbMV0sZGVncmFkYXRpb25Qcmlvcml0eTplWzJdPDw4fGVbM119fX0se2tleToibW9vdlRvVHJhY2siLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgYSxuLGk9ZS50cmFrO2lmKGkmJmkubGVuZ3RoKXt2YXIgcz1pLmZpbmQoKGZ1bmN0aW9uKGUpe3ZhciB0LHI7cmV0dXJuInZpZGUiPT09KG51bGw9PT0odD1lLm1kaWEpfHx2b2lkIDA9PT10fHxudWxsPT09KHI9dC5oZGxyKXx8dm9pZCAwPT09cj92b2lkIDA6ci5oYW5kbGVyVHlwZSl9KSksbz1pLmZpbmQoKGZ1bmN0aW9uKGUpe3ZhciB0LHI7cmV0dXJuInNvdW4iPT09KG51bGw9PT0odD1lLm1kaWEpfHx2b2lkIDA9PT10fHxudWxsPT09KHI9dC5oZGxyKXx8dm9pZCAwPT09cj92b2lkIDA6ci5oYW5kbGVyVHlwZSl9KSk7aWYocyYmdCl7dmFyIHUsYyxsLGYsZCxoLHAsdj10LHk9bnVsbD09PSh1PXMudGtoZCl8fHZvaWQgMD09PXU/dm9pZCAwOnUudHJhY2tJZDtudWxsIT15JiYodi5pZD1zLnRraGQudHJhY2tJZCksdi50a2hkRHVyYXRpb249cy50a2hkLmR1cmF0aW9uLHYubXZoZER1cnRpb249ZS5tdmhkLmR1cmF0aW9uLHYubXZoZFRpbWVjYWxlPWUubXZoZC50aW1lc2NhbGUsdi50aW1lc2NhbGU9di5mb3JtYXRUaW1lc2NhbGU9cy5tZGlhLm1kaGQudGltZXNjYWxlLHYuZHVyYXRpb249cy5tZGlhLm1kaGQuZHVyYXRpb258fHYubXZoZER1cnRpb24vdi5tdmhkVGltZWNhbGUqdi50aW1lc2NhbGUsdi5yb3RhdGlvbj1zLnRraGQucm90YXRpb24sdi5tYXRyaXg9cy50a2hkLm1hdHJpeDt2YXIgbSxnLGssYixfLHcsUyxELFQ9cy5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbMF07aWYodi53aWR0aD1ULndpZHRoLHYuaGVpZ2h0PVQuaGVpZ2h0LFQucGFzcCYmKHYuc2FyUmF0aW89W1QucGFzcC5oU3BhY2luZyxULnBhc3AudlNwYWNpbmddKSxULmF2MUMpdi5jb2RlY1R5cGU9eCx2LmNvZGVjPVQuYXYxQy5jb2RlYyx2LmF2MUM9VC5hdjFDLmRhdGEsdi5jb2xyPVQuY29sci5kYXRhO2Vsc2UgaWYoVC5odmNDKXYuY29kZWNUeXBlPUEsdi5jb2RlYz1ULmh2Y0MuY29kZWMsdi52cHM9VC5odmNDLnZwcyx2LnNwcz1ULmh2Y0Muc3BzLHYucHBzPVQuaHZjQy5wcHMsdi5odmNDPVQuaHZjQy5kYXRhO2Vsc2V7aWYoIVQuYXZjQyl0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdmlkZW8gc3RzZCBlbnRyeSIpO3YuY29kZWM9VC5hdmNDLmNvZGVjLHYuc3BzPVQuYXZjQy5zcHMsdi5wcHM9VC5hdmNDLnBwc31pZih2LnByZXNlbnQ9ITAsdi5leHQ9e30sdi5leHQuc3Rzcz1udWxsPT09KGM9cy5tZGlhKXx8dm9pZCAwPT09Y3x8bnVsbD09PShsPWMubWluZil8fHZvaWQgMD09PWx8fG51bGw9PT0oZj1sLnN0YmwpfHx2b2lkIDA9PT1mP3ZvaWQgMDpmLnN0c3Msdi5leHQuY3R0cz1udWxsPT09KGQ9cy5tZGlhKXx8dm9pZCAwPT09ZHx8bnVsbD09PShoPWQubWluZil8fHZvaWQgMD09PWh8fG51bGw9PT0ocD1oLnN0YmwpfHx2b2lkIDA9PT1wP3ZvaWQgMDpwLmN0dHMsVCYmImVuY3YiPT09VC50eXBlKXYuaXNWaWRlb0VuY3J5cHRpb249ITAsVC5kZWZhdWx0X0tJRD1udWxsPT09KG09VC5zaW5mKXx8dm9pZCAwPT09bXx8bnVsbD09PShnPW0uc2NoaSl8fHZvaWQgMD09PWc/dm9pZCAwOmcudGVuYy5kZWZhdWx0X0tJRCxULmRlZmF1bHRfSXNFbmNyeXB0ZWQ9bnVsbD09PShrPVQuc2luZil8fHZvaWQgMD09PWt8fG51bGw9PT0oYj1rLnNjaGkpfHx2b2lkIDA9PT1iP3ZvaWQgMDpiLnRlbmMuZGVmYXVsdF9Jc0VuY3J5cHRlZCxULmRlZmF1bHRfSVZfc2l6ZT1udWxsPT09KF89VC5zaW5mKXx8dm9pZCAwPT09X3x8bnVsbD09PSh3PV8uc2NoaSl8fHZvaWQgMD09PXc/dm9pZCAwOncudGVuYy5kZWZhdWx0X0lWX3NpemUsdi52aWRlb1NlbmM9cy5tZGlhLm1pbmYuc3RibC5zZW5jJiZzLm1kaWEubWluZi5zdGJsLnNlbmMuc2FtcGxlcyxULmRhdGFfZm9ybWF0PW51bGw9PT0oUz1ULnNpbmYpfHx2b2lkIDA9PT1TfHxudWxsPT09KEQ9Uy5mcm1hKXx8dm9pZCAwPT09RD92b2lkIDA6RC5kYXRhX2Zvcm1hdCx2LnVzZUVNRT1lLnVzZUVNRSx2LmtpZFZhbHVlPWUua2lkVmFsdWUsdi5wc3NoPWUucHNzaCx2LmVuY3Y9VH1pZihvJiZyKXt2YXIgVSxDLFAsSSxNLHosTyxSLEwsVj1yLEY9bnVsbD09PShVPW8udGtoZCl8fHZvaWQgMD09PVU/dm9pZCAwOlUudHJhY2tJZDtudWxsIT1GJiYoVi5pZD1vLnRraGQudHJhY2tJZCksVi50a2hkRHVyYXRpb249by50a2hkLmR1cmF0aW9uLFYubXZoZER1cnRpb249ZS5tdmhkLmR1cmF0aW9uLFYubXZoZFRpbWVjYWxlPWUubXZoZC50aW1lc2NhbGUsVi50aW1lc2NhbGU9Vi5mb3JtYXRUaW1lc2NhbGU9by5tZGlhLm1kaGQudGltZXNjYWxlLFYuZHVyYXRpb249by5tZGlhLm1kaGQuZHVyYXRpb258fFYubXZoZER1cnRpb24vVi5tdmhkVGltZWNhbGUqVi50aW1lc2NhbGU7dmFyIE4saixHLEgsSyxxLFcsWCxZPW8ubWRpYS5taW5mLnN0Ymwuc3RzZC5lbnRyaWVzWzBdO3N3aXRjaChWLnNhbXBsZVNpemU9WS5zYW1wbGVTaXplLFYuc2FtcGxlUmF0ZT1ZLnNhbXBsZVJhdGUsVi5jaGFubmVsQ291bnQ9WS5jaGFubmVsQ291bnQsVi5wcmVzZW50PSEwLFkudHlwZSl7Y2FzZSJhbGF3IjpWLmNvZGVjVHlwZT1WLmNvZGVjPUIsVi5zYW1wbGVSYXRlPThlMzticmVhaztjYXNlInVsYXciOlYuY29kZWNUeXBlPVYuY29kZWM9RSxWLnNhbXBsZVJhdGU9OGUzO2JyZWFrO2RlZmF1bHQ6Vi5zYW1wbGVEdXJhdGlvbj11ZS5nZXRGcmFtZUR1cmF0aW9uKFYuc2FtcGxlUmF0ZSxWLnRpbWVzY2FsZSksVi5zYW1wbGVSYXRlSW5kZXg9dWUuZ2V0UmF0ZUluZGV4QnlSYXRlKFYuc2FtcGxlUmF0ZSksVi5vYmplY3RUeXBlPShudWxsPT09KGE9WS5lc2RzKXx8dm9pZCAwPT09YT92b2lkIDA6YS5vYmplY3RUeXBlKXx8MixZLmVzZHMmJihWLmNvbmZpZz1BcnJheS5mcm9tKFkuZXNkcy5jb25maWcpKSxWLmNvZGVjPShudWxsPT09KG49WS5lc2RzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5jb2RlYyl8fCJtcDRhLjQwLjIifWlmKFYuc2FtcGxlRHVyYXRpb249dWUuZ2V0RnJhbWVEdXJhdGlvbihWLnNhbXBsZVJhdGUsVi50aW1lc2NhbGUpLFYub2JqZWN0VHlwZT0obnVsbD09PShDPVkuZXNkcyl8fHZvaWQgMD09PUM/dm9pZCAwOkMub2JqZWN0VHlwZSl8fDIsWS5lc2RzJiYoWS5lc2RzLmNvbmZpZz9WLmNvbmZpZz1BcnJheS5mcm9tKFkuZXNkcy5jb25maWcpOmNvbnNvbGUud2FybigiZXNkcyBjb25maWcgaXMgbnVsbCIpKSxWLmNvZGVjPShudWxsPT09KFA9WS5lc2RzKXx8dm9pZCAwPT09UD92b2lkIDA6UC5jb2RlYyl8fCJtcDRhLjQwLjIiLFYuc2FtcGxlUmF0ZUluZGV4PXVlLmdldFJhdGVJbmRleEJ5UmF0ZShWLnNhbXBsZVJhdGUpLFYuZXh0PXt9LFYuZXh0LnN0c3M9bnVsbD09PShJPW8ubWRpYSl8fHZvaWQgMD09PUl8fG51bGw9PT0oTT1JLm1pbmYpfHx2b2lkIDA9PT1NfHxudWxsPT09KHo9TS5zdGJsKXx8dm9pZCAwPT09ej92b2lkIDA6ei5zdHNzLFYuZXh0LmN0dHM9bnVsbD09PShPPW8ubWRpYSl8fHZvaWQgMD09PU98fG51bGw9PT0oUj1PLm1pbmYpfHx2b2lkIDA9PT1SfHxudWxsPT09KEw9Ui5zdGJsKXx8dm9pZCAwPT09TD92b2lkIDA6TC5jdHRzLFYucHJlc2VudD0hMCxZJiYiZW5jYSI9PT1ZLnR5cGUpVi5pc0F1ZGlvRW5jcnlwdGlvbj0hMCxZLmRhdGFfZm9ybWF0PW51bGw9PT0oTj1ZLnNpbmYpfHx2b2lkIDA9PT1OfHxudWxsPT09KGo9Ti5mcm1hKXx8dm9pZCAwPT09aj92b2lkIDA6ai5kYXRhX2Zvcm1hdCxZLmRlZmF1bHRfS0lEPW51bGw9PT0oRz1ZLnNpbmYpfHx2b2lkIDA9PT1HfHxudWxsPT09KEg9Ry5zY2hpKXx8dm9pZCAwPT09SD92b2lkIDA6SC50ZW5jLmRlZmF1bHRfS0lELFkuZGVmYXVsdF9Jc0VuY3J5cHRlZD1udWxsPT09KEs9WS5zaW5mKXx8dm9pZCAwPT09S3x8bnVsbD09PShxPUsuc2NoaSl8fHZvaWQgMD09PXE/dm9pZCAwOnEudGVuYy5kZWZhdWx0X0lzRW5jcnlwdGVkLFkuZGVmYXVsdF9JVl9zaXplPW51bGw9PT0oVz1ZLnNpbmYpfHx2b2lkIDA9PT1XfHxudWxsPT09KFg9Vy5zY2hpKXx8dm9pZCAwPT09WD92b2lkIDA6WC50ZW5jLmRlZmF1bHRfSVZfc2l6ZSxWLmF1ZGlvU2VuYz1vLm1kaWEubWluZi5zdGJsLnNlbmMmJm8ubWRpYS5taW5mLnN0Ymwuc2VuYy5zYW1wbGVzLFYudXNlRU1FPWUudXNlRU1FLFYua2lkVmFsdWU9ZS5raWRWYWx1ZSxWLmVuY2E9WX1pZihyJiYoci5pc1ZpZGVvRW5jcnlwdGlvbj0hIXQmJnQuaXNWaWRlb0VuY3J5cHRpb24pLHQmJih0LmlzQXVkaW9FbmNyeXB0aW9uPSEhciYmci5pc0F1ZGlvRW5jcnlwdGlvbiksbnVsbCE9dCYmdC5lbmN2fHxudWxsIT1yJiZyLmVuY2Epe3ZhciBaLFEsSj1udWxsPT10fHxudWxsPT09KFo9dC5lbmN2KXx8dm9pZCAwPT09Wj92b2lkIDA6Wi5kZWZhdWx0X0tJRCwkPW51bGw9PXJ8fG51bGw9PT0oUT1yLmVuY2EpfHx2b2lkIDA9PT1RP3ZvaWQgMDpRLmRlZmF1bHRfS0lELGVlPUp8fCQ/KEp8fCQpLmpvaW4oIiIpOm51bGw7dCYmKHQua2lkPWVlKSxyJiYoci5raWQ9ZWUpfXJldHVybiB0JiYodC5mbGFncz0zODQxKSxyJiYoci5mbGFncz0xNzkzKSx7dmlkZW9UcmFjazp0LGF1ZGlvVHJhY2s6cn19fX0se2tleToiZXZhbHVhdGVEZWZhdWx0RHVyYXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgYSxuPW51bGw9PXR8fG51bGw9PT0oYT10LnNhbXBsZXMpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLmxlbmd0aDtyZXR1cm4gbj8xMDI0Km4vdC50aW1lc2NhbGUqZS50aW1lc2NhbGUvcjoxMDI0fX0se2tleToibW9vZlRvU2FtcGxlcyIsdmFsdWU6ZnVuY3Rpb24odCxyLGEpe3ZhciBuPXt9O3JldHVybiB0Lm1maGQmJihyJiYoci5zZXF1ZW5jZU51bWJlcj10Lm1maGQuc2VxdWVuY2VOdW1iZXIpLGEmJihhLnNlcXVlbmNlTnVtYmVyPXQubWZoZC5zZXF1ZW5jZU51bWJlcikpLHQudHJhZi5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgaT10LnRmaGQscz10LnRmZHQsbz10LnRydW47aWYoaSYmbyl7cyYmKHImJnIuaWQ9PT1pLnRyYWNrSWQmJihyLmJhc2VNZWRpYURlY29kZVRpbWU9cy5iYXNlTWVkaWFEZWNvZGVUaW1lKSxhJiZhLmlkPT09aS50cmFja0lkJiYoYS5iYXNlTWVkaWFEZWNvZGVUaW1lPXMuYmFzZU1lZGlhRGVjb2RlVGltZSkpO3ZhciB1PWkuZGVmYXVsdFNhbXBsZVNpemV8fDAsYz1pLmRlZmF1bHRTYW1wbGVEdXJhdGlvbnx8ZS5ldmFsdWF0ZURlZmF1bHREdXJhdGlvbihyLGEsby5zYW1wbGVzLmxlbmd0aHx8by5zYW1wbGVDb3VudCksbD1vLmRhdGFPZmZzZXR8fDAsZj0wLGQ9LTE7aWYoIW8uc2FtcGxlcy5sZW5ndGgmJm8uc2FtcGxlQ291bnQpe25baS50cmFja0lkXT1bXTtmb3IodmFyIGg9MDtoPG8uc2FtcGxlQ291bnQ7aCsrKW5baS50cmFja0lkXS5wdXNoKHtvZmZzZXQ6bCxkdHM6ZixkdXJhdGlvbjpjLHNpemU6dX0pLGYrPWMsbCs9dX1lbHNlIG5baS50cmFja0lkXT1vLnNhbXBsZXMubWFwKChmdW5jdGlvbihlLHQpe3JldHVybihlPXtvZmZzZXQ6bCxkdHM6ZixwdHM6ZisoZS5jdHN8fDApLGR1cmF0aW9uOmUuZHVyYXRpb258fGMsc2l6ZTplLnNpemV8fHUsZ29wSWQ6ZCxrZXlmcmFtZTowPT09dHx8bnVsbCE9PWUuZmxhZ3MmJnZvaWQgMCE9PWUuZmxhZ3MmJig2NTUzNiZlLmZsYWdzKT4+PjAhPTY1NTM2fSkua2V5ZnJhbWUmJihkKyssZS5nb3BJZD1kKSxmKz1lLmR1cmF0aW9uLGwrPWUuc2l6ZSxlfSkpfX0pKSxufX0se2tleToibW9vdlRvU2FtcGxlcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50cmFrO2lmKHQmJnQubGVuZ3RoKXt2YXIgcj10LmZpbmQoKGZ1bmN0aW9uKGUpe3ZhciB0LHI7cmV0dXJuInZpZGUiPT09KG51bGw9PT0odD1lLm1kaWEpfHx2b2lkIDA9PT10fHxudWxsPT09KHI9dC5oZGxyKXx8dm9pZCAwPT09cj92b2lkIDA6ci5oYW5kbGVyVHlwZSl9KSksYT10LmZpbmQoKGZ1bmN0aW9uKGUpe3ZhciB0LHI7cmV0dXJuInNvdW4iPT09KG51bGw9PT0odD1lLm1kaWEpfHx2b2lkIDA9PT10fHxudWxsPT09KHI9dC5oZGxyKXx8dm9pZCAwPT09cj92b2lkIDA6ci5oYW5kbGVyVHlwZSl9KSk7aWYocnx8YSl7dmFyIG4saTtpZihyKXt2YXIgcyxvLHU9bnVsbD09PShzPXIubWRpYSl8fHZvaWQgMD09PXN8fG51bGw9PT0obz1zLm1pbmYpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnN0Ymw7aWYoIXUpcmV0dXJuO3ZhciBjPXUuc3R0cyxsPXUuc3RzYyxmPXUuc3RzeixkPXUuc3RjbyxoPXUuc3RzcyxwPXUuY3R0cztpZighKGMmJmwmJmYmJmQmJmgpKXJldHVybjtuPWtlKGMsbCxmLGQscCxoKX1pZihhKXt2YXIgdix5LG0sZz1udWxsPT09KHY9YS5tZGlhKXx8dm9pZCAwPT09dnx8bnVsbD09PSh5PXYubWluZil8fHZvaWQgMD09PXk/dm9pZCAwOnkuc3RibDtpZighZylyZXR1cm47dmFyIGs9bnVsbD09PShtPWEubWRpYS5tZGhkKXx8dm9pZCAwPT09bT92b2lkIDA6bS50aW1lc2NhbGUsYj1nLnN0dHMsXz1nLnN0c2Msdz1nLnN0c3oseD1nLnN0Y287aWYoIShrJiZiJiZfJiZ3JiZ4KSlyZXR1cm47aT1rZShiLF8sdyx4KX1yZXR1cm57dmlkZW9TYW1wbGVzOm4sYXVkaW9TYW1wbGVzOml9fX19fV0pLGV9KCk7ZnVuY3Rpb24ga2UoZSx0LHIsYSxuLGkpe3ZhciBzLG8sdSxjPVtdLGw9bnVsbD09bj92b2lkIDA6bi5lbnRyaWVzLGY9dC5lbnRyaWVzLGQ9YS5lbnRyaWVzLGg9ci5lbnRyeVNpemVzLHA9bnVsbD09aT92b2lkIDA6aS5lbnRyaWVzO3AmJihzPXt9LHAuZm9yRWFjaCgoZnVuY3Rpb24oZSl7c1tlLTFdPSEwfSkpKSxsJiYobz1bXSxsLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmNvdW50LHI9ZS5vZmZzZXQsYT0wO2E8dDthKyspby5wdXNoKHIpfSkpKTt2YXIgdj0tMSx5PTAsbT0wLGc9MCxrPTAsYj0wLF89ZlswXS5zYW1wbGVzUGVyQ2h1bmssdz1mWzFdP2ZbMV0uZmlyc3RDaHVuay0xOjEvMDtyZXR1cm4gZS5lbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmNvdW50LGE9ZS5kZWx0YSxuPTA7bjx0O24rKyl1PXtkdHM6eSxkdXJhdGlvbjphLHNpemU6aFttXXx8ci5zYW1wbGVTaXplLG9mZnNldDpkW2ddK2IsaW5kZXg6bX0scCYmKHUua2V5ZnJhbWU9c1ttXSx1LmtleWZyYW1lJiZ2KyssdS5nb3BJZD12KSxvJiZtPG8ubGVuZ3RoJiYodS5wdHM9dS5kdHMrb1ttXSksYy5wdXNoKHUpLHkrPWEsKyttPF8/Yis9dS5zaXplOihnKyssYj0wLGc+PXcmJihrKyssdz1mW2srMV0/ZltrKzFdLmZpcnN0Q2h1bmstMToxLzApLF8rPWZba10uc2FtcGxlc1BlckNodW5rKX0pKSxjfWZ1bmN0aW9uIGJlKGUsdCl7cmV0dXJuIGUuZGF0YVJlZmVyZW5jZUluZGV4PSQodCw2KSxlLndpZHRoPSQodCwyNCksZS5oZWlnaHQ9JCh0LDI2KSxlLmhvcml6cmVzb2x1dGlvbj1lZSh0LDI4KSxlLnZlcnRyZXNvbHV0aW9uPWVlKHQsMzIpLGUuZnJhbWVDb3VudD0kKHQsNDApLGUuZGVwdGg9JCh0LDc0KSw3OH1mdW5jdGlvbiBfZShlLHQpe3JldHVybiBlLmRhdGFSZWZlcmVuY2VJbmRleD0kKHQsNiksZS5jaGFubmVsQ291bnQ9JCh0LDE2KSxlLnNhbXBsZVNpemU9JCh0LDE4KSxlLnNhbXBsZVJhdGU9ZWUodCwyNCkvNjU1MzYsMjh9ZnVuY3Rpb24gd2UoZSx0LHIpe2lmKGUpe2lmKGUuc2l6ZSE9PWUuZGF0YS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJib3ggIi5jb25jYXQoZS50eXBlLCIgc2l6ZSAhPT0gZGF0YS5sZW5ndGgiKSk7dmFyIGE9e3N0YXJ0OmUuc3RhcnQsc2l6ZTplLnNpemUsaGVhZGVyU2l6ZTplLmhlYWRlclNpemUsdHlwZTplLnR5cGV9O3JldHVybiB0JiYoYS52ZXJzaW9uPWUuZGF0YVtlLmhlYWRlclNpemVdLGEuZmxhZ3M9ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjA7cmV0dXJuKGVbdF08PDE2KSsoZVt0KzFdPDw4KSsoZVt0KzJdfHwwKX0oZS5kYXRhLGUuaGVhZGVyU2l6ZSsxKSxhLmhlYWRlclNpemUrPTQpLHIoYSxlLmRhdGEuc3ViYXJyYXkoYS5oZWFkZXJTaXplKSxhLnN0YXJ0K2EuaGVhZGVyU2l6ZSksYX19dmFyIHhlPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGE9U3RyaW5nKHIpLG49dD4+MCxpPU1hdGguY2VpbChuL2EubGVuZ3RoKSxzPVtdLG89U3RyaW5nKGUpO2ktLTspcy5wdXNoKGEpO3JldHVybiBzLmpvaW4oIiIpLnN1YnN0cmluZygwLG4tby5sZW5ndGgpK299LFNlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheSh0KSxhPTA7YTx0O2ErKylyW2FdPWFyZ3VtZW50c1thXTtyZXR1cm4gci5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnB1c2goeGUoTnVtYmVyKHQpLnRvU3RyaW5nKDE2KSwyLDApKX0pKSxlWzBdfTtmdW5jdGlvbiBBZShlKXtmb3IodmFyIHQ9MCxyPWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkocj4xP3ItMTowKSxuPTE7bjxyO24rKylhW24tMV09YXJndW1lbnRzW25dO2EuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dCs9ZS5sZW5ndGh9KSk7dmFyIGk9bmV3IGUodCkscz0wO3JldHVybiBhLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kuc2V0KGUscykscys9ZS5sZW5ndGh9KSksaX12YXIgRGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpLHRoaXMuYnVmZmVyPW5ldyBVaW50OEFycmF5KDApfXJldHVybiBuKGUsW3trZXk6IndyaXRlIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheSh0KSxhPTA7YTx0O2ErKylyW2FdPWFyZ3VtZW50c1thXTtyLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Q/ZS5idWZmZXI9QWUoVWludDhBcnJheSxlLmJ1ZmZlcix0KTp3aW5kb3cuY29uc29sZS53YXJuKHQpfSkpfX1dLFt7a2V5OiJ3cml0ZVVpbnQxNiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KFtlPj44JjI1NSwyNTUmZV0pfX0se2tleToid3JpdGVVaW50MzIiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgVWludDhBcnJheShbZT4+MjQsZT4+MTYmMjU1LGU+PjgmMjU1LDI1NSZlXSl9fV0pLGV9KCksQmU9TWF0aC5wb3coMiwzMiktMSxFZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSl9cmV0dXJuIG4oZSxudWxsLFt7a2V5OiJib3giLHZhbHVlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQ+MT90LTE6MCksYT0xO2E8dDthKyspclthLTFdPWFyZ3VtZW50c1thXTt2YXIgbj04KyhyPXIuZmlsdGVyKEJvb2xlYW4pKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdC5ieXRlTGVuZ3RofSksMCksaT1uZXcgVWludDhBcnJheShuKTtpWzBdPW4+PjI0JjI1NSxpWzFdPW4+PjE2JjI1NSxpWzJdPW4+PjgmMjU1LGlbM109MjU1Jm4saS5zZXQoZSw0KTt2YXIgcz04O3JldHVybiByLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kuc2V0KGUscykscys9ZS5ieXRlTGVuZ3RofSkpLGl9fSx7a2V5OiJmdHlwIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT09YiYmZS5jb2RlY1R5cGU9PT1BfSkpP2UuRlRZUEhFVjE6ZS5GVFlQQVZDMX19LHtrZXk6ImluaXRTZWdtZW50Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gUShlLmZ0eXAodCksZS5tb292KHQpKX19LHtrZXk6InBzc2giLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyBVaW50OEFycmF5KFsxLDAsMCwwXS5jb25jYXQoWzE2LDExOSwyMzksMjM2LDE5MiwxNzgsNzcsMiwxNzIsMjI3LDYwLDMwLDgyLDIyNiwyNTEsNzVdLFswLDAsMCwxXSxuZSh0LmtpZCksWzAsMCwwLDBdKSk7cmV0dXJuIGUuYm94KGUudHlwZXMucHNzaCxyKX19LHtrZXk6Im1vb3YiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRbMF0udXNlRU1FJiYodFswXS5lbmN2fHx0WzBdLmVuY2EpKXt0WzBdLnBzc2h8fCh0WzBdLnBzc2g9e2tpZDp0WzBdLmtpZH0pO3ZhciByPXRoaXMucHNzaCh0WzBdLnBzc2gpO3JldHVybiBlLmJveC5hcHBseShlLFtlLnR5cGVzLm1vb3YsZS5tdmhkKHRbMF0ubXZoZER1cnRpb258fHRbMF0uZHVyYXRpb24sdFswXS5tdmhkVGltZWNhbGV8fHRbMF0udGltZXNjYWxlKSxlLm12ZXgodCldLmNvbmNhdCh5KHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZS50cmFrKHQpfSkpKSxbcl0pKX1yZXR1cm4gZS5ib3guYXBwbHkoZSxbZS50eXBlcy5tb292LGUubXZoZCh0WzBdLm12aGREdXJ0aW9ufHx0WzBdLmR1cmF0aW9uLHRbMF0ubXZoZFRpbWVjYWxlfHx0WzBdLnRpbWVzY2FsZSldLmNvbmNhdCh5KHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZS50cmFrKHQpfSkpKSxbZS5tdmV4KHQpXSkpfX0se2tleToibXZoZCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjllNCxhPWUuYm94KGUudHlwZXMubXZoZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAscj4+MjQmMjU1LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcix0Pj4yNCYyNTUsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0LDAsMSwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDY0LDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDI1NSwyNTUsMjU1LDI1NV0pKTtyZXR1cm4gYX19LHtrZXk6InRyYWsiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLnRyYWssZS50a2hkKHQuaWQsdC50a2hkRHVyYXRpb258fDAsdC53aWR0aCx0LmhlaWdodCksZS5tZGlhKHQpKX19LHtrZXk6InRraGQiLHZhbHVlOmZ1bmN0aW9uKHQscil7dmFyIGE9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjAsbj1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106MCxpPWUuYm94KGUudHlwZXMudGtoZCxuZXcgVWludDhBcnJheShbMCwwLDAsNywwLDAsMCwwLDAsMCwwLDAsdD4+MjQmMjU1LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCwwLDAsMCwwLHI+PjI0JjI1NSxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsNjQsMCwwLDAsYT4+OCYyNTUsMjU1JmEsMCwwLG4+PjgmMjU1LDI1NSZuLDAsMF0pKTtyZXR1cm4gaX19LHtrZXk6Im1kaWEiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLm1kaWEsZS5tZGhkKHQuZHVyYXRpb24sdC50aW1lc2NhbGUpLGUuaGRscih0LnR5cGUpLGUubWluZih0KSl9fSx7a2V5OiJtZGhkIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06OWU0LGE9ZS5ib3goZS50eXBlcy5tZGhkLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCxyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyLHQ+PjI0JjI1NSx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnQsODUsMTk2LDAsMF0pKTtyZXR1cm4gYX19LHtrZXk6ImhkbHIiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLmhkbHIsZS5IRExSX1RZUEVTW3RdKX19LHtrZXk6Im1pbmYiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLm1pbmYsdC50eXBlPT09Yj9lLlZNSEQ6ZS5TTUhELGUuRElORixlLnN0YmwodCkpfX0se2tleToic3RibCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9W107cmV0dXJuIHQmJnQuZXh0JiZ0LmV4dC5zdHNzJiZyLnB1c2goZS5zdHNzKHQuZXh0LnN0c3MuZW50cmllcykpLGUuYm94KGUudHlwZXMuc3RibCxlLnN0c2QodCksZS5TVFRTLHJbMF0sZS5TVFNDLGUuU1RTWixlLlNUQ08pfX0se2tleToic3RzZCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI7cmV0dXJuIHI9ImF1ZGlvIj09PXQudHlwZT90LnVzZUVNRSYmdC5lbmNhP2UuZW5jYSh0KTplLm1wNGEodCk6dC51c2VFTUUmJnQuZW5jdj9lLmVuY3YodCk6dC5hdjFDP2UuYXYwMSh0KTplLmF2YzFoZXYxKHQpLGUuYm94KGUudHlwZXMuc3RzZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxXSkscil9fSx7a2V5OiJlbmNhIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10LmVuY2EuY2hhbm5lbENvdW50LGE9dC5lbmNhLnNhbXBsZVJhdGUsbj1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLHIsMCwxNiwwLDAsMCwwLGE+PjgmMjU1LDI1NSZhLDAsMF0pLGk9ZS5lc2RzKHQuY29uZmlnKSxzPWUuc2luZih0LmVuY2EpO3JldHVybiBlLmJveChlLnR5cGVzLmVuY2EsbixpLHMpfX0se2tleToiZW5jdiIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHIsYSxuPXQuc3BzLmxlbmd0aD4wP3Quc3BzWzBdOltdLGk9dC5wcHMubGVuZ3RoPjA/dC5wcHNbMF06W10scz10LndpZHRoLG89dC5oZWlnaHQsdT10LnNhclJhdGlvWzBdLGM9dC5zYXJSYXRpb1sxXSxsPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCxzPj44JjI1NSwyNTUmcyxvPj44JjI1NSwyNTUmbywwLDcyLDAsMCwwLDcyLDAsMCwwLDAsMCwwLDAsMSwxOCwxMDAsOTcsMTA1LDEwOCwxMjEsMTA5LDExMSwxMTYsMTA1LDExMSwxMTAsNDcsMTA0LDEwOCwxMTUsNDYsMTA2LDExNSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMjQsMTcsMTddKSxmPW5ldyBVaW50OEFycmF5KChyPShhPVsxLG5bMV0sblsyXSxuWzNdLDI1NSwyMjUsbi5sZW5ndGg+Pj44JjI1NSwyNTUmbi5sZW5ndGhdKS5jb25jYXQuYXBwbHkoYSx5KG4pKS5jb25jYXQoWzEsaS5sZW5ndGg+Pj44JjI1NSwyNTUmaS5sZW5ndGhdKSkuY29uY2F0LmFwcGx5KHIseShpKSkpLGQ9bmV3IFVpbnQ4QXJyYXkoWzAsMCw4OCw1NywwLDE1LDIwMCwxOTIsMCw0LDg2LDcyXSksaD1lLnNpbmYodC5lbmN2KSxwPW5ldyBVaW50OEFycmF5KFt1Pj4yNCx1Pj4xNiYyNTUsdT4+OCYyNTUsMjU1JnUsYz4+MjQsYz4+MTYmMjU1LGM+PjgmMjU1LDI1NSZjXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuZW5jdixsLGUuYm94KGUudHlwZXMuYXZjQyxmKSxlLmJveChlLnR5cGVzLmJ0cnQsZCksaCxlLmJveChlLnR5cGVzLnBhc3AscCkpfX0se2tleToic2NoaSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkoW10pLGE9ZS50ZW5jKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnNjaGkscixhKX19LHtrZXk6InRlbmMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwyNTUmdC5kZWZhdWx0X0lzRW5jcnlwdGVkLDI1NSZ0LmRlZmF1bHRfSVZfc2l6ZV0uY29uY2F0KG5lKHQuZGVmYXVsdF9LSUQpKSk7cmV0dXJuIGUuYm94KGUudHlwZXMudGVuYyxyKX19LHtrZXk6InNpbmYiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyBVaW50OEFycmF5KFtdKSxhPW5ldyBVaW50OEFycmF5KFt0LmRhdGFfZm9ybWF0LmNoYXJDb2RlQXQoMCksdC5kYXRhX2Zvcm1hdC5jaGFyQ29kZUF0KDEpLHQuZGF0YV9mb3JtYXQuY2hhckNvZGVBdCgyKSx0LmRhdGFfZm9ybWF0LmNoYXJDb2RlQXQoMyldKSxuPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDk5LDEwMSwxMTAsOTksMCwxLDAsMF0pLGk9ZS5zY2hpKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnNpbmYscixlLmJveChlLnR5cGVzLmZybWEsYSksZS5ib3goZS50eXBlcy5zY2htLG4pLGkpfX0se2tleToiYXYwMSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMuYXYwMSxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsdC53aWR0aD4+OCYyNTUsMjU1JnQud2lkdGgsdC5oZWlnaHQ+PjgmMjU1LDI1NSZ0LmhlaWdodCwwLDcyLDAsMCwwLDcyLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyNCwxNywxN10pLHQuYXYxQyx0LmNvbHIpfX0se2tleToiYXZjMWhldjEiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuY29kZWNUeXBlPT09QSxhPXI/ZS50eXBlcy5odmMxOmUudHlwZXMuYXZjMSxuPXI/ZS5odmNDKHQpOmUuYXZjQyh0KSxpPVtuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsdC53aWR0aD4+OCYyNTUsMjU1JnQud2lkdGgsdC5oZWlnaHQ+PjgmMjU1LDI1NSZ0LmhlaWdodCwwLDcyLDAsMCwwLDcyLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyNCwxNywxN10pLG5dO3JldHVybiByP2kucHVzaChlLmJveChlLnR5cGVzLmZpZWwsbmV3IFVpbnQ4QXJyYXkoWzEsMF0pKSk6dC5zYXJSYXRpbyYmdC5zYXJSYXRpby5sZW5ndGg+MSYmaS5wdXNoKGUucGFzcCh0LnNhclJhdGlvKSksZS5ib3guYXBwbHkoZSxbYV0uY29uY2F0KGkpKX19LHtrZXk6ImF2Y0MiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByLGEsbixpPVtdLHM9W107cmV0dXJuIHQuc3BzLmZvckVhY2goKGZ1bmN0aW9uKGUpe249ZS5ieXRlTGVuZ3RoLGkucHVzaChuPj4+OCYyNTUpLGkucHVzaCgyNTUmbiksaS5wdXNoLmFwcGx5KGkseShlKSl9KSksdC5wcHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bj1lLmJ5dGVMZW5ndGgscy5wdXNoKG4+Pj44JjI1NSkscy5wdXNoKDI1NSZuKSxzLnB1c2guYXBwbHkocyx5KGUpKX0pKSxlLmJveChlLnR5cGVzLmF2Y0MsbmV3IFVpbnQ4QXJyYXkoKHI9KGE9WzEsaVszXSxpWzRdLGlbNV0sMjU1LDIyNHx0LnNwcy5sZW5ndGhdKS5jb25jYXQuYXBwbHkoYSxpKS5jb25jYXQoW3QucHBzLmxlbmd0aF0pKS5jb25jYXQuYXBwbHkocixzKSkpfX0se2tleToiaHZjQyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC5odmNDO2lmKHIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8ciBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcmV0dXJuIHI7dmFyIGEsbj10LnZwcyxpPXQuc3BzLHM9dC5wcHM7aWYocil7dmFyIG89ci5nZW5lcmFsUHJvZmlsZUNvbXBhdGliaWxpdHlGbGFncyx1PXIuZ2VuZXJhbENvbnN0cmFpbnRJbmRpY2F0b3JGbGFncyxjPShuLmxlbmd0aCYmMSkrKGkubGVuZ3RoJiYxKSsocy5sZW5ndGgmJjEpO2E9WzEsci5nZW5lcmFsUHJvZmlsZVNwYWNlPDw2fHIuZ2VuZXJhbFRpZXJGbGFnPDw1fHIuZ2VuZXJhbFByb2ZpbGVJZGMsbz4+PjI0LG8+Pj4xNixvPj4+OCxvLHVbMF0sdVsxXSx1WzJdLHVbM10sdVs0XSx1WzVdLHIuZ2VuZXJhbExldmVsSWRjLDI0MCwwLDI1MiwyNTJ8ci5jaHJvbWFGb3JtYXRJZGMsMjQ4fHIuYml0RGVwdGhMdW1hTWludXM4LDI0OHxyLmJpdERlcHRoQ2hyb21hTWludXM4LDAsMCxyLm51bVRlbXBvcmFsTGF5ZXJzPDwzfHIudGVtcG9yYWxJZE5lc3RlZDw8MnwzLGNdO3ZhciBsPWZ1bmN0aW9uKGUpe3ZhciB0O2EucHVzaChlLmxlbmd0aD4+OCxlLmxlbmd0aCksKHQ9YSkucHVzaC5hcHBseSh0LHkoZSkpfTtuLmxlbmd0aCYmKGEucHVzaCgxNjAsMCxuLmxlbmd0aCksbi5mb3JFYWNoKGwpKSxpLmxlbmd0aCYmKGEucHVzaCgxNjEsMCxpLmxlbmd0aCksaS5mb3JFYWNoKGwpKSxzLmxlbmd0aCYmKGEucHVzaCgxNjIsMCxzLmxlbmd0aCkscy5mb3JFYWNoKGwpKX1lbHNlIGE9WzEsMSw5NiwwLDAsMCwxNDQsMCwwLDAsMCwwLDkzLDI0MCwwLDI1MiwyNTMsMjQ4LDI0OCwwLDAsMTUsMywxNjAsMCwxLDAsMjQsNjQsMSwxMiwxLDI1NSwyNTUsMSw5NiwwLDAsMywwLDE0NCwwLDAsMywwLDAsMywwLDkzLDE1MywxNTIsOSwxNjEsMCwxLDAsNDUsNjYsMSwxLDEsOTYsMCwwLDMsMCwxNDQsMCwwLDMsMCwwLDMsMCw5MywxNjAsMiwxMjgsMTI4LDQ1LDIyLDg5LDE1MywxNjQsMTQ3LDQzLDE1NCwxMjgsMTI4LDEyOCwxMzAsMCwwLDMsMCwyLDAsMCwzLDAsNTAsMTYsMTYyLDAsMSwwLDcsNjgsMSwxOTMsMTE0LDE4MCw5OCw2NF07cmV0dXJuIGUuYm94KGUudHlwZXMuaHZjQyxuZXcgVWludDhBcnJheShhKSl9fSx7a2V5OiJwYXNwIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj12KHQsMiksYT1yWzBdLG49clsxXTtyZXR1cm4gZS5ib3goZS50eXBlcy5wYXNwLG5ldyBVaW50OEFycmF5KFthPj4yNCxhPj4xNiYyNTUsYT4+OCYyNTUsMjU1JmEsbj4+MjQsbj4+MTYmMjU1LG4+PjgmMjU1LDI1NSZuXSkpfX0se2tleToibXA0YSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMubXA0YSxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLHQuY2hhbm5lbENvdW50LDAsMTYsMCwwLDAsMCx0LnNhbXBsZVJhdGU+PjgmMjU1LDI1NSZ0LnNhbXBsZVJhdGUsMCwwXSksdC5jb25maWcubGVuZ3RoP2UuZXNkcyh0LmNvbmZpZyk6dm9pZCAwKX19LHtrZXk6ImVzZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoO3JldHVybiBlLmJveChlLnR5cGVzLmVzZHMsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMywyMytyLDAsMCwwLDQsMTUrciw2NCwyMSwwLDYsMCwwLDAsMjE4LDE5MiwwLDAsMjE4LDE5Miw1XS5jb25jYXQoW3JdKS5jb25jYXQodCkuY29uY2F0KFs2LDEsMl0pKSl9fSx7a2V5OiJtdmV4Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3guYXBwbHkoZSxbZS50eXBlcy5tdmV4XS5jb25jYXQoeSh0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIGUudHJleCh0LmlkKX0pKSkpKX19LHtrZXk6InRyZXgiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLnRyZXgsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsdD4+MjQsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0LDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDFdKSl9fSx7a2V5OiJ0cmV4MSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMudHJleCxuZXcgVWludDhBcnJheShbMCwwLDAsMCx0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnQsMCwwLDAsMSwwLDAsMiwwLDAsMCwwLDAsMCwxLDAsMF0pKX19LHtrZXk6InRyZXgyIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy50cmV4LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHQ+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCwwLDAsMCwxLDAsMCw0LDAsMCwwLDAsMCwyLDAsMCwwXSkpfX0se2tleToibW9vZiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94LmFwcGx5KGUsW2UudHlwZXMubW9vZixlLm1maGQodFswXS5zYW1wbGVzP3RbMF0uc2FtcGxlc1swXS5nb3BJZDowKV0uY29uY2F0KHkodC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWYodCl9KSkpKSl9fSx7a2V5OiJtZmhkIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5tZmhkLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHQ+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdF0pKX19LHtrZXk6InRyYWYiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPWUudGZoZCh0LmlkKSxhPWUudGZkdCh0LHQuYmFzZU1lZGlhRGVjb2RlVGltZSksbj0wO2lmKHQuaXNWaWRlbyYmdC52aWRlb1NlbmMmJnQudmlkZW9TZW5jLmZvckVhY2goKGZ1bmN0aW9uKGUpe24rPTgsZS5zdWJzYW1wbGVzJiZlLnN1YnNhbXBsZXMubGVuZ3RoJiYobis9MixuKz02KmUuc3Vic2FtcGxlcy5sZW5ndGgpfSkpLHQudmlkZW9TZW5jTGVuZ3RoPW4sdC51c2VFTUUmJih0LmlzVmlkZW9FbmNyeXB0aW9ufHx0LmlzQXVkaW9FbmNyeXB0aW9uKSl7aWYodC5pc1ZpZGVvRW5jcnlwdGlvbil7aWYodC5pc1ZpZGVvKXt2YXIgaT1lLnNhaXoodCkscz1lLnNhaW8odCksbz1lLnRydW4xKHQpLHU9ZS5zZW5jKHQpO3JldHVybiBlLmJveChlLnR5cGVzLnRyYWYscixhLGkscyxvLHUpfWlmKHQuaXNBdWRpb0VuY3J5cHRpb24pe3ZhciBjPWUuc2JncCgpLGw9ZS5zYWl6KHQpLGY9ZS5zYWlvKHQpLGQ9ZS5zZW5jKHQpLGg9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSxjLGwsZixkLGgpfXZhciBwPWUuc2JncCgpLHY9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSxwLHYpfWlmKHQuaXNWaWRlbyl7dmFyIHk9ZS50cnVuMSh0KTtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFmLHIsYSx5KX12YXIgbT1lLnNiZ3AoKSxnPWUuc2Fpeih0KSxrPWUuc2Fpbyh0KSxiPWUuc2VuYyh0KSxfPWUudHJ1bjEodCk7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhZixyLGEsbSxnLGssYixfKX12YXIgdz1lLnNkdHAodCk7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhZixyLGEsdyxlLnRydW4odC5zYW1wbGVzLHcuYnl0ZUxlbmd0aCs3NikpfX0se2tleToic2R0cCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IERlO3JldHVybiB0LnNhbXBsZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ci53cml0ZShuZXcgVWludDhBcnJheSh0LmlzVmlkZW8/W2Uua2V5ZnJhbWU/MzI6MTZdOlsxNl0pKX0pKSxlLmJveChlLnR5cGVzLnNkdHAsdGhpcy5leHRlbnNpb24oMCwwKSxyLmJ1ZmZlcil9fSx7a2V5OiJ0cnVuMSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9bmV3IERlLGE9RGUud3JpdGVVaW50MzIodC5zYW1wbGVzLmxlbmd0aCksbj1udWxsO2lmKHQuaXNWaWRlbyl7dmFyIGk9dC52aWRlb1NlbmNMZW5ndGg7bj1EZS53cml0ZVVpbnQzMigxNip0LnNhbXBsZXMubGVuZ3RoK2krMTQ5KSwhdC5pc1ZpZGVvRW5jcnlwdGlvbiYmdC5pc0F1ZGlvRW5jcnlwdGlvbiYmKG49RGUud3JpdGVVaW50MzIoMTYqdC5zYW1wbGVzLmxlbmd0aCs5MikpfWVsc2V7dmFyIHM9MTIqdC5zYW1wbGVzLmxlbmd0aCsxMjQ7dC5pc0F1ZGlvRW5jcnlwdGlvbiYmKHM9MTIqdC5zYW1wbGVzLmxlbmd0aCs4KnQuYXVkaW9TZW5jLmxlbmd0aCsxNzcpLG49RGUud3JpdGVVaW50MzIocyl9cmV0dXJuIHQuc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtyLndyaXRlKERlLndyaXRlVWludDMyKGUuZHVyYXRpb24pKSxyLndyaXRlKERlLndyaXRlVWludDMyKGUuc2l6ZSkpLHIud3JpdGUoRGUud3JpdGVVaW50MzIoZS5rZXlmcmFtZT8zMzU1NDQzMjo2NTUzNikpLHQuaXNWaWRlbyYmci53cml0ZShEZS53cml0ZVVpbnQzMihlLmN0cz9lLmN0czowKSl9KSksZS5ib3goZS50eXBlcy50cnVuLHRoaXMuZXh0ZW5zaW9uKDAsdC5mbGFncyksYSxuLHIuYnVmZmVyKX19LHtrZXk6InNlbmMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPW5ldyBEZSxhPXQuc2FtcGxlcy5sZW5ndGgsbj10LmlzVmlkZW8/MTY6OCxpPXQuaXNWaWRlbz8yOjAscz1bXSxvPTA7cmV0dXJuIHQuaXNWaWRlbz8ocz10LnZpZGVvU2VuYyxvPXQudmlkZW9TZW5jTGVuZ3RoKTpzPXQuYXVkaW9TZW5jLG89b3x8biphLHIud3JpdGUoRGUud3JpdGVVaW50MzIoMTYrbyksZS50eXBlcy5zZW5jLHRoaXMuZXh0ZW5zaW9uKDAsaSkpLHIud3JpdGUoRGUud3JpdGVVaW50MzIoYSkpLHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLkluaXRpYWxpemF0aW9uVmVjdG9yLmxlbmd0aDt0Kyspci53cml0ZShuZXcgVWludDhBcnJheShbZS5Jbml0aWFsaXphdGlvblZlY3Rvclt0XV0pKTtlLnN1YnNhbXBsZXMmJmUuc3Vic2FtcGxlcy5sZW5ndGgmJihyLndyaXRlKERlLndyaXRlVWludDE2KGUuc3Vic2FtcGxlcy5sZW5ndGgpKSxlLnN1YnNhbXBsZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ci53cml0ZShEZS53cml0ZVVpbnQxNihlLkJ5dGVzT2ZDbGVhckRhdGEpKSxyLndyaXRlKERlLndyaXRlVWludDMyKGUuQnl0ZXNPZlByb3RlY3RlZERhdGEpKX0pKSl9KSksci5idWZmZXJ9fSx7a2V5OiJzYWlvIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj0xMip0LnNhbXBsZXMubGVuZ3RoKzE0MTshdC5pc1ZpZGVvJiZ0LmlzQXVkaW9FbmNyeXB0aW9uJiYocj0xNDkpO3ZhciBhPW5ldyBVaW50OEFycmF5KFsxLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCxyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuc2FpbyxhKX19LHtrZXk6InNhaXoiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuc2FtcGxlcy5sZW5ndGgsYT1uZXcgVWludDhBcnJheShbMCwwLDAsMCwxNixyPj4yNCYyNTUscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSk7cmV0dXJuIGUuYm94KGUudHlwZXMuc2FpeixhKX19LHtrZXk6InNiZ3AiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoWzExNCwxMTEsMTA4LDEwOCwwLDAsMCwxLDAsMCwxLDI1LDAsMCwwLDFdKTtyZXR1cm4gZS5ib3goZS50eXBlcy5zYmdwLHRoaXMuZXh0ZW5zaW9uKDAsMCksdCl9fSx7a2V5OiJleHRlbnNpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBVaW50OEFycmF5KFtlLHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdF0pfX0se2tleToidGZoZCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMudGZoZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCx0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnRdKSl9fSx7a2V5OiJ0ZmR0Iix2YWx1ZTpmdW5jdGlvbih0LHIpe3ZhciBhPU1hdGguZmxvb3Ioci8oQmUrMSkpLG49TWF0aC5mbG9vcihyJShCZSsxKSk7cmV0dXJuIHQudXNlRU1FJiYodC5pc1ZpZGVvRW5jcnlwdGlvbnx8dC5pc0F1ZGlvRW5jcnlwdGlvbik/ZS5ib3goZS50eXBlcy50ZmR0LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLG4+PjI0LG4+PjE2JjI1NSxuPj44JjI1NSwyNTUmbl0pKTplLmJveChlLnR5cGVzLnRmZHQsbmV3IFVpbnQ4QXJyYXkoWzEsMCwwLDAsYT4+MjQsYT4+MTYmMjU1LGE+PjgmMjU1LDI1NSZhLG4+PjI0LG4+PjE2JjI1NSxuPj44JjI1NSwyNTUmbl0pKX19LHtrZXk6InRydW4iLHZhbHVlOmZ1bmN0aW9uKHQscil7dmFyIGE9dC5sZW5ndGgsbj0xMisxNiphO3IrPTgrbjt2YXIgaT1uZXcgVWludDhBcnJheShuKTtpLnNldChbMCwwLDE1LDEsYT4+PjI0JjI1NSxhPj4+MTYmMjU1LGE+Pj44JjI1NSwyNTUmYSxyPj4+MjQmMjU1LHI+Pj4xNiYyNTUscj4+PjgmMjU1LDI1NSZyXSwwKTtmb3IodmFyIHM9MDtzPGE7cysrKXt2YXIgbz10W3NdLHU9by5kdXJhdGlvbixjPW8uc2l6ZSxsPW8uZmxhZyxmPXZvaWQgMD09PWw/e306bCxkPW8uY3RzLGg9dm9pZCAwPT09ZD8wOmQ7aS5zZXQoW3U+Pj4yNCYyNTUsdT4+PjE2JjI1NSx1Pj4+OCYyNTUsMjU1JnUsYz4+PjI0JjI1NSxjPj4+MTYmMjU1LGM+Pj44JjI1NSwyNTUmYyxmLmlzTGVhZGluZzw8MnwobnVsbD09PWYuZGVwZW5kc09ufHx2b2lkIDA9PT1mLmRlcGVuZHNPbj8xOmYuZGVwZW5kc09uKSxmLmlzRGVwZW5kZWRPbjw8NnxmLmhhc1JlZHVuZGFuY3k8PDR8Zi5wYWRkaW5nVmFsdWU8PDF8KG51bGw9PT1mLmlzTm9uU3luY1NhbXBsZXx8dm9pZCAwPT09Zi5pc05vblN5bmNTYW1wbGU/MTpmLmlzTm9uU3luY1NhbXBsZSksNjE0NDAmZi5kZWdyYWRhdGlvblByaW9yaXR5LDE1JmYuZGVncmFkYXRpb25Qcmlvcml0eSxoPj4+MjQmMjU1LGg+Pj4xNiYyNTUsaD4+PjgmMjU1LDI1NSZoXSwxMisxNipzKX1yZXR1cm4gZS5ib3goZS50eXBlcy50cnVuLGkpfX0se2tleToibW9vdk1QNCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94LmFwcGx5KGUsW2UudHlwZXMubW9vdixlLm12aGQodFswXS5kdXJhdGlvbix0WzBdLnRpbWVzY2FsZSldLmNvbmNhdCh5KHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gZS50cmFja01QNCh0KX0pKSkpKX19LHtrZXk6InRyYWNrTVA0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy50cmFrLGUudGtoZCh0LmlkLHQuZHVyYXRpb24sdC53aWR0aCx0LmhlaWdodCksZS5tZGlhTVA0KHQpKX19LHtrZXk6Im1kaWFNUDQiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLm1kaWEsZS5tZGhkKHQuZHVyYXRpb24sdC50aW1lc2NhbGUpLGUuaGRscih0LnR5cGUpLGUubWluZk1QNCh0KSl9fSx7a2V5OiJtaW5mTVA0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5taW5mLHQudHlwZT09PWI/ZS5WTUhEOmUuU01IRCxlLkRJTkYsZS5zdGJsTVA0KHQpKX19LHtrZXk6InN0YmxNUDQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQuZXh0LGE9W2Uuc3RzZCh0KSxlLnN0dHMoci5zdHRzKSxlLnN0c2Moci5zdHNjKSxlLnN0c3ooci5zdHN6KSxlLnN0Y28oci5zdGNvKV07cmV0dXJuIHIuc3Rzcy5sZW5ndGgmJmEucHVzaChlLnN0c3Moci5zdHNzKSksci5jdHRzLmxlbmd0aCYmYS5wdXNoKGUuY3R0cyhyLmN0dHMpKSxlLmJveC5hcHBseShlLFtlLnR5cGVzLnN0YmxdLmNvbmNhdChhKSl9fSx7a2V5OiJzdHRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDgqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudmFsdWUscj1lLmNvdW50O2Euc2V0KFtyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsdD4+MjQsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0XSxuKSxuKz04fSkpLGUuYm94KGUudHlwZXMuc3R0cyxRKG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHI+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcl0pLGEpKX19LHtrZXk6InN0c2MiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoLGE9bmV3IFVpbnQ4QXJyYXkoMTIqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZmlyc3RDaHVuayxyPWUuc2FtcGxlc1BlckNodW5rLGk9ZS5zYW1wbGVEZXNjSW5kZXg7YS5zZXQoW3Q+PjI0LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnIsaT4+MjQsaT4+MTYmMjU1LGk+PjgmMjU1LDI1NSZpXSxuKSxuKz0xMn0pKSxlLmJveChlLnR5cGVzLnN0c2MsUShuZXcgVWludDhBcnJheShbMCwwLDAsMCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnJdKSxhKSl9fSx7a2V5OiJzdHN6Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDQqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Euc2V0KFtlPj4yNCxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdLG4pLG4rPTR9KSksZS5ib3goZS50eXBlcy5zdHN6LFEobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCxyPj4yNCxyPj4xNiYyNTUscj4+OCYyNTUsMjU1JnJdKSxhKSl9fSx7a2V5OiJzdGNvIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgcj10Lmxlbmd0aCxhPW5ldyBVaW50OEFycmF5KDQqciksbj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2Euc2V0KFtlPj4yNCxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdLG4pLG4rPTR9KSksZS5ib3goZS50eXBlcy5zdGNvLFEobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAscj4+MjQscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSksYSkpfX0se2tleToic3RzcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC5sZW5ndGgsYT1uZXcgVWludDhBcnJheSg0KnIpLG49MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbihlKXthLnNldChbZT4+MjQsZT4+MTYmMjU1LGU+PjgmMjU1LDI1NSZlXSxuKSxuKz00fSkpLGUuYm94KGUudHlwZXMuc3RzcyxRKG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHI+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcl0pLGEpKX19LHtrZXk6ImN0dHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciByPXQubGVuZ3RoLGE9bmV3IFVpbnQ4QXJyYXkoOCpyKSxuPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS52YWx1ZSxyPWUuY291bnQ7YS5zZXQoW3I+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcix0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnRdLG4pLG4rPTh9KSksZS5ib3goZS50eXBlcy5jdHRzLFEobmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAscj4+MjQscj4+MTYmMjU1LHI+PjgmMjU1LDI1NSZyXSksYSkpfX0se2tleToic3R5cCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZS5ib3goZS50eXBlcy5zdHlwLG5ldyBVaW50OEFycmF5KFsxMDksMTE1LDEwMCwxMDQsMCwwLDAsMCwxMDksMTE1LDEwMCwxMDQsMTA5LDExNSwxMDUsMTIwXSkpfX0se2tleToic2lkeCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIHI9dC50aW1lc2NhbGUsYT10LnNhbXBsZXNbMF0uZHVyYXRpb24sbj1hKnQuc2FtcGxlcy5sZW5ndGgsaT10LnNhbXBsZXNbMF0uc2FtcGxlT2Zmc2V0KmEscz04O3Quc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtzKz1lLnNpemV9KSk7dmFyIG89MDtpZih0LmlzVmlkZW8pe3ZhciB1LGM9MDt0LnZpZGVvU2VuYyYmKHU9dC52aWRlb1NlbmMpLHQuaXNWaWRlbyYmdS5mb3JFYWNoKChmdW5jdGlvbihlKXtjKz04LGUuc3Vic2FtcGxlcyYmZS5zdWJzYW1wbGVzLmxlbmd0aCYmKGMrPTIsYys9NiplLnN1YnNhbXBsZXMubGVuZ3RoKX0pKSx0LnZpZGVvU2VuY0xlbmd0aD1jLG89cysxNDErMTYqdC5zYW1wbGVzLmxlbmd0aCtjLHQudXNlRU1FJiZ0LmlzQXVkaW9FbmNyeXB0aW9uJiYhdC5pc1ZpZGVvRW5jcnlwdGlvbiYmKG89cysxNip0LnNhbXBsZXMubGVuZ3RoKzg0KX1lbHNlIG89cysxMTYrMTIqdC5zYW1wbGVzLmxlbmd0aCx0LnVzZUVNRSYmdC5pc0F1ZGlvRW5jcnlwdGlvbiYmKG89cysxNjkrMTIqdC5zYW1wbGVzLmxlbmd0aCs4KnQuYXVkaW9TZW5jLmxlbmd0aCk7dmFyIGw9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMjU1JnQuaWQscj4+MjQmMjU1LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmcixpPj4yNCYyNTUsaT4+MTYmMjU1LGk+PjgmMjU1LDI1NSZpLDAsMCwwLDAsMCwwLDAsMSwwLG8+PjE2JjI1NSxvPj44JjI1NSwyNTUmbyxuPj4yNCYyNTUsbj4+MTYmMjU1LG4+PjgmMjU1LDI1NSZuLDE0NCwwLDAsMF0pO3JldHVybiBlLmJveChlLnR5cGVzLnNpZHgsbCl9fSx7a2V5OiJtZGF0Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5tZGF0LHQpfX1dKSxlfSgpO2koRWUsInR5cGVzIixbImF2MDEiLCJhdjFDIiwiYXZjMSIsImF2Y0MiLCJodmMxIiwiaHZjQyIsImRpbmYiLCJkcmVmIiwiZXNkcyIsImZ0eXAiLCJoZGxyIiwibWRhdCIsIm1kaGQiLCJtZGlhIiwibWZoZCIsIm1pbmYiLCJtb29mIiwibW9vdiIsIm1wNGEiLCJtdmV4IiwibXZoZCIsInBhc3AiLCJzdGJsIiwic3RjbyIsInN0c2MiLCJzdHNkIiwic3RzeiIsInN0dHMiLCJ0ZmR0IiwidGZoZCIsInRyYWYiLCJ0cmFrIiwidHJleCIsInRraGQiLCJ2bWhkIiwic21oZCIsImN0dHMiLCJzdHNzIiwic3R5cCIsInBzc2giLCJzaWR4Iiwic2JncCIsInNhaXoiLCJzYWlvIiwic2VuYyIsInRydW4iLCJlbmN2IiwiZW5jYSIsInNpbmYiLCJidHJ0IiwiZnJtYSIsInRlbmMiLCJzY2htIiwic2NoaSIsIm1laGQiLCJmaWVsIiwic2R0cCJdLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVt0XT1bdC5jaGFyQ29kZUF0KDApLHQuY2hhckNvZGVBdCgxKSx0LmNoYXJDb2RlQXQoMiksdC5jaGFyQ29kZUF0KDMpXSxlfSksT2JqZWN0LmNyZWF0ZShudWxsKSkpLGkoRWUsIkhETFJfVFlQRVMiLHt2aWRlbzpuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDExOCwxMDUsMTAwLDEwMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCw4NiwxMDUsMTAwLDEwMSwxMTEsNzIsOTcsMTEwLDEwMCwxMDgsMTAxLDExNCwwXSksYXVkaW86bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwxMTUsMTExLDExNywxMTAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsODMsMTExLDExNywxMTAsMTAwLDcyLDk3LDExMCwxMDAsMTA4LDEwMSwxMTQsMF0pfSksaShFZSwiRlRZUEFWQzEiLEVlLmJveChFZS50eXBlcy5mdHlwLG5ldyBVaW50OEFycmF5KFsxMDUsMTE1LDExMSwxMDksMCwwLDAsMSwxMDUsMTE1LDExMSwxMDksOTcsMTE4LDk5LDQ5XSkpKSxpKEVlLCJGVFlQSEVWMSIsRWUuYm94KEVlLnR5cGVzLmZ0eXAsbmV3IFVpbnQ4QXJyYXkoWzEwNSwxMTUsMTExLDEwOSwwLDAsMCwxLDEwNSwxMTUsMTExLDEwOSwxMDQsMTAxLDExOCw0OV0pKSksaShFZSwiRElORiIsRWUuYm94KEVlLnR5cGVzLmRpbmYsRWUuYm94KEVlLnR5cGVzLmRyZWYsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMSwwLDAsMCwxMiwxMTcsMTE0LDEwOCwzMiwwLDAsMCwxXSkpKSksaShFZSwiVk1IRCIsRWUuYm94KEVlLnR5cGVzLnZtaGQsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwXSkpKSxpKEVlLCJTTUhEIixFZS5ib3goRWUudHlwZXMuc21oZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwXSkpKSxpKEVlLCJTdGJsVGFibGUiLG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDBdKSksaShFZSwiU1RUUyIsRWUuYm94KEVlLnR5cGVzLnN0dHMsRWUuU3RibFRhYmxlKSksaShFZSwiU1RTQyIsRWUuYm94KEVlLnR5cGVzLnN0c2MsRWUuU3RibFRhYmxlKSksaShFZSwiU1RTWiIsRWUuYm94KEVlLnR5cGVzLnN0c3osbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwXSkpKSxpKEVlLCJTVENPIixFZS5ib3goRWUudHlwZXMuc3RjbyxFZS5TdGJsVGFibGUpKTt2YXIgVGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSl7cih0aGlzLGUpLHRoaXMubmFtZT10fHwiIix0aGlzLl9wcmVmaXg9IlsiLmNvbmNhdCh0aGlzLm5hbWUsIl0iKSxlLmRpc2FibGVkPWF9cmV0dXJuIG4oZSxbe2tleToiZGVidWciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7aWYoIWUuZGlzYWJsZWQpe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGE9bmV3IEFycmF5KHIpLG49MDtuPHI7bisrKWFbbl09YXJndW1lbnRzW25dOyh0PWNvbnNvbGUpLmRlYnVnLmFwcGx5KHQsW3RoaXMuX3ByZWZpeF0uY29uY2F0KGEpKX19fSx7a2V5OiJsb2ciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7aWYoIWUuZGlzYWJsZWQpe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGE9bmV3IEFycmF5KHIpLG49MDtuPHI7bisrKWFbbl09YXJndW1lbnRzW25dOyh0PWNvbnNvbGUpLmxvZy5hcHBseSh0LFt0aGlzLl9wcmVmaXhdLmNvbmNhdChhKSl9fX0se2tleToid2FybiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdDtpZighZS5kaXNhYmxlZCl7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgsYT1uZXcgQXJyYXkociksbj0wO248cjtuKyspYVtuXT1hcmd1bWVudHNbbl07KHQ9Y29uc29sZSkud2Fybi5hcHBseSh0LFt0aGlzLl9wcmVmaXhdLmNvbmNhdChhKSl9fX0se2tleToiZXJyb3IiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ7aWYoIWUuZGlzYWJsZWQpe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGE9bmV3IEFycmF5KHIpLG49MDtuPHI7bisrKWFbbl09YXJndW1lbnRzW25dOyh0PWNvbnNvbGUpLmVycm9yLmFwcGx5KHQsW3RoaXMuX3ByZWZpeF0uY29uY2F0KGEpKX19fSx7a2V5OiJ0YWJsZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdDtlLmRpc2FibGVkfHwoY29uc29sZS5ncm91cCh0aGlzLl9wcmVmaXgpLCh0PWNvbnNvbGUpLnRhYmxlLmFwcGx5KHQsYXJndW1lbnRzKSxjb25zb2xlLmdyb3VwRW5kKCkpfX1dLFt7a2V5OiJlbmFibGUiLHZhbHVlOmZ1bmN0aW9uKCl7ZS5kaXNhYmxlZD0hMX19LHtrZXk6ImRpc2FibGUiLHZhbHVlOmZ1bmN0aW9uKCl7ZS5kaXNhYmxlZD0hMH19XSksZX0oKTtpKFRlLCJkaXNhYmxlZCIsITApO2Zvcih2YXIgVWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsYSxuKXtyKHRoaXMsZSksdGhpcy52aWRlb1RyYWNrPXQsdGhpcy5hdWRpb1RyYWNrPWE7dmFyIGk9L0Nocm9tZVwvKFteLl0rKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTt0aGlzLmZvcmNlRmlyc3RJRFI9aSYmTnVtYmVyKGlbMV0pPDUwLHRoaXMubG9nPW5ldyBUZSgiRk1QNFJlbXV4ZXIiLCFufHwhbi5vcGVuTG9nfHwhbi5vcGVuTG9nKX1yZXR1cm4gbihlLFt7a2V5OiJyZW11eCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSx0LHIsYSxuLGk9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXSxzPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxvPXRoaXMudmlkZW9UcmFjayx1PXRoaXMuYXVkaW9UcmFjayxjPW8uZXhpc3QoKSxsPXUuZXhpc3QoKSxmPVtdO3JldHVybiBpJiYocyYmcy5pbml0TWVyZ2U/KGMmJmYucHVzaCh0aGlzLnZpZGVvVHJhY2spLGwmJmYucHVzaCh0aGlzLmF1ZGlvVHJhY2spLHI9RWUuaW5pdFNlZ21lbnQoZikpOihjJiYoZT1FZS5pbml0U2VnbWVudChbdGhpcy52aWRlb1RyYWNrXSkpLGwmJih0PUVlLmluaXRTZWdtZW50KFt0aGlzLmF1ZGlvVHJhY2tdKSkpKSxjJiZvLmhhc1NhbXBsZSgpJiYoYT10aGlzLl9yZW11eFZpZGVvKCkpLGwmJnUuaGFzU2FtcGxlKCkmJihuPXRoaXMuX3JlbXV4QXVkaW8oKSksby5zYW1wbGVzPVtdLHUuc2FtcGxlcz1bXSx7aW5pdFNlZ21lbnQ6cix2aWRlb0luaXRTZWdtZW50OmUsYXVkaW9Jbml0U2VnbWVudDp0LHZpZGVvU2VnbWVudDphLGF1ZGlvU2VnbWVudDpufX19LHtrZXk6Il9yZW11eFZpZGVvIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudmlkZW9UcmFjazt0aGlzLmZvcmNlRmlyc3RJRFImJihlLnNhbXBsZXNbMF0uZmxhZz17ZGVwZW5kc09uOjIsaXNOb25TeW5jU2FtcGxlOjB9KTt2YXIgdD1lLnNhbXBsZXMscj0vYXYwMS8udGVzdChlLmNvZGVjKSxhPTA7cj90LmZvckVhY2goKGZ1bmN0aW9uKGUpe2ErPWUuZGF0YS5ieXRlTGVuZ3RofSkpOnQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YSs9ZS51bml0cy5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdC5ieXRlTGVuZ3RofSksMCksYSs9NCplLnVuaXRzLmxlbmd0aH0pKTt2YXIgbj1uZXcgVWludDhBcnJheShhKTtpZihyKWZvcih2YXIgaSxzPTAsbz10Lmxlbmd0aCx1PTA7czxvO3MrKylpPXRbc10sbi5zZXQoaS5kYXRhLHUpLGkuc2l6ZT1pLmRhdGEuYnl0ZUxlbmd0aCx1Kz1pLnNpemU7ZWxzZSBmb3IodmFyIGMsbD1uZXcgRGF0YVZpZXcobi5idWZmZXIpLGY9ZnVuY3Rpb24oZSxyKXtyPXRbZF07dmFyIGE9MDtyLnVuaXRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2wuc2V0VWludDMyKGUsdC5ieXRlTGVuZ3RoKSxlKz00LG4uc2V0KHQsZSksZSs9dC5ieXRlTGVuZ3RoLGErPTQrdC5ieXRlTGVuZ3RofSkpLHIuc2l6ZT1hLHA9ZSxjPXJ9LGQ9MCxoPXQubGVuZ3RoLHA9MDtkPGg7ZCsrKWYocCxjKTt2YXIgdj1FZS5tZGF0KG4pO3JldHVybiBRKEVlLm1vb2YoW2VdKSx2KX19LHtrZXk6Il9yZW11eEF1ZGlvIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYXVkaW9UcmFjayx0PW5ldyBVaW50OEFycmF5KGUuc2FtcGxlcy5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdC5zaXplfSksMCkpO2Uuc2FtcGxlcy5yZWR1Y2UoKGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuc2V0KHIuZGF0YSxlKSxlK3Iuc2l6ZX0pLDApO3ZhciByPUVlLm1kYXQodCk7cmV0dXJuIFEoRWUubW9vZihbZV0pLHIpfX0se2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy52aWRlb1RyYWNrLnJlc2V0KCksdGhpcy5hdWRpb1RyYWNrLnJlc2V0KCl9fV0pLGV9KCksQ2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpfXJldHVybiBuKGUsW3trZXk6Im1peEluIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmFzc2lnbih0aGlzLGUpfX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IHRoaXMuY29uc3RydWN0b3I7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx0aGlzKSxlfX1dLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuIGwodGhpcyx0KX19XSksZX0oKSxQZT1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZChhKTtmdW5jdGlvbiBhKCl7dmFyIGUsbj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W10saT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06NCpuLmxlbmd0aDtyKHRoaXMsYSksZT10LmNhbGwodGhpcyk7dmFyIHM9bjtpZihzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXImJihzPW5ldyBVaW50OEFycmF5KHMpKSwocyBpbnN0YW5jZW9mIEludDhBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5fHxzIGluc3RhbmNlb2YgSW50MTZBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQxNkFycmF5fHxzIGluc3RhbmNlb2YgSW50MzJBcnJheXx8cyBpbnN0YW5jZW9mIFVpbnQzMkFycmF5fHxzIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHxzIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSYmKHM9bmV3IFVpbnQ4QXJyYXkocy5idWZmZXIscy5ieXRlT2Zmc2V0LHMuYnl0ZUxlbmd0aCkpLHMgaW5zdGFuY2VvZiBVaW50OEFycmF5KXtmb3IodmFyIG89cy5ieXRlTGVuZ3RoLHU9W10sYz0wO2M8bztjKz0xKXVbYz4+PjJdfD1zW2NdPDwyNC1jJTQqODtlLndvcmRzPXUsZS5zaWdCeXRlcz1vfWVsc2UgZS53b3Jkcz1uLGUuc2lnQnl0ZXM9aTtyZXR1cm4gZX1yZXR1cm4gbihhLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06SWU7cmV0dXJuIGUuc3RyaW5naWZ5KHRoaXMpfX0se2tleToiY29uY2F0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLndvcmRzLHI9ZS53b3JkcyxhPXRoaXMuc2lnQnl0ZXMsbj1lLnNpZ0J5dGVzO2lmKHRoaXMuY2xhbXAoKSxhJTQpZm9yKHZhciBpPTA7aTxuO2krPTEpe3ZhciBzPXJbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O3RbYStpPj4+Ml18PXM8PDI0LShhK2kpJTQqOH1lbHNlIGZvcih2YXIgbz0wO288bjtvKz00KXRbYStvPj4+Ml09cltvPj4+Ml07cmV0dXJuIHRoaXMuc2lnQnl0ZXMrPW4sdGhpc319LHtrZXk6ImNsYW1wIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMud29yZHMsdD10aGlzLnNpZ0J5dGVzO2VbdD4+PjJdJj00Mjk0OTY3Mjk1PDwzMi10JTQqOCxlLmxlbmd0aD1NYXRoLmNlaWwodC80KX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXAobyhhLnByb3RvdHlwZSksImNsb25lIix0aGlzKS5jYWxsKHRoaXMpO3JldHVybiBlLndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksZX19XSxbe2tleToicmFuZG9tIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQscj1bXSxuPWZ1bmN0aW9uKGUpe3ZhciB0PWUscj05ODc2NTQzMjEsYT00Mjk0OTY3Mjk1O3JldHVybiBmdW5jdGlvbigpe3ZhciBlPSgocj0zNjk2OSooNjU1MzUmcikrKHI+PjE2KSZhKTw8MTYpKyh0PTE4ZTMqKDY1NTM1JnQpKyh0Pj4xNikmYSkmYTtyZXR1cm4gZS89NDI5NDk2NzI5NiwoZSs9LjUpKihNYXRoLnJhbmRvbSgpPi41PzE6LTEpfX0saT0wO2k8ZTtpKz00KXt2YXIgcz1uKDQyOTQ5NjcyOTYqKHR8fE1hdGgucmFuZG9tKCkpKTt0PTk4NzY1NDA3MSpzKCksci5wdXNoKDQyOTQ5NjcyOTYqcygpfDApfXJldHVybiBuZXcgYShyLGUpfX1dKSxhfShDZSksSWU9e3N0cmluZ2lmeTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS53b3JkcyxyPWUuc2lnQnl0ZXMsYT1bXSxuPTA7bjxyO24rPTEpe3ZhciBpPXRbbj4+PjJdPj4+MjQtbiU0KjgmMjU1O2EucHVzaCgoaT4+PjQpLnRvU3RyaW5nKDE2KSksYS5wdXNoKCgxNSZpKS50b1N0cmluZygxNikpfXJldHVybiBhLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5sZW5ndGgscj1bXSxhPTA7YTx0O2ErPTIpclthPj4+M118PXBhcnNlSW50KGUuc3Vic3RyKGEsMiksMTYpPDwyNC1hJTgqNDtyZXR1cm4gbmV3IFBlKHIsdC8yKX19LE1lPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxyPVtdLGE9MDthPHQ7YSs9MSlyW2E+Pj4yXXw9KDI1NSZlLmNoYXJDb2RlQXQoYSkpPDwyNC1hJTQqODtyZXR1cm4gbmV3IFBlKHIsdCl9LHplPWZ1bmN0aW9uKGUpe3JldHVybiBNZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZSkpKX0sT2U9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWQoYSk7ZnVuY3Rpb24gYSgpe3ZhciBlO3JldHVybiByKHRoaXMsYSksKGU9dC5jYWxsKHRoaXMpKS5fbWluQnVmZmVyU2l6ZT0wLGV9cmV0dXJuIG4oYSxbe2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgUGUsdGhpcy5fbkRhdGFCeXRlcz0wfX0se2tleToiX2FwcGVuZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTsic3RyaW5nIj09dHlwZW9mIHQmJih0PXplKHQpKSx0aGlzLl9kYXRhLmNvbmNhdCh0KSx0aGlzLl9uRGF0YUJ5dGVzKz10LnNpZ0J5dGVzfX0se2tleToiX3Byb2Nlc3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcy5fZGF0YSxhPXRoaXMuYmxvY2tTaXplLG49ci53b3JkcyxpPXIuc2lnQnl0ZXMscz1pLyg0KmEpLG89KHM9ZT9NYXRoLmNlaWwocyk6TWF0aC5tYXgoKDB8cyktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKSkqYSx1PU1hdGgubWluKDQqbyxpKTtpZihvKXtmb3IodmFyIGM9MDtjPG87Yys9YSl0aGlzLl9kb1Byb2Nlc3NCbG9jayhuLGMpO3Q9bi5zcGxpY2UoMCxvKSxyLnNpZ0J5dGVzLT11fXJldHVybiBuZXcgUGUodCx1KX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXAobyhhLnByb3RvdHlwZSksImNsb25lIix0aGlzKS5jYWxsKHRoaXMpO3JldHVybiBlLl9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKSxlfX1dKSxhfShDZSksUmU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWQoYSk7ZnVuY3Rpb24gYShlKXt2YXIgbjtyZXR1cm4gcih0aGlzLGEpLChuPXQuY2FsbCh0aGlzKSkuYmxvY2tTaXplPTE2LG4uY2ZnPU9iamVjdC5hc3NpZ24obmV3IENlLGUpLG4ucmVzZXQoKSxufXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FwcGVuZChlKSx0aGlzLl9wcm9jZXNzKCksdGhpc319LHtrZXk6ImZpbmFsaXplIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5fYXBwZW5kKGUpLHRoaXMuX2RvRmluYWxpemUoKX19XSxbe2tleToiX2NyZWF0ZUhlbHBlciIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7cmV0dXJuIG5ldyBlKHIpLmZpbmFsaXplKHQpfX19LHtrZXk6Il9jcmVhdGVIbWFjSGVscGVyIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gbmV3IExlKGUscikuZmluYWxpemUodCl9fX1dKSxhfShPZSksTGU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWQoYSk7ZnVuY3Rpb24gYShlLG4pe3ZhciBpO3IodGhpcyxhKSxpPXQuY2FsbCh0aGlzKTt2YXIgcz1uZXcgZTtpLl9oYXNoZXI9czt2YXIgbz1uOyJzdHJpbmciPT10eXBlb2YgbyYmKG89emUobykpO3ZhciB1PXMuYmxvY2tTaXplLGM9NCp1O28uc2lnQnl0ZXM+YyYmKG89cy5maW5hbGl6ZShuKSksby5jbGFtcCgpO3ZhciBsPW8uY2xvbmUoKTtpLl9vS2V5PWw7dmFyIGY9by5jbG9uZSgpO2kuX2lLZXk9Zjtmb3IodmFyIGQ9bC53b3JkcyxoPWYud29yZHMscD0wO3A8dTtwKz0xKWRbcF1ePTE1NDk1NTY4MjgsaFtwXV49OTA5NTIyNDg2O3JldHVybiBsLnNpZ0J5dGVzPWMsZi5zaWdCeXRlcz1jLGkucmVzZXQoKSxpfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2hhc2hlcjtlLnJlc2V0KCksZS51cGRhdGUodGhpcy5faUtleSl9fSx7a2V5OiJ1cGRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9oYXNoZXIudXBkYXRlKGUpLHRoaXN9fSx7a2V5OiJmaW5hbGl6ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faGFzaGVyLHI9dC5maW5hbGl6ZShlKTtyZXR1cm4gdC5yZXNldCgpLHQuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChyKSl9fV0pLGF9KENlKSxWZT17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3ZhciB0PWUud29yZHMscj1lLnNpZ0J5dGVzLGE9dGhpcy5fbWFwO2UuY2xhbXAoKTtmb3IodmFyIG49W10saT0wO2k8cjtpKz0zKWZvcih2YXIgcz0odFtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTUpPDwxNnwodFtpKzE+Pj4yXT4+PjI0LShpKzEpJTQqOCYyNTUpPDw4fHRbaSsyPj4+Ml0+Pj4yNC0oaSsyKSU0KjgmMjU1LG89MDtvPDQmJmkrLjc1Km88cjtvKz0xKW4ucHVzaChhLmNoYXJBdChzPj4+NiooMy1vKSY2MykpO3ZhciB1PWEuY2hhckF0KDY0KTtpZih1KWZvcig7bi5sZW5ndGglNDspbi5wdXNoKHUpO3JldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aCxyPXRoaXMuX21hcCxhPXRoaXMuX3JldmVyc2VNYXA7aWYoIWEpe3RoaXMuX3JldmVyc2VNYXA9W10sYT10aGlzLl9yZXZlcnNlTWFwO2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bis9MSlhW3IuY2hhckNvZGVBdChuKV09bn12YXIgaT1yLmNoYXJBdCg2NCk7aWYoaSl7dmFyIHM9ZS5pbmRleE9mKGkpOy0xIT09cyYmKHQ9cyl9cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGE9W10sbj0wLGk9MDtpPHQ7aSs9MSlpZihpJTQpe3ZhciBzPXJbZS5jaGFyQ29kZUF0KGktMSldPDxpJTQqMnxyW2UuY2hhckNvZGVBdChpKV0+Pj42LWklNCoyO2Fbbj4+PjJdfD1zPDwyNC1uJTQqOCxuKz0xfXJldHVybiBQZS5jcmVhdGUoYSxuKX0oZSx0LGEpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9LEZlPVtdLE5lPTA7TmU8NjQ7TmUrPTEpRmVbTmVdPTQyOTQ5NjcyOTYqTWF0aC5hYnMoTWF0aC5zaW4oTmUrMSkpfDA7dmFyIGplPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHQmcnx+dCZhKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LEdlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHQmYXxyJn5hKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LEhlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHRecl5hKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LEtlPWZ1bmN0aW9uKGUsdCxyLGEsbixpLHMpe3ZhciBvPWUrKHJeKHR8fmEpKStuK3M7cmV0dXJuKG88PGl8bz4+PjMyLWkpK3R9LHFlPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1kKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEsW3trZXk6Il9kb1Jlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IFBlKFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX19LHtrZXk6Il9kb1Byb2Nlc3NCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZSxhPTA7YTwxNjthKz0xKXt2YXIgbj10K2EsaT1lW25dO3Jbbl09MTY3MTE5MzUmKGk8PDh8aT4+PjI0KXw0Mjc4MjU1MzYwJihpPDwyNHxpPj4+OCl9dmFyIHM9dGhpcy5faGFzaC53b3JkcyxvPXJbdCswXSx1PXJbdCsxXSxjPXJbdCsyXSxsPXJbdCszXSxmPXJbdCs0XSxkPXJbdCs1XSxoPXJbdCs2XSxwPXJbdCs3XSx2PXJbdCs4XSx5PXJbdCs5XSxtPXJbdCsxMF0sZz1yW3QrMTFdLGs9clt0KzEyXSxiPXJbdCsxM10sXz1yW3QrMTRdLHc9clt0KzE1XSx4PXNbMF0sUz1zWzFdLEE9c1syXSxEPXNbM107eD1qZSh4LFMsQSxELG8sNyxGZVswXSksRD1qZShELHgsUyxBLHUsMTIsRmVbMV0pLEE9amUoQSxELHgsUyxjLDE3LEZlWzJdKSxTPWplKFMsQSxELHgsbCwyMixGZVszXSkseD1qZSh4LFMsQSxELGYsNyxGZVs0XSksRD1qZShELHgsUyxBLGQsMTIsRmVbNV0pLEE9amUoQSxELHgsUyxoLDE3LEZlWzZdKSxTPWplKFMsQSxELHgscCwyMixGZVs3XSkseD1qZSh4LFMsQSxELHYsNyxGZVs4XSksRD1qZShELHgsUyxBLHksMTIsRmVbOV0pLEE9amUoQSxELHgsUyxtLDE3LEZlWzEwXSksUz1qZShTLEEsRCx4LGcsMjIsRmVbMTFdKSx4PWplKHgsUyxBLEQsayw3LEZlWzEyXSksRD1qZShELHgsUyxBLGIsMTIsRmVbMTNdKSxBPWplKEEsRCx4LFMsXywxNyxGZVsxNF0pLFM9amUoUyxBLEQseCx3LDIyLEZlWzE1XSkseD1HZSh4LFMsQSxELHUsNSxGZVsxNl0pLEQ9R2UoRCx4LFMsQSxoLDksRmVbMTddKSxBPUdlKEEsRCx4LFMsZywxNCxGZVsxOF0pLFM9R2UoUyxBLEQseCxvLDIwLEZlWzE5XSkseD1HZSh4LFMsQSxELGQsNSxGZVsyMF0pLEQ9R2UoRCx4LFMsQSxtLDksRmVbMjFdKSxBPUdlKEEsRCx4LFMsdywxNCxGZVsyMl0pLFM9R2UoUyxBLEQseCxmLDIwLEZlWzIzXSkseD1HZSh4LFMsQSxELHksNSxGZVsyNF0pLEQ9R2UoRCx4LFMsQSxfLDksRmVbMjVdKSxBPUdlKEEsRCx4LFMsbCwxNCxGZVsyNl0pLFM9R2UoUyxBLEQseCx2LDIwLEZlWzI3XSkseD1HZSh4LFMsQSxELGIsNSxGZVsyOF0pLEQ9R2UoRCx4LFMsQSxjLDksRmVbMjldKSxBPUdlKEEsRCx4LFMscCwxNCxGZVszMF0pLFM9R2UoUyxBLEQseCxrLDIwLEZlWzMxXSkseD1IZSh4LFMsQSxELGQsNCxGZVszMl0pLEQ9SGUoRCx4LFMsQSx2LDExLEZlWzMzXSksQT1IZShBLEQseCxTLGcsMTYsRmVbMzRdKSxTPUhlKFMsQSxELHgsXywyMyxGZVszNV0pLHg9SGUoeCxTLEEsRCx1LDQsRmVbMzZdKSxEPUhlKEQseCxTLEEsZiwxMSxGZVszN10pLEE9SGUoQSxELHgsUyxwLDE2LEZlWzM4XSksUz1IZShTLEEsRCx4LG0sMjMsRmVbMzldKSx4PUhlKHgsUyxBLEQsYiw0LEZlWzQwXSksRD1IZShELHgsUyxBLG8sMTEsRmVbNDFdKSxBPUhlKEEsRCx4LFMsbCwxNixGZVs0Ml0pLFM9SGUoUyxBLEQseCxoLDIzLEZlWzQzXSkseD1IZSh4LFMsQSxELHksNCxGZVs0NF0pLEQ9SGUoRCx4LFMsQSxrLDExLEZlWzQ1XSksQT1IZShBLEQseCxTLHcsMTYsRmVbNDZdKSxTPUhlKFMsQSxELHgsYywyMyxGZVs0N10pLHg9S2UoeCxTLEEsRCxvLDYsRmVbNDhdKSxEPUtlKEQseCxTLEEscCwxMCxGZVs0OV0pLEE9S2UoQSxELHgsUyxfLDE1LEZlWzUwXSksUz1LZShTLEEsRCx4LGQsMjEsRmVbNTFdKSx4PUtlKHgsUyxBLEQsayw2LEZlWzUyXSksRD1LZShELHgsUyxBLGwsMTAsRmVbNTNdKSxBPUtlKEEsRCx4LFMsbSwxNSxGZVs1NF0pLFM9S2UoUyxBLEQseCx1LDIxLEZlWzU1XSkseD1LZSh4LFMsQSxELHYsNixGZVs1Nl0pLEQ9S2UoRCx4LFMsQSx3LDEwLEZlWzU3XSksQT1LZShBLEQseCxTLGgsMTUsRmVbNThdKSxTPUtlKFMsQSxELHgsYiwyMSxGZVs1OV0pLHg9S2UoeCxTLEEsRCxmLDYsRmVbNjBdKSxEPUtlKEQseCxTLEEsZywxMCxGZVs2MV0pLEE9S2UoQSxELHgsUyxjLDE1LEZlWzYyXSksUz1LZShTLEEsRCx4LHksMjEsRmVbNjNdKSxzWzBdPXNbMF0reHwwLHNbMV09c1sxXStTfDAsc1syXT1zWzJdK0F8MCxzWzNdPXNbM10rRHwwfX0se2tleToiX2RvRmluYWxpemUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSx0PWUud29yZHMscj04KnRoaXMuX25EYXRhQnl0ZXMsYT04KmUuc2lnQnl0ZXM7dFthPj4+NV18PTEyODw8MjQtYSUzMjt2YXIgbj1NYXRoLmZsb29yKHIvNDI5NDk2NzI5NiksaT1yO3RbMTUrKGErNjQ+Pj45PDw0KV09MTY3MTE5MzUmKG48PDh8bj4+PjI0KXw0Mjc4MjU1MzYwJihuPDwyNHxuPj4+OCksdFsxNCsoYSs2ND4+Pjk8PDQpXT0xNjcxMTkzNSYoaTw8OHxpPj4+MjQpfDQyNzgyNTUzNjAmKGk8PDI0fGk+Pj44KSxlLnNpZ0J5dGVzPTQqKHQubGVuZ3RoKzEpLHRoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIHM9dGhpcy5faGFzaCxvPXMud29yZHMsdT0wO3U8NDt1Kz0xKXt2YXIgYz1vW3VdO29bdV09MTY3MTE5MzUmKGM8PDh8Yz4+PjI0KXw0Mjc4MjU1MzYwJihjPDwyNHxjPj4+OCl9cmV0dXJuIHN9fSx7a2V5OiJjbG9uZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1wKG8oYS5wcm90b3R5cGUpLCJjbG9uZSIsdGhpcykuY2FsbCh0aGlzKTtyZXR1cm4gZS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksZX19XSksYX0oUmUpO1JlLl9jcmVhdGVIZWxwZXIocWUpLFJlLl9jcmVhdGVIbWFjSGVscGVyKHFlKTt2YXIgV2U9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWQoYSk7ZnVuY3Rpb24gYShlKXt2YXIgbjtyZXR1cm4gcih0aGlzLGEpLChuPXQuY2FsbCh0aGlzKSkuY2ZnPU9iamVjdC5hc3NpZ24obmV3IENlLHtrZXlTaXplOjQsaGFzaGVyOnFlLGl0ZXJhdGlvbnM6MX0sZSksbn1yZXR1cm4gbihhLFt7a2V5OiJjb21wdXRlIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcixhPXRoaXMuY2ZnLG49YS5oYXNoZXIuY3JlYXRlKCksaT1QZS5jcmVhdGUoKSxzPWkud29yZHMsbz1hLmtleVNpemUsdT1hLml0ZXJhdGlvbnM7cy5sZW5ndGg8bzspe3ImJm4udXBkYXRlKHIpLHI9bi51cGRhdGUoZSkuZmluYWxpemUodCksbi5yZXNldCgpO2Zvcih2YXIgYz0xO2M8dTtjKz0xKXI9bi5maW5hbGl6ZShyKSxuLnJlc2V0KCk7aS5jb25jYXQocil9cmV0dXJuIGkuc2lnQnl0ZXM9NCpvLGl9fV0pLGF9KENlKSxYZT1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZChhKTtmdW5jdGlvbiBhKGUsbixpKXt2YXIgcztyZXR1cm4gcih0aGlzLGEpLChzPXQuY2FsbCh0aGlzKSkuY2ZnPU9iamVjdC5hc3NpZ24obmV3IENlLGkpLHMuX3hmb3JtTW9kZT1lLHMuX2tleT1uLHMucmVzZXQoKSxzfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX19LHtrZXk6InByb2Nlc3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hcHBlbmQoZSksdGhpcy5fcHJvY2VzcygpfX0se2tleToiZmluYWxpemUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLl9hcHBlbmQoZSksdGhpcy5fZG9GaW5hbGl6ZSgpfX1dLFt7a2V5OiJjcmVhdGVFbmNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLGUsdCl9fSx7a2V5OiJjcmVhdGVEZWNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGUsdCl9fSx7a2V5OiJfY3JlYXRlSGVscGVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/bnQ6cnR9O3JldHVybntlbmNyeXB0OmZ1bmN0aW9uKHIsYSxuKXtyZXR1cm4gdChhKS5lbmNyeXB0KGUscixhLG4pfSxkZWNyeXB0OmZ1bmN0aW9uKHIsYSxuKXtyZXR1cm4gdChhKS5kZWNyeXB0KGUscixhLG4pfX19fV0pLGF9KE9lKTtYZS5fRU5DX1hGT1JNX01PREU9MSxYZS5fREVDX1hGT1JNX01PREU9MixYZS5rZXlTaXplPTQsWGUuaXZTaXplPTQ7dmFyIFllPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1kKGEpO2Z1bmN0aW9uIGEoZSxuKXt2YXIgaTtyZXR1cm4gcih0aGlzLGEpLChpPXQuY2FsbCh0aGlzKSkuX2NpcGhlcj1lLGkuX2l2PW4saX1yZXR1cm4gbihhLG51bGwsW3trZXk6ImNyZWF0ZUVuY3J5cHRvciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5FbmNyeXB0b3IuY3JlYXRlKGUsdCl9fSx7a2V5OiJjcmVhdGVEZWNyeXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZShlLHQpfX1dKSxhfShDZSk7ZnVuY3Rpb24gWmUoZSx0LHIpe3ZhciBhLG49ZSxpPXRoaXMuX2l2O2k/KGE9aSx0aGlzLl9pdj12b2lkIDApOmE9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgcz0wO3M8cjtzKz0xKW5bdCtzXV49YVtzXX12YXIgUWU9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWQoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSl9KFllKTtRZS5FbmNyeXB0b3I9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWQoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxbe2tleToicHJvY2Vzc0Jsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2NpcGhlcixhPXIuYmxvY2tTaXplO1plLmNhbGwodGhpcyxlLHQsYSksci5lbmNyeXB0QmxvY2soZSx0KSx0aGlzLl9wcmV2QmxvY2s9ZS5zbGljZSh0LHQrYSl9fV0pLGF9KFFlKSxRZS5EZWNyeXB0b3I9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWQoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxbe2tleToicHJvY2Vzc0Jsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2NpcGhlcixhPXIuYmxvY2tTaXplLG49ZS5zbGljZSh0LHQrYSk7ci5kZWNyeXB0QmxvY2soZSx0KSxaZS5jYWxsKHRoaXMsZSx0LGEpLHRoaXMuX3ByZXZCbG9jaz1ufX1dKSxhfShRZSk7dmFyIEplPXtwYWQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9NCp0LGE9ci1lLnNpZ0J5dGVzJXIsbj1hPDwyNHxhPDwxNnxhPDw4fGEsaT1bXSxzPTA7czxhO3MrPTQpaS5wdXNoKG4pO3ZhciBvPVBlLmNyZWF0ZShpLGEpO2UuY29uY2F0KG8pfSx1bnBhZDpmdW5jdGlvbihlKXt2YXIgdD1lLHI9MjU1JnQud29yZHNbdC5zaWdCeXRlcy0xPj4+Ml07dC5zaWdCeXRlcy09cn19LCRlPWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1kKGEpO2Z1bmN0aW9uIGEoZSxuLGkpe3ZhciBzO3JldHVybiByKHRoaXMsYSksKHM9dC5jYWxsKHRoaXMsZSxuLE9iamVjdC5hc3NpZ24oe21vZGU6UWUscGFkZGluZzpKZX0saSkpKS5ibG9ja1NpemU9NCxzfXJldHVybiBuKGEsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlO3AobyhhLnByb3RvdHlwZSksInJlc2V0Iix0aGlzKS5jYWxsKHRoaXMpO3ZhciB0PXRoaXMuY2ZnLHI9dC5pdixuPXQubW9kZTt0aGlzLl94Zm9ybU1vZGU9PT10aGlzLmNvbnN0cnVjdG9yLl9FTkNfWEZPUk1fTU9ERT9lPW4uY3JlYXRlRW5jcnlwdG9yOihlPW4uY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MSksdGhpcy5fbW9kZT1lLmNhbGwobix0aGlzLHImJnIud29yZHMpLHRoaXMuX21vZGUuX19jcmVhdG9yPWV9fSx7a2V5OiJfZG9Qcm9jZXNzQmxvY2siLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kZS5wcm9jZXNzQmxvY2soZSx0KX19LHtrZXk6Il9kb0ZpbmFsaXplIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jZmcucGFkZGluZztyZXR1cm4gdGhpcy5feGZvcm1Nb2RlPT09dGhpcy5jb25zdHJ1Y3Rvci5fRU5DX1hGT1JNX01PREU/KHQucGFkKHRoaXMuX2RhdGEsdGhpcy5ibG9ja1NpemUpLGU9dGhpcy5fcHJvY2VzcyghMCkpOihlPXRoaXMuX3Byb2Nlc3MoITApLHQudW5wYWQoZSkpLGV9fV0pLGF9KFhlKSxldD1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZChhKTtmdW5jdGlvbiBhKGUpe3ZhciBuO3JldHVybiByKHRoaXMsYSksKG49dC5jYWxsKHRoaXMpKS5taXhJbihlKSxufXJldHVybiBuKGEsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4oZXx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19XSksYX0oQ2UpLHR0PXtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaXBoZXJ0ZXh0LHI9ZS5zYWx0O3JldHVybihyP1BlLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdCh0KTp0KS50b1N0cmluZyhWZSl9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciB0LHI9VmUucGFyc2UoZSksYT1yLndvcmRzO3JldHVybiAxMzk4ODkzNjg0PT09YVswXSYmMTcwMTA3NjgzMT09PWFbMV0mJih0PVBlLmNyZWF0ZShhLnNsaWNlKDIsNCkpLGEuc3BsaWNlKDAsNCksci5zaWdCeXRlcy09MTYpLGV0LmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6dH0pfX0scnQ9ZnVuY3Rpb24oZSl7cyhhLGUpO3ZhciB0PWQoYSk7ZnVuY3Rpb24gYSgpe3JldHVybiByKHRoaXMsYSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4oYSxudWxsLFt7a2V5OiJlbmNyeXB0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj1PYmplY3QuYXNzaWduKG5ldyBDZSx0aGlzLmNmZyxhKSxpPWUuY3JlYXRlRW5jcnlwdG9yKHIsbikscz1pLmZpbmFsaXplKHQpLG89aS5jZmc7cmV0dXJuIGV0LmNyZWF0ZSh7Y2lwaGVydGV4dDpzLGtleTpyLGl2Om8uaXYsYWxnb3JpdGhtOmUsbW9kZTpvLm1vZGUscGFkZGluZzpvLnBhZGRpbmcsYmxvY2tTaXplOmkuYmxvY2tTaXplLGZvcm1hdHRlcjpuLmZvcm1hdH0pfX0se2tleToiZGVjcnlwdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIG49dCxpPU9iamVjdC5hc3NpZ24obmV3IENlLHRoaXMuY2ZnLGEpO3JldHVybiBuPXRoaXMuX3BhcnNlKG4saS5mb3JtYXQpLGUuY3JlYXRlRGVjcnlwdG9yKHIsaSkuZmluYWxpemUobi5jaXBoZXJ0ZXh0KX19LHtrZXk6Il9wYXJzZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/dC5wYXJzZShlLHRoaXMpOmV9fV0pLGF9KENlKTtydC5jZmc9T2JqZWN0LmFzc2lnbihuZXcgQ2Use2Zvcm1hdDp0dH0pO3ZhciBhdD17ZXhlY3V0ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj1hO258fChuPVBlLnJhbmRvbSg4KSk7dmFyIGk9V2UuY3JlYXRlKHtrZXlTaXplOnQrcn0pLmNvbXB1dGUoZSxuKSxzPVBlLmNyZWF0ZShpLndvcmRzLnNsaWNlKHQpLDQqcik7cmV0dXJuIGkuc2lnQnl0ZXM9NCp0LGV0LmNyZWF0ZSh7a2V5OmksaXY6cyxzYWx0Om59KX19LG50PWZ1bmN0aW9uKGUpe3MoYSxlKTt2YXIgdD1kKGEpO2Z1bmN0aW9uIGEoKXtyZXR1cm4gcih0aGlzLGEpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBuKGEsbnVsbCxbe2tleToiZW5jcnlwdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIG49T2JqZWN0LmFzc2lnbihuZXcgQ2UsdGhpcy5jZmcsYSksaT1uLmtkZi5leGVjdXRlKHIsZS5rZXlTaXplLGUuaXZTaXplKTtuLml2PWkuaXY7dmFyIHM9cnQuZW5jcnlwdC5jYWxsKHRoaXMsZSx0LGkua2V5LG4pO3JldHVybiBzLm1peEluKGkpLHN9fSx7a2V5OiJkZWNyeXB0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixhKXt2YXIgbj10LGk9T2JqZWN0LmFzc2lnbihuZXcgQ2UsdGhpcy5jZmcsYSk7bj10aGlzLl9wYXJzZShuLGkuZm9ybWF0KTt2YXIgcz1pLmtkZi5leGVjdXRlKHIsZS5rZXlTaXplLGUuaXZTaXplLG4uc2FsdCk7cmV0dXJuIGkuaXY9cy5pdixydC5kZWNyeXB0LmNhbGwodGhpcyxlLG4scy5rZXksaSl9fV0pLGF9KHJ0KTtudC5jZmc9T2JqZWN0LmFzc2lnbihydC5jZmcse2tkZjphdH0pO2Zvcih2YXIgaXQ9W10sc3Q9W10sb3Q9W10sdXQ9W10sY3Q9W10sbHQ9W10sZnQ9W10sZHQ9W10saHQ9W10scHQ9W10sdnQ9W10seXQ9MDt5dDwyNTY7eXQrPTEpdnRbeXRdPXl0PDEyOD95dDw8MTp5dDw8MV4yODM7Zm9yKHZhciBtdD0wLGd0PTAsa3Q9MDtrdDwyNTY7a3QrPTEpe3ZhciBidD1ndF5ndDw8MV5ndDw8Ml5ndDw8M15ndDw8NDtidD1idD4+PjheMjU1JmJ0Xjk5LGl0W210XT1idCxzdFtidF09bXQ7dmFyIF90PXZ0W210XSx3dD12dFtfdF0seHQ9dnRbd3RdLFN0PTI1Nyp2dFtidF1eMTY4NDMwMDgqYnQ7b3RbbXRdPVN0PDwyNHxTdD4+PjgsdXRbbXRdPVN0PDwxNnxTdD4+PjE2LGN0W210XT1TdDw8OHxTdD4+PjI0LGx0W210XT1TdCxTdD0xNjg0MzAwOSp4dF42NTUzNyp3dF4yNTcqX3ReMTY4NDMwMDgqbXQsZnRbYnRdPVN0PDwyNHxTdD4+PjgsZHRbYnRdPVN0PDwxNnxTdD4+PjE2LGh0W2J0XT1TdDw8OHxTdD4+PjI0LHB0W2J0XT1TdCxtdD8obXQ9X3RednRbdnRbdnRbeHReX3RdXV0sZ3RePXZ0W3Z0W2d0XV0pOm10PWd0PTF9dmFyIEF0PVswLDEsMiw0LDgsMTYsMzIsNjQsMTI4LDI3LDU0XSxEdD1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZChhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhLFt7a2V5OiJfZG9SZXNldCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtpZighdGhpcy5fblJvdW5kc3x8dGhpcy5fa2V5UHJpb3JSZXNldCE9PXRoaXMuX2tleSl7dGhpcy5fa2V5UHJpb3JSZXNldD10aGlzLl9rZXk7dmFyIHQ9dGhpcy5fa2V5UHJpb3JSZXNldCxyPXQud29yZHMsYT10LnNpZ0J5dGVzLzQ7dGhpcy5fblJvdW5kcz1hKzY7dmFyIG49NCoodGhpcy5fblJvdW5kcysxKTt0aGlzLl9rZXlTY2hlZHVsZT1bXTtmb3IodmFyIGk9dGhpcy5fa2V5U2NoZWR1bGUscz0wO3M8bjtzKz0xKXM8YT9pW3NdPXJbc106KGU9aVtzLTFdLHMlYT9hPjYmJnMlYT09NCYmKGU9aXRbZT4+PjI0XTw8MjR8aXRbZT4+PjE2JjI1NV08PDE2fGl0W2U+Pj44JjI1NV08PDh8aXRbMjU1JmVdKTooZT1pdFsoZT1lPDw4fGU+Pj4yNCk+Pj4yNF08PDI0fGl0W2U+Pj4xNiYyNTVdPDwxNnxpdFtlPj4+OCYyNTVdPDw4fGl0WzI1NSZlXSxlXj1BdFtzL2F8MF08PDI0KSxpW3NdPWlbcy1hXV5lKTt0aGlzLl9pbnZLZXlTY2hlZHVsZT1bXTtmb3IodmFyIG89dGhpcy5faW52S2V5U2NoZWR1bGUsdT0wO3U8bjt1Kz0xKXt2YXIgYz1uLXU7ZT11JTQ/aVtjXTppW2MtNF0sb1t1XT11PDR8fGM8PTQ/ZTpmdFtpdFtlPj4+MjRdXV5kdFtpdFtlPj4+MTYmMjU1XV1eaHRbaXRbZT4+PjgmMjU1XV1ecHRbaXRbMjU1JmVdXX19fX0se2tleToiZW5jcnlwdEJsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX2RvQ3J5cHRCbG9jayhlLHQsdGhpcy5fa2V5U2NoZWR1bGUsb3QsdXQsY3QsbHQsaXQpfX0se2tleToiZGVjcnlwdEJsb2NrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsYT1yW3QrMV07clt0KzFdPXJbdCszXSxyW3QrM109YSx0aGlzLl9kb0NyeXB0QmxvY2socix0LHRoaXMuX2ludktleVNjaGVkdWxlLGZ0LGR0LGh0LHB0LHN0KSxhPXJbdCsxXSxyW3QrMV09clt0KzNdLHJbdCszXT1hfX0se2tleToiX2RvQ3J5cHRCbG9jayIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSxuLGkscyxvKXtmb3IodmFyIHU9ZSxjPXRoaXMuX25Sb3VuZHMsbD11W3RdXnJbMF0sZj11W3QrMV1eclsxXSxkPXVbdCsyXV5yWzJdLGg9dVt0KzNdXnJbM10scD00LHY9MTt2PGM7dis9MSl7dmFyIHk9YVtsPj4+MjRdXm5bZj4+PjE2JjI1NV1eaVtkPj4+OCYyNTVdXnNbMjU1JmhdXnJbcF07cCs9MTt2YXIgbT1hW2Y+Pj4yNF1ebltkPj4+MTYmMjU1XV5pW2g+Pj44JjI1NV1ec1syNTUmbF1ecltwXTtwKz0xO3ZhciBnPWFbZD4+PjI0XV5uW2g+Pj4xNiYyNTVdXmlbbD4+PjgmMjU1XV5zWzI1NSZmXV5yW3BdO3ArPTE7dmFyIGs9YVtoPj4+MjRdXm5bbD4+PjE2JjI1NV1eaVtmPj4+OCYyNTVdXnNbMjU1JmRdXnJbcF07cCs9MSxsPXksZj1tLGQ9ZyxoPWt9dmFyIGI9KG9bbD4+PjI0XTw8MjR8b1tmPj4+MTYmMjU1XTw8MTZ8b1tkPj4+OCYyNTVdPDw4fG9bMjU1JmhdKV5yW3BdO3ArPTE7dmFyIF89KG9bZj4+PjI0XTw8MjR8b1tkPj4+MTYmMjU1XTw8MTZ8b1toPj4+OCYyNTVdPDw4fG9bMjU1JmxdKV5yW3BdO3ArPTE7dmFyIHc9KG9bZD4+PjI0XTw8MjR8b1toPj4+MTYmMjU1XTw8MTZ8b1tsPj4+OCYyNTVdPDw4fG9bMjU1JmZdKV5yW3BdO3ArPTE7dmFyIHg9KG9baD4+PjI0XTw8MjR8b1tsPj4+MTYmMjU1XTw8MTZ8b1tmPj4+OCYyNTVdPDw4fG9bMjU1JmRdKV5yW3BdO3ArPTEsdVt0XT1iLHVbdCsxXT1fLHVbdCsyXT13LHVbdCszXT14fX1dKSxhfSgkZSk7RHQua2V5U2l6ZT04O3ZhciBCdD0kZS5fY3JlYXRlSGVscGVyKER0KSxFdD1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZChhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhKX0oWWUpO0V0LkVuY3J5cHRvcj1mdW5jdGlvbihlKXtzKGEsZSk7dmFyIHQ9ZChhKTtmdW5jdGlvbiBhKCl7cmV0dXJuIHIodGhpcyxhKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gbihhLFt7a2V5OiJwcm9jZXNzQmxvY2siLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZSxhPXRoaXMuX2NpcGhlcixuPWEuYmxvY2tTaXplLGk9dGhpcy5faXYscz10aGlzLl9jb3VudGVyO2kmJih0aGlzLl9jb3VudGVyPWkuc2xpY2UoMCkscz10aGlzLl9jb3VudGVyLHRoaXMuX2l2PXZvaWQgMCk7dmFyIG89cy5zbGljZSgwKTthLmVuY3J5cHRCbG9jayhvLDApLHNbbi0xXT1zW24tMV0rMXwwO2Zvcih2YXIgdT0wO3U8bjt1Kz0xKXJbdCt1XV49b1t1XX19XSksYX0oRXQpLEV0LkRlY3J5cHRvcj1FdC5FbmNyeXB0b3I7dmFyIFR0PXtwYWQ6ZnVuY3Rpb24oKXt9LHVucGFkOmZ1bmN0aW9uKCl7fX0sVXQ9e2RlY3J5cHRXb3JkQXJyYXk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPUllLnBhcnNlKHQpLG49SWUucGFyc2UoYWUocikpLGk9UGUuY3JlYXRlKG5ldyBVaW50OEFycmF5KGUpKSxzPUJ0LmRlY3J5cHQoZXQuY3JlYXRlKHtjaXBoZXJ0ZXh0Oml9KSxhLHtpdjpuLG1vZGU6RXQscGFkZGluZzpUdH0pO3JldHVybiBVdC53b3JkQXJyYXlUb1VpbnQ4QXJyYXkocyl9LHdvcmRBcnJheVRvVWludDhBcnJheTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5zaWdCeXRlcyxyPWUud29yZHMsYT1uZXcgVWludDhBcnJheSh0KSxuPTAsaT0wO24hPT10Oyl7dmFyIHM9cltpKytdO2lmKGFbbisrXT0oNDI3ODE5MDA4MCZzKT4+PjI0LG49PT10KWJyZWFrO2lmKGFbbisrXT0oMTY3MTE2ODAmcyk+Pj4xNixuPT09dClicmVhaztpZihhW24rK109KDY1MjgwJnMpPj4+OCxuPT09dClicmVhazthW24rK109MjU1JnN9cmV0dXJuIGF9LGRlY29kZXJBRVNDVFJEYXRhOmZ1bmN0aW9uKGUsdCxyKXtpZihlLnZpZGVvU2VuYyl7dmFyIGE9ZS5raWRWYWx1ZSxuPWUudmlkZW9TZW5jO2Uuc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbih0LGkpe3ZhciBzPW5baV0sbz10LmRhdGEsdT1bXSxjPVtdLGw9cy5Jbml0aWFsaXphdGlvblZlY3RvcjtpZihzLnN1YnNhbXBsZXMmJnMuc3Vic2FtcGxlcy5sZW5ndGgpcy5zdWJzYW1wbGVzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuQnl0ZXNPZkNsZWFyRGF0YStlLkJ5dGVzT2ZQcm90ZWN0ZWREYXRhLHI9by5zbGljZSgwLHQpO3UucHVzaChyLnNsaWNlKDAsZS5CeXRlc09mQ2xlYXJEYXRhKSksYy5wdXNoKHIuc2xpY2UoZS5CeXRlc09mQ2xlYXJEYXRhKSksbz1vLnNsaWNlKHQpfSkpO2Vsc2V7dmFyIGY9dC5zaXplO3UucHVzaChvLnNsaWNlKDAsMCkpLGMucHVzaChvLnNsaWNlKDAsZikpLG89by5zbGljZShmKX12YXIgZD1uZXcgRGU7ZC53cml0ZS5hcHBseShkLGMpO3ZhciBoPXI/cihkLmJ1ZmZlcixhLGwpOlV0LmRlY3J5cHRXb3JkQXJyYXkoZC5idWZmZXIsYSxsKSxwPW5ldyBEZTt1LmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7dmFyIHI9Y1t0XS5sZW5ndGgsYT1oLnNsaWNlKDAscik7cC53cml0ZShlKSxwLndyaXRlKGEpLGg9aC5zbGljZShyKX0pKSxlLnNhbXBsZXNbaV0uZGF0YT1wLmJ1ZmZlcn0pKX1pZih0LmF1ZGlvU2VuYyl7dmFyIGk9dC5raWRWYWx1ZSxzPXQuYXVkaW9TZW5jO3Quc2FtcGxlcy5mb3JFYWNoKChmdW5jdGlvbihlLGEpe3ZhciBuPXNbYV0sbz1yP3IoZS5kYXRhLGksbi5Jbml0aWFsaXphdGlvblZlY3Rvcik6VXQuZGVjcnlwdFdvcmRBcnJheShlLmRhdGEsaSxuLkluaXRpYWxpemF0aW9uVmVjdG9yKTt0LnNhbXBsZXNbYV0uZGF0YT1vfSkpfX19LEN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LGEsbixzKXt2YXIgbz10aGlzO3IodGhpcyxlKSxpKHRoaXMsIl92aWRlb1NhbXBsZXMiLFtdKSxpKHRoaXMsIl9hdWRpb1NhbXBsZXMiLFtdKSxpKHRoaXMsIl9sYXN0UmVtYWluQnVmZmVyIixbXSksaSh0aGlzLCJfbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zIiwwKSx0aGlzLnZpZGVvVHJhY2s9bmV3IHosdGhpcy5hdWRpb1RyYWNrPW5ldyBPLHRoaXMubWV0YWRhdGFUcmFjaz1ufHxuZXcgaix0aGlzLmxvZz1uZXcgVGUoIk1QNERlbXV4ZXIiLCFzfHwhcy5vcGVuTG9nfHwhcy5vcGVuTG9nKSx0JiZ0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0Oyh0PW8uX3ZpZGVvU2FtcGxlcykucHVzaC5hcHBseSh0LHkoZS5mcmFtZXMpKX0pKSxhJiZhLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0Oyh0PW8uX2F1ZGlvU2FtcGxlcykucHVzaC5hcHBseSh0LHkoZS5mcmFtZXMpKX0pKX1yZXR1cm4gbihlLFt7a2V5OiJwYXJzZVNhbXBsZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigibW9vdiBpcyByZXF1aXJlZCIpO2lmKHRoaXMudmlkZW9UcmFjay5jb2RlY3x8dGhpcy5hdWRpb1RyYWNrLmNvZGVjfHwoZ2UubW9vdlRvVHJhY2soZSx0aGlzLnZpZGVvVHJhY2ssdGhpcy5hdWRpb1RyYWNrKSx0aGlzLnZpZGVvU2VuYz10aGlzLnZpZGVvVHJhY2sudmlkZW9TZW5jLHRoaXMuYXVkaW9TZW5jPXRoaXMuYXVkaW9UcmFjay5hdWRpb1NlbmMpLCF0aGlzLl9hdWRpb1NhbXBsZXMubGVuZ3RoJiYhdGhpcy5fdmlkZW9TYW1wbGVzLmxlbmd0aCl7dmFyIHQ9Z2UubW9vdlRvU2FtcGxlcyhlKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBwYXJzZSBzYW1wbGVzIGZyb20gbW9vdiBib3giKTt0aGlzLl92aWRlb1NhbXBsZXM9dC52aWRlb1NhbXBsZXN8fFtdLHRoaXMuX2F1ZGlvU2FtcGxlcz10LmF1ZGlvU2FtcGxlc3x8W119fX0se2tleToiZGVtdXgiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLGEsbil7dGhpcy5wYXJzZVNhbXBsZXMobik7dmFyIGkscyxvLHU9dGhpcy52aWRlb1RyYWNrLGM9dGhpcy5hdWRpb1RyYWNrO2lmKHUuc2FtcGxlcz1bXSxjLnNhbXBsZXM9W10scil7Zm9yKHZhciBsLGY9MCxkPXJbMF0saD1yWzFdO2Q8PWg7ZCsrKXtpZighKGk9dGhpcy5fdmlkZW9TYW1wbGVzW2RdKSl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBmb3VuZCB2aWRlbyBmcmFtZSAjIi5jb25jYXQoZCkpO289aS5vZmZzZXQtdCxzPWUuc3ViYXJyYXkobyxvK2kuc2l6ZSksKGw9bmV3IFIoaS5wdHN8fGkuZHRzLGkuZHRzKSkuZHVyYXRpb249aS5kdXJhdGlvbixsLmdvcElkPWkuZ29wSWQsaS5rZXlmcmFtZSYmbC5zZXRUb0tleWZyYW1lKCk7Zm9yKHZhciBwPTAsdj1zLmxlbmd0aC0xO3A8djspZj1lZShzLHApLHArPTQsbC51bml0cy5wdXNoKHMuc3ViYXJyYXkocCxwK2YpKSxwKz1mO3Uuc2FtcGxlcy5wdXNoKGwpfXUuYmFzZU1lZGlhRGVjb2RlVGltZT11LnNhbXBsZXNbMF0uZHRzfWlmKGEpe2Zvcih2YXIgeT1hWzBdLG09YVsxXTt5PD1tO3krKyl7aWYoIShpPXRoaXMuX2F1ZGlvU2FtcGxlc1t5XSkpdGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgZm91bmQgdmlkZW8gZnJhbWUgIyIuY29uY2F0KHkpKTtvPWkub2Zmc2V0LXQscz1lLnN1YmFycmF5KG8sbytpLnNpemUpLGMuc2FtcGxlcy5wdXNoKG5ldyBMKGkuZHRzLHMsaS5kdXJhdGlvbikpfWMuYmFzZU1lZGlhRGVjb2RlVGltZT1jLnNhbXBsZXNbMF0uZHRzfXJldHVybnt2aWRlb1RyYWNrOnUsYXVkaW9UcmFjazpjLG1ldGFkYXRhVHJhY2s6dGhpcy5tZXRhZGF0YVRyYWNrfX19LHtrZXk6ImRlbXV4UGFydCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsYSxuLGkscyxvKXtpZih0aGlzLnBhcnNlU2FtcGxlcyhuKSx0aGlzLnZpZGVvVHJhY2sudXNlRU1FPWksdGhpcy5hdWRpb1RyYWNrLnVzZUVNRT1pLHRoaXMuX2xhc3RSZW1haW5CdWZmZXImJnRoaXMuX2xhc3RSZW1haW5CdWZmZXIuYnl0ZUxlbmd0aD4wJiZ0PnRoaXMuX2xhc3RSZW1haW5CdWZmZXJTdGFydFBvcyYmdDw9dGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zK3RoaXMuX2xhc3RSZW1haW5CdWZmZXIuYnl0ZUxlbmd0aClmb3IodmFyIHU9MDt1PDIwOyl0cnl7dmFyIGM9dGhpcy5fbGFzdFJlbWFpbkJ1ZmZlci5zdWJhcnJheSgwLHQtdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zKSxsPW5ldyBVaW50OEFycmF5KGUuYnl0ZUxlbmd0aCtjLmJ5dGVMZW5ndGgpO2wuc2V0KGMsMCksbC5zZXQobmV3IFVpbnQ4QXJyYXkoZSksYy5ieXRlTGVuZ3RoKSxlPWwsdC09Yy5ieXRlTGVuZ3RoLHRoaXMuX2xhc3RSZW1haW5CdWZmZXI9bnVsbCx0aGlzLl9sYXN0UmVtYWluQnVmZmVyU3RhcnRQb3M9MDticmVha31jYXRjaChCKXtpZighKHU8MjApKXRocm93IG5ldyBFcnJvcigibmV3IFVpbnQ4QXJyYXkgZXJyb3I6LCIrQi5lcnJvck1lc3NhZ2UpO3UrK312YXIgZixkLGgscD10aGlzLnZpZGVvVHJhY2ssdj10aGlzLmF1ZGlvVHJhY2s7cC5zYW1wbGVzPVtdLHYuc2FtcGxlcz1bXSxwLnZpZGVvU2VuYz1udWxsLHYuYXVkaW9TZW5jPW51bGw7dmFyIHk9MCxtPTA7aWYodGhpcy5fdmlkZW9TYW1wbGVzLmxlbmd0aD4wJiZyLmxlbmd0aD4wKXtmb3IodmFyIGcsaz1lLmJ5dGVMZW5ndGgrdCxiPXJbMF07Yjw9clsxXTtiKyspe2lmKCEoZj10aGlzLl92aWRlb1NhbXBsZXNbYl0pKXRocm93IG5ldyBFcnJvcigiY2Fubm90IGZvdW5kIHZpZGVvIGZyYW1lICMiLmNvbmNhdChiKSk7Zi5vZmZzZXQ+PXQmJmYub2Zmc2V0K2Yuc2l6ZTw9ayYmKHk9KGg9Zi5vZmZzZXQtdCkrZi5zaXplLGQ9ZS5zdWJhcnJheShoLHkpLChnPW5ldyBSKGYucHRzfHxmLmR0cyxmLmR0cykpLmR1cmF0aW9uPWYuZHVyYXRpb24sZy5nb3BJZD1mLmdvcElkLGcuc2FtcGxlT2Zmc2V0PWYuaW5kZXgsZi5rZXlmcmFtZSYmZy5zZXRUb0tleWZyYW1lKCksZy5kYXRhPWQsZy5zaXplPWYuc2l6ZSxwLnNhbXBsZXMucHVzaChnKSl9cC5zYW1wbGVzLmxlbmd0aD4wJiYocC5nb3BJZD1wLnNhbXBsZXNbMF0uZ29wSWQscC5iYXNlTWVkaWFEZWNvZGVUaW1lPXAuc2FtcGxlc1swXS5kdHMscC5zdGFydFB0cz1wLnNhbXBsZXNbMF0ucHRzL3AudGltZXNjYWxlLHAuZW5kUHRzPXAuc2FtcGxlc1twLnNhbXBsZXMubGVuZ3RoLTFdLnB0cy9wLnRpbWVzY2FsZSx0aGlzLnZpZGVvU2VuYyYmKHAudmlkZW9TZW5jPXRoaXMudmlkZW9TZW5jLnNsaWNlKHAuc2FtcGxlc1swXS5zYW1wbGVPZmZzZXQscC5zYW1wbGVzWzBdLnNhbXBsZU9mZnNldCtwLnNhbXBsZXMubGVuZ3RoKSxwLmtpZFZhbHVlPXMpKX1pZih0aGlzLl9hdWRpb1NhbXBsZXMubGVuZ3RoPjAmJmEubGVuZ3RoPjApe2Zvcih2YXIgXz1hWzBdO188PWFbMV07XysrKXtpZighKGY9dGhpcy5fYXVkaW9TYW1wbGVzW19dKSl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBmb3VuZCB2aWRlbyBmcmFtZSAjIi5jb25jYXQoXykpO2Yub2Zmc2V0Pj10JiZmLm9mZnNldCtmLnNpemU8PWUuYnl0ZUxlbmd0aCt0JiYobT0oaD1mLm9mZnNldC10KStmLnNpemUsZD1lLnN1YmFycmF5KGgsbSksdi5zYW1wbGVzLnB1c2gobmV3IEwoZi5kdHMsZCxmLmR1cmF0aW9uLGYuaW5kZXgpKSl9di5zYW1wbGVzLmxlbmd0aD4wJiYodi5nb3BJZD12LnNhbXBsZXNbMF0uZ29wSWR8fHAuZ29wSWQsdi5iYXNlTWVkaWFEZWNvZGVUaW1lPXYuc2FtcGxlc1swXS5kdHMsdi5zdGFydFB0cz12LnNhbXBsZXNbMF0ucHRzL3YudGltZXNjYWxlLHYuZW5kUHRzPXYuc2FtcGxlc1t2LnNhbXBsZXMubGVuZ3RoLTFdLnB0cy92LnRpbWVzY2FsZSx0aGlzLmF1ZGlvU2VuYyYmKHYuYXVkaW9TZW5jPXRoaXMuYXVkaW9TZW5jLnNsaWNlKHYuc2FtcGxlc1swXS5zYW1wbGVPZmZzZXQsdi5zYW1wbGVzWzBdLnNhbXBsZU9mZnNldCt2LnNhbXBsZXMubGVuZ3RoKSx2LmtpZFZhbHVlPXMpKX10aGlzLmRlY29kZXJEYXRhKHAsdixvKTtmb3IodmFyIHc9MCx4PTA7eDxwLnNhbXBsZXMubGVuZ3RoO3grKylmb3IodmFyIFM9MCxBPXAuc2FtcGxlc1t4XS5kYXRhLEQ9QS5sZW5ndGgtMTtTPEQ7KXc9ZWUoQSxTKSxTKz00LHAuc2FtcGxlc1t4XS51bml0cy5wdXNoKEEuc3ViYXJyYXkoUyxTK3cpKSxTKz13O3JldHVybiB0aGlzLl9sYXN0UmVtYWluQnVmZmVyPWUuc3ViYXJyYXkoTWF0aC5tYXgoeSxtKSksdGhpcy5fbGFzdFJlbWFpbkJ1ZmZlci5ieXRlTGVuZ3RoPjA/dGhpcy5fbGFzdFJlbWFpbkJ1ZmZlclN0YXJ0UG9zPXQrZS5ieXRlTGVuZ3RoLXRoaXMuX2xhc3RSZW1haW5CdWZmZXIuYnl0ZUxlbmd0aDp0aGlzLl9sYXN0UmVtYWluQnVmZmVyU3RhcnRQb3M9MCx7dmlkZW9UcmFjazpwLGF1ZGlvVHJhY2s6dixtZXRhZGF0YVRyYWNrOnRoaXMubWV0YWRhdGFUcmFja319fSx7a2V5OiJyZXNldCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl92aWRlb1NhbXBsZXM9W10sdGhpcy5fYXVkaW9TYW1wbGVzPVtdLHRoaXMuX2xhc3RSZW1haW5CdWZmZXI9bnVsbCx0aGlzLl9sYXN0UmVtYWluQnVmZmVyU3RhcnRQb3M9MCx0aGlzLnZpZGVvVHJhY2sucmVzZXQoKSx0aGlzLmF1ZGlvVHJhY2sucmVzZXQoKSx0aGlzLm1ldGFkYXRhVHJhY2sucmVzZXQoKX19LHtrZXk6ImRlY29kZXJEYXRhIix2YWx1ZTpmdW5jdGlvbihlLHQscil7ZS51c2VFTUV8fHQudXNlRU1FfHxVdC5kZWNvZGVyQUVTQ1RSRGF0YShlLHQscil9fV0sW3trZXk6InByb2JlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZ2UucHJvYmUoZSl9fV0pLGV9KCksUHQ9e25vd1RpbWU6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHBhcnNlSW50KHBlcmZvcm1hbmNlLm5vdygpLDEwKX1jYXRjaChlKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19LGNvbmNhdERhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgcj1bXSxhPTA7ZSYmci5wdXNoKGUpLHQmJnIucHVzaCh0KSxyLmV2ZXJ5KChmdW5jdGlvbihlKXtyZXR1cm4gZSYmKGErPWUuYnl0ZUxlbmd0aCksITB9KSk7dmFyIG49bmV3IFVpbnQ4QXJyYXkoYSksaT0wO3JldHVybiByLmV2ZXJ5KChmdW5jdGlvbihlKXtyZXR1cm4gZSYmKG4uc2V0KGUsaSksaSs9ZS5ieXRlTGVuZ3RoKSwhMH0pKSxufX07b25tZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciByPWUuZGF0YTtzd2l0Y2goci5tZXRob2Qpe2Nhc2UiaW5pdCI6dGhpcy5jb2RlY1R5cGU9ci5hcmdzLmNvZGVjVHlwZSx0aGlzLm9wZW5sb2c9ci5hcmdzLm9wZW5Mb2csdGhpcy5NUDREZW11eGVyPW51bGwsdGhpcy5GTVA0UmVtdXhlcj1udWxsLHRoaXMuX25lZWRJbml0U2VnbWVudD0hMCx0aGlzLnN1cHBvcnRIZXZjPXIuYXJncy5zdXBwb3J0SGV2YzticmVhaztjYXNlInRyYW5zbXV4Ijp2YXIgYT1lLmRhdGEuYXJncyxuPW5ldyBVaW50OEFycmF5KGUuZGF0YS5idWZmZXIpO3RoaXMuTVA0RGVtdXhlcnx8KHRoaXMuTVA0RGVtdXhlcj1uZXcgQ3QobnVsbCxudWxsLG51bGwse29wZW5sb2c6dGhpcy5vcGVubG9nfSkpO3ZhciBpLHM9dGhpcy5NUDREZW11eGVyLmRlbXV4UGFydChuLGEuc3RhcnQsYS52aWRlb0lkeCxhLmF1ZGlvSWR4LGEubW9vdixhLnVzZUVNRSxhLmtpZFZhbHVlKTtpZih0aGlzLkZNUDRSZW11eGVyfHwiaDI2NSI9PT10aGlzLmNvZGVjVHlwZSYmIXRoaXMuc3VwcG9ydEhldmN8fCh0aGlzLkZNUDRSZW11eGVyPW5ldyBVZSh0aGlzLk1QNERlbXV4ZXIudmlkZW9UcmFjayx0aGlzLk1QNERlbXV4ZXIuYXVkaW9UcmFjayx7b3BlbkxvZzp0aGlzLm9wZW5sb2d9KSksdGhpcy5GTVA0UmVtdXhlcil7dmFyIG89dGhpcy5GTVA0UmVtdXhlci5yZW11eCh0aGlzLl9uZWVkSW5pdFNlZ21lbnQse2luaXRNZXJnZTohMH0pO28uaW5pdFNlZ21lbnQmJih0aGlzLl9uZWVkSW5pdFNlZ21lbnQ9ITEpLGk9e2J1ZmZlcjpQdC5jb25jYXREYXRhKG8uYXVkaW9TZWdtZW50LG8udmlkZW9TZWdtZW50KSxyYW5nZTphLmNvbnRleHQucmFuZ2Usc3RhdGU6YS5jb250ZXh0LnN0YXRlLGNvbnRleHQ6e3JhbmdlOmEuY29udGV4dC5yYW5nZSxmcmFnSW5kZXg6YS5jb250ZXh0LmZyYWdJbmRleCxzdGFydFB0czpNYXRoLm1pbihzLnZpZGVvVHJhY2suc3RhcnRQdHMscy5hdWRpb1RyYWNrLnN0YXJ0UHRzKSxlbmRQdHM6TWF0aC5tYXgocy52aWRlb1RyYWNrLmVuZFB0cyxzLmF1ZGlvVHJhY2suZW5kUHRzKX0saW5pdFNlZzpvLmluaXRTZWdtZW50fX10aGlzLnBvc3RNZXNzYWdlKHttZXRob2Q6InRyYW5zbXV4IixpZDplLmRhdGEuaWQsYXJnczp0KHt9LGkpfSk7YnJlYWs7Y2FzZSJyZXNldCI6dGhpcy5GTVA0UmVtdXhlciYmdGhpcy5GTVA0UmVtdXhlci5yZXNldCgpLHRoaXMuTVA0RGVtdXhlciYmdGhpcy5NUDREZW11eGVyLnJlc2V0KCksdGhpcy5GTVA0UmVtdXhlcj1udWxsLHRoaXMuTVA0RGVtdXhlcj1udWxsLHRoaXMuX25lZWRJbml0U2VnbWVudD0hMH19fSgpOwo=",hu=typeof window<"u"&&window.Blob&&new Blob([atob(Zc)],{type:"text/javascript;charset=utf-8"});function K2(){var n=hu&&(window.URL||window.webkitURL).createObjectURL(hu);try{return n?new Worker(n,{}):new Worker("data:application/javascript;base64,"+Zc,{type:"module"})}finally{n&&(window.URL||window.webkitURL).revokeObjectURL(n)}}var N2=function(n){nl(e,n);var r=rl(e);function e(i){var t;return $i(this,e),t=r.call(this),t.openlog=i.openLog,t.codecType=i.codecType,t.supportHevc=i.supportHevc,t.worker=new K2,t.worker.onmessage=function(s){t.emit(s.data.method,s.data)},t.worker.postMessage({method:"init",id:i.id||0,args:{openlog:t.openlog,supportHevc:t.supportHevc,codecType:t.codecType}}),t}return qi(e,[{key:"transmux",value:function(t,s,a,l,o,u,d,c,h){var f=s.buffer;this.worker&&this.worker.postMessage({method:"transmux",id:t,buffer:f,args:{start:a,videoIdx:l,audioIdx:o,moov:u,useEME:d,kidValue:c,context:h}},[f])}},{key:"reset",value:function(){this.worker&&this.worker.postMessage({method:"reset"})}},{key:"destroy",value:function(){this.worker&&this.worker.terminate()}}]),e}(Ci),ct={ERROR:"error",META_READY:"metaReady",MOOV_REQ_PROGRESS:"moov_request_Progress",UPDATE_LOAD_IDX:"update_load_fragmentIdx"},H2=function(n){nl(e,n);var r=rl(e);function e(i,t){var s;if($i(this,e),s=r.call(this),Xt(Qe(s),"onprogressDataArrive",function(){var a=st(me().mark(function l(o,u,d){var c;return me().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:o&&o.byteLength>0&&(c=s.timeRange[d.index].range,c&&d.range[1]>=c[1]&&!u&&(u=!0),s.log("[mp4.loadFragment onprogressDataArrive ] receive data, >>> index,",d.index,",range,",JSON.stringify(d.range),", dataLen,",o.byteLength),s._mux(o,d.range[0],d.index,u)),u&&(s.timeRange[d.index].downloaded=!0,s.bufferLoadedPos=-1,s.log("[FragLoadDowned],fragmentIdx,",d.index,",rangeEnd,",d.range[1]));case 2:case"end":return f.stop()}},l)}));return function(l,o,u){return a.apply(this,arguments)}}()),s.url=i,s.options=e.getDefaultConfig(),Object.keys(t).map(function(a){t[a]!==void 0&&t[a]!==null&&(s.options[a]=t[a])}),s.timeRange=[],s.CHUNK_SIZE=s.options.chunkSize,s.bufferLoaded=new Uint8Array(0),s.bufferLoadedPos=0,s.meta=null,s.videoTrak=null,s.audioTrak=null,s.canDownload=!0,s._loadSuccessCallBack=null,s._isPending=!1,s._metaLoading=!1,s.MP4Loader=new I2(wi(wi({segmentDuration:s.options.segmentDuration,url:i,vid:t.vid,retry:s.options.retryCount,retryDelay:s.options.retryDelay,timeout:s.options.timeout},t.reqOptions),{},{openLog:Vn()})),s.fMP4Demuxer=null,s.MP4Demuxer=null,s.FMP4Remuxer=null,s._needInitSegment=!0,s._switchBitRate=!1,s.enableWorker=s.options.enableWorker,s.enableWorker&&typeof Worker<"u")try{s.workerSequence=0,s.transmuxerWorkerControl=new N2({id:s.workerSequence,codecType:t.codecType,supportHevc:s.options.supportHevc,openLog:Vn()}),s.transmuxerWorkerControl.on("transmux",function(a){var l=a.args;s.log("[transmuxerworker end] ,range, ",JSON.stringify(l.range),",dataLen,",l.buffer.byteLength,l.context),s._loadSuccessCallBack&&s._loadSuccessCallBack(l)})}catch(a){s.log("Error in worker:",a),s.enableWorker=!1,s.transmuxerWorkerControl=null}return s.enableWorker||(s.MP4Demuxer=null,s.FMP4Remuxer=null),s.seekTime=-1,s.changeBitRateTime=-1,s}return qi(e,[{key:"changeBitRate",value:function(){var i=st(me().mark(function s(a){return me().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.url=a.url,o.next=3,this.MP4Loader.changeUrl(this.url,this.options.vid+Date.now(),this.CHUNK_SIZE);case 3:this._switchBitRate=!0,this.log("[switchBitrate] changeUrl, bitRate,",this.url);case 5:case"end":return o.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"log",value:function(t){for(var s=this.options,a=s&&s.vid?"[MP4] ".concat(s.vid," ").concat(t):"[MP4] ".concat(t),l=arguments.length,o=new Array(l>1?l-1:0),u=1;u<l;u++)o[u-1]=arguments[u];gc.apply(void 0,[a].concat(o))}},{key:"errorHandler",value:function(){var i=st(me().mark(function s(a,l){var o,u,d,c;return me().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:o=a.response,u=a.message,d=this.options?this.options.vid:"",c=null,this._isPending=!0,o?(c=new m2("network",o.status,{httpText:o.httpText,message:u,url:o.url}),this.emit(ct.ERROR,c)):(console.log("[MP4] [".concat(d,"] errorHandler,"),a),c=a,this.emit(ct.ERROR,c));case 6:case"end":return f.stop()}},s,this)}));function t(s,a){return i.apply(this,arguments)}return t}()},{key:"init",value:function(){var i=st(me().mark(function s(){return me().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.url){l.next=3;break}return l.next=3,this.MP4Loader.changeUrl(this.url,this.options.vid+Date.now(),this.CHUNK_SIZE);case 3:return l.next=5,this.getMetaInfo();case 5:case"end":return l.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"getTimeRange",value:function(){for(var t=[],s=null,a=0;this.videoTrak&&a<this.videoTrak.length;a++)s={startTime:this.videoTrak[a].startTime,endTime:this.videoTrak[a].endTime,downloaded:!1,isLoading:!1},t.push(s);if(this.audioTrak&&this.audioTrak.length>t.length)for(var l=t.length;l<this.audioTrak.length;l++)s={startTime:Math.max(this.audioTrak[l].startTime,s?s.endTime:0),endTime:Math.max(this.audioTrak[l].endTime,s?s.endTime:0),downloaded:!1,isLoading:!1},t.push(s);return t}},{key:"getMetaInfo",value:function(){var i=st(me().mark(function s(){var a=this,l,o,u,d=arguments;return me().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l=d.length>0&&d[0]!==void 0?d[0]:!0,h.prev=1,this._metaLoading=!0,this.log("getMetaInfo start"),this.bufferLoaded=new Uint8Array(0),o=0,u=function(){var f=st(me().mark(function p(m,g,b){var w;return me().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:a.log("getMetaInfo onProgressHandle, dataLen,",m?m.byteLength:-1,", state,",g,",range,",JSON.stringify(b.range)),m&&b.range[0]===o&&(a.bufferLoaded=p2(Uint8Array,a.bufferLoaded,new Uint8Array(m)),o+=m.byteLength),b.meta&&!a.meta&&(w=b.meta,a.videoTrak=w.videoSegments,a.audioTrak=w.audioSegments,a.timeRange=a.getTimeRange(),a.meta=wi(wi({},w.meta),{},{ext:{videoTrak:a.videoTrak,audioTrak:a.audioTrak}}),w.bufferLoaded=a.bufferLoaded,a.log("meta reach"),l&&a.emit(ct.META_READY,a.meta)),a.meta&&g&&(a.log("[getMetaInfo req end]"),a._metaLoading=!1),a.meta&&(m||g)&&(a.log("emit moov_req_progress"),a.emit(ct.MOOV_REQ_PROGRESS));case 5:case"end":return k.stop()}},p)}));return function(m,g,b){return f.apply(this,arguments)}}(),h.next=9,this.MP4Loader.loadMetaProcess(this.MP4Loader.cache,[0,this.CHUNK_SIZE],u);case 9:h.next=15;break;case 11:h.prev=11,h.t0=h.catch(1),console.error("[MP4] trigger errorHandler getMetaInfo",h.t0===null||h.t0===void 0?void 0:h.t0.message),this.loadError(h.t0,"getMetaInfo");case 15:case"end":return h.stop()}},s,this,[[1,11]])}));function t(){return i.apply(this,arguments)}return t}()},{key:"getFragmentIdx",value:function(t){var s,a;if(this.videoTrak.length){if(s=this.videoTrak.find(function(o){return o.startTime<=t&&o.endTime>t}),a=this.audioTrak.find(function(o){return o.startTime<=t&&o.endTime>t}),s&&a)return Math.min(s.index,a.index);if(s||a)return s?s.index:a.index;var l=Number.MAX_VALUE;return this.videoTrak&&this.videoTrak.length>0&&(l=this.videoTrak.length-1),this.audioTrak&&this.audioTrak.length>0&&(l=Math.min(this.audioTrak.length-1,l)),l}else return a=this.audioTrak.find(function(o){return o.startTime<=t&&o.endTime>t}),a?a.index:0}},{key:"_checkHasMeta",value:function(){var i=st(me().mark(function s(){var a;return me().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.log(" loadMeta start"),this._metaLoading=!0,o.next=4,this.MP4Loader.loadMeta(this.MP4Loader.cache,Math.round(this.CHUNK_SIZE/2));case 4:return a=o.sent,this._metaLoading=!1,this.videoTrak=a.videoSegments,this.audioTrak=a.audioSegments,this.meta=wi(wi({},a.meta),{},{ext:{videoTrak:this.videoTrak,audioTrak:this.audioTrak}}),this.timeRange=this.getTimeRange(),this.bufferLoaded=new Uint8Array(0),a.bufferLoaded=this.bufferLoaded,o.abrupt("return",!0);case 13:case"end":return o.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"resetFragmentLoadState",value:function(t){for(var s=0;s<this.timeRange.length;s++)s<t?(this.timeRange[s].downloaded=!0,this.timeRange[s].isLoading=!0):(this.timeRange[s].downloaded=!1,this.timeRange[s].isLoading=!1)}},{key:"getFragRange",value:function(t){var s,a,l,o,u=null;this.videoTrak&&(u=t<this.videoTrak.length?this.videoTrak[t]:this.videoTrak[this.videoTrak.length-1]);var d=null;this.audioTrak&&(d=t<this.audioTrak.length?this.audioTrak[t]:this.audioTrak[this.audioTrak.length-1]);var c=0,h=0;this.videoTrak&&t>=this.videoTrak.length-1&&(c=-1),this.audioTrak&&t>=this.audioTrak.length-1&&(h=-1);var f=[Math.min(((s=u)===null||s===void 0?void 0:s.range[0])||1/0,((a=d)===null||a===void 0?void 0:a.range[0])||1/0),Math.max(((l=u)===null||l===void 0?void 0:l.range[1])+c||0,((o=d)===null||o===void 0?void 0:o.range[1])+h||0)];return t<this.timeRange.length&&(this.timeRange[t].range=f),f}},{key:"load",value:function(){var i=st(me().mark(function s(a,l){var o,u,d;return me().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this._loadSuccessCallBack=l,!(this._switchBitRate&&!this._metaLoading)){h.next=12;break}return this.log("[switchBitrate], switch bitRate start load, time,",a>=this.videoTrak.length?this.audioTrak[a].startTime:this.videoTrak[a].startTime,", fragIndex,",a),h.next=5,this._checkHasMeta();case 5:o=h.sent,this.changeBitRateTime>0&&(this.timeRange[a].startTime<=this.changeBitRateTime&&this.changeBitRateTime<this.timeRange[a].endTime?this.log("[switchBitrate], not need update load fragIndex",a,",stTime,",this.changeBitRateTime):(a=this.getFragmentIdx(this.changeBitRateTime),this.log("[switchBitrate], need update load fragIndex",a,",stTime,",this.changeBitRateTime,",newBitrateTimeRange,",this.timeRange[a].startTime,"-",this.timeRange[a].endTime),this.emit(ct.UPDATE_LOAD_IDX,a)),this.seekTime=this.changeBitRateTime,this.changeBitRateTime=-1),this.resetFragmentLoadState(a),this.log("[switchBitrate], reset timerange state,",a),this._needInitSegment=!0,this.resetTansmuxer(),o&&(this._switchBitRate=!1);case 12:if(!(this._switchBitRate&&this._metaLoading)){h.next=14;break}return h.abrupt("return");case 14:u=this.getFragRange(a),this.log("loadFragment,",a,",range,",JSON.stringify(u)),this.seekTime>0?(d=this.getSubRange(a,this.seekTime,u),this.loadFragment(a,d),this.seekTime=-1):this.loadFragment(a,u);case 17:case"end":return h.stop()}},s,this)}));function t(s,a){return i.apply(this,arguments)}return t}()},{key:"getSubRange",value:function(t,s,a){var l=a[0],o=a[0],u=1,d=!1;if(this.log(">>>>>getSubRange time,",s,JSON.stringify(a)),this.videoTrak){var c=t<this.videoTrak.length?this.videoTrak[t]:this.videoTrak[this.videoTrak.length-1];if(c.frames.length===0)return this.log(">>>>>getSubRange video, no frames"),a;var h=c.frames.filter(U2),f=this.meta.videoTimescale,p=h[0].startTime/f;this.log(">>>>>getSubRange video, startTime,",c.startTime,",endTime,",c.endTime);for(var m=0;m<h.length;m++)this.log(">>>>>getSubRange video keyFrameList, startTime,",h[m].startTime/f,",range,",h[m].offset);for(;u<h.length;u++){var g=h[u].startTime/f;if(p<=s&&s<g&&a[0]<h[u-1].offset){l=h[u-1].offset,d=!0,this.log(">>>>>getSubRange video end, startTime,",p,",endTime,",g,",startRange,",l,", keyFrameIndex,",u-1);break}p=g}!d&&p<=s&&s<c.endTime+.8&&(l=h[u-1].offset,this.log(">>>>>getSubRange video last, startTime,",p,",endTime,",c.endTime,",startRange,",l))}if(u=1,this.audioTrak){var b=t<this.audioTrak.length?this.audioTrak[t]:this.audioTrak[this.audioTrak.length-1];if(b.frames.length===0)return this.log(">>>>>getSubRange video, no frames"),a;var w=b.frames,S=this.meta.audioTimescale;u=Math.floor((s*S-w[0].startTime)/b.frames[0].duration),u=Math.min(w.length-1,u);for(var k=u>0?w[u-1].startTime/S:w[0].startTime/S;u>=0&&u<w.length;){if(u>0&&k>s){u-=1,k=w[u].startTime/S;continue}var L=(w[u].startTime+w[u].duration)/S;if(k<=s&&s<L&&a[0]<w[u].offset){o=w[u].offset,d=!0,this.log(">>>>>getSubRange audio end, startTime,",k,",endTime,",L,",startRange,",o,", index,",u);break}k=L,u++}}var T=[Math.min(o,l),a[1]];return this.log(">>>>>getSubRange finalRange ",JSON.stringify(T),",oldRange,",JSON.stringify(a)),T}},{key:"_mux",value:function(t,s,a,l){var o=this.getSamplesRange(a,"video"),u=this.getSamplesRange(a,"audio"),d=[s,s+t.byteLength];if(this.transmuxerWorkerControl&&!this.meta.isFragmentMP4){var c={range:d,state:l,fragIndex:a};this.log("[transmuxerworker start] ,range, ",JSON.stringify(d),",dataLen,",t.byteLength,c),this.transmuxerWorkerControl.transmux(this.workerSequence,t,s,o,u,this.meta.moov,this.useEME,this.kidValue,c)}else try{var h;this.meta.isFragmentMP4?(this.fMP4Demuxer||(this.fMP4Demuxer=new Bd),h=this.fMP4Demuxer.demuxPart(t,s,this.meta.moov)):(this.MP4Demuxer||(this.MP4Demuxer=new k1(this.videoTrak,this.audioTrak,null,{openLog:Vn()})),h=this.MP4Demuxer.demuxPart(t,s,o,u,this.meta.moov,this.useEME,this.kidValue)),!this.FMP4Remuxer&&(!this.checkCodecH265()||this.options.supportHevc)&&(this.FMP4Remuxer=new tl(h.videoTrack,h.audioTrack,{openLog:Vn()}));var f;this.log("[mux], videoTimeRange,",h.videoTrack?[h.videoTrack.startPts,h.videoTrack.endPts]:null,",audioTimeRange,",h.audioTrack?[h.audioTrack.startPts,h.audioTrack.endPts]:null);var p=Math.min(h.videoTrack.startPts,h.audioTrack.startPts),m=Math.max(h.videoTrack.endPts,h.audioTrack.endPts),g=[p,m];if(this.FMP4Remuxer){var b=this.FMP4Remuxer.remux(this._needInitSegment,{initMerge:!0,range:d});b.initSegment&&(this._needInitSegment=!1);var w=jt.concatData(b.audioSegment,b.videoSegment);f={buffer:w,range:d,state:l,context:{range:d,fragIndex:a,timeRange:g},initSeg:b.initSegment}}else f={videoTrack:h.videoTrack,audioTrack:h.audioTrack,buffer:null,range:d,state:l,context:{range:d,fragIndex:a,timeRange:g}};this._loadSuccessCallBack&&this._loadSuccessCallBack(f)}catch(k){console.error("mux err:",k);var S=new v2(un.remux,Ut.muxError,{msg:JSON.stringify(k)});this.errorHandler(S,"mux",{fragIndex:a,range:[s,s+t.byteLength]})}}},{key:"getSamplesRange",value:function(t,s){var a=[];switch(s){case"video":if(this.videoTrak&&t<this.videoTrak.length){var l=this.videoTrak[t].frames;if(!l.length)break;a.push(l[0].index),a.push(l[l.length-1].index)}break;case"audio":if(this.audioTrak&&t<this.audioTrak.length){var o=this.audioTrak[t].frames;if(!o.length)break;a.push(o[0].index),a.push(o[o.length-1].index)}break;default:console.warn("[getSamplesRange] type ",s," is invalid");break}return a}},{key:"loadFragment",value:function(){var i=st(me().mark(function s(a,l){var o,u,d,c;return me().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this._isPending||l.length>0&&l[0]===0&&l[1]===0||this.timeRange[a].isLoading)){f.next=2;break}return f.abrupt("return");case 2:if(this.log("[MP4.loadFragment] ,fragIndex,",a,",range ",l,",len ,",l[1]-l[0],", bufferLoaded_Len,",this.bufferLoaded.byteLength),!(l.length>=2&&l[1]&&l[1]>0&&l[1]<=this.bufferLoaded.byteLength)){f.next=13;break}this.timeRange[a].isLoading=!0,o=Math.max(l[0],this.bufferLoadedPos),u=new Uint8Array(this.bufferLoaded.slice(o,l[1])),this.log("[mp4.loadFragment] has all data: ",o,l[1]),this.timeRange[a].downloaded=!0,this.bufferLoadedPos=-1,this._mux(u,o,a,!0),f.next=34;break;case 13:if(!(l.length>=2&&l[0]&&l[0]<=this.bufferLoaded.byteLength)){f.next=29;break}if(this.timeRange[a].isLoading){f.next=27;break}if(d=Math.max(l[0],this.bufferLoadedPos),c=new Uint8Array(this.bufferLoaded.slice(d,l[1])),!(c.byteLength>0)){f.next=22;break}return this.bufferLoadedPos=d+c.byteLength,this.log("[mp4.loadFragment] has part data: ",d,d+c.byteLength),this._mux(c,d,a,l[1]<=this.bufferLoadedPos),f.abrupt("return");case 22:if(!(!this._metaLoading&&!this.timeRange[a].isLoading)){f.next=27;break}return this.log("[mp4.loadFragment] ready to load part data >>> ",this.bufferLoaded.byteLength,l[1]),this.timeRange[a].isLoading=!0,f.next=27,this.startLoad([this.bufferLoaded.byteLength,l[1]],a);case 27:f.next=34;break;case 29:if(!((!this._metaLoading||l[0]>=this.CHUNK_SIZE)&&!this.timeRange[a].isLoading)){f.next=34;break}return this.timeRange[a].isLoading=!0,this.log("[mp4.loadFragment],ready to load all data ,segmentIdx, ",a,",range >>> ",JSON.stringify(l)),f.next=34,this.startLoad(l,a);case 34:case"end":return f.stop()}},s,this)}));function t(s,a){return i.apply(this,arguments)}return t}()},{key:"startLoad",value:function(){var i=st(me().mark(function s(a,l){return me().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,this.MP4Loader.loadData(a,this.MP4Loader.cache,{index:l,onProgress:this.onprogressDataArrive,onProcessMinLen:this.options.onProcessMinLen});case 3:u.next=9;break;case 5:u.prev=5,u.t0=u.catch(0),console.error("[MP4] trigger errorHandler getMetaInfo",u.t0===null||u.t0===void 0?void 0:u.t0.message),this.loadError(u.t0,"loadFragment",{range:a,fragIndex:l});case 9:case"end":return u.stop()}},s,this,[[0,5]])}));function t(s,a){return i.apply(this,arguments)}return t}()},{key:"loadError",value:function(t,s,a){var l;!t.response&&(t.response={}),t.isTimeout?t.response.status="timeout":t!=null&&(l=t.response)!==null&&l!==void 0&&l.status||(t.response.status="networkError"),this.errorHandler(t,s,a)}},{key:"cancelLoading",value:function(){var i=st(me().mark(function s(){return me().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.MP4Loader;case 2:if(l.t0=l.sent,!l.t0){l.next=5;break}this.MP4Loader.cancel();case 5:case"end":return l.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"update",value:function(t){this.url=t}},{key:"checkCodecH265",value:function(){var t=this.meta&&(this.meta.videoCodec.indexOf("hvc1")>-1||this.meta.videoCodec.indexOf("hev1")>-1);return t}},{key:"destroy",value:function(){this.hasDestroyed||(this.resetTansmuxer(),this.transmuxerWorkerControl&&this.transmuxerWorkerControl.destroy(),this._isPending=!1,this._metaLoading=!1,this.bufferLoadedPos=0,this.bufferLoaded=new Uint8Array(0),this.MP4Loader&&(this.MP4Loader.cancel(),this.MP4Loader.destroy()),this.hasDestroyed=!0)}},{key:"resetTansmuxer",value:function(){this.MP4Demuxer&&this.MP4Demuxer.reset(),this.MP4Demuxer=null,this.FMP4Remuxer&&this.FMP4Remuxer.reset(),this.FMP4Remuxer=null,this.transmuxerWorkerControl&&this.transmuxerWorkerControl.reset()}}],[{key:"getDefaultConfig",value:function(){return{segmentDuration:5,onProcessMinLen:1024,chunkSize:8e5,retryCount:3,retryDelay:1e3,timeout:3e3,enableWorker:!1,playerId:"",vid:"",ext:{}}}}]),e}(Ci);function U2(n){if(n.keyframe)return n}var O2=function(){function n(r){$i(this,n),this.onTick_=r,this.cancelPending_=null}return qi(n,[{key:"tickAfter",value:function(e){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.stop();var s=!0,a=null;this.cancelPending_=function(){window.clearTimeout(a),s=!1};var l=function(){s&&(i.onTick_(),t&&t())};return a=window.setTimeout(l,e*1e3),this}},{key:"tickEvery",value:function(e){var i=this;this.tickAfter(e,function(){i.tickEvery(e)})}},{key:"stop",value:function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)}}]),n}(),z2=function(){function n(){$i(this,n);var r,e,i=new Promise(function(s,a){r=s,e=a}),t=i;return t.resolve=function(s){r(s),t.state="fulfilled"},t.reject=function(s){e(s),t.state="rejected",t.isBreak=s==="DESTROYED"},t.state="pending",t}return qi(n,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),n}(),A2="DESTROYED",pu=null,Ks=null,fu=null,mu=null,B2=function(n){nl(e,n);var r=rl(e);function e(i){var t;return $i(this,e),t=r.call(this,i),Xt(Qe(t),"_onMp4DataCallBack",function(){t._isMseInit&&t._onTimeUpdate()}),Xt(Qe(t),"_onMp4MetaReady",function(s){var a=Qe(t),l=a.config,o=t.mp4.checkCodecH265();try{if(o&&!t.config.supportHevc){var u="browser not support HEVC",d=new Di(t.player,{errorType:"runtime",errorTypeCode:un.runtime,errorCode:Ut.h265Error,errorMessage:u,vid:l.vid,mediaError:{code:Ut.h265Error,message:u}});t._errorHandler(d)}else t._initMse(s),t._initPromise.resolve()}catch(h){var c=new Di(t.player,{errorType:"runtime",errorTypeCode:un.runtime,errorCode:Ut.mse,errorMessage:h==null?void 0:h.message,vid:l.vid,mediaError:{code:Ut.other1,message:h==null?void 0:h.message}});t._errorHandler(c);return}t._loadData()}),Xt(Qe(t),"_onMp4Error",function(s){var a=t.playerConfig.vid;console.error("[Index] _onMp4Error",a,s),t._errorHandler(s)}),Xt(Qe(t),"_loadDataSuccess",function(s){if(!(t.isDestroy||!t.mse)){t.log("[loadFragment] _loadDataSuccess ",JSON.stringify(s.context.range),",dataLen,",s.buffer?s.buffer.byteLength:0,s.state);try{s.initSeg&&(t._appendInitSeg(s.initSeg),(!s.buffer||s.buffer.byteLength<1)&&(t.log("no data, must load data"),t._onTimeUpdate()));var a=s.buffer,l=s.state,o=s.context;if(t.mse&&l&&(!a||a.byteLength<=0)&&o.fragIndex===t.mp4.timeRange.length-1){var u=t.player.buffered;u&&u.length>0&&(t.bufferEndTime=u.end(u.length-1)),t._isEnded(),t.log("loaded ended !!!==>>>",JSON.stringify(o.range),", fragIndex,",o.fragIndex,", bufferEndTime,",t.bufferEndTime,",meta_duration,",t.mp4.meta.duration)}if(t.mse&&l&&o.fragIndex===t.mp4.timeRange.length-1&&(!a||a.byteLength<=0)){var d=t.player.buffered;d&&d.length>0&&(t.bufferEndTime=d.end(d.length-1)),t._isEnded(),t.log("load ended !!!==>>>",t.playerConfig.vid,JSON.stringify(o.range),", fragIndex,",o.fragIndex,", bufferEndTime,",t.bufferEndTime,",meta_duration,",t.mp4.meta.duration)}a&&t.mse&&a&&a.byteLength>0&&t._appendBuffer(Ie.VIDEO,a,o,l)}catch(h){t.log("appendBuffer error",h);var c=new Di(t.player,{errorType:"runtime",errorTypeCode:un.runtime,errorCode:Ut.mse,vid:t.player.config.vid,errorMessage:h.message,mediaError:{code:Ut.mse,message:h.message}});t._errorHandler(c)}s!=null&&s.state&&t._onTimeUpdate()}}),Xt(Qe(t),"_onWaiting",function(){var s=Qe(t),a=s.player,l=s.config;clearTimeout(t._waitInBufferTimer),t._waitInBufferTimer=null;var o=a.currentTime,u=a.bufferedPoint;u.end>0&&u.end-a.currentTime>=2&&t._waitAdjustTimeCnt<l.waitJampBufferMaxCnt&&(t._waitInBufferTimer=setTimeout(function(){t._waitAdjustTimeCnt++,a.currentTime=a.currentTime+.5,t.log("[waitInBufferTimeout], waitAdjustTimeCnt,",t._waitAdjustTimeCnt,",curtime,",o,jt.nowTime())},l.waitingInBufferTimeOut))}),Xt(Qe(t),"_onSeeking",st(me().mark(function s(){var a,l,o,u,d,c,h,f,p,m,g;return me().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(a=Qe(t),l=a.player,o=a.mp4,u=l.currentTime,t.log("[seekTime], curTime,",u,",buffer,",l.buffered2.bufferedList),!(!o||!o.meta)){w.next=5;break}return w.abrupt("return");case 5:if(t.endofstream=!1,o.bufferLoadedPos=-1,o._metaLoading=!1,d=l.bufferedPoint,c=!1,h=0,!(d.end>0)){w.next=25;break}if(c=!0,!(o.meta.duration-d.end<.5)){w.next=17;break}return t._startProgress(),t.log("[seeking in buffered range], buffer end,",d.end,", duration,",o.meta.duration),w.abrupt("return");case 17:if(h=o.getFragmentIdx(d.end),t._curLoadSegmentIdx!==h){w.next=22;break}return t._startProgress(),t.log("[seeking in buffered range], seek fragIndex is current load segmentIdx",h),w.abrupt("return");case 22:o.seekTime=d.end,h<0&&(h=t._curLoadSegmentIdx),t.log("[seeking in buffered range], seekTime ",u,",bufferRange,",d.start,"-",d.end,", fragIndex,",h);case 25:return c||(o.seekTime=u,h=o.getFragmentIdx(u),h<0&&(h=t._curLoadSegmentIdx),t.log("[seekTime out buffer range], curTime,",u,", Idx,",h),f=Qe(t),p=f.mse,p&&p.isFull()&&(m=l.buffered2.bufferedList,g=m[m.length-1],p.clearOpQueues(Ie.VIDEO),t._checkRemoveSourceBuffer([g.start,g.end],l.currentTime,!0,!0))),w.next=28,o.cancelLoading();case 28:o.resetFragmentLoadState(h),t._curLoadSegmentIdx=h,t._onTimeUpdate(),t._startProgress(),t._isEnded();case 33:case"end":return w.stop()}},s)}))),Xt(Qe(t),"changeDefineCanPlay",function(s,a,l,o){var u=Qe(t),d=u.player;if(d.ended){d.currentTime=0;return}t.log("[oldChangeDefinition],this._changeDefState,",t._changeDefState),d.currentTime=t._changeDefState?t._changeDefState.currentTime:s;var c=t._changeDefState?t._changeDefState.paused:a;c?d.pause():d.play(),t._changeDefState=null,d.emit(Nc,{from:l,to:o})}),Xt(Qe(t),"changeDefinition",function(){var s=st(me().mark(function a(l,o){var u,d,c,h,f,p,m;return me().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(u=Qe(t),d=u.player,c=u.config,h=u.mp4,o||(o=d.curDefinition),t._MSEError=!1,!c.witchBitRateWay){b.next=6;break}return t.oldChangeDefinition(l,o),b.abrupt("return");case 6:if(d.emit(Hc,{from:o,to:l}),f=d.currentTime,p=h.getFragmentIdx(f),p<0&&(p=t._curLoadSegmentIdx),t.log("switchBitrate:point,fragIndex,",p,",startTime,",h.timeRange[p].startTime,",currentTime,",d.currentTime),!h){b.next=16;break}return t.mp4.changeBitRateTime=f,b.next=15,h.cancelLoading();case 15:h._metaLoading&&(h._metaLoading=!1);case 16:return t._removeBuffeEndTime=h.timeRange[p].startTime,t._isChangeDefinition=!0,m=d.getBufferedRange(d.buffered),m[1]>0&&m[1]-d.currentTime>5&&(t.mse.clearOpQueues(Ie.VIDEO),t.mse.remove(Ie.VIDEO,d.currentTime+5,m[1])),t.log("switchBitrate: resetFragmentLoadState,",p),h.resetFragmentLoadState(p),t._curLoadSegmentIdx=p,b.next=25,t.mp4.changeBitRate(l);case 25:t._onTimeUpdate(),d.emit("RESOLUTION_UPDATE",l);case 27:case"end":return b.stop()}},a)}));return function(a,l){return s.apply(this,arguments)}}()),Xt(Qe(t),"_replayHook",function(){var s;return(s=t.player)===null||s===void 0||s.play(),!1}),Xt(Qe(t),"_retryHook",function(){return t.beforePlayerInit(),!1}),t.mp4=null,t.mse=null,t._waitAdjustTimeCnt=0,t._lastCheckTime=jt.nowTime(),t._removeBuffeEndTime=0,t._pendingPromises=[],t}return qi(e,[{key:"afterCreate",value:function(){var t=this;window.__mp4player=this;try{hn.defineGetterOrSetter(this.player,{__url:{get:function(){try{return t.mse?t.mse.url:t.config.url}catch{return null}}}})}catch{}this._proxyPlayer()}},{key:"attachEvents",value:function(){this.off(Zs,this._onSeeking),this.on(Zs,this._onSeeking),this.on(ml,this._onWaiting),this.off(Cn,this.switchURL),this.on(Cn,this.switchURL)}},{key:"detachEvents",value:function(){this.off(Zs,this._onSeeking),this.off(ml,this._onWaiting),this.off(Cn,this.switchURL)}},{key:"_proxyPlayer",value:function(){var t=this;typeof this.player.playNext=="function"&&(pu=this.player.playNext),this.player.playNext=function(){t.playNext.apply(t,arguments)},Ks=this.player._startInit,mu=this.player.switchURL,fu=this.player.changeDefinition,this.player._startInit=this._playerStartInit.bind(this),this.player.switchURL=this.switchURL.bind(this),this.player.changeDefinition=this.changeDefinition.bind(this),this.player.removeHooks("replay",this._replayHook),this.player.removeHooks("retry",this._retryHook)}},{key:"_playerStartInit",value:function(t){var s=this,a=this.config,l=this.playerConfig;a.supportHevc===void 0&&cr!==null&&cr!==void 0&&cr.isHevcSupported&&cr.isHevcSupported()&&(a.supportHevc=!0);var o=this.initMp4();this._initPromise=o,this._addPendingPromise(this._initPromise),this.mse&&Kc.typeOf(t)==="String"&&/^blob/.test(t)&&t!==this.mse.url&&(t=l.url),o.then(function(){s.mse&&(t=s.mse.url),s.attachEvents(),s._startProgress()}).catch(function(u){var d=s._initPromise?s._initPromise.isBreak:!1;if(!(s.isDestroy||d)){var c=u;c.errorCode||(c=new Di(s.player,{errorType:un.RUNTIME,errorCode:(u==null?void 0:u.errorCode)||Ut.other,vid:s.playerConfig.vid,errorMessage:(u==null?void 0:u.errorMessage)||(u==null?void 0:u.message),mediaError:{code:(u==null?void 0:u.httpCode)||Ut.other,message:(u==null?void 0:u.errorMessage)||(u==null?void 0:u.message),errorType:u==null?void 0:u.errorType}}),c.url=t),s.useVideoLoad=!0,s.player.vtype="MP4_1",s.player.emit("playCatch",s.player.vtype,c)}}).finally(function(){if(s._initPromise){var u=s._initPromise.isBreak;u||(s._initPromise&&s._removePendingPromise(s._initPromise),s._initPromise=null,!s.isDestroy&&!u&&Ks.call(s.player,t))}})}},{key:"initMp4",value:function(){var t=this,s=this.player;s.config.vid||(s.config.vid=Date.now());var a=new z2;return this.mp4&&(this.mp4.off(ct.META_READY,this._onMp4MetaReady),this.mp4.off(ct.ERROR,this._onMp4Error),this.mp4.off(ct.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.destroy(),this.mp4=null),this.mp4=new H2(s.config.url,wi(wi({},this.config),{},{vid:s.config.vid})),this.mp4.on(ct.META_READY,this._onMp4MetaReady),this.mp4.on(ct.ERROR,this._onMp4Error),this.mp4.on(ct.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.on(ct.UPDATE_LOAD_IDX,function(l){t._curLoadSegmentIdx=l,t.log("[update curLoadSegmentIdx]",l)}),this.mp4.init(),a}},{key:"setConfig",value:function(t){this.config=Object.assign(this.config,t)}},{key:"playNext",value:function(t){var s=this.player;this._defInited=!1,s.resetState(),s._currentTime=0,s._duration=0,s.isPlaying=!1,this._MSEError=!1,s.pause(),this._reset(),s.setConfig(t),this.log("[Index] playNext",t),s.play(),this.emit("playnext")}},{key:"checkDegrade",value:function(t){var s=this.config.closeDowngrade;return!s||t.httpCode==="networkError"}},{key:"_errorHandler",value:function(t){var s,a=this.player,l=this.config;if(!(!a||this.useVideoLoad)){!t.url&&(s=this.mp4)!==null&&s!==void 0&&s.url&&(t.url=this.mp4.url);var o=a.paused;console.error("final error !!!!, ",l.vid,t),this.player.vtype="MP4_2",this.player.emit("playCatch",this.player.vtype,t);var u=this.checkDegrade(t);if(u)this._initPromise?this._removeAndRejectInitPromise(t):this._startDegradedPlayback(t,o);else{this.player.pause(),this._reset();var d=a.currentTime;this.destroyMSE(),a.currentTime=d,this.emit("error",t)}}}},{key:"_startDegradedPlayback",value:function(t,s){var a=this;console.log(">>>_startDegradedPlayback");var l=this.player,o=this.playerConfig;this.useVideoLoad=!0,this.destroyMSE(),this._currentTime=l.currentTime,this.__onmetadataHandle=function(){a._currentTime&&(l.currentTime=a._currentTime),s?a.player.pause():a.player.play(),l.media.removeEventListener("loadedmetadata",a.__onmetadataHandle),a.__onmetadataHandle=null},l.media.addEventListener("loadedmetadata",this.__onmetadataHandle);var u=o.url;l.media.src=u}},{key:"_addPendingPromise",value:function(t){this._pendingPromises.push(t)}},{key:"_removePendingPromise",value:function(t){var s=this._pendingPromises.indexOf(t);s>-1&&this._pendingPromises.splice(s,1)}},{key:"_cancelPendingPromises",value:function(){this._pendingPromises.length>0&&this._pendingPromises.forEach(function(t){t.reject(A2)}),this._pendingPromises=[]}},{key:"_removeAndRejectInitPromise",value:function(t){this._initPromise&&(this._removePendingPromise(this._initPromise),this._initPromise.reject(t))}},{key:"_initMse",value:function(){var i=st(me().mark(function s(a){var l=this,o,u,d,c,h;return me().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.mse){p.next=4;break}return p.next=3,this.mse.unbindMedia();case 3:this.mse=null;case 4:o=!!a.videoCodec,u=!!a.audioCodec,o&&u?d='video/mp4; codecs="'.concat(a.videoCodec,', mp4a.40.5"'):o?d='video/mp4; codecs="'.concat(a.videoCodec,'"'):d='video/mp4; codecs="mp4a.40.5"',c=Xt({},Ie.VIDEO,{mimeType:"video/mp4",codec:d}),this.mse=new Ie,h=this.mse.bindMedia(this.player.video),h.then(function(){var m=Object.keys(c);try{for(var g=0;g<m.length;g++){var b=m[g];l.mse.createSource(b,c[b].codec)}}catch(w){console.error("MSE error: ",w),l._errorHandler(w)}l._isMseInit=!0,l._onTimeUpdate()});case 11:case"end":return p.stop()}},s,this)}));function t(s){return i.apply(this,arguments)}return t}()},{key:"destroyMSE",value:function(){var i=st(me().mark(function s(){var a;return me().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(a=this.mse)===null||a===void 0?void 0:a.unbindMedia();case 2:this.mse=null;case 3:case"end":return o.stop()}},s,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"_onTimeUpdate",value:function(){var t=this,s=this.mse,a=this.mp4,l=this.player,o=this.config;if(a){var u=a.timeRange,d=l.getBufferedRange(l.buffered2);if(s&&a&&a.canDownload){jt.nowTime()-this._lastCheckTime>1e3&&(this._lastCheckTime=jt.nowTime(),this._loadStuckCheck(),this._checkRemoveSourceBuffer(d,l.currentTime));var c=l.paused?l.currentTime+o.minBufferLength:l.currentTime+o.maxBufferLength;d[1]-c<0&&u.every(function(h,f){if(h.downloaded)return!0;if(!t._isChangeDefinition&&h.endTime-h.startTime>1&&t._isInBuffer(h))return h.downloaded=!0,h.isLoading=!0,t.log("onTimeUpdate, ".concat(f," download segment, has buffer"),h.startTime,h.endTime),!0;h.startTime-l.currentTime<o.maxBufferLength&&(t._curLoadSegmentIdx=f,t.log("[onTimeUpdate],load index==>>>, ",f,",IdxTimeRange, ",h.startTime,"-",h.endTime,",buffEnd, ",d[1],",playCurTime,",l.currentTime,", bufferLen,",d[1]-l.currentTime,",bufferRangeList,",t.player.buffered2?t.player.buffered2.bufferedList:null),t._loadData())}),this._isEnded()}this.checkRemoveOldBitrateBuffer()}}},{key:"checkRemoveOldBitrateBuffer",value:function(){var t=this.mse,s=this.player;t&&this._removeBuffeEndTime>0&&s.currentTime>this._removeBuffeEndTime+1&&(this.log("remove old bitrate buffer",this._removeBuffeEndTime),t.remove(Ie.VIDEO,0,this._removeBuffeEndTime-1),this._removeBuffeEndTime=0)}},{key:"_isInBuffer",value:function(t){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=!1,l=this.player.video.buffered,o=0;o<l.length;o++){var u=l.start(o)-s,d=l.end(o)+s;if(u<=t.startTime&&t.endTime<=d){a=!0;break}}return a}},{key:"_loadData",value:function(){var i=st(me().mark(function s(){return me().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!this.mp4||!this._isMseInit)){l.next=3;break}return this.log("loadData, player.mp4 null",this._isMseInit),l.abrupt("return");case 3:return l.prev=3,l.next=6,this.mp4.load(this._curLoadSegmentIdx,this._loadDataSuccess);case 6:l.next=11;break;case 8:l.prev=8,l.t0=l.catch(3),console.error("[Index] _loadData error",this.playerConfig.vid,l.t0);case 11:case"end":return l.stop()}},s,this,[[3,8]])}));function t(){return i.apply(this,arguments)}return t}()},{key:"_appendInitSeg",value:function(t){var s=this;!this.mp4||!this.mse||this.mse.append(Ie.VIDEO,t,{vid:this.playerConfig.vid,range:null,dataLen:t.byteLength,isinit:!0}).then(function(a){s.log("appendInitSeg end ==>>>",a.context?a.context:null,", costTime,",a.costtime)})}},{key:"_appendBuffer",value:function(t,s){var a=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,u=this.mse,d=this.config;u.append(t,s,{vid:d.vid,fragIndex:l.fragIndex,range:l.range,dataLen:s.byteLength,state:o}).then(function(c){if(a.log("player appendBuffer end ==>>>",c.context?c.context:null,", costTime,",c.costtime,", opt,",c.name,",bufferRange,",a.player.getBufferedRange()),a.mse&&l.state&&l.fragIndex===a.mp4.timeRange.length-1){var h=a.player.buffered;h&&h.length>0&&(a.bufferEndTime=h.end(h.length-1)),a._isEnded(),a.log("loaded ended !!!==>>>",l.range,", fragIndex,",l.fragIndex,", bufferEndTime,",a.bufferEndTime,",meta_duration,",a.mp4.meta.duration)}}).catch(function(c){if(console.log("[MSE error]",c),c&&u!==null&&u!==void 0&&u.isFull()){var h=a.player.getBufferedRange(a.player.buffered2);a._checkRemoveSourceBuffer(h,a.player.currentTime,!0)}})}},{key:"_checkRemoveSourceBuffer",value:function(t,s,a){var l=this,o=this.mse,u=this.mp4,d=this.player;if(!(!o||!u||!d)&&(a&&(clearTimeout(this._removeBufferTimer),this._removeBufferTimer=null),t||(t=d.getBufferedRange(d.buffered2)),s||(s=d.currentTime),!(!a&&jt.nowTime()-this._checkRemoveBufferLastTime<=this.config.removeBufferLen||this.endofstream)&&(this._checkRemoveBufferLastTime=jt.nowTime(),t&&t[0]>=0&&(s-t[0]>this.config.removeBufferLen||o.isFull())))){var c=t[1],h=u.getFragmentIdx(c);if(h>=0&&u.timeRange[h].startTime<s){var f=Math.floor(Math.min(u.timeRange[h].startTime,t[1]));t[0]<f?(this.log("[checkremoveSourceBuffer], remove range==>>>",t[0],f),o.remove(Ie.VIDEO,t[0],f)):o.isFull()&&!this._removeBufferTimer&&(this._removeBufferTimer=setTimeout(function(){l._checkRemoveSourceBuffer(null,null,!0)},10*1e3))}}}},{key:"_isEnded",value:function(){var t=this.player,s=this.mp4,a=t.bufferedPoint,l=a?a.end:0;return!this.endofstream&&this.mse&&s.meta.duration-t.currentTime<.5&&(this.log("[check player isEnded],deal mse.endOfStream, currentTime,",t.currentTime,", bufferend,",l,", duration,",s.meta.duration),this.endofstream=!0,this.mse.endOfStream()),s&&s.meta&&s.meta.duration-t.currentTime<.5?(this._stopProgress(),this.log("[check player isEnded],stopProgress and endOfStream,currentTime, ",t.currentTime,", bufferend,",l,", duration,",s.meta.duration),this.mse&&this.mse.endOfStream(),!0):!1}},{key:"switchURL",value:function(t){this.changeDefinition(t)}},{key:"oldChangeDefinition",value:function(t,s){var a=this,l=this.config,o=this.player;this.log("[oldChangeDefinition],currentTime,",o.currentTime,",from,",s,",to,",t);var u=o.currentTime,d=o.paused;this._changeDefState||(this._changeDefState={currentTime:u,paused:d},this.log("[oldChangeDefinition],currentTime,",o.currentTime,",pause,",d)),o.config.url=t.url,l.focusUserDefinition=!0,o.currentTime=0,o.pause(),this._reset(),this._isMseInit=!1,this._changeDefineCanPlay&&o.off("canplay",this._changeDefineCanPlay),this._changeDefineCanPlay=function(){a.changeDefineCanPlay(u,d,s,t),a._changeDefineCanPlay=null},o.once("canplay",this._changeDefineCanPlay),this.player.video.load(),this.initMp4()}},{key:"_loadStuckCheck",value:function(){var t=this,s=this.config,a=this.player;s.disableBufferBreakCheck||(a.currentTime-(this._lastCurrentTime||0)>.1||a.paused?(this._bufferBreakFlag===1||this._bufferBreakFlag===2)&&(this.log("视频没有卡死,重置卡死标记"),this._bufferBreakFlag=0,clearTimeout(this._bufferBreakTimer),this._bufferBreakFlag=null):this._bufferBreakFlag||(this._bufferBreakFlag=1,this.log("卡死计时开始! 持续".concat(s.waitingTimeOut,"毫秒则确认卡死")),this._bufferBreakTimer=setTimeout(function(){t.isDestroy||(t._bufferBreakFlag===1&&(t._bufferBreakFlag=2,t.log("确认卡死!!!"),t._errorHandler(new Di(t.player,{errorType:"runtime",errorTypeCode:un.runtime,errorCode:Ut.waitTimeout,errorMessage:"wait_timeout",vid:s.vid}))),t._bufferBreakTimer=null)},s.waitingTimeOut)),this._lastCurrentTime=a.currentTime)}},{key:"isDestroy",get:function(){return!this.player}},{key:"_stopProgress",value:function(){this._hasStartProgress=!1,this._requestTimer&&(this._requestTimer.stop(),this._requestTimer=null),this._bufferBreakTimer&&(clearTimeout(this._bufferBreakTimer),this._bufferBreakTimer=null,this._bufferBreakFlag=void 0)}},{key:"_startProgress",value:function(){var t=this;this._hasStartProgress||(this._stopProgress(),this._requestTimer=new O2(function(){t._requestTimer&&t._onTimeUpdate()}),this._requestTimer.tickEvery(this.config.tickInSeconds),this._hasStartProgress=!0)}},{key:"log",value:function(t){for(var s=this.playerConfig,a=s&&s.vid?"[Index]".concat(s.vid," ").concat(t):"[Index] ".concat(t),l=arguments.length,o=new Array(l>1?l-1:0),u=1;u<l;u++)o[u-1]=arguments[u];gc.apply(void 0,[a].concat(o))}},{key:"_reset",value:function(){this._isMseInit=!1,this.endofstream=!1,this._curLoadSegmentIdx=0,this._removeBuffeEndTime=0,this._isChangeDefinition=!1,this._stopProgress(),this.mp4&&(this.mp4.off(ct.META_READY,this._onMp4MetaReady),this.mp4.off(ct.ERROR,this._onMp4Error),this.mp4.off(ct.MOOV_REQ_PROGRESS,this._onMp4DataCallBack),this.mp4.destroy(),this.mp4=null),this.mse&&(this.mse.unbindMedia(),this.mse=null),this._unloadVideo()}},{key:"_unloadVideo",value:function(){var t=this.player;try{this.log("unloadVideo src ".concat(t.video.src)),t.video&&t.video.src&&(t.video.removeAttribute("src"),t.video.load())}catch(s){this.log("unloadVideo error",s)}}},{key:"destroy",value:function(){var t=this.player;t.removeHooks("replay",this._replayHook),t.removeHooks("retry",this._retryHook),this.detachEvents(),this._reset(),this.player.playNext=pu,this.player._startInit=Ks,this.player.changeDefinition=fu,this.player.switchURL=mu,this._bufferBreakTimer&&clearInterval(this._bufferBreakTimer),this._removeBufferTimer&&(clearTimeout(this._removeBufferTimer),this._removeBufferTimer=null),this._waitInBufferTimer&&(clearTimeout(this._waitInBufferTimer),this._waitInBufferTimer=null)}}],[{key:"pluginName",get:function(){return"mp4Plugin"}},{key:"defaultConfig",get:function(){return{maxBufferLength:40,minBufferLength:5,disableBufferBreakCheck:!1,waitingTimeOut:15e3,waitingInBufferTimeOut:5e3,waitJampBufferMaxCnt:3,tickInSeconds:.1,reqOptions:null,closeDowngrade:!1}}},{key:"version",get:function(){return"3.0.19"}}]),e}(hn);const J2=Ye("div",{id:"mse"},null,-1),j2={__name:"index",setup(n){qt({type:null});const r=qt({url:[{value:"https://stream7.iqilu.com/10339/upload_transcode/202002/18/20200218114723HDu3hhxqIT.mp4",label:"mp4测试用例"},{value:"https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8",label:"m3u8测试用例"},{value:"https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/flv/xgplayer-demo-360p.flv",label:"flv测试用例"}]}),e=qt({id:"mse",url:"https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8",height:"300",width:"400",fluid:!0,fitVideoSize:"auto",volume:.6,autoplay:!1,loop:!1,videoInit:!0,poster:"",playbackRate:[.5,.75,1,1.5,2],defaultPlaybackRate:1,plugins:[],playsinline:!0,whitelist:[""],keyShortcut:"on",closeVideoClick:!0,closeVideoDblclick:!0,closeVideoTouch:!0,pip:!0,download:!0,thumbnail:{pic_num:44,width:160,height:90,col:10,row:10,urls:[""]},progressDot:[{time:10,text:"标记文字",duration:8,style:{background:"blue"}},{time:22,text:"标记文字"},{time:56,duration:8},{time:76}]});let i=$();St(()=>{e.plugins.push(zr),i.value=new vl(e)});const t=()=>{if(i.value.destroy(),e.url){let s=e.url.split(".").at(-1);switch(console.log(s),s){case"m3u8":e.plugins=[zr];break;case"flv":e.plugins=[lc];break;case"mp4":e.plugins=[B2];break;default:e.plugins=[]}i.value=new vl(e)}};return(s,a)=>(ne(),He(I(Vh),null,{default:pe(()=>[J2,Ce(I(cy),{"label-width":"100px",style:{"margin-top":"20px"}},{default:pe(()=>[Ce(I(oo),{label:"视频源src"},{default:pe(()=>[Ce(I(ig),{modelValue:e.url,"onUpdate:modelValue":a[0]||(a[0]=l=>e.url=l),placeholder:"请输入视频源（src）",onChange:t,clearable:""},{default:pe(()=>[(ne(!0),Xe(pn,null,Us(r.url,l=>(ne(),He(I(ng),{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Ce(I(oo),{label:"视频源src"},{default:pe(()=>[Ce(I(Wu),{type:"textarea",rows:4,modelValue:e.url,"onUpdate:modelValue":a[1]||(a[1]=l=>e.url=l),onChange:t,placeholder:"请输入视频源（src）",maxlength:-1,"show-word-limit":!1,autosize:!1,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}))}},Q2=Ye("br",null,null,-1),$2=Lh(`<div class="warning custom-block"><p class="custom-block-title">视频格式支持</p><p>目前仅支持（hls，mp4，flv）</p></div><br><details class="details custom-block"><summary>具体实现代码</summary><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-U7_PV" id="tab-rt7wuxQ" checked="checked"><label for="tab-rt7wuxQ">index.vue</label></div><div class="blocks"><div class="language-vue vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ElCard, ElForm, ElFormItem, ElInput, ElOption, ElSelect } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus/dist/index.css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { onMounted, reactive, ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;xgplayer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FlvPlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer-flv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HlsPlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;xgplayer-hls&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mp4Player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer-mp4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xgplayer/dist/index.min.css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 配置选项</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Form</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dicts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://stream7.iqilu.com/10339/upload_transcode/202002/18/20200218114723HDu3hhxqIT.mp4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mp4测试用例&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;m3u8测试用例&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/flv/xgplayer-demo-360p.flv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;flv测试用例&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// xgplayer</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mse&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://vip.lz-cdn5.com/20220401/3315_dbd60bc0/index.m3u8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 尺寸</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;height&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;300&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;width&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;400&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 流式布局</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;fluid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 自适应视频内容宽高</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;fitVideoSize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 音量</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;volume&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 自动播放</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;autoplay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 循环播放</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;loop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 初始化显示视频首帧</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;videoInit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 封面图</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;poster&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 倍速播放</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;playbackRate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 默认播放速度</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;defaultPlaybackRate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 记忆播放</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 离开时存下 上次播放时间</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //  lastPlayTime: 20, //视频起播时间（单位：秒）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // lastPlayTimeHideDelay: 5, //提示文字展示时长（单位：秒）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 视频旋转</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // &quot;rotate&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //     &quot;clockwise&quot;: true,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //     &quot;innerRotate&quot;: true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;plugins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;playsinline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;whitelist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;keyShortcut&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;on&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;closeVideoClick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;closeVideoDblclick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;closeVideoTouch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;pip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;download&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;thumbnail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;pic_num&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">44</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;width&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">160</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;height&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;col&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;row&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;urls&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 预览本地视频</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // preview: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //     uploadEl: uploadDom</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    progressDot: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//展示标记的时间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;标记文字&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//鼠标hover在标记时展示的文字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            duration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//标记段长度（以时长计算）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            style: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//标记样式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                background: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;blue&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;标记文字&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">56</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            duration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">76</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> player </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options.plugins.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HlsPlayer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    player.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Player</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> change</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    player.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (options.url) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options.url.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">at</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (type) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;m3u8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                options.plugins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [HlsPlayer]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;flv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                options.plugins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [FlvPlayer]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mp4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                options.plugins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [Mp4Player]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                options.plugins </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        player.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Player</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ElCard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mse&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> label-width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100px&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">margin-top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form-item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;视频源src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-select</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请输入视频源（src）&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clearable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> v-for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dicts.url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form-item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form-item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;视频源src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;textarea&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rows</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">change</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请输入视频源（src）&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">maxlength</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show-word-limit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">autosize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clearable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form-item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-form</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ElCard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scss&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></div></div></details><br>`,4),aZ=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"插件扩展/效率工具/xgplayer/index.md","filePath":"插件扩展/效率工具/xgplayer/index.md","lastUpdated":1721657779000}'),q2={name:"插件扩展/效率工具/xgplayer/index.md"},lZ=Object.assign(q2,{setup(n){return(r,e)=>{const i=ki("client-only");return ne(),Xe("div",null,[Ce(i,null,{default:pe(()=>[Q2,Ce(j2)]),_:1}),$2])}}});export{aZ as __pageData,lZ as default};
