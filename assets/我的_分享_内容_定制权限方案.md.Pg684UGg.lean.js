import{an as n,l,m as a,S as h,K as p,aH as t,ae as e,k}from"./chunks/framework.8wObz1dk.js";const m=JSON.parse('{"title":"制定一个权限方案","description":"","frontmatter":{},"headers":[],"relativePath":"我的/分享/内容/定制权限方案.md","filePath":"我的/分享/内容/定制权限方案.md","lastUpdated":1723443665000}'),E={name:"我的/分享/内容/定制权限方案.md"};function r(d,s,c,g,o,y){const i=e("ArticleMetadata");return k(),l("div",null,[s[0]||(s[0]=a("h1",{id:"制定一个权限方案",tabindex:"-1"},[h("制定一个权限方案 "),a("a",{class:"header-anchor",href:"#制定一个权限方案","aria-label":'Permalink to "制定一个权限方案"'},"​")],-1)),p(i),s[1]||(s[1]=t(`<blockquote><p>当然具体方案具体分析 需要根据具体业务场景来定</p></blockquote><p>首先我们要分析 权限分为哪几种： 比如：用户权限 角色权限 菜单权限 用户权限 角色权限 菜单权限 耦合程度可能是比较高的 菜单权限 是一个很模糊的概念 更多权限定义是依赖于 用户权限 角色权限 来约束 菜单权限 的 因此尽可能避免 菜单、角色、用户 三者之间 强耦合 是很重要的</p><p>或者 也可以笼统称作页面权限 按钮权限； 这里分的较为细致 后续方案 会更加合理</p><h2 id="页面权限" tabindex="-1">页面权限： <a class="header-anchor" href="#页面权限" aria-label="Permalink to &quot;页面权限：&quot;">​</a></h2><p>我们可以采用 动态加载路由的方式实现 ，若有权限即加载该页面，反之则不加载；</p><h2 id="按钮权限" tabindex="-1">按钮权限： <a class="header-anchor" href="#按钮权限" aria-label="Permalink to &quot;按钮权限：&quot;">​</a></h2><p>可以采用 权限拦截 具体实现层面可以通过 是否显示按钮来实现</p><h2 id="页面权限的实现" tabindex="-1">页面权限的实现 <a class="header-anchor" href="#页面权限的实现" aria-label="Permalink to &quot;页面权限的实现&quot;">​</a></h2><p>菜单、角色、用户 权限 可能既存在页面权限，又存在按钮权限</p><p>1.获取页面级别的权限</p><p>2.建立页面与权限的映射关系</p><p>3.获取到当前页面的权限</p><h2 id="按钮权限-1" tabindex="-1">按钮权限： <a class="header-anchor" href="#按钮权限-1" aria-label="Permalink to &quot;按钮权限：&quot;">​</a></h2><p>1.获取按钮级别的权限</p><h2 id="权限关系的获取" tabindex="-1">权限关系的获取 <a class="header-anchor" href="#权限关系的获取" aria-label="Permalink to &quot;权限关系的获取&quot;">​</a></h2><p>1.可以通过 获取 userInfo 信息时候携带权限信息。</p><h2 id="具体代码实现-获取页面权限" tabindex="-1">具体代码实现 获取页面权限 <a class="header-anchor" href="#具体代码实现-获取页面权限" aria-label="Permalink to &quot;具体代码实现 获取页面权限&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取的结果如下</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        parentPath:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;parentPath&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        filePath:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/dashboard.vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        meta: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;首页&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dashboard&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 权限</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            permission: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;editor&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 菜单</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            menu: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 菜单顺序</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            order: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 菜单是否隐藏</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            hidden: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 菜单默认选中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            selected: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 菜单是否展开</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            expanded: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 菜单是否禁用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            disabled: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> comp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`@/views\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filePath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   参数1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  route.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addRoute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path:item.path,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    component:comp,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    meta:item.meta</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div>`,18))])}const C=n(E,[["render",r]]);export{m as __pageData,C as default};
